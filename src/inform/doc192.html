<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>12.16. Reaching inside and reaching outside rules</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Reaching inside and reaching outside rules" -->
<!-- SEARCH SECTION "12.16" -->
<!-- SEARCH SORT "000-012-016-000" -->
<!-- START IGNORE 191 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc191.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 12: Advanced Actions</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc193.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง12.16. Reaching inside and reaching outside rules</p>
<p>The flow chart back at the start of this chapter shows that, early on in processing an action (between Before and Instead), Inform asks the question &quot;Can we see or touch things?&quot; This is where it enforces the requirements in the action's definition:</p>
<!-- START CODE "c3541" -->
<a id="c3541"></a><blockquote class="code"><p class="quoted">
Photographing is an action applying to one visible thing and requiring light.
<br />Scraping it with is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<p>Seeing and touching are two different questions, which Inform answers in different ways. We shall see ways to modify or entirely alter what can be seen using the &quot;deciding the scope of something&quot; activity when we get to the Understanding and Activities chapters, and later in this chapter we will change the definition of touchability. What both have in common is that they are complicated questions, affected by the circumstances. We cannot simply declare that the player can touch a given lever, or can see in a given room: we must arrange for there to be no barriers between the player and the lever, or for there to be a light source in the room.</p>
<p>An example of rules applying to given objects is provided by the way that Inform decides whether the player can reach something or not. For instance, suppose the following:</p>
<!-- START CODE "c3542" -->
<a id="c3542"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('The Laboratory is a room. In the Laboratory is a conical flask. The flask is closed and transparent. In the flask is an antibumping granule.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> The Laboratory is a room. In the Laboratory is a conical flask. The flask is closed and transparent. In the flask is an antibumping granule.
</p></blockquote>
<!-- END CODE -->
<p>The player will be able to examine the granule but not to take it, as that would require reaching through glass. Suppose the player does type TAKE GRANULE: then Inform looks for potential barriers between the player and the granule, and of course finds the conical flask. If, as in this case, the thing to be touched is on the inside, then Inform asks the &quot;reaching inside&quot; rules for permission. There are two reaching inside rules built in to Inform:</p>
<!-- START CODE "c3543" -->
<a id="c3543"></a><blockquote class="code"><p class="quoted">
can't reach inside rooms rule
<br />can't reach inside closed containers rule
</p></blockquote>
<!-- END CODE -->
<p>and in fact the second of these rules will cause the taking action to fail, because the conical flask is a closed container. (The other rule has to do with a player in one room able to see another room through, say, a telescope - merely having a line of sight doesn't give the ability to reach into the frame.)</p>
<p>Symmetrically, Inform also has &quot;reaching outside&quot; rules, used if the player is inside something and wants to reach an object in the wider room. (From a bed, probably yes; from a cage, probably no.) This ordinarily contains just one rule:</p>
<!-- START CODE "c3544" -->
<a id="c3544"></a><blockquote class="code"><p class="quoted">
can't reach outside closed containers rule
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "212: Carnivale" "e119" -->
<a id="e119"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example119'); return false;"><b>212</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example119'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Carnivale</span></b></a><br />An alternative to backdrops when we want something to be visible from a distance but only touchable from one room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc11.html#e119"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example119" style="display: none;">
<p>Suppose we want to make an object that (unlike a backdrop) is definitely located in one room, but can be seen from far off. We want to allow the player to interact with it from a distance, but only using those actions that require visibility. Other actions should be denied:</p>
<!-- START CODE "c3545_119" -->
<a id="c3545_119"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Carnivale[=0x0022=][=0x000A=][=0x000A=]The Fairground is a region. Park Entrance, By the Wheel, and Candy Stand are in Fairground. Candy Stand is north of By the Wheel. Park Entrance is west of Candy Stand and northwest of By the Wheel.[=0x000A=][=0x000A=]The ferris wheel is scenery in By the Wheel. [=0x0022=]It is extravagantly tall and carries several dozen glass gondolas for riders.[=0x0022=][=0x000A=][=0x000A=]The description of By the Wheel is [=0x0022=]You stand at the foot of an enormous ferris wheel, which turns far too quickly and never seems to stop for new riders.[=0x0022=][=0x000A=][=0x000A=]The description of Park Entrance is [=0x0022=]You are now just inside the gates. Behind you snakes a triple line of fairgoers all the way down the length of the valley to the railway station. Roughly southeast of here is the ferris wheel, towering over the other attractions.[=0x0022=][=0x000A=][=0x000A=]The description of Candy Stand is [=0x0022=]A hut in pale pink and baby blue dispenses marshmallow death[=0x0027=]s-heads, sugar-beetles, and other such treats. The giant ferris wheel is just off to the south from here.[=0x0022=][=0x000A=][=0x000A=][As the descriptions make clear, the ferris wheel should be visible from everywhere in the fair, so we[=0x0027=]ll borrow a line from the Activities chapter to make that happen:][=0x000A=][=0x000A=]After deciding the scope of the player:[=0x000A=][=0x0009=]if the location is in Fairground, place the ferris wheel in scope.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Carnivale&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3546_119" -->
<a id="c3546_119"></a><blockquote class="code"><p class="quoted">
The Fairground is a region. Park Entrance, By the Wheel, and Candy Stand are in Fairground. Candy Stand is north of By the Wheel. Park Entrance is west of Candy Stand and northwest of By the Wheel.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3547_119" -->
<a id="c3547_119"></a><blockquote class="code"><p class="quoted">
The ferris wheel is scenery in By the Wheel. &quot;It is extravagantly tall and carries several dozen glass gondolas for riders.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3548_119" -->
<a id="c3548_119"></a><blockquote class="code"><p class="quoted">
The description of By the Wheel is &quot;You stand at the foot of an enormous ferris wheel, which turns far too quickly and never seems to stop for new riders.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3549_119" -->
<a id="c3549_119"></a><blockquote class="code"><p class="quoted">
The description of Park Entrance is &quot;You are now just inside the gates. Behind you snakes a triple line of fairgoers all the way down the length of the valley to the railway station. Roughly southeast of here is the ferris wheel, towering over the other attractions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3550_119" -->
<a id="c3550_119"></a><blockquote class="code"><p class="quoted">
The description of Candy Stand is &quot;A hut in pale pink and baby blue dispenses marshmallow death's-heads, sugar-beetles, and other such treats. The giant ferris wheel is just off to the south from here.&quot;
</p></blockquote>
<!-- END CODE -->
<p>As the descriptions make clear, the ferris wheel should be visible from everywhere in the fair, so we'll borrow a line from the Activities chapter to make that happen:</p>
<!-- START CODE "c3551_119" -->
<a id="c3551_119"></a><blockquote class="code"><p class="quoted">
After deciding the scope of the player:
<br />&#160;&#160;&#160;&#160;if the location is in Fairground, place the ferris wheel in scope.
</p></blockquote>
<!-- END CODE -->
<p>&quot;Scope&quot; determines what the player can interact with; by writing this rule, we make Inform understand all commands that refer to the ferris wheel when the player is anywhere in the fairground, instead of responding with</p>
<!-- START CODE "c3552_119" -->
<a id="c3552_119"></a><blockquote class="code"><p class="quoted">
You can't see any such thing.
</p></blockquote>
<!-- END CODE -->
<p>as it normally would.</p>
<p>Now, by default, if the player were to type TOUCH FERRIS WHEEL while in another room, he would get the response</p>
<!-- START CODE "c3553_119" -->
<a id="c3553_119"></a><blockquote class="code"><p class="quoted">
You can't reach into By the Wheel.
</p></blockquote>
<!-- END CODE -->
<p>This may not be quite what we want, but we can replace this text with our own reaching inside rule:</p>
<!-- START CODE "c3554_119" -->
<a id="c3554_119"></a><blockquote class="code"><p class="quoted">
Rule for reaching inside a room:
<br />&#160;&#160;&#160;&#160;say &quot;You can only look from this distance.&quot;;
<br />&#160;&#160;&#160;&#160;deny access.
</p></blockquote>
<!-- END CODE -->
<p>And because our accessibility rules are considered before the &quot;Instead&quot; phase, we can write the following rule confident that it will apply only when the player is in fact in range to touch the ferris wheel:</p>
<!-- START CODE "c3555_119" -->
<a id="c3555_119"></a><blockquote class="code"><p class="quoted">
Instead of touching the ferris wheel:
<br />&#160;&#160;&#160;&#160;say &quot;You don't dare: it's spinning too fast.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3556_119" -->
<a id="c3556_119"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x ferris wheel / touch ferris wheel / se / x ferris wheel / touch ferris wheel&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc191.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc193.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
