<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>16.10. Adding and removing rows</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Adding and removing rows" -->
<!-- SEARCH SECTION "16.10" -->
<!-- SEARCH SORT "000-016-010-000" -->
<!-- START IGNORE 254 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc254.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 16: Tables</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc256.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง16.10. Adding and removing rows</p>
<p>Writing in new rows is simple, once we can find space for them:</p>
<!-- START PHRASE "defn234" -->
<div class="definition"><a id="defn234"></a><p class="defnprototype"><b>choose a</b>/the/--<b> blank row in</b>/from<b> </b>(table name)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_chooseblankrow -->

<p>This phrase chooses a row in the given table which is currently blank under every column. A run-time problem message is issued if no rows are blank. Example:</p>
<!-- START CODE "c5140" -->
<a id="c5140"></a><blockquote class="code"><p class="quoted">
choose a blank row in Table 3;
<br />now element entry is &quot;Fluorine&quot;;
<br />now symbol entry is &quot;F&quot;;
<br />now atomic number entry is 9;
<br />now atomic weight entry is 19;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>To avoid problem messages, it can be important to worry about free space. To that end we can not only find the number of rows (as we have already seen) but also the number currently blank and not blank:</p>
<!-- START PHRASE "defn235" -->
<div class="definition"><a id="defn235"></a><p class="defnprototype"><b>number of blank rows in</b>/from<b> </b>(table name)<b> ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_numblank -->

<p>This phrase produces the number of rows in the given table which are entirely blank (that is, blank under every column).</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn236" -->
<div class="definition"><a id="defn236"></a><p class="defnprototype"><b>number of filled rows in</b>/from<b> </b>(table name)<b> ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_numfilled -->

<p>This phrase produces the number of rows in the given table which are not entirely blank (that is, at least one column has a value in this row).</p>

<!-- end definition -->
</div>

<p>&quot;Filled&quot; here really means &quot;non-blank&quot;: a row can be filled in this sense even if only one of its values exists. Since every row is either blank or filled, it must be true that:</p>
<!-- START CODE "c5141" -->
<a id="c5141"></a><blockquote class="code"><p class="quoted">
the number of blank rows in Table 3
<br />the number of filled rows in Table 3
</p></blockquote>
<!-- END CODE -->
<p>add up to &quot;the number of rows in Table 3&quot;.</p>
<p>We've seen that blank entries can be filled with values using &quot;now&quot;:</p>
<!-- START CODE "c5142" -->
<a id="c5142"></a><blockquote class="code"><p class="quoted">
now symbol entry is &quot;F&quot;;
</p></blockquote>
<!-- END CODE -->
<p>But the same method can't be used to put blanks back, since a blank is not a value. Instead:</p>
<!-- START PHRASE "defn237" -->
<div class="definition"><a id="defn237"></a><p class="defnprototype"><b>blank out </b>(a table entry)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_blankout -->

<p>This phrase replaces the entry referred to with a blank, erasing any value previously stored there. Example:</p>
<!-- START CODE "c5143" -->
<a id="c5143"></a><blockquote class="code"><p class="quoted">
choose row 1 in the Table of Fish Habitats;
<br />blank out the salinity entry;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>These more destructive phrases need a steady hand:</p>
<!-- START PHRASE "defn238" -->
<div class="definition"><a id="defn238"></a><p class="defnprototype"><b>blank out the whole row</b></p>
<!-- END PHRASE -->
<!-- definition of ph_blankoutrow -->

<p>This phrase replaces the currently chosen row with blanks, erasing any value previously stored under any of the columns. Example:</p>
<!-- START CODE "c5144" -->
<a id="c5144"></a><blockquote class="code"><p class="quoted">
choose row 1 in the Table of Fish Habitats;
<br />blank out the whole row;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn239" -->
<div class="definition"><a id="defn239"></a><p class="defnprototype"><b>blank out the whole </b>(table column)<b> column in </b>(table)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_blankoutcol -->

<p>This phrase replaces the currently chosen column with blanks, erasing any value previously stored in any of the rows. Example:</p>
<!-- START CODE "c5145" -->
<a id="c5145"></a><blockquote class="code"><p class="quoted">
blank out the whole salinity column in the Table of Fish Habitats;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn240" -->
<div class="definition"><a id="defn240"></a><p class="defnprototype"><b>blank out the whole of </b>(table)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_blankouttable -->

<p>This phrase replaces every row of the currently chosen table with blanks, erasing any value previously stored anywhere in it. Example:</p>
<!-- START CODE "c5146" -->
<a id="c5146"></a><blockquote class="code"><p class="quoted">
blank out the whole of the Table of Fish Habitats;
</p></blockquote>
<!-- END CODE -->
<p>This is only really useful when a Table is being used to hold working space for some calculation or other.</p>

<!-- end definition -->
</div>

<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "274: Odyssey" "e407" -->
<a id="e407"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example407'); return false;"><b>274</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example407'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Odyssey</span></b></a><br />A person who follows a path predetermined and stored in a table, and who can be delayed if the player tries to interact with her.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc59.html#e407"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example407" style="display: none;">
<!-- START CODE "c5147_407" -->
<a id="c5147_407"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Odyssey[=0x0022=][=0x000A=][=0x000A=]Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.[=0x000A=][=0x000A=]Athena is a woman in Athens.[=0x000A=][=0x000A=][Athena will proceed, unless delayed, through a list of locations stored in a simple table. Rather than using Inform[=0x0027=]s route-finding abilities ([=0x0022=]the best route from...[=0x0022=]), we simply move Athena from one location to the next, not even using the going action: she moves in mysterious ways, as befits a goddess.][=0x000A=][=0x000A=]Table of Athena[=0x0027=]s Movement[=0x000A=]destination[=0x000A=]Thebes[=0x000A=]Delphi[=0x000A=]Thebes[=0x000A=]Athens[=0x000A=]Corinth[=0x000A=]Mycenae[=0x000A=][=0x000A=]Every turn when Athena is active:[=0x000A=][=0x0009=]repeat through the Table of Athena[=0x0027=]s Movement:[=0x000A=][=0x0009=][=0x0009=]let last space be the location of Athena;[=0x000A=][=0x0009=][=0x0009=]if Athena can be seen by the player, say [=0x0022=]Athena heads to [the destination entry].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]move Athena to destination entry;[=0x000A=][=0x0009=][=0x0009=]if Athena can be seen by the player, say [=0x0022=]Athena arrives from [the last space].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]blank out the whole row;[=0x000A=][=0x0009=][=0x0009=]break.[=0x000A=][=0x000A=][By blanking out the table line by line, we make sure that we never lose our place in the path.][=0x000A=][=0x000A=][Since we want the player to be able to talk to Athena, we need a way to stall her in her path, as well.][=0x000A=][=0x000A=]Athena can be active or passive. Athena is active.[=0x000A=][=0x000A=]Before doing something to Athena:[=0x000A=][=0x0009=]now Athena is passive;[=0x000A=][=0x0009=]say [=0x0022=]Athena waits around patiently, though you can tell she would like to leave...[=0x0022=][=0x000A=][=0x000A=]Instead of telling Athena about something:[=0x000A=][=0x0009=]say [=0x0022=]She watches you patiently as though to say that she already knows.[=0x0022=][=0x000A=][=0x000A=]Instead of asking Athena about something:[=0x000A=][=0x0009=]say [=0x0022=]Her response is inscrutably ancient and Greek. Afterwards you remember only the flash of bright eyes.[=0x0022=][=0x000A=][=0x000A=][Finally, we do need to wake Athena up again if she has become passive. The following rule will occur after the movement rule just because of code ordering, though we could make matters more explicit if we needed to:][=0x000A=][=0x000A=]Every turn when Athena is passive:[=0x000A=][=0x0009=]now Athena is active.[=0x000A=][=0x000A=]Test me with [=0x0022=]east / northwest / wait / examine athena / wait[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Odyssey&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5148_407" -->
<a id="c5148_407"></a><blockquote class="code"><p class="quoted">
Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5149_407" -->
<a id="c5149_407"></a><blockquote class="code"><p class="quoted">
Athena is a woman in Athens.
</p></blockquote>
<!-- END CODE -->
<p>Athena will proceed, unless delayed, through a list of locations stored in a simple table. Rather than using Inform's route-finding abilities (&quot;the best route from...&quot;), we simply move Athena from one location to the next, not even using the going action: she moves in mysterious ways, as befits a goddess.</p>
<!-- START CODE "c5150_407" -->
<a id="c5150_407"></a><blockquote class="code"><p class="quoted">
Table of Athena's Movement
<br />destination
<br />Thebes
<br />Delphi
<br />Thebes
<br />Athens
<br />Corinth
<br />Mycenae
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5151_407" -->
<a id="c5151_407"></a><blockquote class="code"><p class="quoted">
Every turn when Athena is active:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Athena's Movement:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let last space be the location of Athena;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if Athena can be seen by the player, say &quot;Athena heads to [the destination entry].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move Athena to destination entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if Athena can be seen by the player, say &quot;Athena arrives from [the last space].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break.
</p></blockquote>
<!-- END CODE -->
<p>By blanking out the table line by line, we make sure that we never lose our place in the path.</p>
<p>Since we want the player to be able to talk to Athena, we need a way to stall her in her path, as well.</p>
<!-- START CODE "c5152_407" -->
<a id="c5152_407"></a><blockquote class="code"><p class="quoted">
Athena can be active or passive. Athena is active.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5153_407" -->
<a id="c5153_407"></a><blockquote class="code"><p class="quoted">
Before doing something to Athena:
<br />&#160;&#160;&#160;&#160;now Athena is passive;
<br />&#160;&#160;&#160;&#160;say &quot;Athena waits around patiently, though you can tell she would like to leave...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5154_407" -->
<a id="c5154_407"></a><blockquote class="code"><p class="quoted">
Instead of telling Athena about something:
<br />&#160;&#160;&#160;&#160;say &quot;She watches you patiently as though to say that she already knows.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5155_407" -->
<a id="c5155_407"></a><blockquote class="code"><p class="quoted">
Instead of asking Athena about something:
<br />&#160;&#160;&#160;&#160;say &quot;Her response is inscrutably ancient and Greek. Afterwards you remember only the flash of bright eyes.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Finally, we do need to wake Athena up again if she has become passive. The following rule will occur after the movement rule just because of code ordering, though we could make matters more explicit if we needed to:</p>
<!-- START CODE "c5156_407" -->
<a id="c5156_407"></a><blockquote class="code"><p class="quoted">
Every turn when Athena is passive:
<br />&#160;&#160;&#160;&#160;now Athena is active.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5157_407" -->
<a id="c5157_407"></a><blockquote class="code"><p class="quoted">
Test me with &quot;east / northwest / wait / examine athena / wait&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc254.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc256.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
