<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>15.3. Real number conversions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Real number conversions" -->
<!-- SEARCH SECTION "15.3" -->
<!-- SEARCH SORT "000-015-003-000" -->
<!-- START IGNORE 227 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc227.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 15: Numbers and Equations</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc229.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง15.3. Real number conversions</p>
<p>This section notes down some technicalities about real numbers which need to be put down in writing somewhere, but won't affect most people most of the time.</p>
<p>Inform allows us to use numbers whenever real numbers are expected, and converts them automatically. For example,</p>
<!-- START CODE "c4538" -->
<a id="c4538"></a><blockquote class="code"><p class="quoted">
cosine of 2
</p></blockquote>
<!-- END CODE -->
<p>is read as if it were</p>
<!-- START CODE "c4539" -->
<a id="c4539"></a><blockquote class="code"><p class="quoted">
cosine of 2.0
</p></blockquote>
<!-- END CODE -->
<p>and produces -0.41615 either way. This conversion goes from exactness to approximation, so we may lose a little accuracy: real numbers measure to an accuracy of about 1 part in 16000000, so they'll have trouble telling the difference between 16000000 and 16000001. But this is unlikely to matter, since real numbers are used only for approximate calculations anyway.</p>
<p>The ordinary arithmetic operations work on both numbers and real numbers, so the meaning of &quot;N plus M&quot; depends on the kinds of N and M. In general the rule is that if either is a real number then the other one is automatically converted, and real arithmetic is used. So:</p>
<!-- START CODE "c4540" -->
<a id="c4540"></a><blockquote class="code"><p class="quoted">
3 divided by 2 = 1
<br />3 divided by 2.0 = 1.5
<br />3.0 divided by 2 = 1.5
<br />3.0 divided by 2.0 = 1.5
</p></blockquote>
<!-- END CODE -->
<p>In general we can't do the reverse, that is, we can't silently use a real number where a number is expected. For example,</p>
<!-- START CODE "c4541" -->
<a id="c4541"></a><blockquote class="code"><p class="quoted">
word number 1.6 in &quot;The Great Wall of China&quot;
</p></blockquote>
<!-- END CODE -->
<p>makes no sense. But we can explicitly convert them:</p>
<!-- START PHRASE "defn182" -->
<div class="definition"><a id="defn182"></a><p class="defnprototype"><b></b>(real number)<b> to the nearest whole number ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_nearestwholenumber -->

<p>This phrase performs signed addition on the given values, whose kinds must agree, and produces the result. Examples:</p>
<!-- START CODE "c4542" -->
<a id="c4542"></a><blockquote class="code"><p class="quoted">
1.4 to the nearest whole number = 1
<br />1.6 to the nearest whole number = 2
<br />-1.6 to the nearest whole number = -2
</p></blockquote>
<!-- END CODE -->
<p>We probably ought to bear in mind that the limited range of &quot;number&quot; means that the nearest whole number might not be all that near. For example:</p>
<!-- START CODE "c4543" -->
<a id="c4543"></a><blockquote class="code"><p class="quoted">
6 x 10^23 to the nearest whole number = 2147483647
</p></blockquote>
<!-- END CODE -->
<p>because 2147483647 is the highest value a &quot;number&quot; can have.</p>

<!-- end definition -->
</div>

<p>Finally, real number can also store two interesting not-really-number sorts of value. First, we have</p>
<!-- START CODE "c4544" -->
<a id="c4544"></a><blockquote class="code"><p class="quoted">
plus infinity, minus infinity
</p></blockquote>
<!-- END CODE -->
<p>which are used to keep track of what happens when we divide by really small quantities. It's mathematically impossible to divide by 0, but this can be hard to avoid when we're using real numbers, because they're only approximately stored - so it's not always possible to say whether they're exactly 0 or not. So in real number arithmetic,</p>
<!-- START CODE "c4545" -->
<a id="c4545"></a><blockquote class="code"><p class="quoted">
showme 1.0 divided by 0.0;
</p></blockquote>
<!-- END CODE -->
<p>doesn't throw a run-time problem the way that</p>
<!-- START CODE "c4546" -->
<a id="c4546"></a><blockquote class="code"><p class="quoted">
showme 1 divided by 0;
</p></blockquote>
<!-- END CODE -->
<p>does. Instead, it produces &quot;plus infinity&quot;. Infinity behaves roughly the way we might expect - for example, &quot;2 divided by plus infinity&quot; produces 0 - but once it comes into a calculation the result probably lies on some extreme and won't be very useful. Amusingly, the following is correct Inform syntax:</p>
<!-- START CODE "c4547" -->
<a id="c4547"></a><blockquote class="code"><p class="quoted">
plus infinity to the nearest whole number
</p></blockquote>
<!-- END CODE -->
<p>and evaluates of course to 2147483647. We can use the adjectives &quot;infinite&quot; and &quot;finite&quot; to talk about these numbers: plus infinity and minus infinity are infinite, everything else is finite.</p>
<p>The same problem occurs for calculations like square roots. It's impossible to take the square root of a negative number, but we don't want to throw a run-time problem, because approximation means we can't always guarantee to stay the right side of 0. So for a few calculations like this, Inform generates what's called a &quot;nonexistent&quot; real number. We can use the adjectives nonexistent or existent to talk about this. Every number mentioned on this page so far is &quot;existent&quot;, including the infinities. The only way to get a nonexistent number is to carry out an impossible mathematical operation such as</p>
<!-- START CODE "c4548" -->
<a id="c4548"></a><blockquote class="code"><p class="quoted">
logarithm of -10
</p></blockquote>
<!-- END CODE -->
<p>(The design of &quot;real number&quot; here follows well established trade-offs for scientific computing. Inform follows the IEEE-754 binary32 standard for floating-point arithmetic, so Inform's &quot;real number&quot; behaves very like the &quot;float&quot; type in C, C++, Java and similar programming languages. A &quot;nonexistent&quot; number is what's often called a NaN - a Not-a-Number.)</p>
<hr />
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc227.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc229.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
