<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>6.11. Waiting, Sleeping</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Waiting, Sleeping" -->
<!-- SEARCH SECTION "6.11" -->
<!-- SEARCH SORT "001-006-011-000" -->
<!-- START IGNORE 38 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc38.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 6: Commands</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc40.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง6.11. Waiting, Sleeping</p>
<p>The standard WAIT command makes time pass at the same rate that it would anyway - one minute per turn. In a story where events happen at specific times of day, though, we might want to give the player more control. <span class="boldface">Nine AM Appointment</span> shows how to give the player a WAIT 10 MINUTES command, while <span class="boldface">Delayed Gratification</span> lets him WAIT UNTIL a specific time of day.</p>
<p>Ordinarily, Inform also refuses to allow the player to SLEEP and WAKE UP: the commands exist, but have no effect. <span class="boldface">Change of Basis</span> lets the player put himself into a sleep state in which he cannot do anything. A somewhat more interesting expansion on this idea would be to let the player sleep and have dreams; there are no examples specifically of dream states, but we might consult the examples on scenes about how to disrupt one environment and move the player to another, entirely new one.</p>
<p class="crossreference"><a href="Rdoc20.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Scene Changes</b></a><i> for ways to move the player to a new environment such as a dream state</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "388: Nine AM Appointment" "e82" -->
<a id="e82"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example82'); return false;"><b>388</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example82'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Nine AM Appointment</span></b></a><br />A WAIT [number] MINUTES command which advances through an arbitrary number of turns.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc328.html#e82"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example82" style="display: none;">
<p>If there's some reason the player needs to be at a specific place and time, we might want to allow him to wait a number of minutes at once.</p>
<!-- START CODE "c11849_82" -->
<a id="c11849_82"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Nine AM Appointment[=0x0022=][=0x000A=][=0x000A=]Waiting more is an action applying to one number.[=0x000A=][=0x000A=]Understand [=0x0022=]wait [a time period][=0x0022=] or [=0x0022=]wait for [a time period][=0x0022=] or [=0x0022=]wait for a/an [a time period][=0x0022=] or [=0x0022=]wait a/an [a time period][=0x0022=] as waiting more.[=0x000A=][=0x000A=]Carry out waiting more:[=0x000A=][=0x0009=]let the target time be the time of day plus the time understood;[=0x000A=][=0x0009=]decrease the target time by one minute;[=0x000A=][=0x0009=]while the time of day is not the target time:[=0x000A=][=0x0009=][=0x0009=]follow the turn sequence rules.[=0x000A=][=0x000A=][The one nuance here is that after our wait command occurs, the turn sequence rules will occur one more time. So we need to subtract one minute from the parsed time to make the turn end on the desired number of minutes.][=0x000A=][=0x000A=]Report waiting more:[=0x000A=][=0x0009=]say [=0x0022=]It is now [time of day + 1 minute].[=0x0022=][=0x000A=][=0x000A=][And if we want to ensure that the player doesn[=0x0027=]t (accidentally or intentionally) put the interpreter through a really long loop, we could put an upper limit on his patience:][=0x000A=][=0x000A=]Check waiting more:[=0x000A=][=0x0009=]if the time understood is greater than one hour, say [=0x0022=]You really haven[=0x0027=]t got that kind of patience.[=0x0022=] instead.[=0x000A=][=0x000A=]The Specialist[=0x0027=]s Office is a room. The secretary is a woman in the Office. Instead of asking the secretary about [=0x0022=][appointment][=0x0022=], say [=0x0022=][=0x0027=]Hang on just five more minutes,[=0x0027=] she says, in a distracted manner.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]appointment[=0x0022=] or [=0x0022=]specialist[=0x0022=] or [=0x0022=]doctor[=0x0022=] as [=0x0022=][appointment][=0x0022=].[=0x000A=][=0x000A=]At 9:45 AM: say [=0x0022=]At [the time of day in words], secretary glances at you and gives a reassuring smile.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]ask secretary about appointment / wait five minutes / g / g / wait 61 minutes / wait for half an hour / wait for a quarter of an hour / wait for an hour[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Nine AM Appointment&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11850_82" -->
<a id="c11850_82"></a><blockquote class="code"><p class="quoted">
Waiting more is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11851_82" -->
<a id="c11851_82"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait [a time period]&quot; or &quot;wait for [a time period]&quot; or &quot;wait for a/an [a time period]&quot; or &quot;wait a/an [a time period]&quot; as waiting more.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11852_82" -->
<a id="c11852_82"></a><blockquote class="code"><p class="quoted">
Carry out waiting more:
<br />&#160;&#160;&#160;&#160;let the target time be the time of day plus the time understood;
<br />&#160;&#160;&#160;&#160;decrease the target time by one minute;
<br />&#160;&#160;&#160;&#160;while the time of day is not the target time:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<p>The one nuance here is that after our wait command occurs, the turn sequence rules will occur one more time. So we need to subtract one minute from the parsed time to make the turn end on the desired number of minutes.</p>
<!-- START CODE "c11853_82" -->
<a id="c11853_82"></a><blockquote class="code"><p class="quoted">
Report waiting more:
<br />&#160;&#160;&#160;&#160;say &quot;It is now [time of day + 1 minute].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And if we want to ensure that the player doesn't (accidentally or intentionally) put the interpreter through a really long loop, we could put an upper limit on his patience:</p>
<!-- START CODE "c11854_82" -->
<a id="c11854_82"></a><blockquote class="code"><p class="quoted">
Check waiting more:
<br />&#160;&#160;&#160;&#160;if the time understood is greater than one hour, say &quot;You really haven't got that kind of patience.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11855_82" -->
<a id="c11855_82"></a><blockquote class="code"><p class="quoted">
The Specialist's Office is a room. The secretary is a woman in the Office. Instead of asking the secretary about &quot;[appointment]&quot;, say &quot;'Hang on just five more minutes,' she says, in a distracted manner.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11856_82" -->
<a id="c11856_82"></a><blockquote class="code"><p class="quoted">
Understand &quot;appointment&quot; or &quot;specialist&quot; or &quot;doctor&quot; as &quot;[appointment]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11857_82" -->
<a id="c11857_82"></a><blockquote class="code"><p class="quoted">
At 9:45 AM: say &quot;At [the time of day in words], secretary glances at you and gives a reassuring smile.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11858_82" -->
<a id="c11858_82"></a><blockquote class="code"><p class="quoted">
Test me with &quot;ask secretary about appointment / wait five minutes / g / g / wait 61 minutes / wait for half an hour / wait for a quarter of an hour / wait for an hour&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "47: Change of Basis" "e216" -->
<a id="e216"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example216'); return false;"><b>47</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example216'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Change of Basis</span></b></a><br />Implementing sleeping and wakeful states.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc58.html#e216"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example216" style="display: none;">
<p>Suppose we want to allow the player to go to sleep some of the time:</p>
<!-- START CODE "c11859_216" -->
<a id="c11859_216"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Change of Basis[=0x0022=][=0x000A=][=0x000A=]A person is either awake or asleep. A person is usually awake.[=0x000A=][=0x000A=][The important thing to note here is that it does not work to say [=0x0022=]the player is either asleep or awake[=0x0022=]. This is because the player is not necessarily one specific person or thing during the game: the identity of the player can be changed, as we will see later.][=0x000A=][=0x000A=][So if we want to make rules about the properties of the player, we should attach these rules to the [=0x0022=]person[=0x0022=] kind.][=0x000A=][=0x000A=]Linear Algebra Class is a room. [=0x0022=]The blackboard is covered with square arrangements of numbers. These are supposed to convey something to you, but mostly you[=0x0027=]re finding them soporific.[=0x0022=][=0x000A=][=0x000A=][Now a few rules about changing from one state to the other:][=0x000A=][=0x000A=]Instead of sleeping: now the player is asleep; say [=0x0022=]You drop off.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something other than waking up, waiting or sleeping when the player is asleep:[=0x000A=][=0x0009=]say [=0x0022=]Ssh! You[=0x0027=]re sleeping![=0x0022=][=0x000A=][=0x000A=]Instead of sleeping when the player is asleep:[=0x000A=][=0x0009=]say [=0x0022=]Zzzz.[=0x0022=][=0x000A=][=0x000A=]Instead of waking up when the player is asleep:[=0x000A=][=0x0009=]now the player is awake;[=0x000A=][=0x0009=]say [=0x0022=]You come to suddenly, wiping drool from your lips.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something other than looking or sleeping when the player is awake:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]d really rather just sleep through this.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]wake up / sleep / look / z / sleep / wake up / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Change of Basis&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11860_216" -->
<a id="c11860_216"></a><blockquote class="code"><p class="quoted">
A person is either awake or asleep. A person is usually awake.
</p></blockquote>
<!-- END CODE -->
<p>The important thing to note here is that it does not work to say &quot;the player is either asleep or awake&quot;. This is because the player is not necessarily one specific person or thing during the game: the identity of the player can be changed, as we will see later.</p>
<p>So if we want to make rules about the properties of the player, we should attach these rules to the &quot;person&quot; kind.</p>
<!-- START CODE "c11861_216" -->
<a id="c11861_216"></a><blockquote class="code"><p class="quoted">
Linear Algebra Class is a room. &quot;The blackboard is covered with square arrangements of numbers. These are supposed to convey something to you, but mostly you're finding them soporific.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now a few rules about changing from one state to the other:</p>
<!-- START CODE "c11862_216" -->
<a id="c11862_216"></a><blockquote class="code"><p class="quoted">
Instead of sleeping: now the player is asleep; say &quot;You drop off.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11863_216" -->
<a id="c11863_216"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than waking up, waiting or sleeping when the player is asleep:
<br />&#160;&#160;&#160;&#160;say &quot;Ssh! You're sleeping!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11864_216" -->
<a id="c11864_216"></a><blockquote class="code"><p class="quoted">
Instead of sleeping when the player is asleep:
<br />&#160;&#160;&#160;&#160;say &quot;Zzzz.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11865_216" -->
<a id="c11865_216"></a><blockquote class="code"><p class="quoted">
Instead of waking up when the player is asleep:
<br />&#160;&#160;&#160;&#160;now the player is awake;
<br />&#160;&#160;&#160;&#160;say &quot;You come to suddenly, wiping drool from your lips.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11866_216" -->
<a id="c11866_216"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than looking or sleeping when the player is awake:
<br />&#160;&#160;&#160;&#160;say &quot;You'd really rather just sleep through this.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11867_216" -->
<a id="c11867_216"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wake up / sleep / look / z / sleep / wake up / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "389: Delayed Gratification" "e66" -->
<a id="e66"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example66'); return false;"><b>389</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example66'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Delayed Gratification</span></b></a><br />A WAIT UNTIL [time] command which advances until the game clock reaches the correct hour.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc328.html#e66"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example66" style="display: none;">
<!-- START CODE "c11868_66" -->
<a id="c11868_66"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Delayed Gratification[=0x0022=][=0x000A=][=0x000A=]Hanging around until is an action applying to one time.[=0x000A=][=0x000A=]Check hanging around until:[=0x000A=][=0x0009=]if the time of day is the time understood, say [=0x0022=]It is [time understood] now![=0x0022=] instead;[=0x000A=][=0x0009=]if the time of day is after the time understood, say [=0x0022=]It is too late for that now.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out hanging around until:[=0x000A=][=0x0009=]while the time of day is before the time understood:[=0x000A=][=0x0009=][=0x0009=]follow the turn sequence rules.[=0x000A=][=0x000A=]Report hanging around until:[=0x000A=][=0x0009=]say [=0x0022=]You yawn until [time understood].[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]wait until [time][=0x0022=] as hanging around until.[=0x000A=][=0x000A=]The Empty Field is a room. [=0x0022=]It[=0x0027=]s an ordinary empty field. Nothing to see here at all-- yet. Wait until 11:45 PM, though.[=0x0022=][=0x000A=][=0x000A=]At 11:45 PM:[=0x000A=][=0x0009=]say [=0x0022=]Suddenly the air is filled with light and the sounds of an approaching band. Over the crest of the hill comes a parade of singing, stomping, hooting people: and not just people, but dogs, horses, elephants, giraffes... There are banners, and candles, and a flag that glows eerie-green in the dark; there is a float shaped like an enormous turtle, its shell covered with winking green lights; there is an old man dressed as a skeleton, carried in a litter, his neck garlanded with dried chiles. There are small girls throwing rose petals from a basket, and grown women half-naked carrying the emblems of Bacchic revelry, and two little boys each with a silver basin of clear water. All these go by in procession, and you join on at the end.[=0x0022=];[=0x000A=][=0x0009=]end the story finally.[=0x000A=][=0x000A=]Test me with [=0x0022=]look / z / z / wait until 11:45 PM[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Delayed Gratification&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11869_66" -->
<a id="c11869_66"></a><blockquote class="code"><p class="quoted">
Hanging around until is an action applying to one time.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11870_66" -->
<a id="c11870_66"></a><blockquote class="code"><p class="quoted">
Check hanging around until:
<br />&#160;&#160;&#160;&#160;if the time of day is the time understood, say &quot;It is [time understood] now!&quot; instead;
<br />&#160;&#160;&#160;&#160;if the time of day is after the time understood, say &quot;It is too late for that now.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11871_66" -->
<a id="c11871_66"></a><blockquote class="code"><p class="quoted">
Carry out hanging around until:
<br />&#160;&#160;&#160;&#160;while the time of day is before the time understood:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11872_66" -->
<a id="c11872_66"></a><blockquote class="code"><p class="quoted">
Report hanging around until:
<br />&#160;&#160;&#160;&#160;say &quot;You yawn until [time understood].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11873_66" -->
<a id="c11873_66"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait until [time]&quot; as hanging around until.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11874_66" -->
<a id="c11874_66"></a><blockquote class="code"><p class="quoted">
The Empty Field is a room. &quot;It's an ordinary empty field. Nothing to see here at all-- yet. Wait until 11:45 PM, though.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11875_66" -->
<a id="c11875_66"></a><blockquote class="code"><p class="quoted">
At 11:45 PM:
<br />&#160;&#160;&#160;&#160;say &quot;Suddenly the air is filled with light and the sounds of an approaching band. Over the crest of the hill comes a parade of singing, stomping, hooting people: and not just people, but dogs, horses, elephants, giraffes... There are banners, and candles, and a flag that glows eerie-green in the dark; there is a float shaped like an enormous turtle, its shell covered with winking green lights; there is an old man dressed as a skeleton, carried in a litter, his neck garlanded with dried chiles. There are small girls throwing rose petals from a basket, and grown women half-naked carrying the emblems of Bacchic revelry, and two little boys each with a silver basin of clear water. All these go by in procession, and you join on at the end.&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11876_66" -->
<a id="c11876_66"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / z / z / wait until 11:45 PM&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc38.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc40.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
