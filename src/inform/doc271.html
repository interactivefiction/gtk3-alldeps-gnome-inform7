<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>17.7. Understanding any, understanding rooms</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Understanding any, understanding rooms" -->
<!-- SEARCH SECTION "17.7" -->
<!-- SEARCH SORT "000-017-007-000" -->
<!-- START IGNORE 270 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc270.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 17: Understanding</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc272.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง17.7. Understanding any, understanding rooms</p>
<p>Ordinarily, if we write</p>
<!-- START CODE "c5730" -->
<a id="c5730"></a><blockquote class="code"><p class="quoted">
Understand &quot;manipulate [something]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>then the &quot;[something]&quot; will only match what is within reach or sight: this is the concept of &quot;scope&quot;, which is what prevents a player from spookily acting on objects from a distance. The parser itself prevents the manipulation rules from ever being invoked on such distant items, which is as it should be.</p>
<p>Sometimes, though, we positively want to allow this possibility. If we use the special word &quot;any&quot;, as in</p>
<!-- START CODE "c5731" -->
<a id="c5731"></a><blockquote class="code"><p class="quoted">
Understand &quot;manipulate [any door]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>then any door, anywhere in the model world, can be allowed in the player's command. (Of course, the manipulation rules may not do what the player hopes: all that has happened is that the command is now possible to type.) The &quot;any&quot; can be followed by any description of items or rooms, and the latter opens up new possibilities, since rooms are ordinarily never allowed to be named in the player's commands.</p>
<p>For example, the following gives the player the ability to walk between rooms without giving explicit directions of movement.</p>
<!-- START CODE "c5732" -->
<a id="c5732"></a><blockquote class="code"><p class="quoted">
Going by name is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5733" -->
<a id="c5733"></a><blockquote class="code"><p class="quoted">
Carry out going by name: say &quot;You walk to [the noun].&quot;; move the player to the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5734" -->
<a id="c5734"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to [any adjacent visited room]&quot; as going by name.
</p></blockquote>
<!-- END CODE -->
<p>(This is really only a sketch: in a finished work, &quot;go to&quot; would produce helpful errors if non-adjacent but visited rooms were named, and we might also worry about rules applying to movement, because the method above will circumvent them.)</p>
<p>As might be expected, &quot;[anything]&quot; means the same as &quot;[any thing]&quot;; &quot;[anybody]&quot; and &quot;[anyone]&quot; mean the same as &quot;[any person]&quot;; and &quot;[anywhere]&quot; means the same as &quot;[any room]&quot;.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "301: One of Those Mornings" "e365" -->
<a id="e365"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example365'); return false;"><b>301</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example365'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">One of Those Mornings</span></b></a><br />A FIND command that allows the player to find a lost object anywhere</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc26.html#e365"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example365" style="display: none;">
<p>Suppose that, contrary to the usual rules of interactive fiction, we want to allow the player to discover the locations of things he hasn't actually seen yet:</p>
<!-- START CODE "c5735_365" -->
<a id="c5735_365"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]One of Those Mornings[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]find [any thing][=0x0022=] as finding.[=0x000A=][=0x000A=]Finding is an action applying to one visible thing.[=0x000A=][=0x000A=]Carry out finding:[=0x000A=][=0x0009=]if the player is carrying the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re holding [the noun]![=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You left [the noun] [if the noun is on a supporter]on[otherwise]in[end if] [the holder of the noun].[=0x0022=][=0x000A=][=0x000A=][The holder of the noun can be a room, a supporter, or a container: the phrase is not picky. We would want to be a little more careful if it were ever possible for an item to have been [=0x0022=]removed from play[=0x0022=] in our game, since then the holder could be nothing, and that would have odd results. In this particular example, though, that will not arise.][=0x000A=][=0x000A=][And that[=0x0027=]s it, as far as the find command goes. The rest is local color.][=0x000A=][=0x000A=]The Exhibition Room is a room. It contains a closed locked lockable transparent openable container called the display case. The display case contains a priceless pearl. The display case is scenery. The description of the Exhibition Room is [=0x0022=]By far the finest thing in the room is a priceless pearl in a glass display case. It should of course be yours[if key is not visible], if only you can remember where you hid the key[end if].[=0x0022=][=0x000A=][=0x000A=]The silver key unlocks the display case.[=0x000A=][=0x000A=]A jade vase, a teak chest, a bronze teakettle, and a child[=0x0027=]s burial casket are openable closed containers in the Exhibition Room.[=0x000A=][=0x000A=]After taking the pearl:[=0x000A=][=0x0009=]say [=0x0022=]The pearl rolls into your hand, gleaming in the oblique light; your fortune is made.[=0x0022=];[=0x000A=][=0x0009=]end the story finally.[=0x000A=][=0x000A=][If we want to have the key found in different places when the game is replayed:][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]let the space be a random container which is not the display case;[=0x000A=][=0x0009=]move the silver key to the space.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]say [=0x0022=]Your watch ticks with maddening loudness.[=0x0022=][=0x000A=][=0x000A=]The time of day is 1:02 AM.[=0x000A=][=0x000A=]At 1:08 AM: say [=0x0022=]The security guard arrives to find you fumbling about with keys. Curses.[=0x0022=]; end the story.[=0x000A=][=0x000A=]Test me with [=0x0022=]find pearl / find teakettle / get teakettle / find teakettle / find key[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;One of Those Mornings&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5736_365" -->
<a id="c5736_365"></a><blockquote class="code"><p class="quoted">
Understand &quot;find [any thing]&quot; as finding.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5737_365" -->
<a id="c5737_365"></a><blockquote class="code"><p class="quoted">
Finding is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5738_365" -->
<a id="c5738_365"></a><blockquote class="code"><p class="quoted">
Carry out finding:
<br />&#160;&#160;&#160;&#160;if the player is carrying the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're holding [the noun]!&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You left [the noun] [if the noun is on a supporter]on[otherwise]in[end if] [the holder of the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>The holder of the noun can be a room, a supporter, or a container: the phrase is not picky. We would want to be a little more careful if it were ever possible for an item to have been &quot;removed from play&quot; in our game, since then the holder could be nothing, and that would have odd results. In this particular example, though, that will not arise.</p>
<p>And that's it, as far as the find command goes. The rest is local color.</p>
<!-- START CODE "c5739_365" -->
<a id="c5739_365"></a><blockquote class="code"><p class="quoted">
The Exhibition Room is a room. It contains a closed locked lockable transparent openable container called the display case. The display case contains a priceless pearl. The display case is scenery. The description of the Exhibition Room is &quot;By far the finest thing in the room is a priceless pearl in a glass display case. It should of course be yours[if key is not visible], if only you can remember where you hid the key[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5740_365" -->
<a id="c5740_365"></a><blockquote class="code"><p class="quoted">
The silver key unlocks the display case.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5741_365" -->
<a id="c5741_365"></a><blockquote class="code"><p class="quoted">
A jade vase, a teak chest, a bronze teakettle, and a child's burial casket are openable closed containers in the Exhibition Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5742_365" -->
<a id="c5742_365"></a><blockquote class="code"><p class="quoted">
After taking the pearl:
<br />&#160;&#160;&#160;&#160;say &quot;The pearl rolls into your hand, gleaming in the oblique light; your fortune is made.&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<p>If we want to have the key found in different places when the game is replayed:</p>
<!-- START CODE "c5743_365" -->
<a id="c5743_365"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;let the space be a random container which is not the display case;
<br />&#160;&#160;&#160;&#160;move the silver key to the space.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5744_365" -->
<a id="c5744_365"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;say &quot;Your watch ticks with maddening loudness.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5745_365" -->
<a id="c5745_365"></a><blockquote class="code"><p class="quoted">
The time of day is 1:02 AM.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5746_365" -->
<a id="c5746_365"></a><blockquote class="code"><p class="quoted">
At 1:08 AM: say &quot;The security guard arrives to find you fumbling about with keys. Curses.&quot;; end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5747_365" -->
<a id="c5747_365"></a><blockquote class="code"><p class="quoted">
Test me with &quot;find pearl / find teakettle / get teakettle / find teakettle / find key&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "302: Actaeon" "e313" -->
<a id="e313"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example313'); return false;"><b>302</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example313'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Actaeon</span></b></a><br />A FOLLOW command allowing the player to pursue a person who has just left the room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc59.html#e313"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example313" style="display: none;">
<p>Suppose we want the player to be able to go after characters who are moving around the map. The trick, of course, is that once characters are gone they are no longer visible to &quot;follow [person]&quot;, so we need &quot;follow [any person]&quot; to find them.</p>
<!-- START CODE "c5748_313" -->
<a id="c5748_313"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Actaeon[=0x0022=][=0x000A=][=0x000A=]A person has a room called last location.[=0x000A=][=0x000A=]Understand [=0x0022=]follow [any person][=0x0022=] as following. Understand the commands [=0x0022=]chase[=0x0022=] and [=0x0022=]pursue[=0x0022=] as [=0x0022=]follow[=0x0022=].[=0x000A=][=0x000A=]Following is an action applying to one visible thing.[=0x000A=][=0x000A=]Check following:[=0x000A=][=0x0009=]if the noun is the player, say [=0x0022=]Wherever you go, there you are.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is visible, say [=0x0022=][The noun] is right here.[=0x0022=] instead;[=0x000A=][=0x0009=]if the last location of the noun is not the location, say [=0x0022=]It[=0x0027=]s not clear where [the noun] has gone.[=0x0022=] instead.[=0x000A=][=0x000A=][Here again the best route comes in handy:][=0x000A=][=0x000A=]Carry out following:[=0x000A=][=0x0009=]let the destination be the location of the noun;[=0x000A=][=0x0009=]if the destination is not a room, say [=0x0022=][The noun] isn[=0x0027=]t anywhere you can follow.[=0x0022=] instead;[=0x000A=][=0x0009=]let aim be the best route from the location to the destination;[=0x000A=][=0x0009=]say [=0x0022=](heading [aim])[line break][=0x0022=];[=0x000A=][=0x0009=]try going aim.[=0x000A=][=0x000A=]Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.[=0x000A=][=0x000A=]Artemis is a woman in Corinth.[=0x000A=][=0x000A=][We do also have to make sure that whenever we move a person from room to room, we record where they were moved from; otherwise, our clever restrictions about whom the player can pursue will not work properly.][=0x000A=][=0x000A=]To move (pawn - a person) tidily to (target - a room):[=0x000A=][=0x0009=]now the last location of the pawn is the holder of the pawn;[=0x000A=][=0x0009=]move the pawn to the target.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let current location be the location of Artemis;[=0x000A=][=0x0009=]let next location be a random room which is adjacent to the current location;[=0x000A=][=0x0009=]if Artemis is visible, say [=0x0022=]Artemis heads to [the next location].[=0x0022=];[=0x000A=][=0x0009=]move Artemis tidily to next location;[=0x000A=][=0x0009=]if Artemis is visible, say [=0x0022=]Artemis arrives from [the current location].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]wait / follow artemis / follow artemis / follow artemis[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Actaeon&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5749_313" -->
<a id="c5749_313"></a><blockquote class="code"><p class="quoted">
A person has a room called last location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5750_313" -->
<a id="c5750_313"></a><blockquote class="code"><p class="quoted">
Understand &quot;follow [any person]&quot; as following. Understand the commands &quot;chase&quot; and &quot;pursue&quot; as &quot;follow&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5751_313" -->
<a id="c5751_313"></a><blockquote class="code"><p class="quoted">
Following is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5752_313" -->
<a id="c5752_313"></a><blockquote class="code"><p class="quoted">
Check following:
<br />&#160;&#160;&#160;&#160;if the noun is the player, say &quot;Wherever you go, there you are.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is visible, say &quot;[The noun] is right here.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the last location of the noun is not the location, say &quot;It's not clear where [the noun] has gone.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Here again the best route comes in handy:</p>
<!-- START CODE "c5753_313" -->
<a id="c5753_313"></a><blockquote class="code"><p class="quoted">
Carry out following:
<br />&#160;&#160;&#160;&#160;let the destination be the location of the noun;
<br />&#160;&#160;&#160;&#160;if the destination is not a room, say &quot;[The noun] isn't anywhere you can follow.&quot; instead;
<br />&#160;&#160;&#160;&#160;let aim be the best route from the location to the destination;
<br />&#160;&#160;&#160;&#160;say &quot;(heading [aim])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;try going aim.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5754_313" -->
<a id="c5754_313"></a><blockquote class="code"><p class="quoted">
Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5755_313" -->
<a id="c5755_313"></a><blockquote class="code"><p class="quoted">
Artemis is a woman in Corinth.
</p></blockquote>
<!-- END CODE -->
<p>We do also have to make sure that whenever we move a person from room to room, we record where they were moved from; otherwise, our clever restrictions about whom the player can pursue will not work properly.</p>
<!-- START CODE "c5756_313" -->
<a id="c5756_313"></a><blockquote class="code"><p class="quoted">
To move (pawn - a person) tidily to (target - a room):
<br />&#160;&#160;&#160;&#160;now the last location of the pawn is the holder of the pawn;
<br />&#160;&#160;&#160;&#160;move the pawn to the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5757_313" -->
<a id="c5757_313"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let current location be the location of Artemis;
<br />&#160;&#160;&#160;&#160;let next location be a random room which is adjacent to the current location;
<br />&#160;&#160;&#160;&#160;if Artemis is visible, say &quot;Artemis heads to [the next location].&quot;;
<br />&#160;&#160;&#160;&#160;move Artemis tidily to next location;
<br />&#160;&#160;&#160;&#160;if Artemis is visible, say &quot;Artemis arrives from [the current location].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5758_313" -->
<a id="c5758_313"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wait / follow artemis / follow artemis / follow artemis&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc270.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc272.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
