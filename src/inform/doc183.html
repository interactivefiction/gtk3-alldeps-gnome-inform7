<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>12.7. New actions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "New actions" -->
<!-- SEARCH SECTION "12.7" -->
<!-- SEARCH SORT "000-012-007-000" -->
<!-- START IGNORE 182 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc182.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 12: Advanced Actions</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc184.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง12.7. New actions</p>
<p>It is not often that we need to create new actions, but a large work of interactive fiction with no novelty actions is a flavourless dish. Here we shall create an action for photographing things.</p>
<!-- START CODE "c3222" -->
<a id="c3222"></a><blockquote class="code"><p class="quoted">
The Ruins is a room. &quot;You find this clearing in the rainforest oddly familiar.&quot; The camera is in the Ruins. &quot;Your elephantine camera hangs from a convenient branch.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3223" -->
<a id="c3223"></a><blockquote class="code"><p class="quoted">
Photographing is an action applying to one visible thing and requiring light.
</p></blockquote>
<!-- END CODE -->
<p>In theory that text is already sufficient to make the new action, but what we have so far is rudimentary to say the least. The two qualifications give Inform the useful information that we cannot photograph in the dark, and that we need to be photographing something - not, as in the case of waiting or taking inventory, acting without reference to any particular thing external to ourselves.</p>
<p>The word &quot;visible&quot; here tells Inform that we do not need to be able to touch the thing in question: a line of sight is good enough. These two stipulations were necessary because the default arrangement is that any object must be in touching range, and that most actions can be performed in darkness. (Also, note that if you invent an action which needs to apply to directions like &quot;north&quot; or &quot;south&quot;, you need to make this apply to visible things, because the object used inside Inform to represent the idea of &quot;north&quot; can be seen but not touched. So for understanding purposes, &quot;visible thing&quot; is understood as meaning any visible thing or direction: it's more general than &quot;thing&quot;, not more specific.)</p>
<p>Occasionally, when writing general rules about actions, it can be useful to find out what the current action's requirements are: the following conditions do what they suggest.</p>
<!-- START PHRASE "defn144" -->
<div class="definition"><a id="defn144"></a><p class="defnprototype"><b>if action requires a touchable noun:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_requirestouch -->

<p>This condition is true if the action being processed is one whose (first) noun is an object which needs to be touchable by the actor. For example, it's true for &quot;taking&quot;, but false for &quot;examining&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn145" -->
<div class="definition"><a id="defn145"></a><p class="defnprototype"><b>if action requires a touchable second noun:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_requirestouch2 -->

<p>This condition is true if the action being processed is one whose second noun is an object which needs to be touchable by the actor. For example, it's true for &quot;putting the brick in the sack&quot;, but false for &quot;throwing the brick at the window&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn146" -->
<div class="definition"><a id="defn146"></a><p class="defnprototype"><b>if action requires a carried noun:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_requirescarried -->

<p>This condition is true if the action being processed is one whose (first) noun is an object which needs to be carried by the actor. For example, it's true for &quot;dropping&quot;, but false for &quot;taking&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn147" -->
<div class="definition"><a id="defn147"></a><p class="defnprototype"><b>if action requires a carried second noun:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_requirescarried2 -->

<p>This condition is true if the action being processed is one whose second noun is an object which needs to be carried by the actor.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn148" -->
<div class="definition"><a id="defn148"></a><p class="defnprototype"><b>if action requires light:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_requireslight -->

<p>This condition is true if the action being processed is one which can only be performed if the actor has light to see by. For example, it's true for &quot;examining&quot;, but false for &quot;dropping&quot;.</p>

<!-- end definition -->
</div>

<p>As further examples, here we create &quot;blinking&quot; and &quot;scraping X with Y&quot;. Note the use of &quot;it&quot; to indicate that the name of an object should go here.</p>
<!-- START CODE "c3224" -->
<a id="c3224"></a><blockquote class="code"><p class="quoted">
Blinking is an action applying to nothing. Scraping it with is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<p>The photographing action now exists, but with two provisos: (a) it never happens, because Inform does not know what commands by the player should cause it, and (b) even if it were to happen, nothing would follow, because Inform does not know what to do. (There are no check, carry out or report rules yet.)</p>
<p>The first problem is easily overcome:</p>
<!-- START CODE "c3225" -->
<a id="c3225"></a><blockquote class="code"><p class="quoted">
Understand &quot;photograph [something]&quot; as photographing.
</p></blockquote>
<!-- END CODE -->
<p>We will return to the whole subject of parsing, as this process of understanding the player's commands is called, later. But this gives the gist of it.</p>
<p class="crossreference"><a href="doc265.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Understand</b></a><i> for the full story</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "191: Red Cross" "e307" -->
<a id="e307"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example307'); return false;"><b>191</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example307'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Red Cross</span></b></a><br />A DIAGNOSE command which allows the player to check on the health of someone.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc51.html#e307"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example307" style="display: none;">
<!-- START CODE "c3226_307" -->
<a id="c3226_307"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Red Cross[=0x0022=][=0x000A=][=0x000A=]Diagnosing is an action applying to one visible thing. Understand [=0x0022=]diagnose [something][=0x0022=] as diagnosing.[=0x000A=][=0x000A=]Check diagnosing:[=0x000A=][=0x0009=]if the noun is not a person, say [=0x0022=]Only people can have diagnoses.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out diagnosing:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re not a medical expert.[=0x0022=][=0x000A=][=0x000A=]Instead of diagnosing the player:[=0x000A=][=0x0009=]say [=0x0022=]You feel fine![=0x0022=][=0x000A=][=0x000A=]The Clinic is a room. Fred is a man in the Clinic. The player carries a tongue-depressor.[=0x000A=][=0x000A=]Test me with [=0x0022=]diagnose me / diagnose fred / diagnose tongue-depressor[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Red Cross&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3227_307" -->
<a id="c3227_307"></a><blockquote class="code"><p class="quoted">
Diagnosing is an action applying to one visible thing. Understand &quot;diagnose [something]&quot; as diagnosing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3228_307" -->
<a id="c3228_307"></a><blockquote class="code"><p class="quoted">
Check diagnosing:
<br />&#160;&#160;&#160;&#160;if the noun is not a person, say &quot;Only people can have diagnoses.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3229_307" -->
<a id="c3229_307"></a><blockquote class="code"><p class="quoted">
Carry out diagnosing:
<br />&#160;&#160;&#160;&#160;say &quot;You're not a medical expert.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3230_307" -->
<a id="c3230_307"></a><blockquote class="code"><p class="quoted">
Instead of diagnosing the player:
<br />&#160;&#160;&#160;&#160;say &quot;You feel fine!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3231_307" -->
<a id="c3231_307"></a><blockquote class="code"><p class="quoted">
The Clinic is a room. Fred is a man in the Clinic. The player carries a tongue-depressor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3232_307" -->
<a id="c3232_307"></a><blockquote class="code"><p class="quoted">
Test me with &quot;diagnose me / diagnose fred / diagnose tongue-depressor&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "192: 3 AM" "e159" -->
<a id="e159"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example159'); return false;"><b>192</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example159'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">3 AM</span></b></a><br />A shake command which agitates soda and makes items thump around in boxes.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc81.html#e159"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example159" style="display: none;">
<!-- START CODE "c3233_159" -->
<a id="c3233_159"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]3 AM[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]shake [something preferably held][=0x0022=] as shaking.[=0x000A=][=0x000A=]Shaking is an action applying to one carried thing.[=0x000A=][=0x000A=]Carry out shaking:[=0x000A=][=0x0009=]say [=0x0022=]Nothing results of your shaking [the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of shaking a closed container when something is in the noun:[=0x000A=][=0x0009=]say [=0x0022=]Something rattles inside [the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of shaking a closed transparent container when something is in the noun:[=0x000A=][=0x0009=]say [=0x0022=]Inside [the noun] there are banging noises produced by [the list of things contained by the noun].[=0x0022=][=0x000A=][=0x000A=]Instead of shaking an open container which contains something:[=0x000A=][=0x0009=]say [=0x0022=][The list of things contained by the noun] might fly out.[=0x0022=][=0x000A=][=0x000A=]The Wawa is a room. [=0x0022=]A convenience store, if you like to call it that, vending the usual assortment of chips, donuts, soda, and beer. There is something of a line at the sandwich counter.[=0x0022=][=0x000A=][=0x000A=]The box of enrobed cakes is in the Wawa. [=0x0022=]A box of Tastykake Enrobed Cakes has fallen off its shelf.[=0x0022=] The description is [=0x0022=][=0x0027=]Enrobed Cakes[=0x0027=] is a fancy term for [=0x0027=]strange sponge-like baked good, covered in a thin shell of waxy chocolate[=0x0027=]. They are addictive, but not in a way that lets you respect yourself in the morning.[=0x0022=] The box is a closed openable container. In the box is a cake.[=0x000A=][=0x000A=]Instead of opening the box, say [=0x0022=]The Wawa clerks frown on the consumption of unpurchased foodstuffs.[=0x0022=][=0x000A=][=0x000A=]The can of root beer is a closed openable container carried by the player. The can of root beer is either agitated or calm.[=0x000A=][=0x000A=][Because the can of root beer should have some reactions to having been shaken later in the game, we need to borrow a few ideas from the chapter on Time:][=0x000A=][=0x000A=]Instead of shaking the can of root beer:[=0x000A=][=0x0009=]the can calms down in five turns from now;[=0x000A=][=0x0009=]say [=0x0022=]You give the can a good hard shake.[=0x0022=];[=0x000A=][=0x0009=]now the can is agitated.[=0x000A=][=0x000A=]Instead of listening to the can: say [=0x0022=]It sounds [if agitated]fizzy[otherwise]calm[end if]![=0x0022=][=0x000A=][=0x000A=]At the time when the can calms down:[=0x000A=][=0x0009=]now the can is calm.[=0x000A=][=0x000A=]The sticky mess is fixed in place. [=0x0022=]There is a sticky mess on the ground.[=0x0022=][=0x000A=][=0x000A=]Instead of opening the agitated can of root beer:[=0x000A=][=0x0009=]now the can of root beer is nowhere;[=0x000A=][=0x0009=]now the sticky mess is in the location;[=0x000A=][=0x0009=]say [=0x0022=]You open the can and fizzing sweet soda goes absolutely everywhere.[=0x0022=][=0x000A=][=0x000A=]Instead of opening the calm can of root beer when the can has been agitated:[=0x000A=][=0x0009=]now the can of root beer is nowhere;[=0x000A=][=0x0009=]say [=0x0022=]The root beer is disappointingly flat. That[=0x0027=]s what you get for shaking it up![=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]get box / shake box / open box / shake box / listen to can / shake can / listen to can / wait / wait / wait / wait / wait / listen to can / open can[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;3 AM&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3234_159" -->
<a id="c3234_159"></a><blockquote class="code"><p class="quoted">
Understand &quot;shake [something preferably held]&quot; as shaking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3235_159" -->
<a id="c3235_159"></a><blockquote class="code"><p class="quoted">
Shaking is an action applying to one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3236_159" -->
<a id="c3236_159"></a><blockquote class="code"><p class="quoted">
Carry out shaking:
<br />&#160;&#160;&#160;&#160;say &quot;Nothing results of your shaking [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3237_159" -->
<a id="c3237_159"></a><blockquote class="code"><p class="quoted">
Instead of shaking a closed container when something is in the noun:
<br />&#160;&#160;&#160;&#160;say &quot;Something rattles inside [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3238_159" -->
<a id="c3238_159"></a><blockquote class="code"><p class="quoted">
Instead of shaking a closed transparent container when something is in the noun:
<br />&#160;&#160;&#160;&#160;say &quot;Inside [the noun] there are banging noises produced by [the list of things contained by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3239_159" -->
<a id="c3239_159"></a><blockquote class="code"><p class="quoted">
Instead of shaking an open container which contains something:
<br />&#160;&#160;&#160;&#160;say &quot;[The list of things contained by the noun] might fly out.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3240_159" -->
<a id="c3240_159"></a><blockquote class="code"><p class="quoted">
The Wawa is a room. &quot;A convenience store, if you like to call it that, vending the usual assortment of chips, donuts, soda, and beer. There is something of a line at the sandwich counter.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3241_159" -->
<a id="c3241_159"></a><blockquote class="code"><p class="quoted">
The box of enrobed cakes is in the Wawa. &quot;A box of Tastykake Enrobed Cakes has fallen off its shelf.&quot; The description is &quot;'Enrobed Cakes' is a fancy term for 'strange sponge-like baked good, covered in a thin shell of waxy chocolate'. They are addictive, but not in a way that lets you respect yourself in the morning.&quot; The box is a closed openable container. In the box is a cake.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3242_159" -->
<a id="c3242_159"></a><blockquote class="code"><p class="quoted">
Instead of opening the box, say &quot;The Wawa clerks frown on the consumption of unpurchased foodstuffs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3243_159" -->
<a id="c3243_159"></a><blockquote class="code"><p class="quoted">
The can of root beer is a closed openable container carried by the player. The can of root beer is either agitated or calm.
</p></blockquote>
<!-- END CODE -->
<p>Because the can of root beer should have some reactions to having been shaken later in the game, we need to borrow a few ideas from the chapter on Time:</p>
<!-- START CODE "c3244_159" -->
<a id="c3244_159"></a><blockquote class="code"><p class="quoted">
Instead of shaking the can of root beer:
<br />&#160;&#160;&#160;&#160;the can calms down in five turns from now;
<br />&#160;&#160;&#160;&#160;say &quot;You give the can a good hard shake.&quot;;
<br />&#160;&#160;&#160;&#160;now the can is agitated.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3245_159" -->
<a id="c3245_159"></a><blockquote class="code"><p class="quoted">
Instead of listening to the can: say &quot;It sounds [if agitated]fizzy[otherwise]calm[end if]!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3246_159" -->
<a id="c3246_159"></a><blockquote class="code"><p class="quoted">
At the time when the can calms down:
<br />&#160;&#160;&#160;&#160;now the can is calm.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3247_159" -->
<a id="c3247_159"></a><blockquote class="code"><p class="quoted">
The sticky mess is fixed in place. &quot;There is a sticky mess on the ground.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3248_159" -->
<a id="c3248_159"></a><blockquote class="code"><p class="quoted">
Instead of opening the agitated can of root beer:
<br />&#160;&#160;&#160;&#160;now the can of root beer is nowhere;
<br />&#160;&#160;&#160;&#160;now the sticky mess is in the location;
<br />&#160;&#160;&#160;&#160;say &quot;You open the can and fizzing sweet soda goes absolutely everywhere.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3249_159" -->
<a id="c3249_159"></a><blockquote class="code"><p class="quoted">
Instead of opening the calm can of root beer when the can has been agitated:
<br />&#160;&#160;&#160;&#160;now the can of root beer is nowhere;
<br />&#160;&#160;&#160;&#160;say &quot;The root beer is disappointingly flat. That's what you get for shaking it up!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3250_159" -->
<a id="c3250_159"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get box / shake box / open box / shake box / listen to can / shake can / listen to can / wait / wait / wait / wait / wait / listen to can / open can&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "193: Frizz" "e292" -->
<a id="e292"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example292'); return false;"><b>193</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example292'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Frizz</span></b></a><br />Liquid flows within containers and soaks objects that are not waterproof; any contact with a wet object can dampen our gloves.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc81.html#e292"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example292" style="display: none;">
<p>Suppose we have some items that get wet in contact with other damp things; in particular, if we touch anything wet while wearing a pair of gloves, the gloves too get damp. This requires that we be systematic about detecting all cases where contact occurs. So:</p>
<!-- START CODE "c3251_292" -->
<a id="c3251_292"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Frizz[=0x0022=][=0x000A=][=0x000A=]A thing can be waterproof or porous. A container is usually waterproof. An animal is usually waterproof.[=0x000A=][=0x000A=]A thing can be sodden or dry.[=0x000A=][=0x000A=]A container can be waterfilled or empty.[=0x000A=][=0x000A=]Before printing the name of a sodden thing: say [=0x0022=]sodden [=0x0022=]. Understand the sodden property as describing a thing.[=0x000A=][=0x000A=]The player wears a pair of woolly gloves. Instead of wearing a sodden thing: say [=0x0022=]You dubiously contemplate [the noun], and decide it[=0x0027=]s best to wear dry clothing.[=0x0022=][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]follow the liquid distribution rules.[=0x000A=][=0x000A=]The liquid distribution rules is a rulebook.[=0x000A=][=0x000A=]A liquid distribution rule:[=0x000A=][=0x0009=]repeat with item running through containers:[=0x000A=][=0x0009=][=0x0009=]if the item is open and the item is empty and the item is in a waterfilled container:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is waterfilled;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the player can see the item, say [=0x0022=][The item] fills up with water, of course.[=0x0022=].[=0x000A=][=0x000A=]A liquid distribution rule:[=0x000A=][=0x0009=]repeat with item running through things in a waterfilled container:[=0x000A=][=0x0009=][=0x0009=]if the item is porous and the item is dry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the player can see the item, say [=0x0022=][The item] soaks through.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is sodden.[=0x000A=][=0x000A=]A liquid distribution rule:[=0x000A=][=0x0009=]repeat with item running through sodden things in the airing cupboard:[=0x000A=][=0x0009=][=0x0009=]if the item is not The Last Man, now the item is dry.[=0x000A=][=0x000A=]The last liquid distribution rule:[=0x000A=][=0x0009=]if the player carries a dry copy of The Last Man, end the story finally.[=0x000A=][=0x000A=]Instead of examining a waterfilled container:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is full of water[if the noun contains something visible]; it also contains [the list of things in the noun][end if].[=0x0022=][=0x000A=][=0x000A=]Instead of examining a container:[=0x000A=][=0x0009=]say [=0x0022=]Dry inside[if the noun contains something visible], and containing [a list of things in the noun].[=0x0022=][=0x000A=][=0x000A=]A book is a kind of thing. Instead of examining a sodden book, say [=0x0022=][The noun] is too soaked to read, thanks to someone[=0x0027=]s carelessness.[=0x0022=] Understand [=0x0022=]book[=0x0022=] as a book.[=0x000A=][=0x000A=]The copy of The Last Man is a book. The description of The Last Man is [=0x0022=]Mary Shelley[=0x0027=]s very own original copy, loaned to you under the strictest of agreements[if the pond encloses the copy]. How it came to be in its present position is a long story, and not important at the moment: the critical thing is not to blame oneself - who could have anticipated the cricket bat, anyway? - but to fix it immediately, before anything worse occurs[end if].[=0x0022=] The The Last Man is in the ziploc bag. The ziploc bag is waterproof and empty. It is openable, transparent, and closed.[=0x000A=][=0x000A=]The Back Garden is a room. The Back Garden contains a pond. The pond is a waterfilled container. In the pond is the ziploc bag. A carp is in the pond. The carp is an animal. Instead of taking the carp, say [=0x0022=]You[=0x0027=]re not fast enough.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the pond:[=0x000A=][=0x0009=]if the pond encloses the Last Man:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It is a beautiful day just at the end of spring and beginning of summer. The sun shines, the trees blossom, the world conspires in Edenic cheerfulness. You can take in none of it. Your eye is on [the Last Man].[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The pond[if something is in the pond] (containing [the list of things in the pond])[end if] remains a figure of menace in an otherwise lushly verdant landscape.[=0x0022=][=0x000A=][=0x000A=]Before printing the name of the Last Man when the Last Man is enclosed by the Pond: if the Last Man is dry, say [=0x0022=]delicate, valuable [=0x0022=].[=0x000A=][=0x000A=]After printing the name of something (called the target) while writing a paragraph about something:[=0x000A=][=0x0009=]if the Last Man is enclosed by the Pond:[=0x000A=][=0x0009=][=0x0009=]if the target is in something (called the parent), say [=0x0022=] - which is in [the parent][=0x0022=].[=0x000A=][=0x000A=]The Kitchen is west of the Back Garden. [=0x0022=]Not in any sense your province: Mrs Peaswell gets agitated if anyone besides herself so much as boils a kettle. In general it is best to sneak through, disturbing as little as possible and preserving the cosy domestic fiction that academics cannot cook.[=0x000A=][=0x000A=]The nearby stairwell leads up to the second floor.[=0x0022=][=0x000A=][=0x000A=]The Stairwell is above the Kitchen. [=0x0022=]Halfway up and halfway down.[=0x0022=] The airing cupboard is a container in the Stairwell. [=0x0022=]An airing cupboard here contains the heating system, and is the ideal place for restoring wet items to a dry state.[=0x0022=] The airing cupboard is fixed in place.[=0x000A=][=0x000A=][Now: whenever the player definitely touches something, we want to follow certain rules about the transfer of liquid. These rules need to come after an action[=0x0027=]s check rules (to make sure the action really occurs) and before the carry out rules (so that nothing has moved or changed yet). So we[=0x0027=]ll borrow from the chapter on rulebooks to create a whole new stage to the action, occurring between the check and the carry out phases:][=0x000A=][=0x000A=]The post-check rules are a rulebook.[=0x000A=][=0x000A=]This is the post-check stage rule:[=0x000A=][=0x0009=]abide by the post-check rules.[=0x000A=][=0x000A=]The post-check stage rule is listed before the carry out stage rule in the specific action-processing rules.[=0x000A=][=0x000A=]A post-check rule (this is the dry glove rule):[=0x000A=][=0x0009=]if we get wet:[=0x000A=][=0x0009=][=0x0009=]if the player wears the gloves and the gloves are dry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the gloves are sodden;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=](soaking your gloves in the process)[=0x0022=];[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]A post-check rule (this is the wet glove rule):[=0x000A=][=0x0009=]if the player wears the sodden gloves:[=0x000A=][=0x0009=][=0x0009=]if the The Last Man must be touched and the Last Man is not sodden:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=](soaking the parched pages of The Last Man with the rude touch of your sodden gloves)[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the The Last Man is sodden;[=0x000A=][=0x0009=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Before doing something when the player does not wear the gloves:[=0x000A=][=0x0009=]if The Last Man must be touched:[=0x000A=][=0x0009=][=0x0009=]if The Last Man is dry, say [=0x0022=][The The Last Man] is too precious to endanger when you are not wearing gloves.[=0x0022=] instead;[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=]You hesitate instinctively, then recollect that you can hardly harm [The The Last Man] any more than it has already been harmed...[=0x0022=].[=0x000A=][=0x000A=]To decide whether we get wet:[=0x000A=][=0x0009=]if the noun is not a thing, no;[=0x000A=][=0x0009=]if the noun dampens us, yes;[=0x000A=][=0x0009=]if the second noun is not a thing, no;[=0x000A=][=0x0009=]if the second noun dampens us, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]To decide whether (item - a thing) dampens us:[=0x000A=][=0x0009=]if the item is not liquiferous, no;[=0x000A=][=0x0009=]if item must be touched, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]To decide whether (item - a thing) must be touched:[=0x000A=][=0x0009=]if the item is the noun and the action requires a touchable noun, yes;[=0x000A=][=0x0009=]if the item is the second noun and the action requires a touchable second noun, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]Definition: a thing is liquiferous:[=0x000A=][=0x0009=]if it is sodden, yes;[=0x000A=][=0x0009=]if it is in a waterfilled container, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]Test me with [=0x0022=]x book / x bag / get bag / take off gloves / w / u / put gloves in cupboard / z / open bag / touch book / push book / turn book / get gloves / wear gloves / get book[=0x0022=].[=0x000A=][=0x000A=]Test disaster with [=0x0022=]open bag[=0x0022=].[=0x000A=][=0x000A=]Test mishandling with [=0x0022=]get bag / open bag / get book[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Frizz&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3252_292" -->
<a id="c3252_292"></a><blockquote class="code"><p class="quoted">
A thing can be waterproof or porous. A container is usually waterproof. An animal is usually waterproof.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3253_292" -->
<a id="c3253_292"></a><blockquote class="code"><p class="quoted">
A thing can be sodden or dry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3254_292" -->
<a id="c3254_292"></a><blockquote class="code"><p class="quoted">
A container can be waterfilled or empty.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3255_292" -->
<a id="c3255_292"></a><blockquote class="code"><p class="quoted">
Before printing the name of a sodden thing: say &quot;sodden &quot;. Understand the sodden property as describing a thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3256_292" -->
<a id="c3256_292"></a><blockquote class="code"><p class="quoted">
The player wears a pair of woolly gloves. Instead of wearing a sodden thing: say &quot;You dubiously contemplate [the noun], and decide it's best to wear dry clothing.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3257_292" -->
<a id="c3257_292"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;follow the liquid distribution rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3258_292" -->
<a id="c3258_292"></a><blockquote class="code"><p class="quoted">
The liquid distribution rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3259_292" -->
<a id="c3259_292"></a><blockquote class="code"><p class="quoted">
A liquid distribution rule:
<br />&#160;&#160;&#160;&#160;repeat with item running through containers:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is open and the item is empty and the item is in a waterfilled container:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is waterfilled;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player can see the item, say &quot;[The item] fills up with water, of course.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3260_292" -->
<a id="c3260_292"></a><blockquote class="code"><p class="quoted">
A liquid distribution rule:
<br />&#160;&#160;&#160;&#160;repeat with item running through things in a waterfilled container:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is porous and the item is dry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player can see the item, say &quot;[The item] soaks through.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is sodden.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3261_292" -->
<a id="c3261_292"></a><blockquote class="code"><p class="quoted">
A liquid distribution rule:
<br />&#160;&#160;&#160;&#160;repeat with item running through sodden things in the airing cupboard:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is not The Last Man, now the item is dry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3262_292" -->
<a id="c3262_292"></a><blockquote class="code"><p class="quoted">
The last liquid distribution rule:
<br />&#160;&#160;&#160;&#160;if the player carries a dry copy of The Last Man, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3263_292" -->
<a id="c3263_292"></a><blockquote class="code"><p class="quoted">
Instead of examining a waterfilled container:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is full of water[if the noun contains something visible]; it also contains [the list of things in the noun][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3264_292" -->
<a id="c3264_292"></a><blockquote class="code"><p class="quoted">
Instead of examining a container:
<br />&#160;&#160;&#160;&#160;say &quot;Dry inside[if the noun contains something visible], and containing [a list of things in the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3265_292" -->
<a id="c3265_292"></a><blockquote class="code"><p class="quoted">
A book is a kind of thing. Instead of examining a sodden book, say &quot;[The noun] is too soaked to read, thanks to someone's carelessness.&quot; Understand &quot;book&quot; as a book.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3266_292" -->
<a id="c3266_292"></a><blockquote class="code"><p class="quoted">
The copy of The Last Man is a book. The description of The Last Man is &quot;Mary Shelley's very own original copy, loaned to you under the strictest of agreements[if the pond encloses the copy]. How it came to be in its present position is a long story, and not important at the moment: the critical thing is not to blame oneself - who could have anticipated the cricket bat, anyway? - but to fix it immediately, before anything worse occurs[end if].&quot; The The Last Man is in the ziploc bag. The ziploc bag is waterproof and empty. It is openable, transparent, and closed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3267_292" -->
<a id="c3267_292"></a><blockquote class="code"><p class="quoted">
The Back Garden is a room. The Back Garden contains a pond. The pond is a waterfilled container. In the pond is the ziploc bag. A carp is in the pond. The carp is an animal. Instead of taking the carp, say &quot;You're not fast enough.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3268_292" -->
<a id="c3268_292"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the pond:
<br />&#160;&#160;&#160;&#160;if the pond encloses the Last Man:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It is a beautiful day just at the end of spring and beginning of summer. The sun shines, the trees blossom, the world conspires in Edenic cheerfulness. You can take in none of it. Your eye is on [the Last Man].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The pond[if something is in the pond] (containing [the list of things in the pond])[end if] remains a figure of menace in an otherwise lushly verdant landscape.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3269_292" -->
<a id="c3269_292"></a><blockquote class="code"><p class="quoted">
Before printing the name of the Last Man when the Last Man is enclosed by the Pond: if the Last Man is dry, say &quot;delicate, valuable &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3270_292" -->
<a id="c3270_292"></a><blockquote class="code"><p class="quoted">
After printing the name of something (called the target) while writing a paragraph about something:
<br />&#160;&#160;&#160;&#160;if the Last Man is enclosed by the Pond:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the target is in something (called the parent), say &quot; - which is in [the parent]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3271_292" -->
<a id="c3271_292"></a><blockquote class="code"><p class="quoted">
The Kitchen is west of the Back Garden. &quot;Not in any sense your province: Mrs Peaswell gets agitated if anyone besides herself so much as boils a kettle. In general it is best to sneak through, disturbing as little as possible and preserving the cosy domestic fiction that academics cannot cook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3272_292" -->
<a id="c3272_292"></a><blockquote class="code"><p class="quoted">
The nearby stairwell leads up to the second floor.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3273_292" -->
<a id="c3273_292"></a><blockquote class="code"><p class="quoted">
The Stairwell is above the Kitchen. &quot;Halfway up and halfway down.&quot; The airing cupboard is a container in the Stairwell. &quot;An airing cupboard here contains the heating system, and is the ideal place for restoring wet items to a dry state.&quot; The airing cupboard is fixed in place.
</p></blockquote>
<!-- END CODE -->
<p>Now: whenever the player definitely touches something, we want to follow certain rules about the transfer of liquid. These rules need to come after an action's check rules (to make sure the action really occurs) and before the carry out rules (so that nothing has moved or changed yet). So we'll borrow from the chapter on rulebooks to create a whole new stage to the action, occurring between the check and the carry out phases:</p>
<!-- START CODE "c3274_292" -->
<a id="c3274_292"></a><blockquote class="code"><p class="quoted">
The post-check rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3275_292" -->
<a id="c3275_292"></a><blockquote class="code"><p class="quoted">
This is the post-check stage rule:
<br />&#160;&#160;&#160;&#160;abide by the post-check rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3276_292" -->
<a id="c3276_292"></a><blockquote class="code"><p class="quoted">
The post-check stage rule is listed before the carry out stage rule in the specific action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3277_292" -->
<a id="c3277_292"></a><blockquote class="code"><p class="quoted">
A post-check rule (this is the dry glove rule):
<br />&#160;&#160;&#160;&#160;if we get wet:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player wears the gloves and the gloves are dry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the gloves are sodden;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(soaking your gloves in the process)&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3278_292" -->
<a id="c3278_292"></a><blockquote class="code"><p class="quoted">
A post-check rule (this is the wet glove rule):
<br />&#160;&#160;&#160;&#160;if the player wears the sodden gloves:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the The Last Man must be touched and the Last Man is not sodden:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(soaking the parched pages of The Last Man with the rude touch of your sodden gloves)&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the The Last Man is sodden;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3279_292" -->
<a id="c3279_292"></a><blockquote class="code"><p class="quoted">
Before doing something when the player does not wear the gloves:
<br />&#160;&#160;&#160;&#160;if The Last Man must be touched:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if The Last Man is dry, say &quot;[The The Last Man] is too precious to endanger when you are not wearing gloves.&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;You hesitate instinctively, then recollect that you can hardly harm [The The Last Man] any more than it has already been harmed...&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3280_292" -->
<a id="c3280_292"></a><blockquote class="code"><p class="quoted">
To decide whether we get wet:
<br />&#160;&#160;&#160;&#160;if the noun is not a thing, no;
<br />&#160;&#160;&#160;&#160;if the noun dampens us, yes;
<br />&#160;&#160;&#160;&#160;if the second noun is not a thing, no;
<br />&#160;&#160;&#160;&#160;if the second noun dampens us, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3281_292" -->
<a id="c3281_292"></a><blockquote class="code"><p class="quoted">
To decide whether (item - a thing) dampens us:
<br />&#160;&#160;&#160;&#160;if the item is not liquiferous, no;
<br />&#160;&#160;&#160;&#160;if item must be touched, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3282_292" -->
<a id="c3282_292"></a><blockquote class="code"><p class="quoted">
To decide whether (item - a thing) must be touched:
<br />&#160;&#160;&#160;&#160;if the item is the noun and the action requires a touchable noun, yes;
<br />&#160;&#160;&#160;&#160;if the item is the second noun and the action requires a touchable second noun, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3283_292" -->
<a id="c3283_292"></a><blockquote class="code"><p class="quoted">
Definition: a thing is liquiferous:
<br />&#160;&#160;&#160;&#160;if it is sodden, yes;
<br />&#160;&#160;&#160;&#160;if it is in a waterfilled container, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3284_292" -->
<a id="c3284_292"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x book / x bag / get bag / take off gloves / w / u / put gloves in cupboard / z / open bag / touch book / push book / turn book / get gloves / wear gloves / get book&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3285_292" -->
<a id="c3285_292"></a><blockquote class="code"><p class="quoted">
Test disaster with &quot;open bag&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3286_292" -->
<a id="c3286_292"></a><blockquote class="code"><p class="quoted">
Test mishandling with &quot;get bag / open bag / get book&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc182.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc184.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
