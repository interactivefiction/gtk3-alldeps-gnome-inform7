<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>17.9. Understanding kinds of value</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Understanding kinds of value" -->
<!-- SEARCH SECTION "17.9" -->
<!-- SEARCH SORT "000-017-009-000" -->
<!-- START IGNORE 272 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc272.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 17: Understanding</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc274.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง17.9. Understanding kinds of value</p>
<p>In many cases, if K is the name of a kind of value, then Inform automatically makes an Understand token called &quot;[K]&quot; which matches only values of K. An example is &quot;[number]&quot;, which matches text like 203 or SEVEN. There is a chart of the kinds of value in the Kinds index for a project, showing which ones can be understood in this way.</p>
<p>In particular, any newly created kind of value can always be understood. We make good use of that in the example story &quot;Studious&quot;:</p>
<!-- START CODE "c5764" -->
<a id="c5764"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Studious[=0x0022=][=0x000A=][=0x000A=]The Studio is a room. [=0x0022=]The unreal world of the photographic studio, full of fake furniture, cantilevered stands and silver-white shades like miniature parachutes.[=0x0022=] The lumpy black camera is in the Studio. [=0x0022=]A lumpy black camera hangs from a tripod.[=0x0022=][=0x000A=][=0x000A=]The rake-thin model is a woman in the Studio. [=0x0022=]A rake-thin model, exquisitely bored and boringly exquisite, angles herself indolently.[=0x0022=][=0x000A=][=0x000A=]Limb is a kind of value. The limbs are left leg, left arm, right leg and right arm.[=0x000A=][=0x000A=]Detailing is an action applying to one limb and one visible thing, requiring light. Check detailing: if the camera is not carried then say [=0x0022=]You can hardly photograph without a camera, now can you?[=0x0022=] instead. Report detailing: say [=0x0022=]Click! You take a detail photograph of the [limb understood] of [the second noun].[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]photograph [limb] of [a person][=0x0022=] as detailing.[=0x000A=][=0x000A=]Test me with [=0x0022=]get camera / photograph left leg of model[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Studious&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5765" -->
<a id="c5765"></a><blockquote class="code"><p class="quoted">
The Studio is a room. &quot;The unreal world of the photographic studio, full of fake furniture, cantilevered stands and silver-white shades like miniature parachutes.&quot; The lumpy black camera is in the Studio. &quot;A lumpy black camera hangs from a tripod.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5766" -->
<a id="c5766"></a><blockquote class="code"><p class="quoted">
The rake-thin model is a woman in the Studio. &quot;A rake-thin model, exquisitely bored and boringly exquisite, angles herself indolently.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5767" -->
<a id="c5767"></a><blockquote class="code"><p class="quoted">
Limb is a kind of value. The limbs are left leg, left arm, right leg and right arm.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5768" -->
<a id="c5768"></a><blockquote class="code"><p class="quoted">
Detailing is an action applying to one limb and one visible thing, requiring light. Check detailing: if the camera is not carried then say &quot;You can hardly photograph without a camera, now can you?&quot; instead. Report detailing: say &quot;Click! You take a detail photograph of the [limb understood] of [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5769" -->
<a id="c5769"></a><blockquote class="code"><p class="quoted">
Understand &quot;photograph [limb] of [a person]&quot; as detailing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5770" -->
<a id="c5770"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get camera / photograph left leg of model&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note the way we can refer to the limb mentioned by the player as the &quot;limb understood&quot;. Similarly, we could talk about the &quot;number understood&quot; if the value parsed had been a number, and so on.</p>
<p>One of the built-in kinds of value is worth special note: time. A time can hold either a specific time of day, such as 10:23 PM, or a duration of something, such as 21 minutes. The &quot;[a time]&quot; token matches times of day, such as 10:15 AM or MIDNIGHT. But 10 MINUTES wouldn't be recognised by &quot;[a time]&quot; since it isn't a specific moment in the day. To get around this, an alternative version called &quot;[a time period]&quot; is available. So:</p>
<!-- START CODE "c5771" -->
<a id="c5771"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait for [a time period]&quot; as ...
</p></blockquote>
<!-- END CODE -->
<p>would match WAIT FOR AN HOUR or WAIT FOR TWO HOURS 12 MINUTES.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "303: Pages" "e194" -->
<a id="e194"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example194'); return false;"><b>303</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example194'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Pages</span></b></a><br />A book with pages that can be read by number (as in "read page 3 in...") and which accepts relative page references as well (such as "read the last page of...", "read the next page", and so on).</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc73.html#e194"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example194" style="display: none;">
<p>Suppose we have a book that the player must consult page-by-page, and we want to be able to accept all of the following input:</p>
<!-- START CODE "c5772_194" -->
<a id="c5772_194"></a><blockquote class="code"><p class="quoted">
&gt; READ BOOK (to choose a random page and read it)
<br />&gt; READ PAGE 1 IN BOOK
<br />&gt; READ PAGE 2
<br />&gt; READ THE LAST PAGE OF THE BOOK
<br />&gt; READ THE NEXT PAGE
<br />&gt; READ PREVIOUS PAGE IN BOOK
<br />&gt; READ THE FIRST PAGE
</p></blockquote>
<!-- END CODE -->
<p>One approach would be to write many different understand rules and actions: one action for reading randomly, one for reading a specific page, one for reading the first page, one for reading the previous page, one for reading the next page, and one for reading the last page. But this gets tedious to construct and maintain.</p>
<p>More usefully, we could consider that all of the last four options are essentially the same action at heart: the player is asking to read a page in the book using a name rather than a number, and we will have to perform a minor calculation to discover what the number should be. Here's an implementation using named values to resolve this problem:</p>
<!-- START CODE "c5773_194" -->
<a id="c5773_194"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Pages[=0x0022=][=0x000A=][=0x000A=]The Library is a room. The sinister book is carried by the player. The sinister book has a number called the last page read. The sinister book has a number called the length. The length of the sinister book is 50.[=0x000A=][=0x000A=]Understand the command [=0x0022=]read[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]read [something][=0x0022=] or [=0x0022=]consult [something][=0x0022=] or [=0x0022=]read in/from [something][=0x0022=] as reading. Reading is an action applying to one thing, requiring light.[=0x000A=][=0x000A=]Understand [=0x0022=]read [number] in/from/of [something][=0x0022=] or [=0x0022=]read page [number] in/from/of [something][=0x0022=] or [=0x0022=]look up page [number] in/from/of [something][=0x0022=] or [=0x0022=]consult page [number] in/from/of [something][=0x0022=] as reading it in. Reading it in is an action applying to one number and one thing, requiring light.[=0x000A=][=0x000A=]Named page is a kind of value. The named pages are first page, last page, next page, previous page.[=0x000A=][=0x000A=]To decide what number is the effective value of (L - last page):[=0x000A=][=0x0009=]decide on the length of the book.[=0x000A=][=0x000A=]To decide what number is the effective value of (F - first page):[=0x000A=][=0x0009=]decide on 1.[=0x000A=][=0x000A=]To decide what number is the effective value of (N - next page):[=0x000A=][=0x0009=]let X be the last page read of the book plus 1;[=0x000A=][=0x0009=]decide on X.[=0x000A=][=0x000A=]To decide what number is the effective value of (P - previous page):[=0x000A=][=0x0009=]let X be the last page read of the book minus 1;[=0x000A=][=0x0009=]decide on X.[=0x000A=][=0x000A=]Understand [=0x0022=]read [named page] in/from/of [something][=0x0022=] or [=0x0022=]read the [named page] in/from/of [something][=0x0022=] as reading it relatively in. Reading it relatively in is an action applying to one named page and one thing, requiring light.[=0x000A=][=0x000A=]Does the player mean reading something in the sinister book: it is very likely.[=0x000A=][=0x000A=]This is the book requirement rule:[=0x000A=][=0x0009=]if the player is not carrying the sinister book, say [=0x0022=]You[=0x0027=]re not reading anything.[=0x0022=] instead.[=0x000A=][=0x000A=]Check reading it relatively in:[=0x000A=][=0x0009=]if the second noun is not the sinister book, say [=0x0022=]There are no pages in [the second noun].[=0x0022=] instead;[=0x000A=][=0x0009=]abide by the book requirement rule.[=0x000A=][=0x000A=]Carry out reading it relatively in:[=0x000A=][=0x0009=]let N be the effective value of the named page understood;[=0x000A=][=0x0009=]now the number understood is N;[=0x000A=][=0x0009=]try reading N in the book.[=0x000A=][=0x000A=]Check reading it in:[=0x000A=][=0x0009=]if the second noun is not the sinister book, say [=0x0022=]There are no pages in [the second noun].[=0x0022=] instead;[=0x000A=][=0x0009=]abide by the book requirement rule.[=0x000A=][=0x000A=]Check reading it in:[=0x000A=][=0x0009=]if the number understood is greater than the length of the sinister book, say [=0x0022=]There are only [length of sinister book in words] pages in the book.[=0x0022=] instead;[=0x000A=][=0x0009=]if the number understood is less than 1, say [=0x0022=]The page numbering begins with 1.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out reading it in:[=0x000A=][=0x0009=]read page number understood.[=0x000A=][=0x000A=]Check reading:[=0x000A=][=0x0009=]if the noun is not the sinister book, say [=0x0022=]There are no pages in [the noun].[=0x0022=] instead;[=0x000A=][=0x0009=]abide by the book requirement rule.[=0x000A=][=0x000A=]Carry out reading:[=0x000A=][=0x0009=]let N be a random number between 1 and the length of the sinister book; now the number understood is N;[=0x000A=][=0x0009=]say [=0x0022=]You flip the pages randomly and arrive at page [the number understood]:[paragraph break][=0x0022=];[=0x000A=][=0x0009=]try reading the number understood in the sinister book.[=0x000A=][=0x000A=]Table of Book Contents[=0x000A=]page[=0x0009=]content[=0x000A=]2[=0x0009=][=0x0022=]dhuma jyotih salila marutam / samnipatah kva meghah / samdes arthah kva patukaranaih / pranibhih prapaniyah[=0x0022=][=0x000A=]13[=0x0009=][=0x0022=]amathesteron pws eipe kai saphesteron[=0x0022=][=0x000A=]50[=0x0009=][=0x0022=]Rrgshilz maplot...[=0x0022=][=0x000A=][=0x000A=]To read page (N - a number):[=0x000A=][=0x0009=]now the last page read of the sinister book is N;[=0x000A=][=0x0009=]if there is a content corresponding to a page of N in the Table of Book Contents:[=0x000A=][=0x0009=][=0x0009=]choose row with a page of N in the Table of Book Contents;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You read: [=0x0027=][content entry][=0x0027=][paragraph break][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Page [N] appears to be blank.[=0x0022=][=0x000A=][=0x000A=]To read page (N - 47):[=0x000A=][=0x0009=]say [=0x0022=]Your eyes burn; your ears ring. Beneath your gaze, the dreadful sigils writhe, reminding you of that which lies outside the edges of the universe...[=0x0022=];[=0x000A=][=0x0009=]end the story saying [=0x0022=]You have lost your remaining sanity[=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]read from the sinister book / read the book / read the next page / read page 2 / read previous page / g / read the first page / read the last page of the book / read the next page / read 47 in book[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Pages&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5774_194" -->
<a id="c5774_194"></a><blockquote class="code"><p class="quoted">
The Library is a room. The sinister book is carried by the player. The sinister book has a number called the last page read. The sinister book has a number called the length. The length of the sinister book is 50.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5775_194" -->
<a id="c5775_194"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;read&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5776_194" -->
<a id="c5776_194"></a><blockquote class="code"><p class="quoted">
Understand &quot;read [something]&quot; or &quot;consult [something]&quot; or &quot;read in/from [something]&quot; as reading. Reading is an action applying to one thing, requiring light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5777_194" -->
<a id="c5777_194"></a><blockquote class="code"><p class="quoted">
Understand &quot;read [number] in/from/of [something]&quot; or &quot;read page [number] in/from/of [something]&quot; or &quot;look up page [number] in/from/of [something]&quot; or &quot;consult page [number] in/from/of [something]&quot; as reading it in. Reading it in is an action applying to one number and one thing, requiring light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5778_194" -->
<a id="c5778_194"></a><blockquote class="code"><p class="quoted">
Named page is a kind of value. The named pages are first page, last page, next page, previous page.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5779_194" -->
<a id="c5779_194"></a><blockquote class="code"><p class="quoted">
To decide what number is the effective value of (L - last page):
<br />&#160;&#160;&#160;&#160;decide on the length of the book.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5780_194" -->
<a id="c5780_194"></a><blockquote class="code"><p class="quoted">
To decide what number is the effective value of (F - first page):
<br />&#160;&#160;&#160;&#160;decide on 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5781_194" -->
<a id="c5781_194"></a><blockquote class="code"><p class="quoted">
To decide what number is the effective value of (N - next page):
<br />&#160;&#160;&#160;&#160;let X be the last page read of the book plus 1;
<br />&#160;&#160;&#160;&#160;decide on X.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5782_194" -->
<a id="c5782_194"></a><blockquote class="code"><p class="quoted">
To decide what number is the effective value of (P - previous page):
<br />&#160;&#160;&#160;&#160;let X be the last page read of the book minus 1;
<br />&#160;&#160;&#160;&#160;decide on X.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5783_194" -->
<a id="c5783_194"></a><blockquote class="code"><p class="quoted">
Understand &quot;read [named page] in/from/of [something]&quot; or &quot;read the [named page] in/from/of [something]&quot; as reading it relatively in. Reading it relatively in is an action applying to one named page and one thing, requiring light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5784_194" -->
<a id="c5784_194"></a><blockquote class="code"><p class="quoted">
Does the player mean reading something in the sinister book: it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5785_194" -->
<a id="c5785_194"></a><blockquote class="code"><p class="quoted">
This is the book requirement rule:
<br />&#160;&#160;&#160;&#160;if the player is not carrying the sinister book, say &quot;You're not reading anything.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5786_194" -->
<a id="c5786_194"></a><blockquote class="code"><p class="quoted">
Check reading it relatively in:
<br />&#160;&#160;&#160;&#160;if the second noun is not the sinister book, say &quot;There are no pages in [the second noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;abide by the book requirement rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5787_194" -->
<a id="c5787_194"></a><blockquote class="code"><p class="quoted">
Carry out reading it relatively in:
<br />&#160;&#160;&#160;&#160;let N be the effective value of the named page understood;
<br />&#160;&#160;&#160;&#160;now the number understood is N;
<br />&#160;&#160;&#160;&#160;try reading N in the book.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5788_194" -->
<a id="c5788_194"></a><blockquote class="code"><p class="quoted">
Check reading it in:
<br />&#160;&#160;&#160;&#160;if the second noun is not the sinister book, say &quot;There are no pages in [the second noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;abide by the book requirement rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5789_194" -->
<a id="c5789_194"></a><blockquote class="code"><p class="quoted">
Check reading it in:
<br />&#160;&#160;&#160;&#160;if the number understood is greater than the length of the sinister book, say &quot;There are only [length of sinister book in words] pages in the book.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the number understood is less than 1, say &quot;The page numbering begins with 1.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5790_194" -->
<a id="c5790_194"></a><blockquote class="code"><p class="quoted">
Carry out reading it in:
<br />&#160;&#160;&#160;&#160;read page number understood.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5791_194" -->
<a id="c5791_194"></a><blockquote class="code"><p class="quoted">
Check reading:
<br />&#160;&#160;&#160;&#160;if the noun is not the sinister book, say &quot;There are no pages in [the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;abide by the book requirement rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5792_194" -->
<a id="c5792_194"></a><blockquote class="code"><p class="quoted">
Carry out reading:
<br />&#160;&#160;&#160;&#160;let N be a random number between 1 and the length of the sinister book; now the number understood is N;
<br />&#160;&#160;&#160;&#160;say &quot;You flip the pages randomly and arrive at page [the number understood]:[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;try reading the number understood in the sinister book.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5793_194" -->
<a id="c5793_194"></a><blockquote class="code"><p class="quoted">
Table of Book Contents
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">page</p></td><td class="quotedtablecell"><p class="quoted">content</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">&quot;dhuma jyotih salila marutam / samnipatah kva meghah / samdes arthah kva patukaranaih / pranibhih prapaniyah&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">13</p></td><td class="quotedtablecell"><p class="quoted">&quot;amathesteron pws eipe kai saphesteron&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">50</p></td><td class="quotedtablecell"><p class="quoted">&quot;Rrgshilz maplot...&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5794_194" -->
<a id="c5794_194"></a><blockquote class="code"><p class="quoted">
To read page (N - a number):
<br />&#160;&#160;&#160;&#160;now the last page read of the sinister book is N;
<br />&#160;&#160;&#160;&#160;if there is a content corresponding to a page of N in the Table of Book Contents:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row with a page of N in the Table of Book Contents;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You read: '[content entry]'[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Page [N] appears to be blank.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5795_194" -->
<a id="c5795_194"></a><blockquote class="code"><p class="quoted">
To read page (N - 47):
<br />&#160;&#160;&#160;&#160;say &quot;Your eyes burn; your ears ring. Beneath your gaze, the dreadful sigils writhe, reminding you of that which lies outside the edges of the universe...&quot;;
<br />&#160;&#160;&#160;&#160;end the story saying &quot;You have lost your remaining sanity&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5796_194" -->
<a id="c5796_194"></a><blockquote class="code"><p class="quoted">
Test me with &quot;read from the sinister book / read the book / read the next page / read page 2 / read previous page / g / read the first page / read the last page of the book / read the next page / read 47 in book&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "304: Down in Oodville" "e236" -->
<a id="e236"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example236'); return false;"><b>304</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example236'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Down in Oodville</span></b></a><br />Offering the player a choice of numbered options at certain times, without otherwise interfering with his ability to give regular commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc46.html#e236"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example236" style="display: none;">
<p>Now and then in IF there is a situation where we need to ask the player for a numbered choice rather than an ordinary action command. What's more, that numbered choice might change during the game, so we don't want to just hard-wire the meanings of &quot;1&quot;, &quot;2&quot;, and &quot;3&quot; whenever the player types them.</p>
<p>A better trick is to keep a list or table (we'll use a table here because it involves slightly less overhead) recording what the player's numerical choices currently mean. Then every time the player selects a number, the table is consulted, and if the number corresponds to something, the player's choice is acted on.</p>
<p>In our example, we'll have a transporter pad that can take the player to any room in the game that he's already visited. (Just for the sake of example, we'll start him off with a few pre-visited rooms.)</p>
<!-- START CODE "c5797_236" -->
<a id="c5797_236"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Down in Oodville[=0x0022=][=0x000A=][=0x000A=]Section 1 - Method[=0x000A=][=0x000A=]Understand [=0x0022=][number][=0x0022=] as selecting.[=0x000A=][=0x000A=]Selecting is an action applying to one number.[=0x000A=][=0x000A=]Check selecting: [assuming we don[=0x0027=]t want to be able to transport from just anywhere][=0x000A=][=0x0009=]if the player is not on the transporter pad:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]empty the transport options instead.[=0x000A=][=0x000A=]Check selecting:[=0x000A=][=0x0009=]if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The number understood] is not a valid option. [=0x0022=];[=0x000A=][=0x0009=][=0x0009=]list the transport options instead.[=0x000A=][=0x000A=]Carry out selecting:[=0x000A=][=0x0009=]let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand][=0x000A=][=0x0009=]choose row N in the Table of Transport Options;[=0x000A=][=0x0009=]if the transport entry is a room:[=0x000A=][=0x0009=][=0x0009=]move the player to the transport entry;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]*** BUG: Improperly filled table of transport options ***[=0x0022=] [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code][=0x000A=][=0x000A=]To list the transport options:[=0x000A=][=0x0009=]let N be 1;[=0x000A=][=0x0009=]say [=0x0022=]From here you could choose to go to: [line break][=0x0022=];[=0x000A=][=0x0009=]repeat through the Table of Transport Options:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]  [N]: [transport entry][line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]increment N.[=0x000A=][=0x000A=]To empty the transport options:[=0x000A=][=0x0009=]repeat through the Table of Transport Options:[=0x000A=][=0x0009=][=0x0009=]blank out the whole row; [first we empty the table][=0x000A=][=0x000A=]To load the transport options:[=0x000A=][=0x0009=]repeat with interesting room running through visited rooms which are not the Transporter Room:[=0x000A=][=0x0009=][=0x0009=]choose a blank row in the Table of Transport Options;[=0x000A=][=0x0009=][=0x0009=]now the transport entry is the interesting room.[=0x000A=][=0x000A=]Table of Transport Options[=0x000A=]transport[=0x000A=]an object[=0x000A=]with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.][=0x000A=][=0x000A=][=0x000A=]Understand [=0x0022=]home[=0x0022=] as homing. Homing is an action applying to nothing.[=0x000A=][=0x000A=]Check homing:[=0x000A=][=0x0009=]if the player is in the Transporter Room:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re already here![=0x0022=] instead.[=0x000A=][=0x000A=]Carry out homing:[=0x000A=][=0x0009=]move the player to the transporter room.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Transporter Room is a room.[=0x000A=][=0x000A=]Oodville is a visited room.[=0x000A=][=0x000A=]Midnight is a visited room. The Diamond City is west of Midnight.[=0x000A=][=0x000A=]The transporter pad is an enterable supporter in the Transporter Room. [=0x0022=]The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied.[=0x0022=][=0x000A=][=0x000A=]After entering the transporter pad:[=0x000A=][=0x0009=]say [=0x0022=]The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on][=0x0022=];[=0x000A=][=0x0009=]empty the transport options;[=0x000A=][=0x0009=]load the transport options;[=0x000A=][=0x0009=]list the transport options.[=0x000A=][=0x000A=]Test me with [=0x0022=]get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Down in Oodville&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5798_236" -->
<a id="c5798_236"></a><blockquote class="code"><p class="quoted">
Section 1 - Method
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5799_236" -->
<a id="c5799_236"></a><blockquote class="code"><p class="quoted">
Understand &quot;[number]&quot; as selecting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5800_236" -->
<a id="c5800_236"></a><blockquote class="code"><p class="quoted">
Selecting is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5801_236" -->
<a id="c5801_236"></a><blockquote class="code"><p class="quoted">
Check selecting: [assuming we don't want to be able to transport from just anywhere]
<br />&#160;&#160;&#160;&#160;if the player is not on the transporter pad:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;empty the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5802_236" -->
<a id="c5802_236"></a><blockquote class="code"><p class="quoted">
Check selecting:
<br />&#160;&#160;&#160;&#160;if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The number understood] is not a valid option. &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5803_236" -->
<a id="c5803_236"></a><blockquote class="code"><p class="quoted">
Carry out selecting:
<br />&#160;&#160;&#160;&#160;let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand]
<br />&#160;&#160;&#160;&#160;choose row N in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;if the transport entry is a room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the player to the transport entry;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;*** BUG: Improperly filled table of transport options ***&quot; [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5804_236" -->
<a id="c5804_236"></a><blockquote class="code"><p class="quoted">
To list the transport options:
<br />&#160;&#160;&#160;&#160;let N be 1;
<br />&#160;&#160;&#160;&#160;say &quot;From here you could choose to go to: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [N]: [transport entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5805_236" -->
<a id="c5805_236"></a><blockquote class="code"><p class="quoted">
To empty the transport options:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row; [first we empty the table]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5806_236" -->
<a id="c5806_236"></a><blockquote class="code"><p class="quoted">
To load the transport options:
<br />&#160;&#160;&#160;&#160;repeat with interesting room running through visited rooms which are not the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose a blank row in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the transport entry is the interesting room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5807_236" -->
<a id="c5807_236"></a><blockquote class="code"><p class="quoted">
Table of Transport Options
<br />transport
<br />an object
<br />with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5808_236" -->
<a id="c5808_236"></a><blockquote class="code"><p class="quoted">
Understand &quot;home&quot; as homing. Homing is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5809_236" -->
<a id="c5809_236"></a><blockquote class="code"><p class="quoted">
Check homing:
<br />&#160;&#160;&#160;&#160;if the player is in the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're already here!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5810_236" -->
<a id="c5810_236"></a><blockquote class="code"><p class="quoted">
Carry out homing:
<br />&#160;&#160;&#160;&#160;move the player to the transporter room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5811_236" -->
<a id="c5811_236"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5812_236" -->
<a id="c5812_236"></a><blockquote class="code"><p class="quoted">
The Transporter Room is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5813_236" -->
<a id="c5813_236"></a><blockquote class="code"><p class="quoted">
Oodville is a visited room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5814_236" -->
<a id="c5814_236"></a><blockquote class="code"><p class="quoted">
Midnight is a visited room. The Diamond City is west of Midnight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5815_236" -->
<a id="c5815_236"></a><blockquote class="code"><p class="quoted">
The transporter pad is an enterable supporter in the Transporter Room. &quot;The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5816_236" -->
<a id="c5816_236"></a><blockquote class="code"><p class="quoted">
After entering the transporter pad:
<br />&#160;&#160;&#160;&#160;say &quot;The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;empty the transport options;
<br />&#160;&#160;&#160;&#160;load the transport options;
<br />&#160;&#160;&#160;&#160;list the transport options.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5817_236" -->
<a id="c5817_236"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to replace the regular command structure entirely with numbered menus, or use menus to hold conversation options, we could: several Inform extensions provide these functions.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "305: Straw Into Gold" "e93" -->
<a id="e93"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example93'); return false;"><b>305</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example93'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Straw Into Gold</span></b></a><br />Creating a Rumpelstiltskin character who is always referred to as "dwarf", "guy", "dude", or "man" -- depending on which the player last used -- until the first time the player refers to him as "Rumpelstiltskin".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc5.html#e93"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example93" style="display: none;">
<!-- START CODE "c5818_93" -->
<a id="c5818_93"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Straw Into Gold[=0x0022=][=0x000A=][=0x000A=]The Cell is a room. Rumpelstiltskin is an improper-named man in the Cell.  Rumpelstiltskin can be identified or unidentified. Rumpelstiltskin is unidentified.[=0x000A=][=0x000A=]R-name is a kind of value. The R-names are dwarf, guy, dude, and man-thing. Rumpelstiltskin has an R-name. Understand [=0x0022=][R-name][=0x0022=] as Rumpelstiltskin.[=0x000A=][=0x000A=][Our example is slightly complicated by the fact that [=0x0022=]man[=0x0022=] is a name already known to Inform, so we can[=0x0027=]t re-use it as a kind of value. This is possible to work around, though:][=0x000A=][=0x000A=]Understand [=0x0022=]man[=0x0022=] as man-thing.[=0x000A=][=0x000A=][Now we borrow from the Activities chapter to look at the exact wording of the player[=0x0027=]s command:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=][R-name][=0x0022=],[=0x000A=][=0x0009=][=0x0009=]now the R-name of Rumpelstiltskin is the R-name understood;[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=]Rumpelstiltskin[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]now Rumpelstiltskin is identified;[=0x000A=][=0x0009=][=0x0009=]now Rumpelstiltskin is proper-named.[=0x000A=][=0x000A=]Rule for printing the name of Rumpelstiltskin when Rumpelstiltskin is unidentified:[=0x000A=][=0x0009=]if the R-name of Rumpelstiltskin is man-thing:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]man[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][R-name][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]x dwarf / x guy / x dude / look / x rumpelstiltskin / look / x man[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Straw Into Gold&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5819_93" -->
<a id="c5819_93"></a><blockquote class="code"><p class="quoted">
The Cell is a room. Rumpelstiltskin is an improper-named man in the Cell.  Rumpelstiltskin can be identified or unidentified. Rumpelstiltskin is unidentified.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5820_93" -->
<a id="c5820_93"></a><blockquote class="code"><p class="quoted">
R-name is a kind of value. The R-names are dwarf, guy, dude, and man-thing. Rumpelstiltskin has an R-name. Understand &quot;[R-name]&quot; as Rumpelstiltskin.
</p></blockquote>
<!-- END CODE -->
<p>Our example is slightly complicated by the fact that &quot;man&quot; is a name already known to Inform, so we can't re-use it as a kind of value. This is possible to work around, though:</p>
<!-- START CODE "c5821_93" -->
<a id="c5821_93"></a><blockquote class="code"><p class="quoted">
Understand &quot;man&quot; as man-thing.
</p></blockquote>
<!-- END CODE -->
<p>Now we borrow from the Activities chapter to look at the exact wording of the player's command:</p>
<!-- START CODE "c5822_93" -->
<a id="c5822_93"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;[R-name]&quot;,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the R-name of Rumpelstiltskin is the R-name understood;
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;Rumpelstiltskin&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now Rumpelstiltskin is identified;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now Rumpelstiltskin is proper-named.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5823_93" -->
<a id="c5823_93"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of Rumpelstiltskin when Rumpelstiltskin is unidentified:
<br />&#160;&#160;&#160;&#160;if the R-name of Rumpelstiltskin is man-thing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;man&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[R-name]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5824_93" -->
<a id="c5824_93"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x dwarf / x guy / x dude / look / x rumpelstiltskin / look / x man&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc272.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc274.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
