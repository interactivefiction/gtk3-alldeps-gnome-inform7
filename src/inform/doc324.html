<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>18.38. Printing the player's obituary</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Printing the player's obituary" -->
<!-- SEARCH SECTION "18.38" -->
<!-- SEARCH SORT "000-018-038-000" -->
<!-- START IGNORE 323 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc323.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 18: Activities</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc325.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง18.38. Printing the player's obituary</p>
<p><span class="boldface">1. When it happens.</span> The obituary is the text &quot;*** You have died ***&quot; or similar, sometimes followed by a final score, if the appropriate use option (&quot;Use scoring.&quot;) is in force.</p>
<p><span class="boldface">2. The default behaviour.</span> Printing the aforementioned text, then the final score, and reducing the status line to a largely blank state.</p>
<p><span class="boldface">3. Examples.</span> Here's one way to add to the verdict of history:</p>
<!-- START CODE "c7319" -->
<a id="c7319"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('After printing the player[=0x0027=]s obituary: say [=0x0022=]And you visited [number of visited rooms] place[s].[=0x0022=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> After printing the player's obituary: say &quot;And you visited [number of visited rooms] place[s].&quot;
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "383: Jamaica 1688" "e264" -->
<a id="e264"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example264'); return false;"><b>383</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example264'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Jamaica 1688</span></b></a><br />Adding a feature to the final question after victory, so that the player can choose to reveal notes about items in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc96.html#e264"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example264" style="display: none;">
<p>The options offered to the player at the end of the game are listed in the Table of Final Question Options, which means that we can add to them simply by continuing the table; what's more, the table gives us the opportunity to create a &quot;final response rule&quot;, a rule that the game should follow in order to parse the player's input at this point.</p>
<p>So, for instance, if we wanted the player to be allowed to ask for notes about any of the rooms, characters, or objects in a historical game:</p>
<!-- START CODE "c7320_264" -->
<a id="c7320_264"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Jamaica 1688[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Table of Final Question Options (continued)[=0x000A=]final question wording[=0x0009=]only if victorious[=0x0009=]topic[=0x0009=]final response rule[=0x0009=]final response activity[=0x000A=][=0x0022=]REVEAL the inspiration for something or somewhere[=0x0022=][=0x0009=]true[=0x0009=][=0x0022=]reveal [any thing][=0x0022=][=0x0009=]investigate something rule[=0x0009=]--[=0x000A=]--[=0x0009=]true[=0x0009=][=0x0022=]reveal [any room][=0x0022=][=0x0009=]investigate something rule[=0x0009=]--[=0x000A=][=0x000A=]This is the investigate something rule:[=0x000A=][=0x0009=]repeat through the Table of Footnotey Stuff:[=0x000A=][=0x0009=][=0x0009=]if the player[=0x0027=]s command matches the topic entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][revelation entry][paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=]I[=0x0027=]m afraid I have no revelation to vouchsafe there.[=0x0022=][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Upper Deck is a room. Lucius is a man in the Upper Deck.[=0x000A=][=0x000A=]The maximum score is 501.[=0x000A=][=0x000A=]When play begins: now the score is 501; end the story finally.[=0x000A=][=0x000A=]Table of Footnotey Stuff[=0x000A=]topic[=0x0009=]revelation[=0x000A=][=0x0022=]reveal [Lucius][=0x0022=][=0x0009=][=0x0022=]Lucius is based on a historical buccaneer who sailed with William Dampier. The original did carry a Greek New Testament, from which he read aloud when the men were stranded in the jungles near Panama.[=0x0022=][=0x000A=][=0x0022=]reveal [Upper Deck][=0x0022=][=0x0009=][=0x0022=]The Callisto is a simplified and tidied representation of a pirate sloop ca. 1688.[=0x0022=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Jamaica 1688&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7321_264" -->
<a id="c7321_264"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7322_264" -->
<a id="c7322_264"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7323_264" -->
<a id="c7323_264"></a><blockquote class="code"><p class="quoted">
Table of Final Question Options (continued)
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">final question wording</p></td><td class="quotedtablecell"><p class="quoted">only if victorious</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">final response rule</p></td><td class="quotedtablecell"><p class="quoted">final response activity</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;REVEAL the inspiration for something or somewhere&quot;</p></td><td class="quotedtablecell"><p class="quoted">true</p></td><td class="quotedtablecell"><p class="quoted">&quot;reveal [any thing]&quot;</p></td><td class="quotedtablecell"><p class="quoted">investigate something rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">--</p></td><td class="quotedtablecell"><p class="quoted">true</p></td><td class="quotedtablecell"><p class="quoted">&quot;reveal [any room]&quot;</p></td><td class="quotedtablecell"><p class="quoted">investigate something rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7324_264" -->
<a id="c7324_264"></a><blockquote class="code"><p class="quoted">
This is the investigate something rule:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Footnotey Stuff:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player's command matches the topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[revelation entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;I'm afraid I have no revelation to vouchsafe there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7325_264" -->
<a id="c7325_264"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7326_264" -->
<a id="c7326_264"></a><blockquote class="code"><p class="quoted">
The Upper Deck is a room. Lucius is a man in the Upper Deck.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7327_264" -->
<a id="c7327_264"></a><blockquote class="code"><p class="quoted">
The maximum score is 501.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7328_264" -->
<a id="c7328_264"></a><blockquote class="code"><p class="quoted">
When play begins: now the score is 501; end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7329_264" -->
<a id="c7329_264"></a><blockquote class="code"><p class="quoted">
Table of Footnotey Stuff
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">revelation</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;reveal [Lucius]&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Lucius is based on a historical buccaneer who sailed with William Dampier. The original did carry a Greek New Testament, from which he read aloud when the men were stranded in the jungles near Panama.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;reveal [Upper Deck]&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;The Callisto is a simplified and tidied representation of a pirate sloop ca. 1688.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "384: Finality" "e322" -->
<a id="e322"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example322'); return false;"><b>384</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example322'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Finality</span></b></a><br />Not mentioning UNDO in the final set of options.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc96.html#e322"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example322" style="display: none;">
<p>By default, Inform reminds the player that he has the option of typing UNDO after a story-ending action. This is generally good practice, especially for the sake of novice players who might not be aware of this possibility otherwise, and might be frustrated by a loss they could easily step back from.</p>
<p>Just occasionally, though, we may decide that the player does not deserve any such notification:</p>
<!-- START CODE "c7330_322" -->
<a id="c7330_322"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Finality[=0x0022=][=0x000A=][=0x000A=]Cliff Edge is a room. [=0x0022=]This narrow strip overlooks a gorge many hundreds of feet deep, at whose bottom is a river of molten lava. The walls of the gorge are lined with poison-tipped spikes. Furthermore, the birds that inhabit this valley spit balls of fire. Good thing you[=0x0027=]re safe up here.[=0x0022=][=0x000A=][=0x000A=][The Table of Final Question Options determines what options are to be given to the player after the story ends. We can change what is mentioned there by altering the entries. (The example Jamaica 1688 explains this table in more detail, and demonstrates some other things that we might do with it.)][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]choose row with a final response rule of immediately undo rule in the Table of Final Question Options;[=0x000A=][=0x0009=]blank out the final question wording entry.[=0x000A=][=0x000A=]Instead of jumping:[=0x000A=][=0x0009=]say [=0x0022=]If you insist.[=0x0022=];[=0x000A=][=0x0009=]end the story.[=0x000A=][=0x000A=][And if we decided that we didn[=0x0027=]t want the player to be able to undo the command at all, we should add the use option][=0x000A=][=0x000A=]Use undo prevention.[=0x000A=][=0x000A=]Test me with [=0x0022=]jump[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Finality&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7331_322" -->
<a id="c7331_322"></a><blockquote class="code"><p class="quoted">
Cliff Edge is a room. &quot;This narrow strip overlooks a gorge many hundreds of feet deep, at whose bottom is a river of molten lava. The walls of the gorge are lined with poison-tipped spikes. Furthermore, the birds that inhabit this valley spit balls of fire. Good thing you're safe up here.&quot;
</p></blockquote>
<!-- END CODE -->
<p>The Table of Final Question Options determines what options are to be given to the player after the story ends. We can change what is mentioned there by altering the entries. (The example Jamaica 1688 explains this table in more detail, and demonstrates some other things that we might do with it.)</p>
<!-- START CODE "c7332_322" -->
<a id="c7332_322"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;choose row with a final response rule of immediately undo rule in the Table of Final Question Options;
<br />&#160;&#160;&#160;&#160;blank out the final question wording entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7333_322" -->
<a id="c7333_322"></a><blockquote class="code"><p class="quoted">
Instead of jumping:
<br />&#160;&#160;&#160;&#160;say &quot;If you insist.&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<p>And if we decided that we didn't want the player to be able to undo the command at all, we should add the use option</p>
<!-- START CODE "c7334_322" -->
<a id="c7334_322"></a><blockquote class="code"><p class="quoted">
Use undo prevention.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7335_322" -->
<a id="c7335_322"></a><blockquote class="code"><p class="quoted">
Test me with &quot;jump&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "385: Battle of Ridgefield" "e447" -->
<a id="e447"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example447'); return false;"><b>385</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example447'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Battle of Ridgefield</span></b></a><br />Completely replacing the endgame text and stopping the game without giving the player a chance to restart or restore.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc96.html#e447"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example447" style="display: none;">
<p>Occasionally, a piece of IF is sufficiently serious that it feels bathetic to offer the player the usual restore-restart-undo-quit options at the end. The following would replace &quot;*** You have died ***&quot; with a centered epitaph, then quit the game when the player hits a key.</p>
<p>This example relies on a standard extension to avoid any fancy programming:</p>
<!-- START CODE "c7336_447" -->
<a id="c7336_447"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Battle of Ridgefield[=0x0022=][=0x000A=][=0x000A=]Include Basic Screen Effects by Emily Short.[=0x000A=][=0x000A=]Ridgefield is a room.[=0x000A=][=0x000A=]Instead of doing something when the turn count is greater than 1: say [=0x0022=]Alas, you no longer have the strength.[=0x0022=]; end the story.[=0x000A=][=0x000A=]Rule for printing the player[=0x0027=]s obituary:[=0x000A=][=0x0009=]say paragraph break;[=0x000A=][=0x0009=]center [=0x0022=]In defense of American Independence[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]at the Battle of Ridgefield, April 27, 1777,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]died Eight Patriots who were laid in this ground,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Companioned by Sixteen British Soldiers,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Living, their enemies,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Dying, their guests[=0x0022=];[=0x000A=][=0x0009=]say paragraph break;[=0x000A=][=0x0009=]wait for any key;[=0x000A=][=0x0009=]stop game abruptly;[=0x000A=][=0x0009=]rule succeeds.[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Battle of Ridgefield&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7337_447" -->
<a id="c7337_447"></a><blockquote class="code"><p class="quoted">
Include Basic Screen Effects by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7338_447" -->
<a id="c7338_447"></a><blockquote class="code"><p class="quoted">
Ridgefield is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7339_447" -->
<a id="c7339_447"></a><blockquote class="code"><p class="quoted">
Instead of doing something when the turn count is greater than 1: say &quot;Alas, you no longer have the strength.&quot;; end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7340_447" -->
<a id="c7340_447"></a><blockquote class="code"><p class="quoted">
Rule for printing the player's obituary:
<br />&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;center &quot;In defense of American Independence&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;at the Battle of Ridgefield, April 27, 1777,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;died Eight Patriots who were laid in this ground,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Companioned by Sixteen British Soldiers,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Living, their enemies,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Dying, their guests&quot;;
<br />&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;wait for any key;
<br />&#160;&#160;&#160;&#160;stop game abruptly;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc323.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc325.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
