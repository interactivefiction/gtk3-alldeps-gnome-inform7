<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>3.5. Doors, Staircases, and Bridges</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Doors, Staircases, and Bridges" -->
<!-- SEARCH SECTION "3.5" -->
<!-- SEARCH SORT "001-003-005-000" -->
<!-- START IGNORE 11 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc11.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 3: Place</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc13.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง3.5. Doors, Staircases, and Bridges</p>
<p>Inform's &quot;door&quot; kind provides for a tangible thing which comes between one room and another. A door can be open or closed, and openable or not: it can be locked or unlocked, and lockable or not. Here we create a conventional door, a natural gap in the rocks, and a (fixed in place) wooden ladder:</p>
<!-- START CODE "c10205" -->
<a id="c10205"></a><blockquote class="code"><p class="quoted">
The fire door is an open door. The fire door is east of the Projection Booth and west of the Fire Escape.
<br />The narrow crevice is an open unopenable door. The crevice is east of the Col du Prafleuri and west of Rocky Knoll Above Arolla.
<br />The wooden ladder is an open unopenable door. The ladder is above the Stableyard and below the Hay Loft.
</p></blockquote>
<!-- END CODE -->
<p>Most doors are visible from both sides: they are single objects but present in two rooms at once, which raises a number of complications. Inform normally uses the same description looking from each way, which is not very interesting: <span class="boldface">When?</span> and <span class="boldface">Whence?</span> demonstrate neat ways to describe the two sides differently, and <span class="boldface">Whither?</span> adds the option for the player to refer to doors as &quot;the west door&quot; and &quot;the east door&quot; automatically.</p>
<p><span class="boldface">Neighbourhood Watch</span> goes further by making a door behave differently on each side: from the &quot;outside&quot; you need a key, but &quot;inside&quot; it opens on a latch. Finally, <span class="boldface">Garibaldi 1</span> shows how to access information about the two sides of a door.</p>
<p><span class="boldface">Higher Calling</span> demonstrates doors which automatically open as needed: though using the Inform extension Locksmith by Emily Short is probably easier and better. <span class="boldface">Elsie</span>, conversely, demonstrates a door that closes one turn after the player has opened it.</p>
<p>Certain complications apply when characters other than the player have to see and interact with doors that exist in other rooms. <span class="boldface">Wainwright Acts</span> demonstrates the syntax needed to handle this technically quirky situation.</p>
<p><span class="boldface">Something Narsty</span> and <span class="boldface">Hayseed</span> provide a &quot;staircase&quot; kind useful for vertically arranged, always-open doors like staircases and (fixed in place) ladders.</p>
<p><span class="boldface">One Short Plank</span> implements a precarious plank bridge across a chasm as an open unopenable door.</p>
<p class="crossreference"><a href="Rdoc13.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Windows</b></a><i> for climbing through a window from one room to another</i></p><p class="crossreference"><a href="Rdoc85.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Ropes</b></a><i> for portable connections between rooms, much of the development of which could be adapted to handle portable ladders. &quot;Doors&quot; are never allowed to move</i></p><p class="crossreference"><a href="Rdoc89.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Magic (Breaking the Laws of Physics)</b></a><i> for a hat that lets the player walk through closed doors</i></p><p class="crossreference"><a href="Rdoc31.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Modifying Existing Commands</b></a><i> for ways to allow the player to unlock with a key he isn't currently holding</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "45: Something Narsty" "e403" -->
<a id="e403"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example403'); return false;"><b>45</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example403'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Something Narsty</span></b></a><br />A staircase always open and never openable.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc54.html#e403"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example403" style="display: none;">
<p>In a game with many staircases, we might want:</p>
<!-- START CODE "c10206_403" -->
<a id="c10206_403"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('A staircase is a kind of door. A staircase is always open. A staircase is never openable.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> A staircase is a kind of door. A staircase is always open. A staircase is never openable.
</p></blockquote>
<!-- END CODE -->
<p>Defining the staircase this way means that we will never be able to get away with (for instance) a folding ladder into the attic which is sometimes closed up. So alternatively we might do</p>
<!-- START CODE "c10207_403" -->
<a id="c10207_403"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Something Narsty[=0x0022=][=0x000A=][=0x000A=]A staircase is a kind of door. A staircase is usually open. A staircase is seldom openable.[=0x000A=][=0x000A=][We could then write a rule so that whenever the player types CLIMB [any staircase], the command is diverted to an enter command, while all other doors refuse to respond to such treatment. Still, this kind is now usable, as we see in this trivial example:][=0x000A=][=0x000A=]The ladder is a staircase. It is above the Woodshed and below the Scary Loft.[=0x000A=][=0x000A=]Test me with [=0x0022=]up[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Something Narsty&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10208_403" -->
<a id="c10208_403"></a><blockquote class="code"><p class="quoted">
A staircase is a kind of door. A staircase is usually open. A staircase is seldom openable.
</p></blockquote>
<!-- END CODE -->
<p>We could then write a rule so that whenever the player types CLIMB [any staircase], the command is diverted to an enter command, while all other doors refuse to respond to such treatment. Still, this kind is now usable, as we see in this trivial example:</p>
<!-- START CODE "c10209_403" -->
<a id="c10209_403"></a><blockquote class="code"><p class="quoted">
The ladder is a staircase. It is above the Woodshed and below the Scary Loft.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10210_403" -->
<a id="c10210_403"></a><blockquote class="code"><p class="quoted">
Test me with &quot;up&quot;.
</p></blockquote>
<!-- END CODE -->
<p>But these are refinements for a later chapter.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "63: When?" "e244" -->
<a id="e244"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example244'); return false;"><b>63</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example244'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">When?</span></b></a><br />A door whose description says "...leads east" in one place and "...leads west" in the other.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc74.html#e244"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example244" style="display: none;">
<p>Very simple, but quite frequently useful:</p>
<!-- START CODE "c10211_244" -->
<a id="c10211_244"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]When?[=0x0022=][=0x000A=][=0x000A=]The temporal vortex is an open door. It is west of Yesterday and east of Today. [=0x0022=]A whirling temporal vortex leads [if the player is in Yesterday]west[otherwise]east[end if].[=0x0022=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;When?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10212_244" -->
<a id="c10212_244"></a><blockquote class="code"><p class="quoted">
The temporal vortex is an open door. It is west of Yesterday and east of Today. &quot;A whirling temporal vortex leads [if the player is in Yesterday]west[otherwise]east[end if].&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "88: Hayseed" "e232" -->
<a id="e232"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example232'); return false;"><b>88</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example232'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Hayseed</span></b></a><br />A refinement of our staircase kind which can be climbed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc101.html#e232"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example232" style="display: none;">
<p>Presumably all staircase-type connections between rooms should respond when the player says CLIMB STAIRS (or the equivalent). So</p>
<!-- START CODE "c10213_232" -->
<a id="c10213_232"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Hayseed[=0x0022=][=0x000A=][=0x000A=]A staircase is a kind of door. A staircase is usually open. A staircase is seldom openable.[=0x000A=][=0x000A=]The ladder is a staircase. It is above the Barn and below the Hayloft.[=0x000A=][=0x000A=]Instead of climbing a staircase:[=0x000A=][=0x0009=]try entering the noun.[=0x000A=][=0x000A=]Test me with [=0x0022=]climb ladder / g[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Hayseed&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10214_232" -->
<a id="c10214_232"></a><blockquote class="code"><p class="quoted">
A staircase is a kind of door. A staircase is usually open. A staircase is seldom openable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10215_232" -->
<a id="c10215_232"></a><blockquote class="code"><p class="quoted">
The ladder is a staircase. It is above the Barn and below the Hayloft.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10216_232" -->
<a id="c10216_232"></a><blockquote class="code"><p class="quoted">
Instead of climbing a staircase:
<br />&#160;&#160;&#160;&#160;try entering the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10217_232" -->
<a id="c10217_232"></a><blockquote class="code"><p class="quoted">
Test me with &quot;climb ladder / g&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Attempts to climb other types of door will still be treated as useless.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "128: Higher Calling" "e16" -->
<a id="e16"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example16'); return false;"><b>128</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example16'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Higher Calling</span></b></a><br />All doors in the game automatically attempt to open if the player approaches them when they are closed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc130.html#e16"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example16" style="display: none;">
<p>&quot;Called&quot; is quite useful in the context of rules about going, since go rules often refer to things other than the noun the player typed. For instance, suppose we want to have doors which politely open when the player tries to pass through them:</p>
<!-- START CODE "c10218_16" -->
<a id="c10218_16"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Higher Calling[=0x0022=][=0x000A=][=0x000A=]Before going through a closed door (called the blocking door):[=0x000A=][=0x0009=]say [=0x0022=](first opening [the blocking door])[line break][=0x0022=];[=0x000A=][=0x0009=]silently try opening the blocking door;[=0x000A=][=0x0009=]if the blocking door is closed, stop the action.[=0x000A=][=0x000A=]Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.[=0x000A=][=0x000A=]The church door is east of Eastern End and west of the Courtyard. The church door is a door.[=0x000A=][=0x000A=]Test me with [=0x0022=]e / e[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Higher Calling&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10219_16" -->
<a id="c10219_16"></a><blockquote class="code"><p class="quoted">
Before going through a closed door (called the blocking door):
<br />&#160;&#160;&#160;&#160;say &quot;(first opening [the blocking door])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try opening the blocking door;
<br />&#160;&#160;&#160;&#160;if the blocking door is closed, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10220_16" -->
<a id="c10220_16"></a><blockquote class="code"><p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10221_16" -->
<a id="c10221_16"></a><blockquote class="code"><p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10222_16" -->
<a id="c10222_16"></a><blockquote class="code"><p class="quoted">
Test me with &quot;e / e&quot;.
</p></blockquote>
<!-- END CODE -->
<p>A fuller set of such rules is included in the Locksmith extension.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "236: Wainwright Acts" "e304" -->
<a id="e304"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example304'); return false;"><b>236</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example304'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wainwright Acts</span></b></a><br />A technical note about checking the location of door objects when characters other than the player are interacting with them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc209.html#e304"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example304" style="display: none;">
<p>Suppose we wanted to write rules for a character who will interact with doors in other locations even when the player is not present. This poses a little challenge: doors are actually single objects, and -- with the same shuffling of stage properties that applies to backdrops -- they are moved as needed to represent the door object in whatever room contains the player.</p>
<p>That means that it isn't safe to rely on a phrase like</p>
<!-- START CODE "c10223_304" -->
<a id="c10223_304"></a><blockquote class="code"><p class="quoted">
if an open door is in the location of Bernard
</p></blockquote>
<!-- END CODE -->
<p>because, even if Bernard's location is connected by doors to other places, the actual representation of that door may not be &quot;in&quot; Bernard's location, from the model's point of view, at this exact moment.</p>
<p>This does not, of course, mean that we can't ask this question; just that we have to be a little cleverer about how we phrase it. Every door has properties that correspond to the two locations</p>
<p>linked:</p>
<!-- START CODE "c10224_304" -->
<a id="c10224_304"></a><blockquote class="code"><p class="quoted">
the front side of the blue door (a room, which is arbitrarily one side of the door)
<br />the back side of the blue door (arbitrarily the other side)
</p></blockquote>
<!-- END CODE -->
<p>We can make this information easier to check with a conditional relation, like so:</p>
<!-- START CODE "c10225_304" -->
<a id="c10225_304"></a><blockquote class="code"><p class="quoted">
Liminality relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to be a threshold of means the liminality relation.
</p></blockquote>
<!-- END CODE -->
<p>And this allows us to write rules that have characters interacting with doors even in the player's absence:</p>
<!-- START CODE "c10226_304" -->
<a id="c10226_304"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Wainwright Acts[=0x0022=][=0x000A=][=0x000A=]The Waiting Room is a room. The waiting room door is west of the Waiting Room and east of the Gents[=0x0027=] Loo. The Waiting Room door is an open door. [=0x0022=]The waiting room door [if open]stands open[otherwise]is shut firmly[end if].[=0x0022=][=0x000A=][=0x000A=]Sir Humphrey is a man in the Gents[=0x0027=] Loo.[=0x000A=][=0x000A=]Liminality relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to be a threshold of means the liminality relation.[=0x000A=][=0x000A=]Definition: a person is other if he is not the player.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]repeat with indiscreet one running through other people:[=0x000A=][=0x0009=][=0x0009=]repeat with port running through open doors that are a threshold of the location of the indiscreet one:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the port is a threshold of the location and the indiscreet one is not in the location:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]Through [the port], you overhear [the indiscreet one] discussing [one of]his hopes for your imminent resignation[or]your wife[=0x0027=]s infidelity[or]your financially straitened circumstances[or]ways to avoid attending your birthday party[or]your halitosis[as decreasingly likely outcomes].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / w / z / e / close door / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Wainwright Acts&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10227_304" -->
<a id="c10227_304"></a><blockquote class="code"><p class="quoted">
The Waiting Room is a room. The waiting room door is west of the Waiting Room and east of the Gents' Loo. The Waiting Room door is an open door. &quot;The waiting room door [if open]stands open[otherwise]is shut firmly[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10228_304" -->
<a id="c10228_304"></a><blockquote class="code"><p class="quoted">
Sir Humphrey is a man in the Gents' Loo.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10229_304" -->
<a id="c10229_304"></a><blockquote class="code"><p class="quoted">
Liminality relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to be a threshold of means the liminality relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10230_304" -->
<a id="c10230_304"></a><blockquote class="code"><p class="quoted">
Definition: a person is other if he is not the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10231_304" -->
<a id="c10231_304"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;repeat with indiscreet one running through other people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with port running through open doors that are a threshold of the location of the indiscreet one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the port is a threshold of the location and the indiscreet one is not in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Through [the port], you overhear [the indiscreet one] discussing [one of]his hopes for your imminent resignation[or]your wife's infidelity[or]your financially straitened circumstances[or]ways to avoid attending your birthday party[or]your halitosis[as decreasingly likely outcomes].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10232_304" -->
<a id="c10232_304"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / z / w / z / e / close door / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "319: Whither?" "e179" -->
<a id="e179"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example179'); return false;"><b>319</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example179'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Whither?</span></b></a><br />A door whose description says where it leads; and which automatically understands references such as "the west door" and "the east door" depending on which direction it leads from the location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc280.html#e179"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example179" style="display: none;">
<p>Here we expand on the simple examples When? and Whence?; this time we want the player to be able to refer to doors by their directions, as in &quot;the west door&quot; when the door in question does in fact lead west.</p>
<!-- START CODE "c10233_179" -->
<a id="c10233_179"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Whither?[=0x0022=][=0x000A=][=0x000A=]The temporal vortex is an open door. It is west of Yesterday and east of Today.[=0x000A=][=0x000A=]The initial appearance of a door is usually [=0x0022=]Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].[=0x0022=][=0x000A=][=0x000A=]Direction-relevance relates a door (called X) to a direction (called Y) when the direction of X from the location is Y. The verb to be directionally-relevant to means the direction-relevance relation.[=0x000A=][=0x000A=]Understand [=0x0022=][something related by direction-relevance] door[=0x0022=] as a door.[=0x000A=][=0x000A=][As an added touch, we respond also to the case where the player postulates a door in some direction when there is no such thing at the moment:][=0x000A=][=0x000A=]Rule for printing a parser error when the player[=0x0027=]s command includes [=0x0022=][non-door direction] door[=0x0022=]:[=0x000A=][=0x0009=]say [=0x0022=]There is no door in that direction.[=0x0022=] instead.[=0x000A=][=0x000A=]Definition: a direction (called direction D) is non-door:[=0x000A=][=0x0009=]let the target be the room-or-door direction D from the location;[=0x000A=][=0x0009=]if the target is a door:[=0x000A=][=0x0009=][=0x0009=]no;[=0x000A=][=0x0009=]yes;[=0x000A=][=0x000A=]Test me with [=0x0022=]examine west door / x east door / w / x w door / x e door / tie me to the west door / tie the west door to me / push the west door east / push the east door west[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Whither?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10234_179" -->
<a id="c10234_179"></a><blockquote class="code"><p class="quoted">
The temporal vortex is an open door. It is west of Yesterday and east of Today.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10235_179" -->
<a id="c10235_179"></a><blockquote class="code"><p class="quoted">
The initial appearance of a door is usually &quot;Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10236_179" -->
<a id="c10236_179"></a><blockquote class="code"><p class="quoted">
Direction-relevance relates a door (called X) to a direction (called Y) when the direction of X from the location is Y. The verb to be directionally-relevant to means the direction-relevance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10237_179" -->
<a id="c10237_179"></a><blockquote class="code"><p class="quoted">
Understand &quot;[something related by direction-relevance] door&quot; as a door.
</p></blockquote>
<!-- END CODE -->
<p>As an added touch, we respond also to the case where the player postulates a door in some direction when there is no such thing at the moment:</p>
<!-- START CODE "c10238_179" -->
<a id="c10238_179"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the player's command includes &quot;[non-door direction] door&quot;:
<br />&#160;&#160;&#160;&#160;say &quot;There is no door in that direction.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10239_179" -->
<a id="c10239_179"></a><blockquote class="code"><p class="quoted">
Definition: a direction (called direction D) is non-door:
<br />&#160;&#160;&#160;&#160;let the target be the room-or-door direction D from the location;
<br />&#160;&#160;&#160;&#160;if the target is a door:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;no;
<br />&#160;&#160;&#160;&#160;yes;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10240_179" -->
<a id="c10240_179"></a><blockquote class="code"><p class="quoted">
Test me with &quot;examine west door / x east door / w / x w door / x e door / tie me to the west door / tie the west door to me / push the west door east / push the east door west&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "24: Neighborhood Watch" "e404" -->
<a id="e404"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example404'); return false;"><b>24</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example404'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Neighborhood Watch</span></b></a><br />A locked door that can be locked or unlocked without a key from one side, but not from the other.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc38.html#e404"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example404" style="display: none;">
<p>Suppose we want a locked door that can be opened with a key, but is also openable by hand without a key from one side only. We start by defining an ordinary lockable door and the key that controls it:</p>
<!-- START CODE "c10241_404" -->
<a id="c10241_404"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Neighborhood Watch[=0x0022=][=0x000A=][=0x000A=]The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.[=0x000A=][=0x000A=]The brass key is carried by the player. It unlocks the shabby door.[=0x000A=][=0x000A=][The next part is going to require that we modify the normal operation of the [=0x0022=]lock[=0x0022=] command. [=0x0022=]Lock[=0x0022=] ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.][=0x000A=][=0x000A=][Therefore, we[=0x0027=]re going to need to create our own new variant on the lock verb (and the unlock verb, while we[=0x0027=]re at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:][=0x000A=][=0x000A=]Understand [=0x0022=]lock [something][=0x0022=] as locking keylessly. Locking keylessly is an action applying to one thing.[=0x000A=][=0x000A=][Here we[=0x0027=]ve created a new action -- locking something without a key -- and we[=0x0027=]ve told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.][=0x000A=][=0x000A=][Now we add some instructions so that the game will not let us use this keyless unlocking command unless we[=0x0027=]re in the right place or are properly equipped:][=0x000A=][=0x000A=]Check locking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is locked, say [=0x0022=][The noun] is already locked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t lock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=][This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.][=0x000A=][=0x000A=][The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word [=0x0022=]instead[=0x0022=], which tells Inform that we[=0x0027=]ve substituted some other outcome for the usual performance of the action.][=0x000A=][=0x000A=][Now we[=0x0027=]re reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:][=0x000A=][=0x000A=]Carry out locking keylessly:[=0x000A=][=0x0009=]now the noun is locked.[=0x000A=][=0x000A=][That[=0x0027=]s it. We[=0x0027=]ve just told Inform to make the door be locked. [=0x0022=]Now...[=0x0022=] syntax will be explained more thoroughly in the chapter on change. But we still haven[=0x0027=]t described to the player what just happened, so let[=0x0027=]s provide a description of that, too:][=0x000A=][=0x000A=]Report locking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to lock [the noun].[=0x0022=][=0x000A=][=0x000A=][And now we have to do a similar set of things for unlocking:][=0x000A=][=0x000A=]Understand [=0x0022=]unlock [something][=0x0022=] as unlocking keylessly. Unlocking keylessly is an action applying to one thing.[=0x000A=][=0x000A=]Check unlocking keylessly:[=0x000A=][=0x0009=]if the noun is not a door, say [=0x0022=][The noun] is not something you can lock.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is unlocked, say [=0x0022=][The noun] is already unlocked.[=0x0022=] instead;[=0x000A=][=0x0009=]if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;[=0x000A=][=0x0009=]if the player is in the Stairwell, say [=0x0022=]You can[=0x0027=]t unlock the door from this side without the key.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out unlocking keylessly:[=0x000A=][=0x0009=]now the noun is unlocked.[=0x000A=][=0x000A=]Report unlocking keylessly:[=0x000A=][=0x0009=]say [=0x0022=]You flip over the deadbolt to unlock [the noun].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Neighborhood Watch&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10242_404" -->
<a id="c10242_404"></a><blockquote class="code"><p class="quoted">
The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10243_404" -->
<a id="c10243_404"></a><blockquote class="code"><p class="quoted">
The brass key is carried by the player. It unlocks the shabby door.
</p></blockquote>
<!-- END CODE -->
<p>The next part is going to require that we modify the normal operation of the &quot;lock&quot; command. &quot;Lock&quot; ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.</p>
<p>Therefore, we're going to need to create our own new variant on the lock verb (and the unlock verb, while we're at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:</p>
<!-- START CODE "c10244_404" -->
<a id="c10244_404"></a><blockquote class="code"><p class="quoted">
Understand &quot;lock [something]&quot; as locking keylessly. Locking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<p>Here we've created a new action -- locking something without a key -- and we've told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.</p>
<p>Now we add some instructions so that the game will not let us use this keyless unlocking command unless we're in the right place or are properly equipped:</p>
<!-- START CODE "c10245_404" -->
<a id="c10245_404"></a><blockquote class="code"><p class="quoted">
Check locking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is locked, say &quot;[The noun] is already locked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't lock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.</p>
<p>The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word &quot;instead&quot;, which tells Inform that we've substituted some other outcome for the usual performance of the action.</p>
<p>Now we're reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:</p>
<!-- START CODE "c10246_404" -->
<a id="c10246_404"></a><blockquote class="code"><p class="quoted">
Carry out locking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is locked.
</p></blockquote>
<!-- END CODE -->
<p>That's it. We've just told Inform to make the door be locked. &quot;Now...&quot; syntax will be explained more thoroughly in the chapter on change. But we still haven't described to the player what just happened, so let's provide a description of that, too:</p>
<!-- START CODE "c10247_404" -->
<a id="c10247_404"></a><blockquote class="code"><p class="quoted">
Report locking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to lock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now we have to do a similar set of things for unlocking:</p>
<!-- START CODE "c10248_404" -->
<a id="c10248_404"></a><blockquote class="code"><p class="quoted">
Understand &quot;unlock [something]&quot; as unlocking keylessly. Unlocking keylessly is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10249_404" -->
<a id="c10249_404"></a><blockquote class="code"><p class="quoted">
Check unlocking keylessly:
<br />&#160;&#160;&#160;&#160;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is unlocked, say &quot;[The noun] is already unlocked.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;
<br />&#160;&#160;&#160;&#160;if the player is in the Stairwell, say &quot;You can't unlock the door from this side without the key.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10250_404" -->
<a id="c10250_404"></a><blockquote class="code"><p class="quoted">
Carry out unlocking keylessly:
<br />&#160;&#160;&#160;&#160;now the noun is unlocked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10251_404" -->
<a id="c10251_404"></a><blockquote class="code"><p class="quoted">
Report unlocking keylessly:
<br />&#160;&#160;&#160;&#160;say &quot;You flip over the deadbolt to unlock [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10252_404" -->
<a id="c10252_404"></a><blockquote class="code"><p class="quoted">
Test me with &quot;unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Some (but not all) of this work is done for you if you like by the Locksmith extension. If you prefer, you can include that extension, then follow the documentation in order to implement the remainder of the scenario. Locksmith takes care of implementing the additional locking and unlocking actions, and provides some other conveniences.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "106: One Short Plank" "e63" -->
<a id="e63"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example63'); return false;"><b>106</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example63'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">One Short Plank</span></b></a><br />A plank bridge which breaks if the player is carrying something when he goes across it. Pushing anything over the bridge is forbidden outright.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc111.html#e63"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example63" style="display: none;">
<!-- START CODE "c10253_63" -->
<a id="c10253_63"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]One Short Plank[=0x0022=][=0x000A=][=0x000A=]The East Jungle is a room. The plank bridge is west of the East Jungle and east of the West Jungle. The plank is an open unopenable door. [=0x0022=]A precarious plank bridge extends [if the location is West Jungle]east[otherwise]west[end if] across the chasm.[=0x0022=] The description of the plank is [=0x0022=]Extremely fragile and precarious.[=0x0022=][=0x000A=][=0x000A=]Instead of going through the plank when the player is carrying something:[=0x000A=][=0x0009=]say [=0x0022=]You step gingerly across the plank, which bows under your weight. But your meagre possessions are the straw which breaks the camel[=0x0027=]s back![=0x0022=];[=0x000A=][=0x0009=]end the story.[=0x000A=][=0x000A=]After going through the plank:[=0x000A=][=0x0009=]say [=0x0022=]You step gingerly across the plank, grateful that you[=0x0027=]re not burdened.[=0x0022=];[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]There is a feather in the East Jungle.[=0x000A=][=0x000A=][But indeed, why stop there?][=0x000A=][=0x000A=]The gigantic stone ball is a thing in the West Jungle. It is pushable between rooms.[=0x000A=][=0x000A=]Before going through the plank with something:[=0x000A=][=0x0009=]say [=0x0022=]Surely you jest.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]w / e / w / push ball e / e / get feather / w[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;One Short Plank&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10254_63" -->
<a id="c10254_63"></a><blockquote class="code"><p class="quoted">
The East Jungle is a room. The plank bridge is west of the East Jungle and east of the West Jungle. The plank is an open unopenable door. &quot;A precarious plank bridge extends [if the location is West Jungle]east[otherwise]west[end if] across the chasm.&quot; The description of the plank is &quot;Extremely fragile and precarious.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10255_63" -->
<a id="c10255_63"></a><blockquote class="code"><p class="quoted">
Instead of going through the plank when the player is carrying something:
<br />&#160;&#160;&#160;&#160;say &quot;You step gingerly across the plank, which bows under your weight. But your meagre possessions are the straw which breaks the camel's back!&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10256_63" -->
<a id="c10256_63"></a><blockquote class="code"><p class="quoted">
After going through the plank:
<br />&#160;&#160;&#160;&#160;say &quot;You step gingerly across the plank, grateful that you're not burdened.&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10257_63" -->
<a id="c10257_63"></a><blockquote class="code"><p class="quoted">
There is a feather in the East Jungle.
</p></blockquote>
<!-- END CODE -->
<p>But indeed, why stop there?</p>
<!-- START CODE "c10258_63" -->
<a id="c10258_63"></a><blockquote class="code"><p class="quoted">
The gigantic stone ball is a thing in the West Jungle. It is pushable between rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10259_63" -->
<a id="c10259_63"></a><blockquote class="code"><p class="quoted">
Before going through the plank with something:
<br />&#160;&#160;&#160;&#160;say &quot;Surely you jest.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10260_63" -->
<a id="c10260_63"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e / w / push ball e / e / get feather / w&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "151: Elsie" "e190" -->
<a id="e190"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example190'); return false;"><b>151</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example190'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Elsie</span></b></a><br />A door that closes automatically one turn after the player opens it.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc147.html#e190"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example190" style="display: none;">
<p>Suppose we want to create an automated door of the sort that closes when it isn't in use. A convenient way is to write a rule that fires &quot;every turn when the sliding door was open&quot;. This will be true only if the door was open at the beginning of the turn: if the player just opened it this turn, it stays open, and if it was already closed, it stays closed. Thus:</p>
<!-- START CODE "c10261_190" -->
<a id="c10261_190"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Elsie[=0x0022=][=0x000A=][=0x000A=]The axis-ward is a direction. The opposite of axis-ward is hub-ward. Understand [=0x0022=]aw[=0x0022=] or [=0x0022=]axisward[=0x0022=] as axis-ward.[=0x000A=]The hub-ward is a direction. The opposite of hub-ward is axis-ward. Understand [=0x0022=]hw[=0x0022=] or [=0x0022=]hubward[=0x0022=] as hub-ward.[=0x000A=][=0x000A=]The Ship[=0x0027=]s Bridge is a room.[=0x000A=][=0x000A=]The sliding door is a door. It is axis-ward from Bridge and hub-ward from C Deck. The initial appearance is [=0x0022=]There is a door in this wall[if closed] -- or at least, the potential for a door, since currently it is sealed, distinguishable from the rest of the wall only by the warning stripes on its surface[end if].[=0x0022=][=0x000A=][=0x000A=]Every turn when the sliding door was open:[=0x000A=][=0x0009=]now the sliding door is closed;[=0x000A=][=0x0009=]if the player can see the sliding door:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The sliding door slips back into place, sealing the wall as though there had never been a breach.[=0x0022=][=0x000A=][=0x000A=]After opening the sliding door:[=0x000A=][=0x0009=]say [=0x0022=]You press the appropriate buttons, and a section of wall slides away.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]open door / look / enter door / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Elsie&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10262_190" -->
<a id="c10262_190"></a><blockquote class="code"><p class="quoted">
The axis-ward is a direction. The opposite of axis-ward is hub-ward. Understand &quot;aw&quot; or &quot;axisward&quot; as axis-ward.
<br />The hub-ward is a direction. The opposite of hub-ward is axis-ward. Understand &quot;hw&quot; or &quot;hubward&quot; as hub-ward.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10263_190" -->
<a id="c10263_190"></a><blockquote class="code"><p class="quoted">
The Ship's Bridge is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10264_190" -->
<a id="c10264_190"></a><blockquote class="code"><p class="quoted">
The sliding door is a door. It is axis-ward from Bridge and hub-ward from C Deck. The initial appearance is &quot;There is a door in this wall[if closed] -- or at least, the potential for a door, since currently it is sealed, distinguishable from the rest of the wall only by the warning stripes on its surface[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10265_190" -->
<a id="c10265_190"></a><blockquote class="code"><p class="quoted">
Every turn when the sliding door was open:
<br />&#160;&#160;&#160;&#160;now the sliding door is closed;
<br />&#160;&#160;&#160;&#160;if the player can see the sliding door:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The sliding door slips back into place, sealing the wall as though there had never been a breach.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10266_190" -->
<a id="c10266_190"></a><blockquote class="code"><p class="quoted">
After opening the sliding door:
<br />&#160;&#160;&#160;&#160;say &quot;You press the appropriate buttons, and a section of wall slides away.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10267_190" -->
<a id="c10267_190"></a><blockquote class="code"><p class="quoted">
Test me with &quot;open door / look / enter door / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "22: Garibaldi 1" "e72" -->
<a id="e72"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example72'); return false;"><b>22</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example72'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Garibaldi 1</span></b></a><br />Providing a security readout device by which the player can check on the status of all doors in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc37.html#e72"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example72" style="display: none;">
<p>Suppose we would like to allow the player to view the status of all the doors functioning in the game; and we want to identify those doors by mentioning which two rooms they connect. The following uses some techniques that will be covered in later chapters, but the basic idea may be obvious:</p>
<!-- START CODE "c10268_72" -->
<a id="c10268_72"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Garibaldi[=0x0022=][=0x000A=][=0x000A=]The security readout is a device. The description of the readout is [=0x0022=]The screen is blank.[=0x0022=][=0x000A=][=0x000A=]Instead of examining the switched on security readout:[=0x000A=][=0x0009=]say [=0x0022=]The screen reads: [fixed letter spacing][=0x0022=];[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]repeat with item running through doors:[=0x000A=][=0x0009=][=0x0009=]say line break;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]  [item] ([front side of the item]/[back side of the item]): [if the item is locked]LOCKED[otherwise]UNLOCKED[end if][=0x0022=];[=0x000A=][=0x0009=]say variable letter spacing;[=0x000A=][=0x0009=]say paragraph break.[=0x000A=][=0x000A=][It is more or less arbitrary which room winds up as the [=0x0022=]front side[=0x0022=] and which as the [=0x0022=]back[=0x0022=], but in this case it hardly matters.][=0x000A=][=0x000A=]The player carries the security readout.[=0x000A=][=0x000A=]The Docking Bay is a room. The inner airlock is a door. It is north of the Docking Bay and south of the Zocalo. The inner airlock is lockable and unlocked.  The outer airlock is lockable and locked. It is a door. It is south of the Docking Bay and north of Space.[=0x000A=][=0x000A=]The quarantine seal is a door. It is west of the Zocalo and east of Medlab. Quarantine seal is locked.[=0x000A=][=0x000A=]The security pass unlocks the inner airlock. The player carries the security pass.[=0x000A=][=0x000A=]Test me with [=0x0022=]x readout / turn on readout / x readout / lock inner airlock with security pass / x readout[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Garibaldi&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10269_72" -->
<a id="c10269_72"></a><blockquote class="code"><p class="quoted">
The security readout is a device. The description of the readout is &quot;The screen is blank.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10270_72" -->
<a id="c10270_72"></a><blockquote class="code"><p class="quoted">
Instead of examining the switched on security readout:
<br />&#160;&#160;&#160;&#160;say &quot;The screen reads: [fixed letter spacing]&quot;;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;repeat with item running through doors:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [item] ([front side of the item]/[back side of the item]): [if the item is locked]LOCKED[otherwise]UNLOCKED[end if]&quot;;
<br />&#160;&#160;&#160;&#160;say variable letter spacing;
<br />&#160;&#160;&#160;&#160;say paragraph break.
</p></blockquote>
<!-- END CODE -->
<p>It is more or less arbitrary which room winds up as the &quot;front side&quot; and which as the &quot;back&quot;, but in this case it hardly matters.</p>
<!-- START CODE "c10271_72" -->
<a id="c10271_72"></a><blockquote class="code"><p class="quoted">
The player carries the security readout.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10272_72" -->
<a id="c10272_72"></a><blockquote class="code"><p class="quoted">
The Docking Bay is a room. The inner airlock is a door. It is north of the Docking Bay and south of the Zocalo. The inner airlock is lockable and unlocked.  The outer airlock is lockable and locked. It is a door. It is south of the Docking Bay and north of Space.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10273_72" -->
<a id="c10273_72"></a><blockquote class="code"><p class="quoted">
The quarantine seal is a door. It is west of the Zocalo and east of Medlab. Quarantine seal is locked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10274_72" -->
<a id="c10274_72"></a><blockquote class="code"><p class="quoted">
The security pass unlocks the inner airlock. The player carries the security pass.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10275_72" -->
<a id="c10275_72"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x readout / turn on readout / x readout / lock inner airlock with security pass / x readout&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "65: Whence?" "e416" -->
<a id="e416"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example416'); return false;"><b>65</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example416'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Whence?</span></b></a><br />A kind of door that always automatically describes the direction it opens and what lies on the far side (if that other room has been visited).</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc74.html#e416"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example416" style="display: none;">
<p>It would be fairly tedious reading to have a large game full of doors that describe themselves this way. Nonetheless, if we insisted we could use our knowledge of the map as leverage to make every door in the game describe itself automatically.</p>
<p>To do this, we make use of the phrase &quot;direction of (the door) from (a room)&quot; -- in this case, the direction of the door we're looking at when viewed from the player's location. Thus:</p>
<!-- START CODE "c10276_416" -->
<a id="c10276_416"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Whence?[=0x0022=][=0x000A=][=0x000A=]The temporal vortex is an open door. It is west of Yesterday and east of Today.[=0x000A=][=0x000A=]The initial appearance of a door is usually [=0x0022=]Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]w / e[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Whence?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10277_416" -->
<a id="c10277_416"></a><blockquote class="code"><p class="quoted">
The temporal vortex is an open door. It is west of Yesterday and east of Today.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10278_416" -->
<a id="c10278_416"></a><blockquote class="code"><p class="quoted">
The initial appearance of a door is usually &quot;Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c10279_416" -->
<a id="c10279_416"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Yet a further variation on this, which can automatically understand &quot;the east door&quot; and &quot;the west door&quot; when appropriate, may be found in the example &quot;Whither?&quot;.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc11.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc13.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
