<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>5.4. Text with numbers</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Text with numbers" -->
<!-- SEARCH SECTION "5.4" -->
<!-- SEARCH SORT "000-005-004-000" -->
<!-- START IGNORE 71 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc71.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 5: Text</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc73.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง5.4. Text with numbers</p>
<p>When a numerical value is given in a square-bracketed substitution, it is ordinarily printed out in digits. Thus:</p>
<!-- START CODE "c859" -->
<a id="c859"></a><blockquote class="code"><p class="quoted">
&quot;You've been wandering around for [turn count] turns now.&quot;
</p></blockquote>
<!-- END CODE -->
<p>might print as &quot;You've been wandering around for 213 turns now.&quot;, if the story has been played out for exactly that many commands. But if we prefer:</p>
<!-- START PHRASE "defn15" -->
<div class="definition"><a id="defn15"></a><p class="defnprototype"><b>say &quot;[</b>(number)<b> in words]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_numwords -->

<p>This text substitution writes out the number in English text. Example:</p>
<!-- START CODE "c860" -->
<a id="c860"></a><blockquote class="code"><p class="quoted">
&quot;You've been wandering around for [turn count in words] turns now.&quot;
</p></blockquote>
<!-- END CODE -->
<p>might produce &quot;You've been wandering around for two hundred and thirteen turns now.&quot; The &quot;and&quot; here is natural on one side of the Atlantic but not the other - so with the &quot;Use American dialect.&quot; option in place, it disappears.</p>

<!-- end definition -->
</div>

<p>Either way, though, there is some risk of the following:</p>
<!-- START CODE "c861" -->
<a id="c861"></a><blockquote class="code"><p class="quoted">
You've been wandering around for one turns now.
</p></blockquote>
<!-- END CODE -->
<p>We can avoid this using the special substitution:</p>
<!-- START PHRASE "defn16" -->
<div class="definition"><a id="defn16"></a><p class="defnprototype"><b>say &quot;[s]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_s -->

<p>This text substitution prints a letter &quot;s&quot; unless the last number printed was 1. Example:</p>
<!-- START CODE "c862" -->
<a id="c862"></a><blockquote class="code"><p class="quoted">
&quot;You've been wandering around for [turn count in words] turn[s] now.&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces &quot;... for one turn now.&quot; or &quot;... for two turns now.&quot; as appropriate. Note that it reacts only to numbers, not to other arithmetic values like times (or, for instance, weights from the &quot;Metric Units&quot; extension).</p>

<!-- end definition -->
</div>

<p>This only solves one case, but it's memorable, and the case is one which turns up often.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "60: Ballpark" "e184" -->
<a id="e184"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example184'); return false;"><b>60</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example184'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Ballpark</span></b></a><br />A new "to say" definition which allows the author to say "[a number in round numbers]" and get verbal descriptions like "a couple of" or "a few" as a result.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc5.html#e184"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example184" style="display: none;">
<p>Sometimes it is more sensible to describe numbers roughly than in exact terms. For instance, we might want to have our player perceive &quot;many people&quot; rather than &quot;forty-two people&quot; on entering a room. To achieve this, we might write our own &quot;to say&quot; phrase.</p>
<!-- START CODE "c863_184" -->
<a id="c863_184"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Ballpark[=0x0022=][=0x000A=][=0x000A=]To say (count - a number) in round numbers:[=0x000A=][=0x0009=]repeat through the Table of Numerical Approximation:[=0x000A=][=0x0009=][=0x0009=]if count is less than threshold entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][approximation entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][Phrases will be explained more thoroughly in a later chapter, but as we have already seen in the examples, we can make a [=0x0022=]To say...[=0x0022=] phrase that will allow us to create our own text substitutions. In this case, we are going to replace the specific number with a vaguer one chosen from a chart, so:][=0x000A=][=0x000A=]Table of Numerical Approximation[=0x000A=]threshold[=0x0009=]approximation[=0x000A=]1[=0x0009=][=0x0022=]no[=0x0022=][=0x000A=]2[=0x0009=][=0x0022=]one[=0x0022=][=0x000A=]3[=0x0009=][=0x0022=]a couple of[=0x0022=][=0x000A=]6[=0x0009=][=0x0022=]a few[=0x0022=][=0x000A=]11[=0x0009=][=0x0022=]some[=0x0022=][=0x000A=]21[=0x0009=][=0x0022=]many[=0x0022=][=0x000A=]1000[=0x0009=][=0x0022=]lots and lots of[=0x0022=][=0x000A=][=0x000A=][The idea here is that we will work our way through the table until we hit a line where the threshold number is higher than the number we want to express, and then print that output: so if we have less than one item, we[=0x0027=]ll print [=0x0022=]no[=0x0022=]; if we have more than none but less than two, we[=0x0027=]ll print [=0x0022=]one[=0x0022=]; if we have less than three, we[=0x0027=]ll print [=0x0022=]a couple of[=0x0022=]; if we have three, four, or five (but not six), we[=0x0027=]ll print [=0x0022=]a few.[=0x0022=]][=0x000A=][=0x000A=]A room has a number called the population. The population of a room is usually 0. The description of a room is usually [=0x0022=]You observe [population of the location in round numbers] [if population of the location is 1]person [otherwise]people [end if]here.[=0x0022=].[=0x000A=][=0x000A=]The Stadium is a room. The Hot Dog Stand is west of the Stadium. The Women[=0x0027=]s Restroom is south of the Stadium.[=0x000A=][=0x000A=]The population of the Stadium is 500. The population of the Hot Dog Stand is 3. The population of the Restroom is 750.[=0x000A=][=0x000A=]Test me with [=0x0022=]w / e / s[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Ballpark&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c864_184" -->
<a id="c864_184"></a><blockquote class="code"><p class="quoted">
To say (count - a number) in round numbers:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Numerical Approximation:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if count is less than threshold entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[approximation entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>Phrases will be explained more thoroughly in a later chapter, but as we have already seen in the examples, we can make a &quot;To say...&quot; phrase that will allow us to create our own text substitutions. In this case, we are going to replace the specific number with a vaguer one chosen from a chart, so:</p>
<!-- START CODE "c865_184" -->
<a id="c865_184"></a><blockquote class="code"><p class="quoted">
Table of Numerical Approximation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">threshold</p></td><td class="quotedtablecell"><p class="quoted">approximation</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">&quot;no&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">&quot;one&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">3</p></td><td class="quotedtablecell"><p class="quoted">&quot;a couple of&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">&quot;a few&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">11</p></td><td class="quotedtablecell"><p class="quoted">&quot;some&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">21</p></td><td class="quotedtablecell"><p class="quoted">&quot;many&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">1000</p></td><td class="quotedtablecell"><p class="quoted">&quot;lots and lots of&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>The idea here is that we will work our way through the table until we hit a line where the threshold number is higher than the number we want to express, and then print that output: so if we have less than one item, we'll print &quot;no&quot;; if we have more than none but less than two, we'll print &quot;one&quot;; if we have less than three, we'll print &quot;a couple of&quot;; if we have three, four, or five (but not six), we'll print &quot;a few.&quot;</p>
<!-- START CODE "c866_184" -->
<a id="c866_184"></a><blockquote class="code"><p class="quoted">
A room has a number called the population. The population of a room is usually 0. The description of a room is usually &quot;You observe [population of the location in round numbers] [if population of the location is 1]person [otherwise]people [end if]here.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c867_184" -->
<a id="c867_184"></a><blockquote class="code"><p class="quoted">
The Stadium is a room. The Hot Dog Stand is west of the Stadium. The Women's Restroom is south of the Stadium.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c868_184" -->
<a id="c868_184"></a><blockquote class="code"><p class="quoted">
The population of the Stadium is 500. The population of the Hot Dog Stand is 3. The population of the Restroom is 750.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c869_184" -->
<a id="c869_184"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e / s&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc71.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc73.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
