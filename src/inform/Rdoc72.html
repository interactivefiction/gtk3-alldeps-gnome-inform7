<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>9.5. Dice and Playing Cards</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Dice and Playing Cards" -->
<!-- SEARCH SECTION "9.5" -->
<!-- SEARCH SORT "001-009-005-000" -->
<!-- START IGNORE 71 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc71.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 9: Props: Food, Clothing, Money, Toys, Books, Electronics</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc73.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง9.5. Dice and Playing Cards</p>
<p>Most toys are single things, and no harder to create than any other small items, but games often require a multitude of tokens to be combined, and this can be logistically tricky.</p>
<p>The classic example is a pack of playing cards, where the player must individually control 52 items but without fussy commands or verbose text being printed back. <span class="boldface">Jokers Wild</span> provides a simple &quot;one card at a time&quot; approach; <span class="boldface">Tilt 1</span> is more sophisticated, with 52 independently accessible cards; <span class="boldface">Tilt 2</span> can further judge the value of a selection of cards - the ranking of a poker hand.</p>
<p>Drawing cards from a shuffled pack is only one source of randomness. Games of chance also involve items drawn from a bag: <span class="boldface">Wonka's Revenge</span> provides just such a lottery. More often, dice are thrown. A single die is easy enough:</p>
<!-- START CODE "c14372" -->
<a id="c14372"></a><blockquote class="code"><p class="quoted">
The die is carried by the player. After dropping the die: say &quot;It lands with [a random number from 1 to 6] uppermost.&quot; Understand &quot;roll [something]&quot; as dropping.
</p></blockquote>
<!-- END CODE -->
<p>Quick, but not very good. Most dice games involve rolling more than one die at a time, to get a more interesting distribution of outcomes: they may also involve special rules applying to doubles, for instance. See <span class="boldface">Do Pass Go</span>.</p>
<p class="crossreference"><a href="Rdoc97.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Typography</b></a><i> for on-screen notations for chess and card games</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "130: Do Pass Go" "e178" -->
<a id="e178"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example178'); return false;"><b>130</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example178'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Do Pass Go</span></b></a><br />A pair of dice which can be rolled, and are described with their current total when not carried, and have individual scores when examined.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc133.html#e178"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example178" style="display: none;">
<!-- START CODE "c14373_178" -->
<a id="c14373_178"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Do Pass Go[=0x0022=][=0x000A=][=0x000A=]Go is a room. [=0x0022=]A giant square area, where you and your other pewter ornament friends gather before setting out to purchase London.[=0x0022=][=0x000A=][=0x000A=]The pair of dice is carried by the player.[=0x000A=][=0x000A=]The pair of dice has a number called first die. The pair of dice has a number called second die. The first die of the pair is 6. The second die of the pair is 6. Rule for printing the name of the pair of dice while taking inventory: say [=0x0022=]pair of dice[=0x0022=].[=0x000A=]Rule for printing the name of the pair of dice: say [=0x0022=]pair of dice showing [first die of the pair plus second die of the pair][=0x0022=].[=0x000A=][=0x000A=]To say detailed state of the dice:[=0x000A=][=0x0009=]if the first die of the pair is the second die of the pair, say [=0x0022=]double [first die of the pair][=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=][first die of the pair] and [second die of the pair][=0x0022=].[=0x000A=][=0x000A=]The description of the pair of dice is [=0x0022=]The pair of dice are [if the dice are carried]itching to be rolled[otherwise]showing [detailed state of the dice][end if].[=0x0022=][=0x000A=][=0x000A=]Rolling is an action applying to one carried thing. Understand [=0x0022=]roll [something preferably held][=0x0022=] as rolling.[=0x000A=][=0x000A=]Check rolling when the noun is not the pair of dice: say [=0x0022=]Not something you can roll.[=0x0022=] instead.[=0x000A=]Carry out rolling:[=0x000A=][=0x0009=]now the pair of dice is in the holder of the actor;[=0x000A=][=0x0009=]now the first die of the pair of dice is a random number from 1 to 6;[=0x000A=][=0x0009=]now the second die of the pair of dice is a random number from 1 to 6.[=0x000A=]Report rolling:[=0x000A=][=0x0009=]say [=0x0022=]You roll [detailed state of the dice].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]i / roll dice / look / x dice / get dice / x dice / roll dice / roll dice / roll dice / roll dice / roll dice / roll dice / roll dice[=0x0022=].[=0x000A=][=0x000A=][Because we remember the states of the individual dice, not just a total, we can make use of the combination rolled.][=0x000A=][=0x000A=]The doubles count is a number that varies.[=0x000A=]After rolling:[=0x000A=][=0x0009=]if the first die of the pair is the second die of the pair, increment the doubles count;[=0x000A=][=0x0009=]otherwise now the doubles count is 0;[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Jail is a room. [=0x0022=]This is Jail, and not the Just Visiting periphery, either.[=0x0022=][=0x000A=][=0x000A=]Every turn when the doubles count is 3:[=0x000A=][=0x0009=]say [=0x0022=]The blue-uniformed policemen blows his whistle and beckons you sternly...[=0x0022=];[=0x000A=][=0x0009=]now the player carries the pair of dice;[=0x000A=][=0x0009=]now the player is in Jail;[=0x000A=][=0x0009=]now the doubles count is 0.[=0x000A=][=0x000A=]Every turn when the doubles count is 1 and the player is in Jail:[=0x000A=][=0x0009=]say [=0x0022=]The warden gruffly releases you.[=0x0022=];[=0x000A=][=0x0009=]now the player carries the pair of dice;[=0x000A=][=0x0009=]now the player is in Go.[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Do Pass Go&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14374_178" -->
<a id="c14374_178"></a><blockquote class="code"><p class="quoted">
Go is a room. &quot;A giant square area, where you and your other pewter ornament friends gather before setting out to purchase London.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14375_178" -->
<a id="c14375_178"></a><blockquote class="code"><p class="quoted">
The pair of dice is carried by the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14376_178" -->
<a id="c14376_178"></a><blockquote class="code"><p class="quoted">
The pair of dice has a number called first die. The pair of dice has a number called second die. The first die of the pair is 6. The second die of the pair is 6. Rule for printing the name of the pair of dice while taking inventory: say &quot;pair of dice&quot;.
<br />Rule for printing the name of the pair of dice: say &quot;pair of dice showing [first die of the pair plus second die of the pair]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14377_178" -->
<a id="c14377_178"></a><blockquote class="code"><p class="quoted">
To say detailed state of the dice:
<br />&#160;&#160;&#160;&#160;if the first die of the pair is the second die of the pair, say &quot;double [first die of the pair]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[first die of the pair] and [second die of the pair]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14378_178" -->
<a id="c14378_178"></a><blockquote class="code"><p class="quoted">
The description of the pair of dice is &quot;The pair of dice are [if the dice are carried]itching to be rolled[otherwise]showing [detailed state of the dice][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14379_178" -->
<a id="c14379_178"></a><blockquote class="code"><p class="quoted">
Rolling is an action applying to one carried thing. Understand &quot;roll [something preferably held]&quot; as rolling.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14380_178" -->
<a id="c14380_178"></a><blockquote class="code"><p class="quoted">
Check rolling when the noun is not the pair of dice: say &quot;Not something you can roll.&quot; instead.
<br />Carry out rolling:
<br />&#160;&#160;&#160;&#160;now the pair of dice is in the holder of the actor;
<br />&#160;&#160;&#160;&#160;now the first die of the pair of dice is a random number from 1 to 6;
<br />&#160;&#160;&#160;&#160;now the second die of the pair of dice is a random number from 1 to 6.
<br />Report rolling:
<br />&#160;&#160;&#160;&#160;say &quot;You roll [detailed state of the dice].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14381_178" -->
<a id="c14381_178"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / roll dice / look / x dice / get dice / x dice / roll dice / roll dice / roll dice / roll dice / roll dice / roll dice / roll dice&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Because we remember the states of the individual dice, not just a total, we can make use of the combination rolled.</p>
<!-- START CODE "c14382_178" -->
<a id="c14382_178"></a><blockquote class="code"><p class="quoted">
The doubles count is a number that varies.
<br />After rolling:
<br />&#160;&#160;&#160;&#160;if the first die of the pair is the second die of the pair, increment the doubles count;
<br />&#160;&#160;&#160;&#160;otherwise now the doubles count is 0;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14383_178" -->
<a id="c14383_178"></a><blockquote class="code"><p class="quoted">
Jail is a room. &quot;This is Jail, and not the Just Visiting periphery, either.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14384_178" -->
<a id="c14384_178"></a><blockquote class="code"><p class="quoted">
Every turn when the doubles count is 3:
<br />&#160;&#160;&#160;&#160;say &quot;The blue-uniformed policemen blows his whistle and beckons you sternly...&quot;;
<br />&#160;&#160;&#160;&#160;now the player carries the pair of dice;
<br />&#160;&#160;&#160;&#160;now the player is in Jail;
<br />&#160;&#160;&#160;&#160;now the doubles count is 0.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14385_178" -->
<a id="c14385_178"></a><blockquote class="code"><p class="quoted">
Every turn when the doubles count is 1 and the player is in Jail:
<br />&#160;&#160;&#160;&#160;say &quot;The warden gruffly releases you.&quot;;
<br />&#160;&#160;&#160;&#160;now the player carries the pair of dice;
<br />&#160;&#160;&#160;&#160;now the player is in Go.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "175: Wonka's Revenge" "e121" -->
<a id="e121"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example121'); return false;"><b>175</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example121'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wonka's Revenge</span></b></a><br />A lottery drum which redistributes the tickets inside whenever the player spins it.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc168.html#e121"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example121" style="display: none;">
<!-- START CODE "c14386_121" -->
<a id="c14386_121"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Wonka[=0x0027=]s Revenge[=0x0022=][=0x000A=][=0x000A=]The Caribou Lodge is a room. [=0x0022=]Hundreds of expectant faces are turned your way from every table.[=0x0022=] A lottery drum is in the Lodge. [=0x0022=]Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].[=0x0022=] In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.[=0x000A=][=0x000A=]Understand [=0x0022=]spin [something][=0x0022=] as spinning.[=0x000A=][=0x000A=]Spinning is an action applying to one thing.[=0x000A=][=0x000A=]Check spinning: if the noun is an open container which contains something, say [=0x0022=][The list of things in the noun] would fly out.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out spinning a container:[=0x000A=][=0x0009=]shuffle the contents of the noun.[=0x000A=][=0x000A=]Report spinning:[=0x000A=][=0x0009=]if the noun contains something, say [=0x0022=]You rattle [if the noun is transparent][the list of things in the noun][otherwise]the stuff[end if] in [the noun].[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]Nothing results of your shaking [the noun].[=0x0022=][=0x000A=][=0x000A=][Inform keeps track of the order in which things have been put into a container. If we want to change that order without the player[=0x0027=]s intervention, we can move the things ourselves.][=0x000A=][=0x000A=]To shuffle the contents of (basket - a container):[=0x000A=][=0x0009=]let moves be the number of things in the basket;[=0x000A=][=0x0009=]repeat with counter running from 1 to moves:[=0x000A=][=0x0009=][=0x0009=]move a random thing in the basket to the basket.[=0x000A=][=0x000A=]After opening the drum when we have spun the drum for the first time:[=0x000A=][=0x0009=]if something (called the pick) is in the drum:[=0x000A=][=0x0009=][=0x0009=]try searching the drum;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The pick] it is, then.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking the pick;[=0x000A=][=0x0009=][=0x0009=]if the pick is the ticket of pure gold, end the story finally;[=0x000A=][=0x0009=][=0x0009=]otherwise end the story saying [=0x0022=]Oh well, better luck next time.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]open drum / look in drum / close drum / spin drum / open drum[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Wonka's Revenge&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14387_121" -->
<a id="c14387_121"></a><blockquote class="code"><p class="quoted">
The Caribou Lodge is a room. &quot;Hundreds of expectant faces are turned your way from every table.&quot; A lottery drum is in the Lodge. &quot;Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].&quot; In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14388_121" -->
<a id="c14388_121"></a><blockquote class="code"><p class="quoted">
Understand &quot;spin [something]&quot; as spinning.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14389_121" -->
<a id="c14389_121"></a><blockquote class="code"><p class="quoted">
Spinning is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14390_121" -->
<a id="c14390_121"></a><blockquote class="code"><p class="quoted">
Check spinning: if the noun is an open container which contains something, say &quot;[The list of things in the noun] would fly out.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14391_121" -->
<a id="c14391_121"></a><blockquote class="code"><p class="quoted">
Carry out spinning a container:
<br />&#160;&#160;&#160;&#160;shuffle the contents of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14392_121" -->
<a id="c14392_121"></a><blockquote class="code"><p class="quoted">
Report spinning:
<br />&#160;&#160;&#160;&#160;if the noun contains something, say &quot;You rattle [if the noun is transparent][the list of things in the noun][otherwise]the stuff[end if] in [the noun].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Nothing results of your shaking [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Inform keeps track of the order in which things have been put into a container. If we want to change that order without the player's intervention, we can move the things ourselves.</p>
<!-- START CODE "c14393_121" -->
<a id="c14393_121"></a><blockquote class="code"><p class="quoted">
To shuffle the contents of (basket - a container):
<br />&#160;&#160;&#160;&#160;let moves be the number of things in the basket;
<br />&#160;&#160;&#160;&#160;repeat with counter running from 1 to moves:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move a random thing in the basket to the basket.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14394_121" -->
<a id="c14394_121"></a><blockquote class="code"><p class="quoted">
After opening the drum when we have spun the drum for the first time:
<br />&#160;&#160;&#160;&#160;if something (called the pick) is in the drum:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try searching the drum;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The pick] it is, then.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking the pick;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the pick is the ticket of pure gold, end the story finally;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise end the story saying &quot;Oh well, better luck next time.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14395_121" -->
<a id="c14395_121"></a><blockquote class="code"><p class="quoted">
Test me with &quot;open drum / look in drum / close drum / spin drum / open drum&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "275: Jokers Wild" "e104" -->
<a id="e104"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example104'); return false;"><b>275</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example104'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Jokers Wild</span></b></a><br />A deck of cards which can be shuffled and dealt from.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc256.html#e104"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example104" style="display: none;">
<p>Suppose we want a deck of cards which the player can shuffle and draw from. Our first (rather tedious) task is merely to set up the deck as a table:</p>
<!-- START CODE "c14396_104" -->
<a id="c14396_104"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Jokers Wild[=0x0022=][=0x000A=][=0x000A=]Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades.[=0x000A=][=0x000A=]Table of Cards[=0x000A=]suit[=0x0009=]value[=0x000A=]diamonds[=0x0009=]1[=0x000A=]diamonds[=0x0009=]2[=0x000A=]diamonds[=0x0009=]3[=0x000A=]diamonds[=0x0009=]4[=0x000A=]diamonds[=0x0009=]5[=0x000A=]diamonds[=0x0009=]6[=0x000A=]diamonds[=0x0009=]7[=0x000A=]diamonds[=0x0009=]8[=0x000A=]diamonds[=0x0009=]9[=0x000A=]diamonds[=0x0009=]10[=0x000A=]diamonds[=0x0009=]11[=0x000A=]diamonds[=0x0009=]12[=0x000A=]diamonds[=0x0009=]13[=0x000A=]spades[=0x0009=]1[=0x000A=]spades[=0x0009=]2[=0x000A=]spades[=0x0009=]3[=0x000A=]spades[=0x0009=]4[=0x000A=]spades[=0x0009=]5[=0x000A=]spades[=0x0009=]6[=0x000A=]spades[=0x0009=]7[=0x000A=]spades[=0x0009=]8[=0x000A=]spades[=0x0009=]9[=0x000A=]spades[=0x0009=]10[=0x000A=]spades[=0x0009=]11[=0x000A=]spades[=0x0009=]12[=0x000A=]spades[=0x0009=]13[=0x000A=]hearts[=0x0009=]1[=0x000A=]hearts[=0x0009=]2[=0x000A=]hearts[=0x0009=]3[=0x000A=]hearts[=0x0009=]4[=0x000A=]hearts[=0x0009=]5[=0x000A=]hearts[=0x0009=]6[=0x000A=]hearts[=0x0009=]7[=0x000A=]hearts[=0x0009=]8[=0x000A=]hearts[=0x0009=]9[=0x000A=]hearts[=0x0009=]10[=0x000A=]hearts[=0x0009=]11[=0x000A=]hearts[=0x0009=]12[=0x000A=]hearts[=0x0009=]13[=0x000A=]clubs[=0x0009=]1[=0x000A=]clubs[=0x0009=]2[=0x000A=]clubs[=0x0009=]3[=0x000A=]clubs[=0x0009=]4[=0x000A=]clubs[=0x0009=]5[=0x000A=]clubs[=0x0009=]6[=0x000A=]clubs[=0x0009=]7[=0x000A=]clubs[=0x0009=]8[=0x000A=]clubs[=0x0009=]9[=0x000A=]clubs[=0x0009=]10[=0x000A=]clubs[=0x0009=]11[=0x000A=]clubs[=0x0009=]12[=0x000A=]clubs[=0x0009=]13[=0x000A=][=0x000A=][We[=0x0027=]re going to describe the higher numbers as face cards, so it helps to write a new [=0x0022=]to say[=0x0022=] phrase.][=0x000A=][=0x000A=]To say (count - a number) as a card value:[=0x000A=][=0x0009=]choose row with a value of count in the Table of Value Names;[=0x000A=][=0x0009=]say [=0x0022=][term entry][=0x0022=].[=0x000A=][=0x000A=]Table of Value Names[=0x000A=]value[=0x0009=]term[=0x000A=]1[=0x0009=][=0x0022=]ace[=0x0022=][=0x000A=]2[=0x0009=][=0x0022=]deuce[=0x0022=][=0x000A=]3[=0x0009=][=0x0022=]three[=0x0022=][=0x000A=]4[=0x0009=][=0x0022=]four[=0x0022=][=0x000A=]5[=0x0009=][=0x0022=]five[=0x0022=][=0x000A=]6[=0x0009=][=0x0022=]six[=0x0022=][=0x000A=]7[=0x0009=][=0x0022=]seven[=0x0022=][=0x000A=]8[=0x0009=][=0x0022=]eight[=0x0022=][=0x000A=]9[=0x0009=][=0x0022=]nine[=0x0022=][=0x000A=]10[=0x0009=][=0x0022=]ten[=0x0022=][=0x000A=]11[=0x0009=][=0x0022=]jack[=0x0022=][=0x000A=]12[=0x0009=][=0x0022=]queen[=0x0022=][=0x000A=]13[=0x0009=][=0x0022=]king[=0x0022=][=0x000A=][=0x000A=][Now we get the shuffling of the deck from [=0x0022=]sort in random order[=0x0022=], so:][=0x000A=][=0x000A=]Understand [=0x0022=]shuffle[=0x0022=] as shuffling. Shuffling is an action applying to nothing.[=0x000A=][=0x000A=]Carry out shuffling:[=0x000A=][=0x0009=]sort the Table of Cards in random order;[=0x000A=][=0x0009=]say [=0x0022=]You expertly rearrange the cards.[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]sort the Table of Cards in random order.[=0x000A=][=0x000A=][This will continue to work properly even as the deck is partially depleted. Speaking of which, suppose we want the player to be able to toss the cards one-by-one into a hat. They are going to need to be removed from the deck, so:][=0x000A=][=0x000A=]Understand [=0x0022=]toss[=0x0022=] or [=0x0022=]toss a card[=0x0022=] or [=0x0022=]toss card[=0x0022=] as tossing.[=0x000A=][=0x000A=]Tossing is an action applying to nothing.[=0x000A=][=0x000A=]Check tossing:[=0x000A=][=0x0009=]if the number of filled rows in the Table of Cards is 0, say [=0x0022=]The deck is empty.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out tossing:[=0x000A=][=0x0009=]repeat through the Table of Cards:[=0x000A=][=0x0009=][=0x0009=]let new value be value entry;[=0x000A=][=0x0009=][=0x0009=]let new suit be suit entry;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You throw the [value entry as a card value] of [suit entry] at the top hat, and [if a random chance of 1 in 3 succeeds]hit[otherwise]miss[end if].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]blank out the whole row;[=0x000A=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][If we wanted to simulate a slightly more stimulating game, we could instead have a second table to represent the player[=0x0027=]s hand of cards and record each card drawn. That would get long for the purposes of example, however, so instead we will just admit that the player[=0x0027=]s life is an empty husk of existence:][=0x000A=][=0x000A=]The Empty Room is a room. [=0x0022=]It has come to this: sitting on the bare floor of Lulu[=0x0027=]s apartment with nothing to amuse you but a deck of cards and the top hat from last year[=0x0027=]s act. You reckon [the number of filled rows in the Table of Cards in words] cardtosses are all that stand between you and the utter pointlessness of existence.[=0x000A=][=0x000A=]Once again you curse Lulu for running off with that joker.[=0x0022=][=0x000A=][=0x000A=]The player is carrying the deck of cards. The top hat is an open container in the Empty Room. It is scenery.[=0x000A=][=0x000A=]Test me with [=0x0022=]toss / again / again / again / again / again / again / again[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Jokers Wild&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14397_104" -->
<a id="c14397_104"></a><blockquote class="code"><p class="quoted">
Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14398_104" -->
<a id="c14398_104"></a><blockquote class="code"><p class="quoted">
Table of Cards
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">suit</p></td><td class="quotedtablecell"><p class="quoted">value</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>We're going to describe the higher numbers as face cards, so it helps to write a new &quot;to say&quot; phrase.</p>
<!-- START CODE "c14399_104" -->
<a id="c14399_104"></a><blockquote class="code"><p class="quoted">
To say (count - a number) as a card value:
<br />&#160;&#160;&#160;&#160;choose row with a value of count in the Table of Value Names;
<br />&#160;&#160;&#160;&#160;say &quot;[term entry]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14400_104" -->
<a id="c14400_104"></a><blockquote class="code"><p class="quoted">
Table of Value Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">value</p></td><td class="quotedtablecell"><p class="quoted">term</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">&quot;ace&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">&quot;deuce&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">3</p></td><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">4</p></td><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">5</p></td><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">7</p></td><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">8</p></td><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">9</p></td><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">10</p></td><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">11</p></td><td class="quotedtablecell"><p class="quoted">&quot;jack&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">12</p></td><td class="quotedtablecell"><p class="quoted">&quot;queen&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">13</p></td><td class="quotedtablecell"><p class="quoted">&quot;king&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>Now we get the shuffling of the deck from &quot;sort in random order&quot;, so:</p>
<!-- START CODE "c14401_104" -->
<a id="c14401_104"></a><blockquote class="code"><p class="quoted">
Understand &quot;shuffle&quot; as shuffling. Shuffling is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14402_104" -->
<a id="c14402_104"></a><blockquote class="code"><p class="quoted">
Carry out shuffling:
<br />&#160;&#160;&#160;&#160;sort the Table of Cards in random order;
<br />&#160;&#160;&#160;&#160;say &quot;You expertly rearrange the cards.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14403_104" -->
<a id="c14403_104"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;sort the Table of Cards in random order.
</p></blockquote>
<!-- END CODE -->
<p>This will continue to work properly even as the deck is partially depleted. Speaking of which, suppose we want the player to be able to toss the cards one-by-one into a hat. They are going to need to be removed from the deck, so:</p>
<!-- START CODE "c14404_104" -->
<a id="c14404_104"></a><blockquote class="code"><p class="quoted">
Understand &quot;toss&quot; or &quot;toss a card&quot; or &quot;toss card&quot; as tossing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14405_104" -->
<a id="c14405_104"></a><blockquote class="code"><p class="quoted">
Tossing is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14406_104" -->
<a id="c14406_104"></a><blockquote class="code"><p class="quoted">
Check tossing:
<br />&#160;&#160;&#160;&#160;if the number of filled rows in the Table of Cards is 0, say &quot;The deck is empty.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14407_104" -->
<a id="c14407_104"></a><blockquote class="code"><p class="quoted">
Carry out tossing:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Cards:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let new value be value entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let new suit be suit entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You throw the [value entry as a card value] of [suit entry] at the top hat, and [if a random chance of 1 in 3 succeeds]hit[otherwise]miss[end if].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to simulate a slightly more stimulating game, we could instead have a second table to represent the player's hand of cards and record each card drawn. That would get long for the purposes of example, however, so instead we will just admit that the player's life is an empty husk of existence:</p>
<!-- START CODE "c14408_104" -->
<a id="c14408_104"></a><blockquote class="code"><p class="quoted">
The Empty Room is a room. &quot;It has come to this: sitting on the bare floor of Lulu's apartment with nothing to amuse you but a deck of cards and the top hat from last year's act. You reckon [the number of filled rows in the Table of Cards in words] cardtosses are all that stand between you and the utter pointlessness of existence.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14409_104" -->
<a id="c14409_104"></a><blockquote class="code"><p class="quoted">
Once again you curse Lulu for running off with that joker.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14410_104" -->
<a id="c14410_104"></a><blockquote class="code"><p class="quoted">
The player is carrying the deck of cards. The top hat is an open container in the Empty Room. It is scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14411_104" -->
<a id="c14411_104"></a><blockquote class="code"><p class="quoted">
Test me with &quot;toss / again / again / again / again / again / again / again&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "316: Tilt 1" "e255" -->
<a id="e255"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example255'); return false;"><b>316</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example255'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Tilt 1</span></b></a><br />A deck of cards with fully implemented individual cards, which can be separately drawn and discarded, and referred to by name.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc279.html#e255"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example255" style="display: none;">
<p>We've simulated a deck of cards before, but only as entries in a table. This time we're going to do it more completely, with card objects that can be drawn and discarded, and referred to by name. The tedious way to do this would be to make 52 objects by hand and laboriously write out their names and understand rules.</p>
<p>A more sensible way is to make 52 identical card objects, assign them ranks and suits, and allow Inform to generate and parse their names automatically.</p>
<p>So:</p>
<!-- START CODE "c14412_255" -->
<a id="c14412_255"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Tilt[=0x0022=][=0x000A=][=0x000A=]Section 1 - Cards[=0x000A=][=0x000A=]Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand [=0x0022=]heart[=0x0022=] as hearts. Understand [=0x0022=]club[=0x0022=] as clubs. Understand [=0x0022=]diamond[=0x0022=] as diamonds. Understand [=0x0022=]spade[=0x0022=] as spades. [Providing the singular forms means that Inform will also understand [=0x003E=]EXAMINE SPADE, [=0x003E=]DISCARD CLUB, and so on.][=0x000A=][=0x000A=]A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.[=0x000A=][=0x000A=]52 cards are in the card repository.[=0x000A=][=0x000A=][Now, we[=0x0027=]re going to describe the higher numbers as face cards, so it helps to write a new [=0x0022=]to say[=0x0022=] phrase, just as we did in Jokers Wild. (A subsequent version of this example shows how to print card values with red and black symbols representing the different suits; see [=0x0022=]Tilt 3[=0x0022=].)][=0x000A=][=0x000A=]To say (count - a number) as a card value:[=0x000A=][=0x0009=]choose row count in the Table of Value Names;[=0x000A=][=0x0009=]say [=0x0022=][term entry][=0x0022=].[=0x000A=][=0x000A=]Rule for printing the name of a card (called target):[=0x000A=][=0x0009=]say [=0x0022=][rank of the target as a card value] of [suit of the target][=0x0022=][=0x000A=][=0x000A=]Table of Value Names[=0x000A=]term[=0x0009=]value[=0x0009=]topic[=0x000A=][=0x0022=]ace[=0x0022=][=0x0009=][=0x0022=]1[=0x0022=][=0x0009=][=0x0022=]ace/A/one[=0x0022=][=0x000A=][=0x0022=]deuce[=0x0022=][=0x0009=][=0x0022=]2[=0x0022=][=0x0009=][=0x0022=]deuce/two[=0x0022=][=0x000A=][=0x0022=]three[=0x0022=][=0x0009=][=0x0022=]3[=0x0022=][=0x0009=][=0x0022=]three[=0x0022=][=0x000A=][=0x0022=]four[=0x0022=][=0x0009=][=0x0022=]4[=0x0022=][=0x0009=][=0x0022=]four[=0x0022=][=0x000A=][=0x0022=]five[=0x0022=][=0x0009=][=0x0022=]5[=0x0022=][=0x0009=][=0x0022=]five[=0x0022=][=0x000A=][=0x0022=]six[=0x0022=][=0x0009=][=0x0022=]6[=0x0022=][=0x0009=][=0x0022=]six[=0x0022=][=0x000A=][=0x0022=]seven[=0x0022=][=0x0009=][=0x0022=]7[=0x0022=][=0x0009=][=0x0022=]seven[=0x0022=][=0x000A=][=0x0022=]eight[=0x0022=][=0x0009=][=0x0022=]8[=0x0022=][=0x0009=][=0x0022=]eight[=0x0022=][=0x000A=][=0x0022=]nine[=0x0022=][=0x0009=][=0x0022=]9[=0x0022=][=0x0009=][=0x0022=]nine[=0x0022=][=0x000A=][=0x0022=]ten[=0x0022=][=0x0009=][=0x0022=]10[=0x0022=][=0x0009=][=0x0022=]ten[=0x0022=][=0x000A=][=0x0022=]jack[=0x0022=][=0x0009=][=0x0022=]11[=0x0022=][=0x0009=][=0x0022=]jack/knave/J[=0x0022=][=0x000A=][=0x0022=]queen[=0x0022=][=0x0009=][=0x0022=]12[=0x0022=][=0x0009=][=0x0022=]queen/Q[=0x0022=][=0x000A=][=0x0022=]king[=0x0022=][=0x0009=][=0x0022=]13[=0x0022=][=0x0009=][=0x0022=]king/K[=0x0022=][=0x000A=][=0x000A=][This is enough already to let inform understand things like [=0x0022=]ten clubs[=0x0022=], but we want to add a couple of refinements. For one thing, we[=0x0027=]d like to accept [=0x0022=]of[=0x0022=] when it appears in phrases such as [=0x0022=]ten of clubs[=0x0022=] (but not generically otherwise); for another, we[=0x0027=]d like the player to be able to use various names for ranks. To this end, we need to borrow from the Activities chapter and modify the player[=0x0027=]s command before attempting to understand it:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=]of [suit][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]while the player[=0x0027=]s command includes [=0x0022=]of[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]cut the matched text;[=0x000A=][=0x0009=]repeat through the Table of Value Names:[=0x000A=][=0x0009=][=0x0009=]while the player[=0x0027=]s command includes topic entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]replace the matched text with value entry.[=0x000A=][=0x0009=][This allows Inform to understand [=0x0022=]ace[=0x0022=], [=0x0022=]deuce[=0x0022=], [=0x0022=]king[=0x0022=], etc., as numerical ranks.][=0x000A=][=0x000A=][It may be a bit confusing that the Table of Value Names has both a topic column and a term column, to all appearances essentially identical. But items in the topic column can be matched against the player[=0x0027=]s input, whereas items in other kinds of text column can be printed out; the two kinds of text are not treated identically by Inform, so we need to have both. Notice that the topic column contains entries like [=0x0022=]jack/knave,[=0x0022=] which will match either [=0x0022=]jack[=0x0022=] or [=0x0022=]knave[=0x0022=] in the player[=0x0027=]s input.][=0x000A=][=0x000A=][Now to set up the deck at the outset. With some intelligent looping, we avoid having to declare every combination of suit and number individually:][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]reconstitute deck.[=0x000A=][=0x000A=]To reconstitute deck:[=0x000A=][=0x0009=]let current suit be hearts;[=0x000A=][=0x0009=]now every card is in the card repository;[=0x000A=][=0x0009=]while a card is in the card repository:[=0x000A=][=0x0009=][=0x0009=]repeat with current rank running from 1 to 13:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let item be a random card in card repository;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now rank of item is current rank;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now suit of item is current suit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now item is in the deck of cards;[=0x000A=][=0x0009=][=0x0009=]now current suit is the suit after the current suit.[=0x000A=][=0x000A=][And now we need a simple setting and some actions to manipulate the deck with:][=0x000A=][=0x000A=]Section 2 - The Deck and the Discard Pile[=0x000A=][=0x000A=]The Empty Room is a room. [=0x0022=]Nothing to see here.[=0x0022=][=0x000A=][=0x000A=]The deck of cards is in the Empty Room. It is a closed unopenable container. The description is [=0x0022=]A standard poker deck.[=0x0022=][=0x000A=][=0x000A=]The discard pile is a closed unopenable container. The description is [=0x0022=]Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].[=0x0022=][=0x000A=][=0x000A=]To decide what number is the rounded number of (described set - a description of objects):[=0x000A=][=0x0009=]let N be the number of members of the described set;[=0x000A=][=0x0009=]let R be N divided by 5;[=0x000A=][=0x0009=]let total be R times 5;[=0x000A=][=0x0009=]decide on total.[=0x000A=][=0x000A=][The above phrase rounds a number to the nearest five, so that the player is not autistically able to count a large number of cards in the discard pile at a single glance.][=0x000A=][=0x000A=][This next bit is an optional borrowing from the Activities chapter: we want to prevent Inform printing things like [=0x0022=]You can see a discard pile (closed) here.[=0x0022=], since we don[=0x0027=]t want the player to think of the piles as containers, even though Inform thinks of them in those terms.][=0x000A=][=0x000A=]Rule for printing room description details of something: do nothing instead.[=0x000A=][=0x000A=][Finally, we want the player to use [=0x0022=]draw[=0x0022=] and [=0x0022=]discard[=0x0022=] to manipulate his hand of cards:][=0x000A=][=0x000A=]Section 3 - Drawing and Discarding Actions[=0x000A=][=0x000A=]Understand the commands [=0x0022=]take[=0x0022=] and [=0x0022=]carry[=0x0022=] and [=0x0022=]hold[=0x0022=] and [=0x0022=]get[=0x0022=] and [=0x0022=]drop[=0x0022=] and [=0x0022=]throw[=0x0022=] and [=0x0022=]discard[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]take [text][=0x0022=] or [=0x0022=]get [text][=0x0022=] or [=0x0022=]drop [text][=0x0022=] as a mistake ([=0x0022=]Here, you only draw and discard. Nothing else matters at the moment.[=0x0022=]).[=0x000A=][=0x000A=]Understand [=0x0022=]draw[=0x0022=] or [=0x0022=]draw card[=0x0022=] or [=0x0022=]draw a card[=0x0022=] as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.[=0x000A=][=0x000A=]Setting action variables for drawing:[=0x000A=][=0x0009=]now the card drawn is a random card which is in the deck of cards.[=0x000A=][=0x000A=]Check drawing:[=0x000A=][=0x0009=]if the card drawn is nothing, say [=0x0022=]The deck is completely depleted.[=0x0022=] instead.[=0x000A=][=0x000A=]Check drawing:[=0x000A=][=0x0009=]if the number of cards carried by the player is greater than four,[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]This is a five-card game; you must discard something before drawing anything further.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out drawing:[=0x000A=][=0x0009=]move the card drawn to the player.[=0x000A=][=0x000A=]Report drawing:[=0x000A=][=0x0009=]say [=0x0022=]You draw [a card drawn].[=0x0022=][=0x000A=][=0x000A=][=0x000A=]Understand [=0x0022=]discard [card][=0x0022=] as discarding. Discarding is an action applying to one thing.[=0x000A=][=0x000A=]Check discarding:[=0x000A=][=0x0009=]if the player does not carry the noun, say [=0x0022=]You can only discard cards from your own hand.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out discarding:[=0x000A=][=0x0009=]now the noun is in the discard pile;[=0x000A=][=0x0009=]if the discard pile is not visible, move the discard pile to the location.[=0x000A=][=0x000A=]Report discarding:[=0x000A=][=0x0009=]say [=0x0022=]You toss [the noun] nonchalantly onto the discard pile.[=0x0022=][=0x000A=][=0x000A=]Seeding is an action out of world. Understand [=0x0022=]seed[=0x0022=] as seeding. Carry out seeding: seed the random-number generator with 5681.[=0x000A=][=0x000A=]Test me with [=0x0022=]seed / draw / g / g / g / g / i / discard seven of spades / draw / discard six / draw / i / discard hearts / discard six of diamonds card / draw / draw / i / discard spades card / draw / discard king card[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Tilt&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14413_255" -->
<a id="c14413_255"></a><blockquote class="code"><p class="quoted">
Section 1 - Cards
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14414_255" -->
<a id="c14414_255"></a><blockquote class="code"><p class="quoted">
Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand &quot;heart&quot; as hearts. Understand &quot;club&quot; as clubs. Understand &quot;diamond&quot; as diamonds. Understand &quot;spade&quot; as spades. [Providing the singular forms means that Inform will also understand &gt;EXAMINE SPADE, &gt;DISCARD CLUB, and so on.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14415_255" -->
<a id="c14415_255"></a><blockquote class="code"><p class="quoted">
A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14416_255" -->
<a id="c14416_255"></a><blockquote class="code"><p class="quoted">
52 cards are in the card repository.
</p></blockquote>
<!-- END CODE -->
<p>Now, we're going to describe the higher numbers as face cards, so it helps to write a new &quot;to say&quot; phrase, just as we did in Jokers Wild. (A subsequent version of this example shows how to print card values with red and black symbols representing the different suits; see &quot;Tilt 3&quot;.)</p>
<!-- START CODE "c14417_255" -->
<a id="c14417_255"></a><blockquote class="code"><p class="quoted">
To say (count - a number) as a card value:
<br />&#160;&#160;&#160;&#160;choose row count in the Table of Value Names;
<br />&#160;&#160;&#160;&#160;say &quot;[term entry]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14418_255" -->
<a id="c14418_255"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a card (called target):
<br />&#160;&#160;&#160;&#160;say &quot;[rank of the target as a card value] of [suit of the target]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14419_255" -->
<a id="c14419_255"></a><blockquote class="code"><p class="quoted">
Table of Value Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">term</p></td><td class="quotedtablecell"><p class="quoted">value</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ace&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;1&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ace/A/one&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;deuce&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;2&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;deuce/two&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;3&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;4&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;5&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;6&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;7&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;8&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;9&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;10&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;jack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;11&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;jack/knave/J&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;queen&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;12&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;queen/Q&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;king&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;13&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;king/K&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>This is enough already to let inform understand things like &quot;ten clubs&quot;, but we want to add a couple of refinements. For one thing, we'd like to accept &quot;of&quot; when it appears in phrases such as &quot;ten of clubs&quot; (but not generically otherwise); for another, we'd like the player to be able to use various names for ranks. To this end, we need to borrow from the Activities chapter and modify the player's command before attempting to understand it:</p>
<!-- START CODE "c14420_255" -->
<a id="c14420_255"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;of [suit]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes &quot;of&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Value Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the matched text with value entry.
<br />&#160;&#160;&#160;&#160;[This allows Inform to understand &quot;ace&quot;, &quot;deuce&quot;, &quot;king&quot;, etc., as numerical ranks.]
</p></blockquote>
<!-- END CODE -->
<p>It may be a bit confusing that the Table of Value Names has both a topic column and a term column, to all appearances essentially identical. But items in the topic column can be matched against the player's input, whereas items in other kinds of text column can be printed out; the two kinds of text are not treated identically by Inform, so we need to have both. Notice that the topic column contains entries like &quot;jack/knave,&quot; which will match either &quot;jack&quot; or &quot;knave&quot; in the player's input.</p>
<p>Now to set up the deck at the outset. With some intelligent looping, we avoid having to declare every combination of suit and number individually:</p>
<!-- START CODE "c14421_255" -->
<a id="c14421_255"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;reconstitute deck.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14422_255" -->
<a id="c14422_255"></a><blockquote class="code"><p class="quoted">
To reconstitute deck:
<br />&#160;&#160;&#160;&#160;let current suit be hearts;
<br />&#160;&#160;&#160;&#160;now every card is in the card repository;
<br />&#160;&#160;&#160;&#160;while a card is in the card repository:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with current rank running from 1 to 13:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let item be a random card in card repository;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now rank of item is current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now suit of item is current suit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now item is in the deck of cards;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current suit is the suit after the current suit.
</p></blockquote>
<!-- END CODE -->
<p>And now we need a simple setting and some actions to manipulate the deck with:</p>
<!-- START CODE "c14423_255" -->
<a id="c14423_255"></a><blockquote class="code"><p class="quoted">
Section 2 - The Deck and the Discard Pile
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14424_255" -->
<a id="c14424_255"></a><blockquote class="code"><p class="quoted">
The Empty Room is a room. &quot;Nothing to see here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14425_255" -->
<a id="c14425_255"></a><blockquote class="code"><p class="quoted">
The deck of cards is in the Empty Room. It is a closed unopenable container. The description is &quot;A standard poker deck.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14426_255" -->
<a id="c14426_255"></a><blockquote class="code"><p class="quoted">
The discard pile is a closed unopenable container. The description is &quot;Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14427_255" -->
<a id="c14427_255"></a><blockquote class="code"><p class="quoted">
To decide what number is the rounded number of (described set - a description of objects):
<br />&#160;&#160;&#160;&#160;let N be the number of members of the described set;
<br />&#160;&#160;&#160;&#160;let R be N divided by 5;
<br />&#160;&#160;&#160;&#160;let total be R times 5;
<br />&#160;&#160;&#160;&#160;decide on total.
</p></blockquote>
<!-- END CODE -->
<p>The above phrase rounds a number to the nearest five, so that the player is not autistically able to count a large number of cards in the discard pile at a single glance.</p>
<p>This next bit is an optional borrowing from the Activities chapter: we want to prevent Inform printing things like &quot;You can see a discard pile (closed) here.&quot;, since we don't want the player to think of the piles as containers, even though Inform thinks of them in those terms.</p>
<!-- START CODE "c14428_255" -->
<a id="c14428_255"></a><blockquote class="code"><p class="quoted">
Rule for printing room description details of something: do nothing instead.
</p></blockquote>
<!-- END CODE -->
<p>Finally, we want the player to use &quot;draw&quot; and &quot;discard&quot; to manipulate his hand of cards:</p>
<!-- START CODE "c14429_255" -->
<a id="c14429_255"></a><blockquote class="code"><p class="quoted">
Section 3 - Drawing and Discarding Actions
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14430_255" -->
<a id="c14430_255"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;take&quot; and &quot;carry&quot; and &quot;hold&quot; and &quot;get&quot; and &quot;drop&quot; and &quot;throw&quot; and &quot;discard&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14431_255" -->
<a id="c14431_255"></a><blockquote class="code"><p class="quoted">
Understand &quot;take [text]&quot; or &quot;get [text]&quot; or &quot;drop [text]&quot; as a mistake (&quot;Here, you only draw and discard. Nothing else matters at the moment.&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14432_255" -->
<a id="c14432_255"></a><blockquote class="code"><p class="quoted">
Understand &quot;draw&quot; or &quot;draw card&quot; or &quot;draw a card&quot; as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14433_255" -->
<a id="c14433_255"></a><blockquote class="code"><p class="quoted">
Setting action variables for drawing:
<br />&#160;&#160;&#160;&#160;now the card drawn is a random card which is in the deck of cards.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14434_255" -->
<a id="c14434_255"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the card drawn is nothing, say &quot;The deck is completely depleted.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14435_255" -->
<a id="c14435_255"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the number of cards carried by the player is greater than four,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;This is a five-card game; you must discard something before drawing anything further.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14436_255" -->
<a id="c14436_255"></a><blockquote class="code"><p class="quoted">
Carry out drawing:
<br />&#160;&#160;&#160;&#160;move the card drawn to the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14437_255" -->
<a id="c14437_255"></a><blockquote class="code"><p class="quoted">
Report drawing:
<br />&#160;&#160;&#160;&#160;say &quot;You draw [a card drawn].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14438_255" -->
<a id="c14438_255"></a><blockquote class="code"><p class="quoted">
Understand &quot;discard [card]&quot; as discarding. Discarding is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14439_255" -->
<a id="c14439_255"></a><blockquote class="code"><p class="quoted">
Check discarding:
<br />&#160;&#160;&#160;&#160;if the player does not carry the noun, say &quot;You can only discard cards from your own hand.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14440_255" -->
<a id="c14440_255"></a><blockquote class="code"><p class="quoted">
Carry out discarding:
<br />&#160;&#160;&#160;&#160;now the noun is in the discard pile;
<br />&#160;&#160;&#160;&#160;if the discard pile is not visible, move the discard pile to the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14441_255" -->
<a id="c14441_255"></a><blockquote class="code"><p class="quoted">
Report discarding:
<br />&#160;&#160;&#160;&#160;say &quot;You toss [the noun] nonchalantly onto the discard pile.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14442_255" -->
<a id="c14442_255"></a><blockquote class="code"><p class="quoted">
Seeding is an action out of world. Understand &quot;seed&quot; as seeding. Carry out seeding: seed the random-number generator with 5681.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14443_255" -->
<a id="c14443_255"></a><blockquote class="code"><p class="quoted">
Test me with &quot;seed / draw / g / g / g / g / i / discard seven of spades / draw / discard six / draw / i / discard hearts / discard six of diamonds card / draw / draw / i / discard spades card / draw / discard king card&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "407: Tilt 2" "e48" -->
<a id="e48"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example48'); return false;"><b>407</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example48'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Tilt 2</span></b></a><br />A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc339.html#e48"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example48" style="display: none;">
<p>In our previous implementations of playing cards, we've gotten as far as creating decks of individual cards that the player can draw and discard. But in a poker game, one doesn't just have a collection of cards: one has a hand of a specific kind.</p>
<p>Here we take on the job of writing an inventory listing for a poker hand that will reflect the real value of what the player has drawn. To do this, we create a rulebook to sort and assess the cards in the player's hand; its possible return values are limited to the kinds of poker hands that exist, from &quot;high card&quot; to &quot;royal flush&quot;.</p>
<p>The first three sections, creating the deck of cards and the means to parse their names, are identical to those we've already seen in Tilt 1; new material begins at section 4.</p>
<p>For the purposes of demonstration, we're simulating something akin to five-card draw without wilds; stud or hold-em variations would add some other complexities.</p>
<!-- START CODE "c14444_48" -->
<a id="c14444_48"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Tilt[=0x0022=][=0x000A=][=0x000A=]Section 1 - Cards[=0x000A=][=0x000A=]Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand [=0x0022=]heart[=0x0022=] as hearts. Understand [=0x0022=]club[=0x0022=] as clubs. Understand [=0x0022=]diamond[=0x0022=] as diamonds. Understand [=0x0022=]spade[=0x0022=] as spades.[=0x000A=][=0x000A=]A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.[=0x000A=][=0x000A=]52 cards are in the card repository.[=0x000A=][=0x000A=]To say (count - a number) as a card value:[=0x000A=][=0x0009=]choose row count in the Table of Value Names;[=0x000A=][=0x0009=]say [=0x0022=][term entry][=0x0022=].[=0x000A=][=0x000A=]Rule for printing the name of a card (called target):[=0x000A=][=0x0009=]say [=0x0022=][rank of the target as a card value] of [suit of the target][=0x0022=][=0x000A=][=0x000A=]Table of Value Names[=0x000A=]term[=0x0009=]value[=0x0009=]topic[=0x000A=][=0x0022=]ace[=0x0022=][=0x0009=][=0x0022=]1[=0x0022=][=0x0009=][=0x0022=]ace/A/one[=0x0022=][=0x000A=][=0x0022=]deuce[=0x0022=][=0x0009=][=0x0022=]2[=0x0022=][=0x0009=][=0x0022=]deuce/two[=0x0022=][=0x000A=][=0x0022=]three[=0x0022=][=0x0009=][=0x0022=]3[=0x0022=][=0x0009=][=0x0022=]three[=0x0022=][=0x000A=][=0x0022=]four[=0x0022=][=0x0009=][=0x0022=]4[=0x0022=][=0x0009=][=0x0022=]four[=0x0022=][=0x000A=][=0x0022=]five[=0x0022=][=0x0009=][=0x0022=]5[=0x0022=][=0x0009=][=0x0022=]five[=0x0022=][=0x000A=][=0x0022=]six[=0x0022=][=0x0009=][=0x0022=]6[=0x0022=][=0x0009=][=0x0022=]six[=0x0022=][=0x000A=][=0x0022=]seven[=0x0022=][=0x0009=][=0x0022=]7[=0x0022=][=0x0009=][=0x0022=]seven[=0x0022=][=0x000A=][=0x0022=]eight[=0x0022=][=0x0009=][=0x0022=]8[=0x0022=][=0x0009=][=0x0022=]eight[=0x0022=][=0x000A=][=0x0022=]nine[=0x0022=][=0x0009=][=0x0022=]9[=0x0022=][=0x0009=][=0x0022=]nine[=0x0022=][=0x000A=][=0x0022=]ten[=0x0022=][=0x0009=][=0x0022=]10[=0x0022=][=0x0009=][=0x0022=]ten[=0x0022=][=0x000A=][=0x0022=]jack[=0x0022=][=0x0009=][=0x0022=]11[=0x0022=][=0x0009=][=0x0022=]jack/knave/J[=0x0022=][=0x000A=][=0x0022=]queen[=0x0022=][=0x0009=][=0x0022=]12[=0x0022=][=0x0009=][=0x0022=]queen/Q[=0x0022=][=0x000A=][=0x0022=]king[=0x0022=][=0x0009=][=0x0022=]13[=0x0022=][=0x0009=][=0x0022=]king/K[=0x0022=][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=]of [suit][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]while the player[=0x0027=]s command includes [=0x0022=]of[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]cut the matched text;[=0x000A=][=0x0009=]repeat through the Table of Value Names:[=0x000A=][=0x0009=][=0x0009=]while the player[=0x0027=]s command includes topic entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]replace the matched text with value entry.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]reconstitute deck.[=0x000A=][=0x000A=]To reconstitute deck:[=0x000A=][=0x0009=]let current suit be hearts;[=0x000A=][=0x0009=]now every card is in the card repository;[=0x000A=][=0x0009=]while a card is in the card repository:[=0x000A=][=0x0009=][=0x0009=]repeat with current rank running from 1 to 13:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let item be a random card in card repository;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now rank of item is current rank;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now suit of item is current suit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now item is in the deck of cards;[=0x000A=][=0x0009=][=0x0009=]now current suit is the suit after the current suit.[=0x000A=][=0x000A=]Section 2 - The Deck and the Discard Pile[=0x000A=][=0x000A=]The Empty Room is a room. [=0x0022=]Nothing to see here.[=0x0022=][=0x000A=][=0x000A=]The deck of cards is in the Empty Room. It is a closed unopenable container. The description is [=0x0022=]A standard poker deck.[=0x0022=][=0x000A=][=0x000A=]The discard pile is a closed unopenable container. The description is [=0x0022=]Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].[=0x0022=][=0x000A=][=0x000A=]To decide what number is the rounded number of (described set - a description of objects):[=0x000A=][=0x0009=]let N be the number of members of the described set;[=0x000A=][=0x0009=]let R be N divided by 5;[=0x000A=][=0x0009=]let total be R times 5;[=0x000A=][=0x0009=]decide on total.[=0x000A=][=0x000A=]Rule for printing room description details of something: do nothing instead.[=0x000A=][=0x000A=]Section 3 - Drawing and Discarding Actions[=0x000A=][=0x000A=]Understand the commands [=0x0022=]take[=0x0022=] and [=0x0022=]carry[=0x0022=] and [=0x0022=]hold[=0x0022=] and [=0x0022=]get[=0x0022=] and [=0x0022=]drop[=0x0022=] and [=0x0022=]throw[=0x0022=] and [=0x0022=]discard[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]take [text][=0x0022=] or [=0x0022=]get [text][=0x0022=] or [=0x0022=]drop [text][=0x0022=] as a mistake ([=0x0022=]Here, you only draw and discard. Nothing else matters at the moment.[=0x0022=]).[=0x000A=][=0x000A=]Understand [=0x0022=]draw[=0x0022=] or [=0x0022=]draw card[=0x0022=] or [=0x0022=]draw a card[=0x0022=] as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.[=0x000A=][=0x000A=]Setting action variables for drawing:[=0x000A=][=0x0009=]now the card drawn is a random card which is in the deck of cards.[=0x000A=][=0x000A=]Check drawing:[=0x000A=][=0x0009=]if the card drawn is nothing, say [=0x0022=]The deck is completely depleted.[=0x0022=] instead.[=0x000A=][=0x000A=]Check drawing:[=0x000A=][=0x0009=]if the number of cards carried by the player is greater than four,[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]This is a five-card game; you must discard something before drawing anything further.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out drawing:[=0x000A=][=0x0009=]move the card drawn to the player.[=0x000A=][=0x000A=]Report drawing:[=0x000A=][=0x0009=]say [=0x0022=]You draw [a card drawn].[=0x0022=][=0x000A=][=0x000A=][=0x000A=]Understand [=0x0022=]discard [card][=0x0022=] as discarding. Discarding is an action applying to one thing.[=0x000A=][=0x000A=]Check discarding:[=0x000A=][=0x0009=]if the player does not carry the noun, say [=0x0022=]You can only discard cards from your own hand.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out discarding:[=0x000A=][=0x0009=]now the noun is in the discard pile;[=0x000A=][=0x0009=]if the discard pile is not visible, move the discard pile to the location.[=0x000A=][=0x000A=]Report discarding:[=0x000A=][=0x0009=]say [=0x0022=]You toss [the noun] nonchalantly onto the discard pile.[=0x0022=][=0x000A=][=0x000A=][New material begins here. We want to start by grouping cards together, but identifying poker hands only if the player holds a full five cards.][=0x000A=][=0x000A=]Section 4 - Assessing Hands[=0x000A=][=0x000A=]Before listing contents while taking inventory: group cards together.[=0x000A=][=0x000A=]Before grouping together cards:[=0x000A=][=0x0009=]if the number of cards carried by the player is 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][run paragraph on][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]follow the hand-ranking rules;[=0x000A=][=0x0009=][=0x0009=]if the rule succeeded, say [=0x0022=][the outcome of the rulebook][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=]some random cards[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the outcome of the rulebook is pair outcome, say [=0x0022=] of [rank of the first thing held by the player as a card value]s[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][number of cards carried by the player in words] assorted cards[=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=] ([=0x0022=].[=0x000A=][=0x000A=]Rule for grouping together cards:[=0x000A=][=0x0009=]say [=0x0022=][list hand][=0x0022=].[=0x000A=][=0x000A=]To say list hand:[=0x000A=][=0x0009=]let chosen card be the first thing held by the player;[=0x000A=][=0x0009=]while chosen card is a card:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][chosen card][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now chosen card is the next thing held after chosen card;[=0x000A=][=0x0009=][=0x0009=]if chosen card is a card, say [=0x0022=], [=0x0022=].[=0x000A=][=0x000A=]After grouping together cards:[=0x000A=][=0x0009=]say [=0x0022=])[=0x0022=].[=0x000A=][=0x000A=][The ranking of poker hands traditionally depends on three features: 1) whether all the cards are of the same suit (flush); 2) whether the cards constitute a numerical run of ranks (straight); and 3) how many cards or sets of cards are of matching rank (pairs, three of a kind, and four of a kind). Here we will start by assessing our hand to determine these qualities:][=0x000A=][=0x000A=]The hand-ranking rules is a rulebook. The hand-ranking rules have outcomes royal flush, straight flush, four of a kind, full house, flush, straight, three of a kind, two pairs, pair, high card.[=0x000A=][=0x000A=]The hand-ranking rulebook has a truth state called the flushness.[=0x000A=]The hand-ranking rulebook has a truth state called the straightness.[=0x000A=][=0x000A=]The hand-ranking rulebook has a number called the pair count.[=0x000A=]The hand-ranking rulebook has a number called the triple count.[=0x000A=]The hand-ranking rulebook has a number called the quadruple count.[=0x000A=][=0x000A=][For convenience in identifying hand features, and for elegance when we print the hand-listing, we start by sorting the cards in the player[=0x0027=]s hand so that the high-ranked cards are listed first. It is rare that we want to concern ourselves with this, but as we saw in the section on [=0x0022=]Looking at containment by hand[=0x0022=] in the chapter on Change, Inform keeps an ordered list of the items inside any given container; so it does order the objects in the player[=0x0027=]s hand, and the ordering depends on which things were added to the hand most recently. By moving something to the player[=0x0027=]s hand again (even if it was already there), we change this ordering, and wind up with a sorted hand.][=0x000A=][=0x000A=]A card can be sorted or unsorted. A card is usually unsorted.[=0x000A=][=0x000A=]Definition: a card is high if its rank is 11 or more.[=0x000A=]Definition: a card is low if its rank is 4 or less.[=0x000A=][=0x000A=]A hand-ranking rule (this is the initial sort rule):[=0x000A=][=0x0009=]now every card is unsorted;[=0x000A=][=0x0009=]while the player carries an unsorted card:[=0x000A=][=0x0009=][=0x0009=]let item be the lowest unsorted card held by the player;[=0x000A=][=0x0009=][=0x0009=]move item to the player;[=0x000A=][=0x0009=][=0x0009=]now the item is sorted;[=0x000A=][=0x0009=]if sort-debugging is true, say [=0x0022=]-- after initial sort: [list hand][=0x0022=].[=0x000A=][=0x000A=][This last printing instruction is there for diagnostic purposes: later we[=0x0027=]ll add a testing command to turn debugging on and off; when it[=0x0027=]s on, the game will print out its card list at various stages in sorting, to help us trouble-shoot any problems. In normal play, however, this will be off.][=0x000A=][=0x000A=][Next up, a check to see whether the player has a flush:][=0x000A=][=0x000A=]A hand-ranking rule (this is the finding flushness rule):[=0x000A=][=0x0009=]let called suit be the suit of a random card carried by the player;[=0x000A=][=0x0009=]if every card carried by the player is called suit, now flushness is true.[=0x000A=][=0x000A=][Now we check for straights; this is slightly complicated by the fact that an ace can be either the bottom of a low straight (lower than 2) or the top of a high straight (higher than king), so we explicitly check both possibilities.][=0x000A=][=0x000A=]A hand-ranking rule (this is the finding straightness rule):[=0x000A=][=0x0009=]now straightness is true;[=0x000A=][=0x0009=]let N be the rank of the highest card which is carried by the player;[=0x000A=][=0x0009=]repeat with current rank running from N - 4 to N:[=0x000A=][=0x0009=][=0x0009=]now the test rank is the current rank;[=0x000A=][=0x0009=][=0x0009=]unless the player carries a matching card:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the current rank is N - 4 and the current rank is 9 and the player carries an ace card, do nothing; [this covers the case where an ace could be the top card of the sequence][=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise now straightness is false.[=0x000A=][=0x000A=][And finally, we need to identify any groups of cards of the same rank. We want to know how many groups there are and how large each group is (though in practice there can only be one group of three or four in a standard-sized poker hand). We also want to mark any grouped cards so that we can move them to the front of the player[=0x0027=]s hand when we take inventory.][=0x000A=][=0x000A=]A card can be quadrupled, tripled, paired or uncombined.[=0x000A=][=0x000A=]Test rank is a number that varies. Definition: a card is matching if its rank is the test rank.[=0x000A=][=0x000A=][This definition is a convenience so that we don[=0x0027=]t have to write so many explicit loops in the following rule:][=0x000A=][=0x000A=]A hand-ranking rule (this is the counting multiples rule):[=0x000A=][=0x0009=]now every card is uncombined;[=0x000A=][=0x0009=]repeat with current rank running from 1 to 13:[=0x000A=][=0x0009=][=0x0009=]now test rank is current rank;[=0x000A=][=0x0009=][=0x0009=]let N be the number of matching cards held by the player;[=0x000A=][=0x0009=][=0x0009=]if N is 4:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]increment the quadruple count;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now every matching card held by the player is quadrupled;[=0x000A=][=0x0009=][=0x0009=]if N is 3:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]increment the triple count;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now every matching card held by the player is tripled;[=0x000A=][=0x0009=][=0x0009=]if N is 2:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]increment the pair count;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now every matching card held by the player is paired.[=0x000A=][=0x000A=][Next we tweak our sorting to reflect the make-up of the hand. There are two reasons why this might differ from the straight highest-to-lowest sort we did earlier:][=0x000A=][=0x000A=][1) we want to list aces as high unless they are serving as the bottom of a low straight, in which case they should appear last;][=0x000A=][=0x000A=][2) we want combinations to appear at the front of the list, sorted from highest value to lowest value: larger combinations first, then smaller combinations, and combinations of equal size sorted by rank.][=0x000A=][=0x000A=]A hand-ranking rule (this is the move aces up unless there[=0x0027=]s a low straight rule):[=0x000A=][=0x0009=]unless the straightness is true and the lowest card carried by the player is an ace card and the rank of the highest card carried by the player is 5,[=0x000A=][=0x0009=][=0x0009=]now every ace card which is carried by the player is carried by the player;[=0x000A=][=0x0009=]if sort-debugging is true, say [=0x0022=]-- after ace movement rule: [list hand][=0x0022=].[=0x000A=][=0x000A=]A hand-ranking rule (this is the move pairs forward rule):[=0x000A=][=0x0009=]while the player carries a paired card:[=0x000A=][=0x0009=][=0x0009=]let selection be the lowest paired card which is carried by the player;[=0x000A=][=0x0009=][=0x0009=]move the selection to the player;[=0x000A=][=0x0009=][=0x0009=]now the selection is uncombined;[=0x000A=][=0x0009=]if sort-debugging is true, say [=0x0022=]-- after pairs movement: [list hand][=0x0022=].[=0x000A=][=0x000A=]A hand-ranking rule (this is the raise ace pairs rule):[=0x000A=][=0x0009=]if the player carries exactly two ace cards:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through ace cards which are carried by the player:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]move item to the player;[=0x000A=][=0x0009=]if sort-debugging is true, say [=0x0022=]-- after paired-ace movement: [list hand][=0x0022=].[=0x000A=][=0x000A=]A hand-ranking rule (this is the move multiples forward rule):[=0x000A=][=0x0009=]while the player carries a tripled card:[=0x000A=][=0x0009=][=0x0009=]let selection be the lowest tripled card which is carried by the player;[=0x000A=][=0x0009=][=0x0009=]move the selection to the player;[=0x000A=][=0x0009=][=0x0009=]now the selection is uncombined;[=0x000A=][=0x0009=]while the player carries a quadrupled card:[=0x000A=][=0x0009=][=0x0009=]let selection be the lowest quadrupled card which is carried by the player;[=0x000A=][=0x0009=][=0x0009=]move the selection to the player;[=0x000A=][=0x0009=][=0x0009=]now the selection is uncombined;[=0x000A=][=0x0009=]if sort-debugging is true, say [=0x0022=]-- after multiples movement rule: [list hand][=0x0022=].[=0x000A=][=0x000A=]Definition: a card is ace if its rank is 1.[=0x000A=]Definition: a card is king if its rank is 13.[=0x000A=][=0x000A=][Now, having determined the salient qualities of our hand, we run through rules in order from the highest kind of poker combination to the lowest. Because of the order of the source, Inform will choose whichever combination applies first.][=0x000A=][=0x000A=]A hand-ranking rule (this is the royal-flush rule):[=0x000A=][=0x0009=]if flushness is true and straightness is true and the highest card carried by the player is king and the lowest card carried by the player is ace, royal flush.[=0x000A=][=0x000A=]A hand-ranking rule (this is the straight-flushes rule):[=0x000A=][=0x0009=]if flushness is true and straightness is true, straight flush.[=0x000A=][=0x000A=]A hand-ranking rule (this is the four-of-a-kind rule):[=0x000A=][=0x0009=]if the quadruple count is 1, four of a kind.[=0x000A=][=0x000A=]A hand-ranking rule (this is the full-house rule):[=0x000A=][=0x0009=]if the pair count is 1 and the triple count is 1, full house.[=0x000A=][=0x000A=]A hand-ranking rule (this is the flushes rule):[=0x000A=][=0x0009=]if flushness is true, flush.[=0x000A=][=0x000A=]A hand-ranking rule (this is the straights rule):[=0x000A=][=0x0009=]if straightness is true, straight.[=0x000A=][=0x000A=]A hand-ranking rule (this is the three-of-a-kind rule):[=0x000A=][=0x0009=]if triple count is 1, three of a kind.[=0x000A=][=0x000A=]A hand-ranking rule (this is the two-pair rule):[=0x000A=][=0x0009=]if the pair count is 2, two pairs.[=0x000A=][=0x000A=]A hand-ranking rule (this is the pair rule):[=0x000A=][=0x0009=]if the pair count is 1, pair.[=0x000A=][=0x000A=]A hand-ranking rule (this is the default rule):[=0x000A=][=0x0009=]high card.[=0x000A=][=0x000A=][And finally, we need to define our debugging variable here, even though we won[=0x0027=]t give the player the ability to turn it on and off except in the special testing section.][=0x000A=][=0x000A=]Sort-debugging is a truth state that varies.[=0x000A=][=0x000A=][For many examples, a test-me script is enough to prove that the example does what it ought. This example, though, is a bit more complicated, and hard to test randomly. The remainder of the source here shows how we might write a test to verify the desired behavior of our rulebook. Those who are only interested in the rulebook itself can stop reading at this point.][=0x000A=][=0x000A=]Section 5 - Testing hand identification - Not for release[=0x000A=][=0x000A=][For the sake of testing our rules, we provide an apparatus that will load the player[=0x0027=]s hand up with sample hands of each kind, then show the result to make sure that the hand is being correctly identified.][=0x000A=][=0x000A=]Understand [=0x0022=]debug sorting[=0x0022=] as debugging hand sorting. Debugging hand sorting is an action out of world.[=0x000A=][=0x000A=]Carry out debugging hand sorting:[=0x000A=][=0x0009=]if sort-debugging is false, now sort-debugging is true;[=0x000A=][=0x0009=]otherwise now sort-debugging is false.[=0x000A=][=0x000A=]Report debugging hand sorting:[=0x000A=][=0x0009=]say [=0x0022=]Sort debugging is now [if sort-debugging is true]on[otherwise]off[end if].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]draw / g / g / g / g / force hand / g / g / g / g / g / g / g / g / g / g / g / g[=0x0022=].[=0x000A=][=0x000A=][The somewhat rough-and-ready principle of this table is that we will overwrite the cards in the player[=0x0027=]s hand by resetting their ranks and suits; every five rows of the table represent a new poker hand for the game to attempt to sort and identify. These include one example of each of the major kinds of poker hand, plus a couple of variations involving aces which test the special sorting rules.][=0x000A=][=0x000A=]Table of Testing Hands[=0x000A=]set suit[=0x0009=]set rank[=0x000A=]spades[=0x0009=]1[=0x0009=][royal flush][=0x000A=]spades[=0x0009=]13[=0x000A=]spades[=0x0009=]12[=0x000A=]spades[=0x0009=]11[=0x000A=]spades[=0x0009=]10[=0x000A=]clubs[=0x0009=]12[=0x0009=][straight flush][=0x000A=]clubs[=0x0009=]11[=0x000A=]clubs[=0x0009=]10[=0x000A=]clubs[=0x0009=]9[=0x000A=]clubs[=0x0009=]8[=0x000A=]diamonds[=0x0009=]8[=0x0009=][four of a kind][=0x000A=]hearts[=0x0009=]8[=0x000A=]spades[=0x0009=]8[=0x000A=]clubs[=0x0009=]8[=0x000A=]clubs[=0x0009=]3[=0x000A=]clubs[=0x0009=]1[=0x0009=][full house][=0x000A=]spades[=0x0009=]1[=0x000A=]hearts[=0x0009=]10[=0x000A=]spades[=0x0009=]10[=0x000A=]clubs[=0x0009=]10[=0x000A=]hearts[=0x0009=]2[=0x0009=][flush][=0x000A=]hearts[=0x0009=]5[=0x000A=]hearts[=0x0009=]7[=0x000A=]hearts[=0x0009=]11[=0x000A=]hearts[=0x0009=]12[=0x000A=]hearts[=0x0009=]1[=0x0009=][straight][=0x000A=]spades[=0x0009=]13[=0x000A=]diamonds[=0x0009=]12[=0x000A=]clubs[=0x0009=]11[=0x000A=]hearts[=0x0009=]10[=0x000A=]hearts[=0x0009=]2[=0x0009=][three of a kind][=0x000A=]spades[=0x0009=]2[=0x000A=]clubs[=0x0009=]2[=0x000A=]clubs[=0x0009=]4[=0x000A=]spades[=0x0009=]3[=0x000A=]diamonds[=0x0009=]6[=0x0009=][two pairs][=0x000A=]spades[=0x0009=]6[=0x000A=]clubs[=0x0009=]7[=0x000A=]diamonds[=0x0009=]7[=0x000A=]hearts[=0x0009=]9[=0x000A=]diamonds[=0x0009=]6[=0x0009=][two pairs, ace high][=0x000A=]spades[=0x0009=]6[=0x000A=]clubs[=0x0009=]1[=0x000A=]diamonds[=0x0009=]7[=0x000A=]hearts[=0x0009=]1[=0x000A=]hearts[=0x0009=]12[=0x0009=][pair][=0x000A=]spades[=0x0009=]12[=0x000A=]diamonds[=0x0009=]10[=0x000A=]spades[=0x0009=]7[=0x000A=]clubs[=0x0009=]4[=0x000A=]diamonds[=0x0009=]13[=0x0009=][high][=0x000A=]hearts[=0x0009=]11[=0x000A=]spades[=0x0009=]9[=0x000A=]clubs[=0x0009=]7[=0x000A=]diamonds[=0x0009=]5[=0x000A=]hearts[=0x0009=]1[=0x0009=][tricky sorting: low straight][=0x000A=]diamonds[=0x0009=]2[=0x000A=]spades[=0x0009=]3[=0x000A=]diamonds[=0x0009=]4[=0x000A=]diamonds[=0x0009=]5[=0x000A=][=0x000A=]Understand [=0x0022=]force hand[=0x0022=] as forcing a hand. Forcing a hand is an action out of world.[=0x000A=][=0x000A=]Current marker is a number that varies.[=0x000A=][=0x000A=]Carry out forcing a hand:[=0x000A=][=0x0009=]repeat with item running through cards which are carried by the player:[=0x000A=][=0x0009=][=0x0009=]increment current marker;[=0x000A=][=0x0009=][=0x0009=]if current marker is greater than the number of filled rows in the Table of Testing Hands, now current marker is 1;[=0x000A=][=0x0009=][=0x0009=]choose row current marker in the Table of Testing Hands;[=0x000A=][=0x0009=][=0x0009=]now the suit of item is the set suit entry;[=0x000A=][=0x0009=][=0x0009=]now the rank of item is the set rank entry.[=0x000A=][=0x000A=]Report forcing a hand:[=0x000A=][=0x0009=]try taking inventory.[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Tilt&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14445_48" -->
<a id="c14445_48"></a><blockquote class="code"><p class="quoted">
Section 1 - Cards
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14446_48" -->
<a id="c14446_48"></a><blockquote class="code"><p class="quoted">
Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand &quot;heart&quot; as hearts. Understand &quot;club&quot; as clubs. Understand &quot;diamond&quot; as diamonds. Understand &quot;spade&quot; as spades.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14447_48" -->
<a id="c14447_48"></a><blockquote class="code"><p class="quoted">
A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14448_48" -->
<a id="c14448_48"></a><blockquote class="code"><p class="quoted">
52 cards are in the card repository.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14449_48" -->
<a id="c14449_48"></a><blockquote class="code"><p class="quoted">
To say (count - a number) as a card value:
<br />&#160;&#160;&#160;&#160;choose row count in the Table of Value Names;
<br />&#160;&#160;&#160;&#160;say &quot;[term entry]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14450_48" -->
<a id="c14450_48"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a card (called target):
<br />&#160;&#160;&#160;&#160;say &quot;[rank of the target as a card value] of [suit of the target]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14451_48" -->
<a id="c14451_48"></a><blockquote class="code"><p class="quoted">
Table of Value Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">term</p></td><td class="quotedtablecell"><p class="quoted">value</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ace&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;1&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ace/A/one&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;deuce&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;2&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;deuce/two&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;3&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;4&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;5&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;6&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;7&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;8&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;9&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;10&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;jack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;11&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;jack/knave/J&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;queen&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;12&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;queen/Q&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;king&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;13&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;king/K&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14452_48" -->
<a id="c14452_48"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;of [suit]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes &quot;of&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Value Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the matched text with value entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14453_48" -->
<a id="c14453_48"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;reconstitute deck.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14454_48" -->
<a id="c14454_48"></a><blockquote class="code"><p class="quoted">
To reconstitute deck:
<br />&#160;&#160;&#160;&#160;let current suit be hearts;
<br />&#160;&#160;&#160;&#160;now every card is in the card repository;
<br />&#160;&#160;&#160;&#160;while a card is in the card repository:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with current rank running from 1 to 13:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let item be a random card in card repository;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now rank of item is current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now suit of item is current suit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now item is in the deck of cards;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current suit is the suit after the current suit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14455_48" -->
<a id="c14455_48"></a><blockquote class="code"><p class="quoted">
Section 2 - The Deck and the Discard Pile
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14456_48" -->
<a id="c14456_48"></a><blockquote class="code"><p class="quoted">
The Empty Room is a room. &quot;Nothing to see here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14457_48" -->
<a id="c14457_48"></a><blockquote class="code"><p class="quoted">
The deck of cards is in the Empty Room. It is a closed unopenable container. The description is &quot;A standard poker deck.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14458_48" -->
<a id="c14458_48"></a><blockquote class="code"><p class="quoted">
The discard pile is a closed unopenable container. The description is &quot;Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14459_48" -->
<a id="c14459_48"></a><blockquote class="code"><p class="quoted">
To decide what number is the rounded number of (described set - a description of objects):
<br />&#160;&#160;&#160;&#160;let N be the number of members of the described set;
<br />&#160;&#160;&#160;&#160;let R be N divided by 5;
<br />&#160;&#160;&#160;&#160;let total be R times 5;
<br />&#160;&#160;&#160;&#160;decide on total.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14460_48" -->
<a id="c14460_48"></a><blockquote class="code"><p class="quoted">
Rule for printing room description details of something: do nothing instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14461_48" -->
<a id="c14461_48"></a><blockquote class="code"><p class="quoted">
Section 3 - Drawing and Discarding Actions
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14462_48" -->
<a id="c14462_48"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;take&quot; and &quot;carry&quot; and &quot;hold&quot; and &quot;get&quot; and &quot;drop&quot; and &quot;throw&quot; and &quot;discard&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14463_48" -->
<a id="c14463_48"></a><blockquote class="code"><p class="quoted">
Understand &quot;take [text]&quot; or &quot;get [text]&quot; or &quot;drop [text]&quot; as a mistake (&quot;Here, you only draw and discard. Nothing else matters at the moment.&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14464_48" -->
<a id="c14464_48"></a><blockquote class="code"><p class="quoted">
Understand &quot;draw&quot; or &quot;draw card&quot; or &quot;draw a card&quot; as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14465_48" -->
<a id="c14465_48"></a><blockquote class="code"><p class="quoted">
Setting action variables for drawing:
<br />&#160;&#160;&#160;&#160;now the card drawn is a random card which is in the deck of cards.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14466_48" -->
<a id="c14466_48"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the card drawn is nothing, say &quot;The deck is completely depleted.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14467_48" -->
<a id="c14467_48"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the number of cards carried by the player is greater than four,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;This is a five-card game; you must discard something before drawing anything further.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14468_48" -->
<a id="c14468_48"></a><blockquote class="code"><p class="quoted">
Carry out drawing:
<br />&#160;&#160;&#160;&#160;move the card drawn to the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14469_48" -->
<a id="c14469_48"></a><blockquote class="code"><p class="quoted">
Report drawing:
<br />&#160;&#160;&#160;&#160;say &quot;You draw [a card drawn].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14470_48" -->
<a id="c14470_48"></a><blockquote class="code"><p class="quoted">
Understand &quot;discard [card]&quot; as discarding. Discarding is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14471_48" -->
<a id="c14471_48"></a><blockquote class="code"><p class="quoted">
Check discarding:
<br />&#160;&#160;&#160;&#160;if the player does not carry the noun, say &quot;You can only discard cards from your own hand.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14472_48" -->
<a id="c14472_48"></a><blockquote class="code"><p class="quoted">
Carry out discarding:
<br />&#160;&#160;&#160;&#160;now the noun is in the discard pile;
<br />&#160;&#160;&#160;&#160;if the discard pile is not visible, move the discard pile to the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14473_48" -->
<a id="c14473_48"></a><blockquote class="code"><p class="quoted">
Report discarding:
<br />&#160;&#160;&#160;&#160;say &quot;You toss [the noun] nonchalantly onto the discard pile.&quot;
</p></blockquote>
<!-- END CODE -->
<p>New material begins here. We want to start by grouping cards together, but identifying poker hands only if the player holds a full five cards.</p>
<!-- START CODE "c14474_48" -->
<a id="c14474_48"></a><blockquote class="code"><p class="quoted">
Section 4 - Assessing Hands
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14475_48" -->
<a id="c14475_48"></a><blockquote class="code"><p class="quoted">
Before listing contents while taking inventory: group cards together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14476_48" -->
<a id="c14476_48"></a><blockquote class="code"><p class="quoted">
Before grouping together cards:
<br />&#160;&#160;&#160;&#160;if the number of cards carried by the player is 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the hand-ranking rules;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the rule succeeded, say &quot;[the outcome of the rulebook]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;some random cards&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the outcome of the rulebook is pair outcome, say &quot; of [rank of the first thing held by the player as a card value]s&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[number of cards carried by the player in words] assorted cards&quot;;
<br />&#160;&#160;&#160;&#160;say &quot; (&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14477_48" -->
<a id="c14477_48"></a><blockquote class="code"><p class="quoted">
Rule for grouping together cards:
<br />&#160;&#160;&#160;&#160;say &quot;[list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14478_48" -->
<a id="c14478_48"></a><blockquote class="code"><p class="quoted">
To say list hand:
<br />&#160;&#160;&#160;&#160;let chosen card be the first thing held by the player;
<br />&#160;&#160;&#160;&#160;while chosen card is a card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[chosen card]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now chosen card is the next thing held after chosen card;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if chosen card is a card, say &quot;, &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14479_48" -->
<a id="c14479_48"></a><blockquote class="code"><p class="quoted">
After grouping together cards:
<br />&#160;&#160;&#160;&#160;say &quot;)&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The ranking of poker hands traditionally depends on three features: 1) whether all the cards are of the same suit (flush); 2) whether the cards constitute a numerical run of ranks (straight); and 3) how many cards or sets of cards are of matching rank (pairs, three of a kind, and four of a kind). Here we will start by assessing our hand to determine these qualities:</p>
<!-- START CODE "c14480_48" -->
<a id="c14480_48"></a><blockquote class="code"><p class="quoted">
The hand-ranking rules is a rulebook. The hand-ranking rules have outcomes royal flush, straight flush, four of a kind, full house, flush, straight, three of a kind, two pairs, pair, high card.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14481_48" -->
<a id="c14481_48"></a><blockquote class="code"><p class="quoted">
The hand-ranking rulebook has a truth state called the flushness.
<br />The hand-ranking rulebook has a truth state called the straightness.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14482_48" -->
<a id="c14482_48"></a><blockquote class="code"><p class="quoted">
The hand-ranking rulebook has a number called the pair count.
<br />The hand-ranking rulebook has a number called the triple count.
<br />The hand-ranking rulebook has a number called the quadruple count.
</p></blockquote>
<!-- END CODE -->
<p>For convenience in identifying hand features, and for elegance when we print the hand-listing, we start by sorting the cards in the player's hand so that the high-ranked cards are listed first. It is rare that we want to concern ourselves with this, but as we saw in the section on &quot;Looking at containment by hand&quot; in the chapter on Change, Inform keeps an ordered list of the items inside any given container; so it does order the objects in the player's hand, and the ordering depends on which things were added to the hand most recently. By moving something to the player's hand again (even if it was already there), we change this ordering, and wind up with a sorted hand.</p>
<!-- START CODE "c14483_48" -->
<a id="c14483_48"></a><blockquote class="code"><p class="quoted">
A card can be sorted or unsorted. A card is usually unsorted.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14484_48" -->
<a id="c14484_48"></a><blockquote class="code"><p class="quoted">
Definition: a card is high if its rank is 11 or more.
<br />Definition: a card is low if its rank is 4 or less.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14485_48" -->
<a id="c14485_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the initial sort rule):
<br />&#160;&#160;&#160;&#160;now every card is unsorted;
<br />&#160;&#160;&#160;&#160;while the player carries an unsorted card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let item be the lowest unsorted card held by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move item to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is sorted;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after initial sort: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This last printing instruction is there for diagnostic purposes: later we'll add a testing command to turn debugging on and off; when it's on, the game will print out its card list at various stages in sorting, to help us trouble-shoot any problems. In normal play, however, this will be off.</p>
<p>Next up, a check to see whether the player has a flush:</p>
<!-- START CODE "c14486_48" -->
<a id="c14486_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the finding flushness rule):
<br />&#160;&#160;&#160;&#160;let called suit be the suit of a random card carried by the player;
<br />&#160;&#160;&#160;&#160;if every card carried by the player is called suit, now flushness is true.
</p></blockquote>
<!-- END CODE -->
<p>Now we check for straights; this is slightly complicated by the fact that an ace can be either the bottom of a low straight (lower than 2) or the top of a high straight (higher than king), so we explicitly check both possibilities.</p>
<!-- START CODE "c14487_48" -->
<a id="c14487_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the finding straightness rule):
<br />&#160;&#160;&#160;&#160;now straightness is true;
<br />&#160;&#160;&#160;&#160;let N be the rank of the highest card which is carried by the player;
<br />&#160;&#160;&#160;&#160;repeat with current rank running from N - 4 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the test rank is the current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unless the player carries a matching card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current rank is N - 4 and the current rank is 9 and the player carries an ace card, do nothing; [this covers the case where an ace could be the top card of the sequence]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise now straightness is false.
</p></blockquote>
<!-- END CODE -->
<p>And finally, we need to identify any groups of cards of the same rank. We want to know how many groups there are and how large each group is (though in practice there can only be one group of three or four in a standard-sized poker hand). We also want to mark any grouped cards so that we can move them to the front of the player's hand when we take inventory.</p>
<!-- START CODE "c14488_48" -->
<a id="c14488_48"></a><blockquote class="code"><p class="quoted">
A card can be quadrupled, tripled, paired or uncombined.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14489_48" -->
<a id="c14489_48"></a><blockquote class="code"><p class="quoted">
Test rank is a number that varies. Definition: a card is matching if its rank is the test rank.
</p></blockquote>
<!-- END CODE -->
<p>This definition is a convenience so that we don't have to write so many explicit loops in the following rule:</p>
<!-- START CODE "c14490_48" -->
<a id="c14490_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the counting multiples rule):
<br />&#160;&#160;&#160;&#160;now every card is uncombined;
<br />&#160;&#160;&#160;&#160;repeat with current rank running from 1 to 13:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now test rank is current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be the number of matching cards held by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 4:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the quadruple count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is quadrupled;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 3:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the triple count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is tripled;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 2:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the pair count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is paired.
</p></blockquote>
<!-- END CODE -->
<p>Next we tweak our sorting to reflect the make-up of the hand. There are two reasons why this might differ from the straight highest-to-lowest sort we did earlier:</p>
<p>1) we want to list aces as high unless they are serving as the bottom of a low straight, in which case they should appear last;</p>
<p>2) we want combinations to appear at the front of the list, sorted from highest value to lowest value: larger combinations first, then smaller combinations, and combinations of equal size sorted by rank.</p>
<!-- START CODE "c14491_48" -->
<a id="c14491_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move aces up unless there's a low straight rule):
<br />&#160;&#160;&#160;&#160;unless the straightness is true and the lowest card carried by the player is an ace card and the rank of the highest card carried by the player is 5,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every ace card which is carried by the player is carried by the player;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after ace movement rule: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14492_48" -->
<a id="c14492_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move pairs forward rule):
<br />&#160;&#160;&#160;&#160;while the player carries a paired card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest paired card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after pairs movement: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14493_48" -->
<a id="c14493_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the raise ace pairs rule):
<br />&#160;&#160;&#160;&#160;if the player carries exactly two ace cards:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through ace cards which are carried by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move item to the player;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after paired-ace movement: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14494_48" -->
<a id="c14494_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move multiples forward rule):
<br />&#160;&#160;&#160;&#160;while the player carries a tripled card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest tripled card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;while the player carries a quadrupled card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest quadrupled card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after multiples movement rule: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14495_48" -->
<a id="c14495_48"></a><blockquote class="code"><p class="quoted">
Definition: a card is ace if its rank is 1.
<br />Definition: a card is king if its rank is 13.
</p></blockquote>
<!-- END CODE -->
<p>Now, having determined the salient qualities of our hand, we run through rules in order from the highest kind of poker combination to the lowest. Because of the order of the source, Inform will choose whichever combination applies first.</p>
<!-- START CODE "c14496_48" -->
<a id="c14496_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the royal-flush rule):
<br />&#160;&#160;&#160;&#160;if flushness is true and straightness is true and the highest card carried by the player is king and the lowest card carried by the player is ace, royal flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14497_48" -->
<a id="c14497_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the straight-flushes rule):
<br />&#160;&#160;&#160;&#160;if flushness is true and straightness is true, straight flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14498_48" -->
<a id="c14498_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the four-of-a-kind rule):
<br />&#160;&#160;&#160;&#160;if the quadruple count is 1, four of a kind.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14499_48" -->
<a id="c14499_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the full-house rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 1 and the triple count is 1, full house.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14500_48" -->
<a id="c14500_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the flushes rule):
<br />&#160;&#160;&#160;&#160;if flushness is true, flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14501_48" -->
<a id="c14501_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the straights rule):
<br />&#160;&#160;&#160;&#160;if straightness is true, straight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14502_48" -->
<a id="c14502_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the three-of-a-kind rule):
<br />&#160;&#160;&#160;&#160;if triple count is 1, three of a kind.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14503_48" -->
<a id="c14503_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the two-pair rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 2, two pairs.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14504_48" -->
<a id="c14504_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the pair rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 1, pair.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14505_48" -->
<a id="c14505_48"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the default rule):
<br />&#160;&#160;&#160;&#160;high card.
</p></blockquote>
<!-- END CODE -->
<p>And finally, we need to define our debugging variable here, even though we won't give the player the ability to turn it on and off except in the special testing section.</p>
<!-- START CODE "c14506_48" -->
<a id="c14506_48"></a><blockquote class="code"><p class="quoted">
Sort-debugging is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<p>For many examples, a test-me script is enough to prove that the example does what it ought. This example, though, is a bit more complicated, and hard to test randomly. The remainder of the source here shows how we might write a test to verify the desired behavior of our rulebook. Those who are only interested in the rulebook itself can stop reading at this point.</p>
<!-- START CODE "c14507_48" -->
<a id="c14507_48"></a><blockquote class="code"><p class="quoted">
Section 5 - Testing hand identification - Not for release
</p></blockquote>
<!-- END CODE -->
<p>For the sake of testing our rules, we provide an apparatus that will load the player's hand up with sample hands of each kind, then show the result to make sure that the hand is being correctly identified.</p>
<!-- START CODE "c14508_48" -->
<a id="c14508_48"></a><blockquote class="code"><p class="quoted">
Understand &quot;debug sorting&quot; as debugging hand sorting. Debugging hand sorting is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14509_48" -->
<a id="c14509_48"></a><blockquote class="code"><p class="quoted">
Carry out debugging hand sorting:
<br />&#160;&#160;&#160;&#160;if sort-debugging is false, now sort-debugging is true;
<br />&#160;&#160;&#160;&#160;otherwise now sort-debugging is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14510_48" -->
<a id="c14510_48"></a><blockquote class="code"><p class="quoted">
Report debugging hand sorting:
<br />&#160;&#160;&#160;&#160;say &quot;Sort debugging is now [if sort-debugging is true]on[otherwise]off[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14511_48" -->
<a id="c14511_48"></a><blockquote class="code"><p class="quoted">
Test me with &quot;draw / g / g / g / g / force hand / g / g / g / g / g / g / g / g / g / g / g / g&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The somewhat rough-and-ready principle of this table is that we will overwrite the cards in the player's hand by resetting their ranks and suits; every five rows of the table represent a new poker hand for the game to attempt to sort and identify. These include one example of each of the major kinds of poker hand, plus a couple of variations involving aces which test the special sorting rules.</p>
<!-- START CODE "c14512_48" -->
<a id="c14512_48"></a><blockquote class="code"><p class="quoted">
Table of Testing Hands
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">set suit</p></td><td class="quotedtablecell"><p class="quoted">set rank</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[royal flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">12</p></td><td class="quotedtablecell"><p class="quoted">[straight flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">8</p></td><td class="quotedtablecell"><p class="quoted">[four of a kind]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[full house]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">[flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[straight]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">[three of a kind]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">[two pairs]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">[two pairs, ace high]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">12</p></td><td class="quotedtablecell"><p class="quoted">[pair]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">13</p></td><td class="quotedtablecell"><p class="quoted">[high]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[tricky sorting: low straight]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14513_48" -->
<a id="c14513_48"></a><blockquote class="code"><p class="quoted">
Understand &quot;force hand&quot; as forcing a hand. Forcing a hand is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14514_48" -->
<a id="c14514_48"></a><blockquote class="code"><p class="quoted">
Current marker is a number that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14515_48" -->
<a id="c14515_48"></a><blockquote class="code"><p class="quoted">
Carry out forcing a hand:
<br />&#160;&#160;&#160;&#160;repeat with item running through cards which are carried by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment current marker;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if current marker is greater than the number of filled rows in the Table of Testing Hands, now current marker is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row current marker in the Table of Testing Hands;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the suit of item is the set suit entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the rank of item is the set rank entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c14516_48" -->
<a id="c14516_48"></a><blockquote class="code"><p class="quoted">
Report forcing a hand:
<br />&#160;&#160;&#160;&#160;try taking inventory.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc71.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc73.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
