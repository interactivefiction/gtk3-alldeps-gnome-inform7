<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>7.5. Combat and Death</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Combat and Death" -->
<!-- SEARCH SECTION "7.5" -->
<!-- SEARCH SORT "001-007-005-000" -->
<!-- START IGNORE 50 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc50.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 7: Other Characters</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc52.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง7.5. Combat and Death</p>
<p>Not all characters are friendly, and there are times when we may want to include a fight sequence. There are a number of ways to approach this, depending on whether we want to offer the player a random outcome, a predetermined one, or a combat sequence that depends partly on strategy or on having the proper equipment.</p>
<p><span class="boldface">Lanista 1</span> demonstrates randomized combat in the style of a role-playing game. The player has a partially random chance of doing any given amount of damage; both the player and his opponent have hit points, and whichever one runs out first dies. <span class="boldface">Lanista 2</span> continues this idea, but includes weapons that affect the amount of of damage done. <span class="boldface">Red Cross</span> by itself implements a command that we might use to find out how strong characters are at the moment.</p>
<p>A word of warning about designing such sequences: a player who gets a roll he doesn't like always has the option of UNDOing a turn and re-rolling. This means that he can always win a random battle sooner or later; bad luck only means that it takes him longer (so he gets more bored and irritated as he plays through). It is possible to turn off UNDO implementation with</p>
<!-- START CODE "c12519" -->
<a id="c12519"></a><blockquote class="code"><p class="quoted">
Use UNDO prevention.
</p></blockquote>
<!-- END CODE -->
<p>...but there is a good chance that this will irritate players in itself. Role-playing-style combat scenarios need careful design, lest they actively make a story less fun.</p>
<p>In a slightly more realistic setting, combat leaves physical remains behind, unless we're wielding some kind of futuristic weapon that evaporates our opponents entirely: <span class="boldface">Puff of Orange Smoke</span> demonstrates characters who leave corpses behind when they die, while <span class="boldface">Technological Terror</span> more tamely explodes robots into numerous component parts.</p>
<p>Finally, we can imagine some scenarios in which, instead of allowing characters to strike at each other for random damage, we want to introduce an element of strategy. <span class="boldface">Don Pedro's Revenge</span> shows the rudiments of a system in which the characters can make different kinds of attack depending on where they are in a room filled with perches, barrels, and other swashbuckler props.</p>
<p class="crossreference"><a href="Rdoc92.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Saving and Undoing</b></a><i> for more discussion of handling random behavior in games</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "131: Lanista 1" "e371" -->
<a id="e371"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example371'); return false;"><b>131</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example371'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lanista 1</span></b></a><br />Very simple randomized combat in which characters hit one another for a randomized amount of damage.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc133.html#e371"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example371" style="display: none;">
<!-- START CODE "c12520_371" -->
<a id="c12520_371"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Lanista, Part One[=0x0022=][=0x000A=][=0x000A=]The Arena is a room. [=0x0022=]Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.[=0x0022=] The gladiator is a man in the Arena. [=0x0022=]A bare-chested Scythian gladiator faces you, wielding a trident.[=0x0022=][=0x000A=][=0x000A=][We start by recording, for each person, a maximum number of points of damage the person can sustain when starting from health, and the current number of points remaining. In the tradition of role-playing games, these are referred to as hit points.][=0x000A=][=0x000A=]A person has a number called maximum hit points. A person has a number called current hit points.[=0x000A=][=0x000A=]The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.[=0x000A=][=0x000A=]The current hit points of the player is 35. The current hit points of the gladiator is 25.[=0x000A=][=0x000A=][Now our rule for the actual attack. We want first to calculate how much damage the player[=0x0027=]s attack does, inflict that damage, and remove the enemy if he[=0x0027=]s dead; then, if he doesn[=0x0027=]t die, the enemy counter-attacks, also for a randomized amount of damage, and if this kills the player, the game ends in defeat.][=0x000A=][=0x000A=]Instead of attacking someone:[=0x000A=][=0x0009=]let the damage be a random number between 2 and 10;[=0x000A=][=0x0009=]say [=0x0022=]You attack [the noun], causing [damage] points of damage![=0x0022=];[=0x000A=][=0x0009=]decrease the current hit points of the noun by the damage;[=0x000A=][=0x0009=]if the current hit points of the noun is less than 0:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break][The noun] expires, and is immediately carried away by the Arena slaves![=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now the noun is nowhere;[=0x000A=][=0x0009=][=0x0009=]end the story finally;[=0x000A=][=0x0009=][=0x0009=]stop the action;[=0x000A=][=0x0009=]let the enemy damage be a random number between 2 and 10;[=0x000A=][=0x0009=]say [=0x0022=][line break][The noun] attacks you, causing [enemy damage] points of damage![=0x0022=];[=0x000A=][=0x0009=]decrease the current hit points of the player by the enemy damage;[=0x000A=][=0x0009=]if the current hit points of the player is less than 0:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]You expire![=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story.[=0x000A=][=0x000A=][This last bit is a refinement to help the player keep track of how the contest is going:][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the left hand status line is [=0x0022=]You: [current hit points of player][=0x0022=];[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=]Gladiator: [current hit points of gladiator][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]hit gladiator / g / g / g[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Lanista, Part One&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12521_371" -->
<a id="c12521_371"></a><blockquote class="code"><p class="quoted">
The Arena is a room. &quot;Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.&quot; The gladiator is a man in the Arena. &quot;A bare-chested Scythian gladiator faces you, wielding a trident.&quot;
</p></blockquote>
<!-- END CODE -->
<p>We start by recording, for each person, a maximum number of points of damage the person can sustain when starting from health, and the current number of points remaining. In the tradition of role-playing games, these are referred to as hit points.</p>
<!-- START CODE "c12522_371" -->
<a id="c12522_371"></a><blockquote class="code"><p class="quoted">
A person has a number called maximum hit points. A person has a number called current hit points.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12523_371" -->
<a id="c12523_371"></a><blockquote class="code"><p class="quoted">
The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12524_371" -->
<a id="c12524_371"></a><blockquote class="code"><p class="quoted">
The current hit points of the player is 35. The current hit points of the gladiator is 25.
</p></blockquote>
<!-- END CODE -->
<p>Now our rule for the actual attack. We want first to calculate how much damage the player's attack does, inflict that damage, and remove the enemy if he's dead; then, if he doesn't die, the enemy counter-attacks, also for a randomized amount of damage, and if this kills the player, the game ends in defeat.</p>
<!-- START CODE "c12525_371" -->
<a id="c12525_371"></a><blockquote class="code"><p class="quoted">
Instead of attacking someone:
<br />&#160;&#160;&#160;&#160;let the damage be a random number between 2 and 10;
<br />&#160;&#160;&#160;&#160;say &quot;You attack [the noun], causing [damage] points of damage!&quot;;
<br />&#160;&#160;&#160;&#160;decrease the current hit points of the noun by the damage;
<br />&#160;&#160;&#160;&#160;if the current hit points of the noun is less than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break][The noun] expires, and is immediately carried away by the Arena slaves!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story finally;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action;
<br />&#160;&#160;&#160;&#160;let the enemy damage be a random number between 2 and 10;
<br />&#160;&#160;&#160;&#160;say &quot;[line break][The noun] attacks you, causing [enemy damage] points of damage!&quot;;
<br />&#160;&#160;&#160;&#160;decrease the current hit points of the player by the enemy damage;
<br />&#160;&#160;&#160;&#160;if the current hit points of the player is less than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]You expire!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<p>This last bit is a refinement to help the player keep track of how the contest is going:</p>
<!-- START CODE "c12526_371" -->
<a id="c12526_371"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;You: [current hit points of player]&quot;;
<br />&#160;&#160;&#160;&#160;now the right hand status line is &quot;Gladiator: [current hit points of gladiator]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12527_371" -->
<a id="c12527_371"></a><blockquote class="code"><p class="quoted">
Test me with &quot;hit gladiator / g / g / g&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "191: Red Cross" "e307" -->
<a id="e307"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example307'); return false;"><b>191</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example307'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Red Cross</span></b></a><br />A DIAGNOSE command which allows the player to check on the health of someone.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc183.html#e307"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example307" style="display: none;">
<!-- START CODE "c12528_307" -->
<a id="c12528_307"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Red Cross[=0x0022=][=0x000A=][=0x000A=]Diagnosing is an action applying to one visible thing. Understand [=0x0022=]diagnose [something][=0x0022=] as diagnosing.[=0x000A=][=0x000A=]Check diagnosing:[=0x000A=][=0x0009=]if the noun is not a person, say [=0x0022=]Only people can have diagnoses.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out diagnosing:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re not a medical expert.[=0x0022=][=0x000A=][=0x000A=]Instead of diagnosing the player:[=0x000A=][=0x0009=]say [=0x0022=]You feel fine![=0x0022=][=0x000A=][=0x000A=]The Clinic is a room. Fred is a man in the Clinic. The player carries a tongue-depressor.[=0x000A=][=0x000A=]Test me with [=0x0022=]diagnose me / diagnose fred / diagnose tongue-depressor[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Red Cross&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12529_307" -->
<a id="c12529_307"></a><blockquote class="code"><p class="quoted">
Diagnosing is an action applying to one visible thing. Understand &quot;diagnose [something]&quot; as diagnosing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12530_307" -->
<a id="c12530_307"></a><blockquote class="code"><p class="quoted">
Check diagnosing:
<br />&#160;&#160;&#160;&#160;if the noun is not a person, say &quot;Only people can have diagnoses.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12531_307" -->
<a id="c12531_307"></a><blockquote class="code"><p class="quoted">
Carry out diagnosing:
<br />&#160;&#160;&#160;&#160;say &quot;You're not a medical expert.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12532_307" -->
<a id="c12532_307"></a><blockquote class="code"><p class="quoted">
Instead of diagnosing the player:
<br />&#160;&#160;&#160;&#160;say &quot;You feel fine!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12533_307" -->
<a id="c12533_307"></a><blockquote class="code"><p class="quoted">
The Clinic is a room. Fred is a man in the Clinic. The player carries a tongue-depressor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12534_307" -->
<a id="c12534_307"></a><blockquote class="code"><p class="quoted">
Test me with &quot;diagnose me / diagnose fred / diagnose tongue-depressor&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "201: Puff of Orange Smoke" "e434" -->
<a id="e434"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example434'); return false;"><b>201</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example434'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Puff of Orange Smoke</span></b></a><br />A system in which every character has a body, which is left behind when the person dies; attempts to do something to the body are redirected to the person while the person is alive.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc186.html#e434"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example434" style="display: none;">
<p>Suppose we want to let the player kill characters, leaving behind corpses.</p>
<!-- START CODE "c12535_434" -->
<a id="c12535_434"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Puff of Orange Smoke[=0x0022=][=0x000A=][=0x000A=]Paraguay is a room. Bolivia is north of Paraguay. Lydia is a woman in Paraguay. [=0x0022=]Lydia is, as usual, here.[=0x0022=] The description of Lydia is [=0x0022=]Long, long legs and a sarcastic attitude.[=0x0022=] Instead of touching Lydia: say [=0x0022=][=0x0027=]Watch it, sailor,[=0x0027=] she snaps.[=0x0022=][=0x000A=][=0x000A=]A body is a kind of thing. A body is a part of every person. Instead of touching a body: say [=0x0022=][The noun] is grotesquely inert.[=0x0022=][=0x000A=][=0x000A=]The description of Lydia[=0x0027=]s body is [=0x0022=]Long, long legs and no attitude at all.[=0x0022=] The initial appearance of Lydia[=0x0027=]s body is [=0x0022=]Lydia[=0x0027=]s corpse is sprawled at your feet.[=0x0022=][=0x000A=][=0x000A=][Using our [=0x0022=]part of every person...[=0x0022=] line, we[=0x0027=]ve conveniently assigned one body per person. Since we[=0x0027=]re going to separate people from their bodies when the bodies die, though, we also want a more permanent relation that will help us keep track of which bodies used to belong to which people:][=0x000A=][=0x000A=]Spirit-possession relates one person to one body. The verb to be owner of means the spirit-possession relation.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]repeat with victim running through people:[=0x000A=][=0x0009=][=0x0009=]let the corpse be a random body which is part of the victim;[=0x000A=][=0x0009=][=0x0009=]now the victim is owner of the corpse.[=0x000A=][=0x000A=][When Lydia is alive, we want [=0x003E=]TOUCH LYDIA[=0x0027=]S BODY to mean the same thing as [=0x003E=]TOUCH LYDIA, so we use the setting action variables rules as a convenient point at which to reassign the action:][=0x000A=][=0x000A=]Setting action variables when the noun is a body which is part of a person (called owner):[=0x000A=][=0x0009=]now the noun is the owner.[=0x000A=][=0x000A=]Setting action variables when the second noun is a body which is part of a person (called owner):[=0x000A=][=0x0009=]now the second noun is the owner.[=0x000A=][=0x000A=][This doesn[=0x0027=]t change Inform[=0x0027=]s idea about what action is being performed; just about the object it[=0x0027=]s being performed on. The rest of the action will now proceed as if the player had typed [=0x003E=]TOUCH LYDIA.][=0x000A=][=0x000A=][Along similar lines, once Lydia is dead, we want [=0x003E=]MOVE LYDIA to mean [=0x003E=]MOVE LYDIA[=0x0027=]S BODY if the body is in view:][=0x000A=][=0x000A=]Setting action variables when the noun is a dead person and the noun is owner of a visible body (called the mortal remains):[=0x000A=][=0x0009=]now the noun is the mortal remains.[=0x000A=][=0x000A=][The trick is, though, that [=0x003E=]MOVE LYDIA will only be understood if there is something called Lydia that the player can see and refer to, even after she[=0x0027=]s dead. There are various ways to do this, but the least painful here will be to make the deceased Lydia permanently visible, by putting her in an always-accessible backdrop. The backdrop itself will never be mentioned in the game, and we should make its name something that the player is unlikely to type casually; we don[=0x0027=]t want the player to interact with it directly. So:][=0x000A=][=0x000A=]The worldview is a privately-named backdrop. It is everywhere. The spirit-world is a privately-named transparent closed unopenable container. It is part of the worldview.[=0x000A=][=0x000A=]Definition: a person is dead if he is in the spirit-world.[=0x000A=][=0x000A=][It[=0x0027=]s also possible that the player will type something like [=0x003E=]X LYDIA when Lydia[=0x0027=]s corpse is not in view, so we should have an appropriate answer to that as well:][=0x000A=][=0x000A=]Before doing something to a dead person:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is dead; or had you blocked that out?[=0x0022=] instead.[=0x000A=][=0x000A=][Because the before rules happen after the setting action variables rules, this will only ever happen if the corpse is not visible.][=0x000A=][=0x000A=][Now we define the attack itself, which should discard the body, move the spirit to its eternal resting place, and describe the event to the player:][=0x000A=][=0x000A=]Instead of attacking someone:[=0x000A=][=0x0009=]let the corpse be a random body which is part of the noun;[=0x000A=][=0x0009=]move the corpse to the location;[=0x000A=][=0x0009=]move the noun to the spirit-world;[=0x000A=][=0x0009=]say [=0x0022=]With a single blow, you rid the world of [the noun].[=0x0022=][=0x000A=][=0x000A=][And finally a trick borrowed from the chapter on understanding, so that we can refer to [=0x0022=]Lydia[=0x0027=]s body[=0x0022=] while Lydia is alive, but [=0x0022=]Lydia[=0x0027=]s corpse[=0x0022=] only after Lydia has died:][=0x000A=][=0x000A=]Understand [=0x0022=]corpse[=0x0022=] as a body when the item described is not part of a person.[=0x000A=][=0x000A=]Test me with [=0x0022=]x body / x lydia[=0x0027=]s body / touch lydia[=0x0027=]s body / x corpse / kill lydia / look / x lydia[=0x0027=]s body / x lydia[=0x0027=]s corpse / x corpse / x lydia / touch lydia / lydia, hello / n / x lydia / touch lydia / lydia, hello[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Puff of Orange Smoke&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12536_434" -->
<a id="c12536_434"></a><blockquote class="code"><p class="quoted">
Paraguay is a room. Bolivia is north of Paraguay. Lydia is a woman in Paraguay. &quot;Lydia is, as usual, here.&quot; The description of Lydia is &quot;Long, long legs and a sarcastic attitude.&quot; Instead of touching Lydia: say &quot;'Watch it, sailor,' she snaps.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12537_434" -->
<a id="c12537_434"></a><blockquote class="code"><p class="quoted">
A body is a kind of thing. A body is a part of every person. Instead of touching a body: say &quot;[The noun] is grotesquely inert.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12538_434" -->
<a id="c12538_434"></a><blockquote class="code"><p class="quoted">
The description of Lydia's body is &quot;Long, long legs and no attitude at all.&quot; The initial appearance of Lydia's body is &quot;Lydia's corpse is sprawled at your feet.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Using our &quot;part of every person...&quot; line, we've conveniently assigned one body per person. Since we're going to separate people from their bodies when the bodies die, though, we also want a more permanent relation that will help us keep track of which bodies used to belong to which people:</p>
<!-- START CODE "c12539_434" -->
<a id="c12539_434"></a><blockquote class="code"><p class="quoted">
Spirit-possession relates one person to one body. The verb to be owner of means the spirit-possession relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12540_434" -->
<a id="c12540_434"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;repeat with victim running through people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the corpse be a random body which is part of the victim;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the victim is owner of the corpse.
</p></blockquote>
<!-- END CODE -->
<p>When Lydia is alive, we want &gt;TOUCH LYDIA'S BODY to mean the same thing as &gt;TOUCH LYDIA, so we use the setting action variables rules as a convenient point at which to reassign the action:</p>
<!-- START CODE "c12541_434" -->
<a id="c12541_434"></a><blockquote class="code"><p class="quoted">
Setting action variables when the noun is a body which is part of a person (called owner):
<br />&#160;&#160;&#160;&#160;now the noun is the owner.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12542_434" -->
<a id="c12542_434"></a><blockquote class="code"><p class="quoted">
Setting action variables when the second noun is a body which is part of a person (called owner):
<br />&#160;&#160;&#160;&#160;now the second noun is the owner.
</p></blockquote>
<!-- END CODE -->
<p>This doesn't change Inform's idea about what action is being performed; just about the object it's being performed on. The rest of the action will now proceed as if the player had typed &gt;TOUCH LYDIA.</p>
<p>Along similar lines, once Lydia is dead, we want &gt;MOVE LYDIA to mean &gt;MOVE LYDIA'S BODY if the body is in view:</p>
<!-- START CODE "c12543_434" -->
<a id="c12543_434"></a><blockquote class="code"><p class="quoted">
Setting action variables when the noun is a dead person and the noun is owner of a visible body (called the mortal remains):
<br />&#160;&#160;&#160;&#160;now the noun is the mortal remains.
</p></blockquote>
<!-- END CODE -->
<p>The trick is, though, that &gt;MOVE LYDIA will only be understood if there is something called Lydia that the player can see and refer to, even after she's dead. There are various ways to do this, but the least painful here will be to make the deceased Lydia permanently visible, by putting her in an always-accessible backdrop. The backdrop itself will never be mentioned in the game, and we should make its name something that the player is unlikely to type casually; we don't want the player to interact with it directly. So:</p>
<!-- START CODE "c12544_434" -->
<a id="c12544_434"></a><blockquote class="code"><p class="quoted">
The worldview is a privately-named backdrop. It is everywhere. The spirit-world is a privately-named transparent closed unopenable container. It is part of the worldview.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12545_434" -->
<a id="c12545_434"></a><blockquote class="code"><p class="quoted">
Definition: a person is dead if he is in the spirit-world.
</p></blockquote>
<!-- END CODE -->
<p>It's also possible that the player will type something like &gt;X LYDIA when Lydia's corpse is not in view, so we should have an appropriate answer to that as well:</p>
<!-- START CODE "c12546_434" -->
<a id="c12546_434"></a><blockquote class="code"><p class="quoted">
Before doing something to a dead person:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is dead; or had you blocked that out?&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Because the before rules happen after the setting action variables rules, this will only ever happen if the corpse is not visible.</p>
<p>Now we define the attack itself, which should discard the body, move the spirit to its eternal resting place, and describe the event to the player:</p>
<!-- START CODE "c12547_434" -->
<a id="c12547_434"></a><blockquote class="code"><p class="quoted">
Instead of attacking someone:
<br />&#160;&#160;&#160;&#160;let the corpse be a random body which is part of the noun;
<br />&#160;&#160;&#160;&#160;move the corpse to the location;
<br />&#160;&#160;&#160;&#160;move the noun to the spirit-world;
<br />&#160;&#160;&#160;&#160;say &quot;With a single blow, you rid the world of [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And finally a trick borrowed from the chapter on understanding, so that we can refer to &quot;Lydia's body&quot; while Lydia is alive, but &quot;Lydia's corpse&quot; only after Lydia has died:</p>
<!-- START CODE "c12548_434" -->
<a id="c12548_434"></a><blockquote class="code"><p class="quoted">
Understand &quot;corpse&quot; as a body when the item described is not part of a person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12549_434" -->
<a id="c12549_434"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x body / x lydia's body / touch lydia's body / x corpse / kill lydia / look / x lydia's body / x lydia's corpse / x corpse / x lydia / touch lydia / lydia, hello / n / x lydia / touch lydia / lydia, hello&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "293: Lanista 2" "e317" -->
<a id="e317"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example317'); return false;"><b>293</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example317'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lanista 2</span></b></a><br />Randomized combat in which the damage done depends on what weapons the characters are wielding, and in which an ATTACK IT WITH action is created to replace regular attacking. Also folds a new DIAGNOSE command into the system.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc267.html#e317"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example317" style="display: none;">
<p>Back in the chapter on randomization, we explored a way to create a randomized combat system. That system didn't allow for multiple weapons, though. Here we explore how to create an ATTACK IT WITH action that will let the player choose between weapons with different maximum powers.</p>
<p>We're also going to rewrite that original &quot;instead of attacking:&quot; rule into an attacking it with action that can be performed equally by the player or by any of the player's enemies.</p>
<!-- START CODE "c12550_317" -->
<a id="c12550_317"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Lanista, Part Two[=0x0022=][=0x000A=][=0x000A=]The Arena is a room. [=0x0022=]Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.[=0x0022=] The gladiator is a man in the Arena. [=0x0022=]A bare-chested Scythian gladiator faces you, wielding [a list of weapons carried by the gladiator].[=0x0022=][=0x000A=][=0x000A=]Section 1 - Hit Points[=0x000A=][=0x000A=]A person has a number called maximum hit points. A person has a number called current hit points.[=0x000A=][=0x000A=]The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.[=0x000A=][=0x000A=][In our simpler version of this example we set the current hit points by hand, but in a game with many characters this would get dull and repetitive, so here we[=0x0027=]ll use a [=0x0022=]when play begins[=0x0022=] to set all current hit point values automatically to maximum:][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]repeat with victim running through people:[=0x000A=][=0x0009=][=0x0009=]now the current hit points of the victim is the maximum hit points of the victim.[=0x000A=][=0x000A=]Definition: a person is dead if his current hit points are less than 0.[=0x000A=][=0x000A=]Section 2 - Diagnosis[=0x000A=][=0x000A=]Diagnosing is an action applying to one visible thing. Understand [=0x0022=]diagnose [something][=0x0022=] as diagnosing.[=0x000A=][=0x000A=]Check diagnosing:[=0x000A=][=0x0009=]if the noun is not a person, say [=0x0022=]Only people can have diagnoses.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out diagnosing:[=0x000A=][=0x0009=]say [=0x0022=][if the noun is the player]You have[otherwise][The noun] has[end if] [current hit points of the noun] out of a possible [maximum hit points of the noun] hit points remaining.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Weapons[=0x000A=][=0x000A=]A weapon is a kind of thing. A weapon has a number called the maximum damage. The maximum damage of a weapon is usually 4.[=0x000A=][=0x000A=]The gladiator carries a weapon called a trident. The maximum damage of the trident is 5. The gladiator carries a weapon called a net. The maximum damage of the net is 1.[=0x000A=][=0x000A=]The player carries a weapon called a mace. The maximum damage of the mace is 3.[=0x000A=][=0x000A=]Section 4 - Attacking it with[=0x000A=][=0x000A=][In our new system, we want to specify what is being used for an attack. This means that we need to create a new [=0x0022=]attacking it with[=0x0022=] action, and also that we should disable the existing [=0x0022=]attacking...[=0x0022=] command.][=0x000A=][=0x000A=][Here[=0x0027=]s why: If we leave the default attack command in place, Inform will continue to accept commands like [=0x003E=]ATTACK GLADIATOR, but reply foolishly with the default [=0x0022=]Violence is not the answer...[=0x0022=] response.][=0x000A=][=0x000A=][A somewhat better approach would be to change the reply of [=0x003E=]ATTACK GLADIATOR to say something like [=0x0022=]You must specify a weapon to attack with.[=0x0022=] But this is still less than ideal, because it means that the player has to then rewrite his entire command. If, on the other hand, we take out [=0x0022=]ATTACK GLADIATOR[=0x0022=] entirely, the game will always prompt [=0x0022=]What do you want to attack the gladiator with?[=0x0022=] -- which teaches the player the correct command structure for this particular game, and avoids pretending to understand any command that is not meaningful within this game.][=0x000A=][=0x000A=][This is a little bit of work because ATTACK has a lot of synonyms in the default library, but if we look through the actions index we can find them all:][=0x000A=][=0x000A=]Understand the commands [=0x0022=]attack[=0x0022=] and [=0x0022=]punch[=0x0022=] and [=0x0022=]destroy[=0x0022=] and [=0x0022=]kill[=0x0022=] and [=0x0022=]murder[=0x0022=] and [=0x0022=]hit[=0x0022=] and [=0x0022=]thump[=0x0022=] and [=0x0022=]break[=0x0022=] and [=0x0022=]smash[=0x0022=] and [=0x0022=]torture[=0x0022=] and [=0x0022=]wreck[=0x0022=] as something new.[=0x000A=][=0x000A=][Now we make our new command:][=0x000A=][=0x000A=]Attacking it with is an action applying to one visible thing and one carried thing. Understand [=0x0022=]attack [someone] with [something preferably held][=0x0022=] as attacking it with.[=0x000A=][=0x000A=][Note that we[=0x0027=]ve specified [=0x0022=]one carried thing[=0x0022=], because we want the player to pick up a weapon to use if necessary. And now we assign all the old attack vocabulary to apply to the new command:][=0x000A=][=0x000A=]Understand the commands [=0x0022=]punch[=0x0022=] and [=0x0022=]destroy[=0x0022=] and [=0x0022=]kill[=0x0022=] and [=0x0022=]murder[=0x0022=] and [=0x0022=]hit[=0x0022=] and [=0x0022=]thump[=0x0022=] and [=0x0022=]break[=0x0022=] and [=0x0022=]smash[=0x0022=] and [=0x0022=]torture[=0x0022=] and [=0x0022=]wreck[=0x0022=] as [=0x0022=]attack[=0x0022=].[=0x000A=][=0x000A=][This may seem counter-intuitive, but order of source code matters here: we first get rid of the old, default vocabulary, then define our new action, then make the vocabulary apply to that new action. Inform will now understand [=0x003E=]HIT GLADIATOR WITH TRIDENT, [=0x003E=]BREAK GLADIATOR WITH TRIDENT, and so on.][=0x000A=][=0x000A=][Our new action is also a perfect place to use an action variable: we[=0x0027=]re going to need to choose an amount of damage done and refer to that several times in our action rules. So let[=0x0027=]s set that up first:][=0x000A=][=0x000A=]The attacking it with action has a number called the damage inflicted.[=0x000A=][=0x000A=]Setting action variables for attacking something with something:[=0x000A=][=0x0009=]if the second noun is a weapon:[=0x000A=][=0x0009=][=0x0009=]let the maximum attack be the maximum damage of the second noun;[=0x000A=][=0x0009=][=0x0009=]now the damage inflicted is a random number between 1 and the maximum attack.[=0x000A=][=0x000A=]Check an actor attacking something with something (this is the can[=0x0027=]t attack with something that isn[=0x0027=]t a weapon rule):[=0x000A=][=0x0009=]if the second noun is not a weapon:[=0x000A=][=0x0009=][=0x0009=]if the actor is the player, say [=0x0022=][The second noun] does not qualify as a weapon.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Check an actor attacking something with something (this is the can[=0x0027=]t attack a non-person rule):[=0x000A=][=0x0009=]if the noun is not a person:[=0x000A=][=0x0009=][=0x0009=]if the actor is the player, say [=0x0022=][The noun] has no life to lose.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out an actor attacking something with something (this is the standard attacking it with a weapon rule):[=0x000A=][=0x0009=]decrease the current hit points of the noun by the damage inflicted;[=0x000A=][=0x0009=]if the noun is dead:[=0x000A=][=0x0009=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=][Though our checks and carry-out rules are similar regardless of who is acting, we[=0x0027=]re going to want actions to be described differently for different actors, so we[=0x0027=]ll use separate [=0x0022=]report attacking[=0x0022=] and [=0x0022=]report someone attacking[=0x0022=] rules. We[=0x0027=]ll also make some special cases for when the character has died as a result of the attack:][=0x000A=][=0x000A=]Report attacking a dead person with something (this is the death-report priority rule):[=0x000A=][=0x0009=]say [=0x0022=]You attack with [the second noun], killing [the noun]![=0x0022=] instead.[=0x000A=][=0x000A=]Report attacking someone with something (this is the normal attacking report rule):[=0x000A=][=0x0009=]say [=0x0022=]You attack [the noun] with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]Report someone attacking the player with something when the player is dead (this is the player[=0x0027=]s-death priority rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks you with [the second noun], finishing you off![=0x0022=];[=0x000A=][=0x0009=]end the story;[=0x000A=][=0x0009=]stop the action[=0x000A=][=0x000A=]Report someone attacking the player with something (this is the standard report someone attacking the player with rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks you with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]Report someone attacking something with something (this is the standard report attacking it with rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks [the noun] with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the left hand status line is [=0x0022=]You: [current hit points of player][=0x0022=];[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=]Gladiator: [current hit points of gladiator][=0x0022=].[=0x000A=][=0x000A=]Every turn (this is the gladiator-attack rule):[=0x000A=][=0x0009=]if the gladiator is not dead, try the gladiator attacking the player with a random weapon which is carried by the gladiator.[=0x000A=][=0x000A=]Test me with [=0x0022=]hit gladiator with mace / kill gladiator / drop mace / attack gladiator / attack gladiator with mace / g / g[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Lanista, Part Two&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12551_317" -->
<a id="c12551_317"></a><blockquote class="code"><p class="quoted">
The Arena is a room. &quot;Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.&quot; The gladiator is a man in the Arena. &quot;A bare-chested Scythian gladiator faces you, wielding [a list of weapons carried by the gladiator].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12552_317" -->
<a id="c12552_317"></a><blockquote class="code"><p class="quoted">
Section 1 - Hit Points
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12553_317" -->
<a id="c12553_317"></a><blockquote class="code"><p class="quoted">
A person has a number called maximum hit points. A person has a number called current hit points.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12554_317" -->
<a id="c12554_317"></a><blockquote class="code"><p class="quoted">
The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.
</p></blockquote>
<!-- END CODE -->
<p>In our simpler version of this example we set the current hit points by hand, but in a game with many characters this would get dull and repetitive, so here we'll use a &quot;when play begins&quot; to set all current hit point values automatically to maximum:</p>
<!-- START CODE "c12555_317" -->
<a id="c12555_317"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;repeat with victim running through people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the current hit points of the victim is the maximum hit points of the victim.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12556_317" -->
<a id="c12556_317"></a><blockquote class="code"><p class="quoted">
Definition: a person is dead if his current hit points are less than 0.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12557_317" -->
<a id="c12557_317"></a><blockquote class="code"><p class="quoted">
Section 2 - Diagnosis
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12558_317" -->
<a id="c12558_317"></a><blockquote class="code"><p class="quoted">
Diagnosing is an action applying to one visible thing. Understand &quot;diagnose [something]&quot; as diagnosing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12559_317" -->
<a id="c12559_317"></a><blockquote class="code"><p class="quoted">
Check diagnosing:
<br />&#160;&#160;&#160;&#160;if the noun is not a person, say &quot;Only people can have diagnoses.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12560_317" -->
<a id="c12560_317"></a><blockquote class="code"><p class="quoted">
Carry out diagnosing:
<br />&#160;&#160;&#160;&#160;say &quot;[if the noun is the player]You have[otherwise][The noun] has[end if] [current hit points of the noun] out of a possible [maximum hit points of the noun] hit points remaining.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12561_317" -->
<a id="c12561_317"></a><blockquote class="code"><p class="quoted">
Section 3 - Weapons
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12562_317" -->
<a id="c12562_317"></a><blockquote class="code"><p class="quoted">
A weapon is a kind of thing. A weapon has a number called the maximum damage. The maximum damage of a weapon is usually 4.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12563_317" -->
<a id="c12563_317"></a><blockquote class="code"><p class="quoted">
The gladiator carries a weapon called a trident. The maximum damage of the trident is 5. The gladiator carries a weapon called a net. The maximum damage of the net is 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12564_317" -->
<a id="c12564_317"></a><blockquote class="code"><p class="quoted">
The player carries a weapon called a mace. The maximum damage of the mace is 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12565_317" -->
<a id="c12565_317"></a><blockquote class="code"><p class="quoted">
Section 4 - Attacking it with
</p></blockquote>
<!-- END CODE -->
<p>In our new system, we want to specify what is being used for an attack. This means that we need to create a new &quot;attacking it with&quot; action, and also that we should disable the existing &quot;attacking...&quot; command.</p>
<p>Here's why: If we leave the default attack command in place, Inform will continue to accept commands like &gt;ATTACK GLADIATOR, but reply foolishly with the default &quot;Violence is not the answer...&quot; response.</p>
<p>A somewhat better approach would be to change the reply of &gt;ATTACK GLADIATOR to say something like &quot;You must specify a weapon to attack with.&quot; But this is still less than ideal, because it means that the player has to then rewrite his entire command. If, on the other hand, we take out &quot;ATTACK GLADIATOR&quot; entirely, the game will always prompt &quot;What do you want to attack the gladiator with?&quot; -- which teaches the player the correct command structure for this particular game, and avoids pretending to understand any command that is not meaningful within this game.</p>
<p>This is a little bit of work because ATTACK has a lot of synonyms in the default library, but if we look through the actions index we can find them all:</p>
<!-- START CODE "c12566_317" -->
<a id="c12566_317"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;attack&quot; and &quot;punch&quot; and &quot;destroy&quot; and &quot;kill&quot; and &quot;murder&quot; and &quot;hit&quot; and &quot;thump&quot; and &quot;break&quot; and &quot;smash&quot; and &quot;torture&quot; and &quot;wreck&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<p>Now we make our new command:</p>
<!-- START CODE "c12567_317" -->
<a id="c12567_317"></a><blockquote class="code"><p class="quoted">
Attacking it with is an action applying to one visible thing and one carried thing. Understand &quot;attack [someone] with [something preferably held]&quot; as attacking it with.
</p></blockquote>
<!-- END CODE -->
<p>Note that we've specified &quot;one carried thing&quot;, because we want the player to pick up a weapon to use if necessary. And now we assign all the old attack vocabulary to apply to the new command:</p>
<!-- START CODE "c12568_317" -->
<a id="c12568_317"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;punch&quot; and &quot;destroy&quot; and &quot;kill&quot; and &quot;murder&quot; and &quot;hit&quot; and &quot;thump&quot; and &quot;break&quot; and &quot;smash&quot; and &quot;torture&quot; and &quot;wreck&quot; as &quot;attack&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This may seem counter-intuitive, but order of source code matters here: we first get rid of the old, default vocabulary, then define our new action, then make the vocabulary apply to that new action. Inform will now understand &gt;HIT GLADIATOR WITH TRIDENT, &gt;BREAK GLADIATOR WITH TRIDENT, and so on.</p>
<p>Our new action is also a perfect place to use an action variable: we're going to need to choose an amount of damage done and refer to that several times in our action rules. So let's set that up first:</p>
<!-- START CODE "c12569_317" -->
<a id="c12569_317"></a><blockquote class="code"><p class="quoted">
The attacking it with action has a number called the damage inflicted.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12570_317" -->
<a id="c12570_317"></a><blockquote class="code"><p class="quoted">
Setting action variables for attacking something with something:
<br />&#160;&#160;&#160;&#160;if the second noun is a weapon:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the maximum attack be the maximum damage of the second noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the damage inflicted is a random number between 1 and the maximum attack.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12571_317" -->
<a id="c12571_317"></a><blockquote class="code"><p class="quoted">
Check an actor attacking something with something (this is the can't attack with something that isn't a weapon rule):
<br />&#160;&#160;&#160;&#160;if the second noun is not a weapon:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is the player, say &quot;[The second noun] does not qualify as a weapon.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12572_317" -->
<a id="c12572_317"></a><blockquote class="code"><p class="quoted">
Check an actor attacking something with something (this is the can't attack a non-person rule):
<br />&#160;&#160;&#160;&#160;if the noun is not a person:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is the player, say &quot;[The noun] has no life to lose.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12573_317" -->
<a id="c12573_317"></a><blockquote class="code"><p class="quoted">
Carry out an actor attacking something with something (this is the standard attacking it with a weapon rule):
<br />&#160;&#160;&#160;&#160;decrease the current hit points of the noun by the damage inflicted;
<br />&#160;&#160;&#160;&#160;if the noun is dead:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>Though our checks and carry-out rules are similar regardless of who is acting, we're going to want actions to be described differently for different actors, so we'll use separate &quot;report attacking&quot; and &quot;report someone attacking&quot; rules. We'll also make some special cases for when the character has died as a result of the attack:</p>
<!-- START CODE "c12574_317" -->
<a id="c12574_317"></a><blockquote class="code"><p class="quoted">
Report attacking a dead person with something (this is the death-report priority rule):
<br />&#160;&#160;&#160;&#160;say &quot;You attack with [the second noun], killing [the noun]!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12575_317" -->
<a id="c12575_317"></a><blockquote class="code"><p class="quoted">
Report attacking someone with something (this is the normal attacking report rule):
<br />&#160;&#160;&#160;&#160;say &quot;You attack [the noun] with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12576_317" -->
<a id="c12576_317"></a><blockquote class="code"><p class="quoted">
Report someone attacking the player with something when the player is dead (this is the player's-death priority rule):
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] attacks you with [the second noun], finishing you off!&quot;;
<br />&#160;&#160;&#160;&#160;end the story;
<br />&#160;&#160;&#160;&#160;stop the action
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12577_317" -->
<a id="c12577_317"></a><blockquote class="code"><p class="quoted">
Report someone attacking the player with something (this is the standard report someone attacking the player with rule):
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] attacks you with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12578_317" -->
<a id="c12578_317"></a><blockquote class="code"><p class="quoted">
Report someone attacking something with something (this is the standard report attacking it with rule):
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] attacks [the noun] with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12579_317" -->
<a id="c12579_317"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;You: [current hit points of player]&quot;;
<br />&#160;&#160;&#160;&#160;now the right hand status line is &quot;Gladiator: [current hit points of gladiator]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12580_317" -->
<a id="c12580_317"></a><blockquote class="code"><p class="quoted">
Every turn (this is the gladiator-attack rule):
<br />&#160;&#160;&#160;&#160;if the gladiator is not dead, try the gladiator attacking the player with a random weapon which is carried by the gladiator.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12581_317" -->
<a id="c12581_317"></a><blockquote class="code"><p class="quoted">
Test me with &quot;hit gladiator with mace / kill gladiator / drop mace / attack gladiator / attack gladiator with mace / g / g&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Those devoted to role-playing will note that our form of randomization is still pretty naive: most RPG systems use multiple dice in order to create more interesting probability curves. For a system that simulates actual dice-rolling, see the full &quot;Reliques of Tolti-Aph&quot; game.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "113: Don Pedro's Revenge" "e308" -->
<a id="e308"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example308'); return false;"><b>113</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example308'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Don Pedro's Revenge</span></b></a><br />Combat scenario in which the player's footing and position changes from move to move, and the command prompt also changes to reflect that.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc117.html#e308"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example308" style="display: none;">
<p>Suppose our game features a detailed simulated combat between the player character and his opponent. He might have several weapons available, and several types of attack available; and at any given time he might be perched up in the rigging of his ship, standing on the open deck, or boxed in between some barrels. His options will vary depending on his position, and obviously it would detract from the pacing to make the player keep LOOKing in the middle of combat in order to remind himself where he is. Instead, we'll roll this information into the command prompt:</p>
<!-- START CODE "c12582_308" -->
<a id="c12582_308"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Don Pedro[=0x0027=]s Revenge[=0x0022=][=0x000A=][=0x000A=]The Deck of the Helene Marie is a room. [=0x0022=]The two crews are embattled all around you, but your attention is reserved for your particular enemy: Don Pedro.[=0x0022=][=0x000A=][=0x000A=]Table of Random Prompts[=0x000A=]position[=0x0009=]prompt[=0x000A=]boxed[=0x0009=][=0x0022=]So securely boxed-in that you can really only parry or thrust, you try to [=0x0022=][=0x000A=]boxed[=0x0009=][=0x0022=]Trapped between your barrels, you decide to [=0x0022=][=0x000A=]perched[=0x0009=][=0x0022=]Able to slice at your attackers but not to advance or retreat, you choose to [=0x0022=][=0x000A=]perched[=0x0009=][=0x0022=]Perched up here with the advantage of height (but little mobility), you attempt to [=0x0022=][=0x000A=]free[=0x0009=][=0x0022=]Out on the open deck with no impediments, free to advance or retreat, you decide to [=0x0022=][=0x000A=][=0x000A=]When play begins: reset the prompt.[=0x000A=][=0x000A=]Every turn: reset the prompt.[=0x000A=][=0x000A=]To reset the prompt:[=0x000A=][=0x0009=]sort the Table of Random Prompts in random order;[=0x000A=][=0x0009=]repeat through the Table of Random Prompts:[=0x000A=][=0x0009=][=0x0009=]if the position entry is the placement of the player:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the command prompt is prompt entry;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]stop.[=0x000A=][=0x000A=]After reading a command: say conditional paragraph break.[=0x000A=][=0x000A=]A placement is a kind of value. The placements are boxed, perched, free. The player has a placement. The player is free.[=0x000A=][=0x000A=]Understand [=0x0022=]retreat[=0x0022=] or [=0x0022=]parry[=0x0022=] as retreating. Retreating is an action applying to nothing.[=0x000A=][=0x000A=]Check retreating:[=0x000A=][=0x0009=]if the player is perched, say [=0x0022=]You can[=0x0027=]t move backward or parry very successfully from this position.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out retreating:[=0x000A=][=0x0009=]now the player is boxed;[=0x000A=][=0x0009=]say [=0x0022=]You protect yourself, but end up wedged in between two barrels.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]thrust[=0x0022=] or [=0x0022=]advance[=0x0022=] as advancing. Advancing is an action applying to nothing.[=0x000A=][=0x000A=]Check advancing:[=0x000A=][=0x0009=]if the player is perched, say [=0x0022=]You can[=0x0027=]t move forward from here, only slash.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out advancing:[=0x000A=][=0x0009=]now the player is free;[=0x000A=][=0x0009=]say [=0x0022=]You push forward aggressively, making your way to the open deck.[=0x0022=][=0x000A=][=0x000A=]Instead of jumping:[=0x000A=][=0x0009=]now the player is perched;[=0x000A=][=0x0009=]say [=0x0022=]You leap and swing yourself boldly up into the rigging, leaving your attackers beneath you.[=0x0022=][=0x000A=][=0x000A=]Instead of jumping when the player is perched:[=0x000A=][=0x0009=]now the player is free;[=0x000A=][=0x0009=]say [=0x0022=]You leap down from your position, into the middle of the deck.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]advance / jump / advance / retreat / jump / retreat / retreat / advance[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Don Pedro's Revenge&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12583_308" -->
<a id="c12583_308"></a><blockquote class="code"><p class="quoted">
The Deck of the Helene Marie is a room. &quot;The two crews are embattled all around you, but your attention is reserved for your particular enemy: Don Pedro.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12584_308" -->
<a id="c12584_308"></a><blockquote class="code"><p class="quoted">
Table of Random Prompts
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">position</p></td><td class="quotedtablecell"><p class="quoted">prompt</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">boxed</p></td><td class="quotedtablecell"><p class="quoted">&quot;So securely boxed-in that you can really only parry or thrust, you try to &quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">boxed</p></td><td class="quotedtablecell"><p class="quoted">&quot;Trapped between your barrels, you decide to &quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">perched</p></td><td class="quotedtablecell"><p class="quoted">&quot;Able to slice at your attackers but not to advance or retreat, you choose to &quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">perched</p></td><td class="quotedtablecell"><p class="quoted">&quot;Perched up here with the advantage of height (but little mobility), you attempt to &quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">free</p></td><td class="quotedtablecell"><p class="quoted">&quot;Out on the open deck with no impediments, free to advance or retreat, you decide to &quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12585_308" -->
<a id="c12585_308"></a><blockquote class="code"><p class="quoted">
When play begins: reset the prompt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12586_308" -->
<a id="c12586_308"></a><blockquote class="code"><p class="quoted">
Every turn: reset the prompt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12587_308" -->
<a id="c12587_308"></a><blockquote class="code"><p class="quoted">
To reset the prompt:
<br />&#160;&#160;&#160;&#160;sort the Table of Random Prompts in random order;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Random Prompts:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the position entry is the placement of the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the command prompt is prompt entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12588_308" -->
<a id="c12588_308"></a><blockquote class="code"><p class="quoted">
After reading a command: say conditional paragraph break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12589_308" -->
<a id="c12589_308"></a><blockquote class="code"><p class="quoted">
A placement is a kind of value. The placements are boxed, perched, free. The player has a placement. The player is free.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12590_308" -->
<a id="c12590_308"></a><blockquote class="code"><p class="quoted">
Understand &quot;retreat&quot; or &quot;parry&quot; as retreating. Retreating is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12591_308" -->
<a id="c12591_308"></a><blockquote class="code"><p class="quoted">
Check retreating:
<br />&#160;&#160;&#160;&#160;if the player is perched, say &quot;You can't move backward or parry very successfully from this position.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12592_308" -->
<a id="c12592_308"></a><blockquote class="code"><p class="quoted">
Carry out retreating:
<br />&#160;&#160;&#160;&#160;now the player is boxed;
<br />&#160;&#160;&#160;&#160;say &quot;You protect yourself, but end up wedged in between two barrels.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12593_308" -->
<a id="c12593_308"></a><blockquote class="code"><p class="quoted">
Understand &quot;thrust&quot; or &quot;advance&quot; as advancing. Advancing is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12594_308" -->
<a id="c12594_308"></a><blockquote class="code"><p class="quoted">
Check advancing:
<br />&#160;&#160;&#160;&#160;if the player is perched, say &quot;You can't move forward from here, only slash.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12595_308" -->
<a id="c12595_308"></a><blockquote class="code"><p class="quoted">
Carry out advancing:
<br />&#160;&#160;&#160;&#160;now the player is free;
<br />&#160;&#160;&#160;&#160;say &quot;You push forward aggressively, making your way to the open deck.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12596_308" -->
<a id="c12596_308"></a><blockquote class="code"><p class="quoted">
Instead of jumping:
<br />&#160;&#160;&#160;&#160;now the player is perched;
<br />&#160;&#160;&#160;&#160;say &quot;You leap and swing yourself boldly up into the rigging, leaving your attackers beneath you.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12597_308" -->
<a id="c12597_308"></a><blockquote class="code"><p class="quoted">
Instead of jumping when the player is perched:
<br />&#160;&#160;&#160;&#160;now the player is free;
<br />&#160;&#160;&#160;&#160;say &quot;You leap down from your position, into the middle of the deck.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12598_308" -->
<a id="c12598_308"></a><blockquote class="code"><p class="quoted">
Test me with &quot;advance / jump / advance / retreat / jump / retreat / retreat / advance&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Of course, this won't be much fun until we also provide the player with a few weapons, some more fighting maneuvers, and, most of all, a Don Pedro to defeat.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "127: Technological Terror" "e94" -->
<a id="e94"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example94'); return false;"><b>127</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example94'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Technological Terror</span></b></a><br />A ray gun which destroys objects, leaving their component parts behind.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc126.html#e94"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example94" style="display: none;">
<!-- START CODE "c12599_94" -->
<a id="c12599_94"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Technological Terror[=0x0022=][=0x000A=][=0x000A=]The Decomposition Ray Gun is a thing carried by the player.[=0x000A=][=0x000A=][First we need to define our shooting action:][=0x000A=][=0x000A=]Shooting it with is an action applying to two things.[=0x000A=][=0x000A=]Check shooting something with something:[=0x000A=][=0x0009=]if the player is not carrying the Ray Gun, say [=0x0022=]You are pathetically unarmed![=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is not the Ray Gun, say [=0x0022=][The second noun] does not fire.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is the Ray Gun, say [=0x0022=]Nice trick if you can do it![=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is the player, say [=0x0022=]That would be disastrous![=0x0022=] instead.[=0x000A=][=0x000A=][Next, some grammar to allow the player to use this action:][=0x000A=][=0x000A=]Understand [=0x0022=]shoot [gun] at [something ungunlike][=0x0022=] as shooting it with (with nouns reversed).[=0x000A=][=0x000A=]Definition: a thing is ungunlike if it is not the gun.[=0x000A=][=0x000A=]Understand [=0x0022=]shoot [something ungunlike] with [gun][=0x0022=] as shooting it with. Understand [=0x0022=]shoot [something] with [something][=0x0022=] as shooting it with.[=0x000A=][=0x000A=]Understand [=0x0022=]shoot [something] at [something][=0x0022=] as shooting it with (with nouns reversed). Understand [=0x0022=]fire [gun] at [something ungunlike][=0x0022=] as shooting it with (with nouns reversed). Understand [=0x0022=]fire at [something ungunlike] with [gun][=0x0022=] as shooting it with. Understand [=0x0022=]fire at [something] with [something][=0x0022=] as shooting it with.[=0x000A=][=0x000A=][Strictly speaking, we only need these last grammar lines (with [=0x0022=]understand shoot something...[=0x0022=]) in order to define an action that the player can take. Adding more grammar lines means that Inform will try to match the most specific ones first, which is useful when the player types something ambiguous and there is one choice that obviously fits this action better than the others. See the chapter on Understanding for a further discussion.][=0x000A=][=0x000A=][Here we get to use [=0x0022=]now...[=0x0022=] to give it its destructive effect:][=0x000A=][=0x000A=]Carry out shooting something with something:[=0x000A=][=0x0009=]say [=0x0022=]ZAP! [The noun] twinkles out of existence! [if something is part of the noun][The list of things which are part of the noun] clatter to the ground! [end if][paragraph break][=0x0022=];[=0x000A=][=0x0009=]now every thing which is part of the noun is in the location;[=0x000A=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=]The Deathbot Assembly Line is a room. [=0x0022=]Here is the heart of the whole operation, where your opponents are assembled fresh from scrap metal and bits of old car.[=0x0022=] The dangerous robot is a thing in the Assembly Line. [=0x0022=]One dangerous robot looks ready to take you on![=0x0022=] A robotic head, a drill arm, a needle arm, a crushing leg and a kicking leg are parts of the dangerous robot.[=0x000A=][=0x000A=]Instead of examining something when something is part of the noun:[=0x000A=][=0x0009=]say [=0x0022=][The noun] consists of [a list of things which are part of the noun].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]x robot / shoot robot / fire at kicking leg / shoot gun at drill arm / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Technological Terror&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12600_94" -->
<a id="c12600_94"></a><blockquote class="code"><p class="quoted">
The Decomposition Ray Gun is a thing carried by the player.
</p></blockquote>
<!-- END CODE -->
<p>First we need to define our shooting action:</p>
<!-- START CODE "c12601_94" -->
<a id="c12601_94"></a><blockquote class="code"><p class="quoted">
Shooting it with is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12602_94" -->
<a id="c12602_94"></a><blockquote class="code"><p class="quoted">
Check shooting something with something:
<br />&#160;&#160;&#160;&#160;if the player is not carrying the Ray Gun, say &quot;You are pathetically unarmed!&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not the Ray Gun, say &quot;[The second noun] does not fire.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is the Ray Gun, say &quot;Nice trick if you can do it!&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is the player, say &quot;That would be disastrous!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Next, some grammar to allow the player to use this action:</p>
<!-- START CODE "c12603_94" -->
<a id="c12603_94"></a><blockquote class="code"><p class="quoted">
Understand &quot;shoot [gun] at [something ungunlike]&quot; as shooting it with (with nouns reversed).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12604_94" -->
<a id="c12604_94"></a><blockquote class="code"><p class="quoted">
Definition: a thing is ungunlike if it is not the gun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12605_94" -->
<a id="c12605_94"></a><blockquote class="code"><p class="quoted">
Understand &quot;shoot [something ungunlike] with [gun]&quot; as shooting it with. Understand &quot;shoot [something] with [something]&quot; as shooting it with.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12606_94" -->
<a id="c12606_94"></a><blockquote class="code"><p class="quoted">
Understand &quot;shoot [something] at [something]&quot; as shooting it with (with nouns reversed). Understand &quot;fire [gun] at [something ungunlike]&quot; as shooting it with (with nouns reversed). Understand &quot;fire at [something ungunlike] with [gun]&quot; as shooting it with. Understand &quot;fire at [something] with [something]&quot; as shooting it with.
</p></blockquote>
<!-- END CODE -->
<p>Strictly speaking, we only need these last grammar lines (with &quot;understand shoot something...&quot;) in order to define an action that the player can take. Adding more grammar lines means that Inform will try to match the most specific ones first, which is useful when the player types something ambiguous and there is one choice that obviously fits this action better than the others. See the chapter on Understanding for a further discussion.</p>
<p>Here we get to use &quot;now...&quot; to give it its destructive effect:</p>
<!-- START CODE "c12607_94" -->
<a id="c12607_94"></a><blockquote class="code"><p class="quoted">
Carry out shooting something with something:
<br />&#160;&#160;&#160;&#160;say &quot;ZAP! [The noun] twinkles out of existence! [if something is part of the noun][The list of things which are part of the noun] clatter to the ground! [end if][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;now every thing which is part of the noun is in the location;
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12608_94" -->
<a id="c12608_94"></a><blockquote class="code"><p class="quoted">
The Deathbot Assembly Line is a room. &quot;Here is the heart of the whole operation, where your opponents are assembled fresh from scrap metal and bits of old car.&quot; The dangerous robot is a thing in the Assembly Line. &quot;One dangerous robot looks ready to take you on!&quot; A robotic head, a drill arm, a needle arm, a crushing leg and a kicking leg are parts of the dangerous robot.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12609_94" -->
<a id="c12609_94"></a><blockquote class="code"><p class="quoted">
Instead of examining something when something is part of the noun:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] consists of [a list of things which are part of the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12610_94" -->
<a id="c12610_94"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x robot / shoot robot / fire at kicking leg / shoot gun at drill arm / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc50.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc52.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
