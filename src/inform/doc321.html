<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>18.35. Printing a parser error</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Printing a parser error" -->
<!-- SEARCH SECTION "18.35" -->
<!-- SEARCH SORT "000-018-035-000" -->
<!-- START IGNORE 320 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc320.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 18: Activities</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc322.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง18.35. Printing a parser error</p>
<p><span class="boldface">1. When it happens.</span> The parser is the part of the run-time software, included in all works produced by Inform, which tries to match the player's command against the grammar provided by the work. When it is unable to make a valid match, the parser prints an error to the player: for instance,</p>
<!-- START CODE "c7287" -->
<a id="c7287"></a><blockquote class="code"><p class="quoted">
&gt; BIFURCATE TREE
<br />That's not a verb I recognise.
</p></blockquote>
<!-- END CODE -->
<p>There are more than twenty possible messages. The one which the parser wants to say is stored in the variable &quot;latest parser error&quot;, which has the convenient kind &quot;command parser error&quot;. This has the following possible values:</p>
<!-- START CODE "c7288" -->
<a id="c7288"></a><blockquote class="code"><p class="quoted">
didn't understand error
<br />only understood as far as error
<br />didn't understand that number error
<br />can't see any such thing error
<br />said too little error
<br />aren't holding that error
<br />can't use multiple objects error
<br />can only use multiple objects error
<br />not sure what it refers to error
<br />excepted something not included error
<br />can only do that to something animate error
<br />not a verb I recognise error
<br />not something you need to refer to error
<br />can't see it at the moment error
<br />didn't understand the way that finished error
<br />not enough of those available error
<br />nothing to do error
<br />referred to a determination of scope error
<br />I beg your pardon error
<br />noun did not make sense in that context error
<br />can't again the addressee error
<br />comma can't begin error
<br />can't see whom to talk to error
<br />can't talk to inanimate things error
<br />didn't understand addressee's last name error
</p></blockquote>
<!-- END CODE -->
<p><span class="boldface">2. The default behaviour.</span> Prints the message in question.</p>
<p><span class="boldface">3. Examples.</span> (a) Perhaps for newcomers:</p>
<!-- START CODE "c7289" -->
<a id="c7289"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('After printing a parser error:[=0x000A=][=0x0009=]say [=0x0022=]If you are new to interactive fiction, you may like to try typing HELP.[=0x0022=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> After printing a parser error:
<br />&#160;&#160;&#160;&#160;say &quot;If you are new to interactive fiction, you may like to try typing HELP.&quot;
</p></blockquote>
<!-- END CODE -->
<p>(b) Or to give the parser a certain amount of character:</p>
<!-- START CODE "c7290" -->
<a id="c7290"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('Rule for printing a parser error when the latest parser error is the I beg your pardon error:[=0x000A=][=0x0009=]say [=0x0022=]What[=0x0027=]s that? Speak up, speak up.[=0x0022=] instead.[=0x000A=][=0x000A=]{*}Rule for printing a parser error:[=0x000A=][=0x0009=]say [=0x0022=]That[=0x0027=]s a rum thing to say, and no mistake.[=0x0022=] instead.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> Rule for printing a parser error when the latest parser error is the I beg your pardon error:
<br />&#160;&#160;&#160;&#160;say &quot;What's that? Speak up, speak up.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7291" -->
<a id="c7291"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('Rule for printing a parser error:[=0x000A=][=0x0009=]say [=0x0022=]That[=0x0027=]s a rum thing to say, and no mistake.[=0x0022=] instead.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> Rule for printing a parser error:
<br />&#160;&#160;&#160;&#160;say &quot;That's a rum thing to say, and no mistake.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>(c) This can be helpful for seeing what's going on:</p>
<!-- START CODE "c7292" -->
<a id="c7292"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('Rule for printing a parser error:[=0x000A=][=0x0009=]say [=0x0022=]The [latest parser error] happened.[=0x0022=];[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> Rule for printing a parser error:
<br />&#160;&#160;&#160;&#160;say &quot;The [latest parser error] happened.&quot;;
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "380: WXPQ" "e0" -->
<a id="e0"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example0'); return false;"><b>380</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example0'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">WXPQ</span></b></a><br />Creating a more sensible parser error than "that noun did not make sense in this context".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc45.html#e0"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example0" style="display: none;">
<p>The parser error &quot;That noun did not make sense in this context&quot; arises instead of &quot;You can't see any such thing&quot; when the player uses a command that could apply to any item in the game -- that is, a command such as</p>
<!-- START CODE "c7293_0" -->
<a id="c7293_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to [any room]&quot; as going directly to.
<br />Understand &quot;talk about [any subject]&quot; as discussing.
</p></blockquote>
<!-- END CODE -->
<p>...and so on. The idea here is that &quot;You can't see any such thing&quot; isn't a sensible rejoinder when the player doesn't really need to be able to see the object.</p>
<p>Nonetheless, &quot;That noun did not make sense...&quot; is itself a fairly dry and uninformative response, and we may want to override it to something more appropriate for the specific kind of context in which it might appear. For instance:</p>
<!-- START CODE "c7294_0" -->
<a id="c7294_0"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]WXPQ[=0x0022=][=0x000A=][=0x000A=]WXPQ Studio is a room. [=0x0022=]After about 2 AM, no one is listening anyway, so you can more or less make up whatever you like to fill the airwaves.[=0x0022=][=0x000A=][=0x000A=]John F Kennedy, Elvis, Ralph Nader, Tony Blair, and single-origin chocolate are things.[=0x000A=][=0x000A=]Understand [=0x0022=]talk about [any thing][=0x0022=] or [=0x0022=]discuss [any thing][=0x0022=] as discussing. Discussing is an action applying to one visible thing.[=0x000A=][=0x000A=]Carry out discussing:[=0x000A=][=0x0009=]say [=0x0022=]You babble for a while about your [one of]interest in[or]hatred of[or]passionate devotion to[or]conspiracy theory concerning[or]mother[=0x0027=]s secret love affair with[as decreasingly likely outcomes] [the noun].[=0x0022=][=0x000A=][=0x000A=]Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:[=0x000A=][=0x0009=]say [=0x0022=]For once, you[=0x0027=]re at a loss for anything to say.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]discuss Elvis / discuss Kennedy / discuss chocolate / discuss narratology vs ludology debate[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;WXPQ&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7295_0" -->
<a id="c7295_0"></a><blockquote class="code"><p class="quoted">
WXPQ Studio is a room. &quot;After about 2 AM, no one is listening anyway, so you can more or less make up whatever you like to fill the airwaves.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7296_0" -->
<a id="c7296_0"></a><blockquote class="code"><p class="quoted">
John F Kennedy, Elvis, Ralph Nader, Tony Blair, and single-origin chocolate are things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7297_0" -->
<a id="c7297_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;talk about [any thing]&quot; or &quot;discuss [any thing]&quot; as discussing. Discussing is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7298_0" -->
<a id="c7298_0"></a><blockquote class="code"><p class="quoted">
Carry out discussing:
<br />&#160;&#160;&#160;&#160;say &quot;You babble for a while about your [one of]interest in[or]hatred of[or]passionate devotion to[or]conspiracy theory concerning[or]mother's secret love affair with[as decreasingly likely outcomes] [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7299_0" -->
<a id="c7299_0"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br />&#160;&#160;&#160;&#160;say &quot;For once, you're at a loss for anything to say.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7300_0" -->
<a id="c7300_0"></a><blockquote class="code"><p class="quoted">
Test me with &quot;discuss Elvis / discuss Kennedy / discuss chocolate / discuss narratology vs ludology debate&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that this solution works as simply as it does because we only have one command in the game that can apply to an &quot;[any]&quot; token. If we had several, we'd need to distinguish between the parser error attached to &quot;discuss&quot; and the parser error attached to &quot;go to&quot; (for instance). In that case, we might instead write something like</p>
<!-- START CODE "c7301_0" -->
<a id="c7301_0"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br />if the player's command includes &quot;go&quot;:
<br />&#160;&#160;&#160;&#160;say &quot;There's no such place you know how to get to.&quot;;
<br />otherwise:
<br />&#160;&#160;&#160;&#160;say &quot;For once, you're at a loss for anything to say.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "381: Xot" "e249" -->
<a id="e249"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example249'); return false;"><b>381</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example249'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Xot</span></b></a><br />Storing an invalid command to be repeated as text later in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc7.html#e249"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example249" style="display: none;">
<p>In Hitchhiker's Guide to the Galaxy, any erroneous command the player types can return to haunt him later in the game. We could do the same, if we liked, by storing the player's command whenever we print a parser error.</p>
<!-- START CODE "c7302_249" -->
<a id="c7302_249"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Xot[=0x0022=][=0x000A=][=0x000A=]Humiliation Chamber is a room. [=0x0022=]A grim, grey-walled room. Cameras watch you from every angle; convex mirrors reflect your actions; and up near the ceiling, where you can[=0x0027=]t disable it, is a loudspeaker.[=0x0022=][=0x000A=][=0x000A=]The last error is a text that varies. The last error is [=0x0022=]xot[=0x0022=].[=0x000A=][=0x000A=]Before printing a parser error:[=0x000A=][=0x0009=]now the last error is the player[=0x0027=]s command.[=0x000A=][=0x000A=]Every turn when a random chance of 1 in 2 succeeds:[=0x000A=][=0x0009=]say [=0x0022=]Over the loudspeaker comes some distorted nonsense. If you listen carefully, it sounds as though some fool is saying [=0x0027=][last error], [last error], [last error]![=0x0027=][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]wiggle / z / z / z / z / z / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Xot&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7303_249" -->
<a id="c7303_249"></a><blockquote class="code"><p class="quoted">
Humiliation Chamber is a room. &quot;A grim, grey-walled room. Cameras watch you from every angle; convex mirrors reflect your actions; and up near the ceiling, where you can't disable it, is a loudspeaker.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7304_249" -->
<a id="c7304_249"></a><blockquote class="code"><p class="quoted">
The last error is a text that varies. The last error is &quot;xot&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7305_249" -->
<a id="c7305_249"></a><blockquote class="code"><p class="quoted">
Before printing a parser error:
<br />&#160;&#160;&#160;&#160;now the last error is the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7306_249" -->
<a id="c7306_249"></a><blockquote class="code"><p class="quoted">
Every turn when a random chance of 1 in 2 succeeds:
<br />&#160;&#160;&#160;&#160;say &quot;Over the loudspeaker comes some distorted nonsense. If you listen carefully, it sounds as though some fool is saying '[last error], [last error], [last error]!'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7307_249" -->
<a id="c7307_249"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wiggle / z / z / z / z / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc320.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc322.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
