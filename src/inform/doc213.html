<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>13.16. What are relations for?</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "What are relations for?" -->
<!-- SEARCH SECTION "13.16" -->
<!-- SEARCH SORT "000-013-016-000" -->
<!-- START IGNORE 212 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc212.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 13: Relations</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc214.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง13.16. What are relations for?</p>
<p>It is easy to say what verbs are for: they are to express relations. But what are relations for?</p>
<p>Inform 7's focus on relations between objects is unusual as an approach to interactive fiction; the concept does not exist in most design systems, or rather, it does but is submerged. Traditional design systems do, after all, have the spatial relations of being inside, on top of, and so on. It could well be said that these are the only relationships that inanimate objects ever have. A stone can be on top of a table, and if so then that expresses their entire association.</p>
<p>This is because the stone, and the table, have no opinions, emotions, knowledge or memory. If the stone is taken away and then put back, nothing has changed. People, on the other hand, tend to remember having met each other before; they like being in some places, but not others; their behaviour depends on who, or what, is nearby. Being conscious, they have internal states, unlike the stone. Relations are a simple but powerful way to express and talk about such connections, and although they have numerous uses in physical contexts too, they are at their most powerful when helping to make the characters of interactive fiction come alive.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "241: What Not To Wear" "e34" -->
<a id="e34"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example34'); return false;"><b>241</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example34'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">What Not To Wear</span></b></a><br />A general-purpose clothing system that handles a variety of different clothing items layered in different combinations over different areas of the body.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc70.html#e34"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example34" style="display: none;">
<!-- START CODE "c4258_34" -->
<a id="c4258_34"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]What Not To Wear[=0x0022=][=0x000A=][=0x000A=]Section 1 - Overlying and Underlying[=0x000A=][=0x000A=][We start by borrowing some of the same ideas from the Bogart example, but we[=0x0027=]re also going to make a kind called [=0x0022=]garment-element[=0x0022=]. This kind will include both garments (objects of clothing) and body parts (things that can be covered by clothing); using it allows us to restrict the way our underlying and overlying relations apply, which will make them a bit faster at run-time.][=0x000A=][=0x000A=]A garment-element is a kind of thing.[=0x000A=][=0x000A=]Underlying relates various garment-elements to various garment-elements with fast route-finding. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.[=0x000A=][=0x000A=]Check taking off:[=0x000A=][=0x0009=]if the noun underlies something (called the impediment) which is worn by the player, say [=0x0022=][The impediment] [are] in the way.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out taking off:[=0x000A=][=0x0009=]now the noun is not underlaid by anything.[=0x000A=][=0x000A=]Report taking off something:[=0x000A=][=0x0009=]say [=0x0022=][We] [are] now wearing [a list of uppermost things worn by the player].[=0x0022=] instead.[=0x000A=][=0x000A=]Definition: a garment-element is uppermost if it is not under something opaque.[=0x000A=][=0x000A=][Here we[=0x0027=]ve expanded on the previous ideas of [=0x0027=]uppermost[=0x0027=] because it is possible for an upper layer to reveal what lies beneath: a tie, a clear plastic trenchcoat, an open-knit sweater, etc. We[=0x0027=]ll make such items transparent.][=0x000A=][=0x000A=]Before taking off something which underlies something which is worn by the player:[=0x000A=][=0x0009=]while the noun underlies something (called the impediment) which is worn by the player:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking off the impediment;[=0x000A=][=0x0009=][=0x0009=]if the noun underlies the impediment, stop the action.[=0x000A=][=0x000A=]Overlying relates various garment-elements to various garment-elements. The verb to overlie means the overlying relation.[=0x000A=][=0x000A=]Covering relates a garment-element (called A) to a garment-element (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.[=0x000A=][=0x000A=]Before wearing something when a garment which covers the noun is worn by the player:[=0x000A=][=0x0009=]while the player wears a garment (called the impediment) which covers the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](first removing [the impediment])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]silently try taking off the impediment;[=0x000A=][=0x0009=][=0x0009=]if the player is wearing the impediment, stop the action.[=0x000A=][=0x000A=]Carry out wearing:[=0x000A=][=0x0009=]repeat with hidden item running through things worn by the player:[=0x000A=][=0x0009=][=0x0009=]if the noun covers the hidden item, now the hidden item underlies the noun.[=0x000A=][=0x000A=]Instead of looking under something which is worn by the player:[=0x000A=][=0x0009=]if something (called the underwear) underlies the noun, say [=0x0022=][We] [peek] at [the underwear]. Yup, still there.[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]Just [us] in there.[=0x0022=][=0x000A=][=0x000A=]Instead of taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][if the player carries something][We][[=0x0027=]re] carrying [a list of things carried by the player][else][We][[=0x0027=]re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost garments worn by the player][end if].[=0x0022=][=0x000A=][=0x000A=]To peek is a verb.[=0x000A=][=0x000A=]Section 2 - Regional Coverage[=0x000A=][=0x000A=][Here we draw in the idea that different clothes go over different areas of the body, and that they should be in competition with each other only if both sets of clothes belong at the same level over the same body area.][=0x000A=][=0x000A=]Before wearing something:[=0x000A=][=0x0009=]let N be the layering depth of the noun;[=0x000A=][=0x0009=]repeat with item running through things worn by the player:[=0x000A=][=0x0009=][=0x0009=]if the layering depth of the item is N and the item covers a body-part which is covered by the noun:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=](first taking off [the item])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]silently try taking off the item;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the player wears the item, stop the action.[=0x000A=][=0x000A=][This may seem like overkill, but it allows us to create garments that cover different subsets of the body -- pants and shirt vs. a dress, for instance.][=0x000A=][=0x000A=]To decide what number is the layering depth of (chosen garment - a thing):[=0x000A=][=0x0009=]let N be 0;[=0x000A=][=0x0009=]if the chosen garment covers a body-part (called base):[=0x000A=][=0x0009=][=0x0009=]let N be the number of steps via the overlying relation from the chosen garment to the base;[=0x000A=][=0x0009=]decide on N.[=0x000A=][=0x000A=][To help with modeling, we[=0x0027=]ll give everyone body parts, broken down according to their relevance to clothing:][=0x000A=][=0x000A=]A body-part is a kind of garment-element. A torso, a seat, a head, pair of legs, and pair of feet are kinds of body-part.[=0x000A=][=0x000A=][If we wanted to allow gloves, we might put in hands as well; but this is enough for now.][=0x000A=][=0x000A=]One head is part of every person. One torso is part of every person. One pair of legs is part of every person. One pair of feet is part of every person. One seat is part of every person.[=0x000A=][=0x000A=][And now we make some categories of clothing:][=0x000A=][=0x000A=]A garment is a kind of garment-element. A garment can be transparent. A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are kinds of garment.[=0x000A=][=0x000A=]The plural of pair of pants is pairs of pants. The plural of pair of underpants is pairs of underpants. The plural of pair of socks is pairs of socks. The plural of pair of shoes is pairs of shoes.[=0x000A=][=0x000A=]A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are usually wearable.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now every pair of socks overlies every pair of feet;[=0x000A=][=0x0009=]now every pair of shoes overlies every pair of socks;[=0x000A=][=0x0009=]now every pair of underpants overlies every seat;[=0x000A=][=0x0009=]now every pair of pants overlies every pair of underpants;[=0x000A=][=0x0009=]now every foundation garment overlies every torso;[=0x000A=][=0x0009=]now every jacket overlies every shirt;[=0x000A=][=0x0009=]now every jacket overlies every dress;[=0x000A=][=0x0009=]now every hat overlies every head;[=0x000A=][=0x0009=]now every dress overlies every pair of underpants;[=0x000A=][=0x0009=]now every dress overlies every foundation garment.[=0x000A=][=0x000A=]Section 2 - The Scenario[=0x000A=][=0x000A=]The Dressing Room is a room.[=0x000A=][=0x000A=]The player carries some capris, some jeans, a corset, a plunge bra, a thong, boy-shorts, black satin D[=0x0027=]Orsay pumps, brown leather boots, a camisole, a cocktail dress, a bolero, a cashmere shrug, a sheer wrap, and a linen tunic.[=0x000A=][=0x000A=]The woolly socks are a pair of socks.[=0x000A=]The D[=0x0027=]Orsay pumps and the brown leather boots are pairs of shoes.[=0x000A=]The thong and the boy-shorts are pairs of underpants.[=0x000A=]The capris and the jeans are pairs of pants.[=0x000A=]The tunic is a shirt.[=0x000A=]The camisole, the corset, and the plunge bra are foundation garments.[=0x000A=]The cocktail dress is a dress.[=0x000A=]The bolero, the cashmere shrug, and the sheer wrap are jackets. The shrug and the wrap are transparent.[=0x000A=][=0x000A=]Test me with [=0x0022=]wear capris / wear jeans / i / wear thong / i / wear dress / wear corset / wear dress / i / wear wrap / i / wear boots / wear pumps / i[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;What Not To Wear&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4259_34" -->
<a id="c4259_34"></a><blockquote class="code"><p class="quoted">
Section 1 - Overlying and Underlying
</p></blockquote>
<!-- END CODE -->
<p>We start by borrowing some of the same ideas from the Bogart example, but we're also going to make a kind called &quot;garment-element&quot;. This kind will include both garments (objects of clothing) and body parts (things that can be covered by clothing); using it allows us to restrict the way our underlying and overlying relations apply, which will make them a bit faster at run-time.</p>
<!-- START CODE "c4260_34" -->
<a id="c4260_34"></a><blockquote class="code"><p class="quoted">
A garment-element is a kind of thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4261_34" -->
<a id="c4261_34"></a><blockquote class="code"><p class="quoted">
Underlying relates various garment-elements to various garment-elements with fast route-finding. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4262_34" -->
<a id="c4262_34"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4263_34" -->
<a id="c4263_34"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4264_34" -->
<a id="c4264_34"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4265_34" -->
<a id="c4265_34"></a><blockquote class="code"><p class="quoted">
Definition: a garment-element is uppermost if it is not under something opaque.
</p></blockquote>
<!-- END CODE -->
<p>Here we've expanded on the previous ideas of 'uppermost' because it is possible for an upper layer to reveal what lies beneath: a tie, a clear plastic trenchcoat, an open-knit sweater, etc. We'll make such items transparent.</p>
<!-- START CODE "c4266_34" -->
<a id="c4266_34"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something which is worn by the player:
<br />&#160;&#160;&#160;&#160;while the noun underlies something (called the impediment) which is worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun underlies the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4267_34" -->
<a id="c4267_34"></a><blockquote class="code"><p class="quoted">
Overlying relates various garment-elements to various garment-elements. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4268_34" -->
<a id="c4268_34"></a><blockquote class="code"><p class="quoted">
Covering relates a garment-element (called A) to a garment-element (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4269_34" -->
<a id="c4269_34"></a><blockquote class="code"><p class="quoted">
Before wearing something when a garment which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears a garment (called the impediment) which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4270_34" -->
<a id="c4270_34"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;repeat with hidden item running through things worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun covers the hidden item, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4271_34" -->
<a id="c4271_34"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4272_34" -->
<a id="c4272_34"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost garments worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4273_34" -->
<a id="c4273_34"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4274_34" -->
<a id="c4274_34"></a><blockquote class="code"><p class="quoted">
Section 2 - Regional Coverage
</p></blockquote>
<!-- END CODE -->
<p>Here we draw in the idea that different clothes go over different areas of the body, and that they should be in competition with each other only if both sets of clothes belong at the same level over the same body area.</p>
<!-- START CODE "c4275_34" -->
<a id="c4275_34"></a><blockquote class="code"><p class="quoted">
Before wearing something:
<br />&#160;&#160;&#160;&#160;let N be the layering depth of the noun;
<br />&#160;&#160;&#160;&#160;repeat with item running through things worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the layering depth of the item is N and the item covers a body-part which is covered by the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first taking off [the item])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player wears the item, stop the action.
</p></blockquote>
<!-- END CODE -->
<p>This may seem like overkill, but it allows us to create garments that cover different subsets of the body -- pants and shirt vs. a dress, for instance.</p>
<!-- START CODE "c4276_34" -->
<a id="c4276_34"></a><blockquote class="code"><p class="quoted">
To decide what number is the layering depth of (chosen garment - a thing):
<br />&#160;&#160;&#160;&#160;let N be 0;
<br />&#160;&#160;&#160;&#160;if the chosen garment covers a body-part (called base):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be the number of steps via the overlying relation from the chosen garment to the base;
<br />&#160;&#160;&#160;&#160;decide on N.
</p></blockquote>
<!-- END CODE -->
<p>To help with modeling, we'll give everyone body parts, broken down according to their relevance to clothing:</p>
<!-- START CODE "c4277_34" -->
<a id="c4277_34"></a><blockquote class="code"><p class="quoted">
A body-part is a kind of garment-element. A torso, a seat, a head, pair of legs, and pair of feet are kinds of body-part.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to allow gloves, we might put in hands as well; but this is enough for now.</p>
<!-- START CODE "c4278_34" -->
<a id="c4278_34"></a><blockquote class="code"><p class="quoted">
One head is part of every person. One torso is part of every person. One pair of legs is part of every person. One pair of feet is part of every person. One seat is part of every person.
</p></blockquote>
<!-- END CODE -->
<p>And now we make some categories of clothing:</p>
<!-- START CODE "c4279_34" -->
<a id="c4279_34"></a><blockquote class="code"><p class="quoted">
A garment is a kind of garment-element. A garment can be transparent. A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are kinds of garment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4280_34" -->
<a id="c4280_34"></a><blockquote class="code"><p class="quoted">
The plural of pair of pants is pairs of pants. The plural of pair of underpants is pairs of underpants. The plural of pair of socks is pairs of socks. The plural of pair of shoes is pairs of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4281_34" -->
<a id="c4281_34"></a><blockquote class="code"><p class="quoted">
A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are usually wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4282_34" -->
<a id="c4282_34"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every pair of socks overlies every pair of feet;
<br />&#160;&#160;&#160;&#160;now every pair of shoes overlies every pair of socks;
<br />&#160;&#160;&#160;&#160;now every pair of underpants overlies every seat;
<br />&#160;&#160;&#160;&#160;now every pair of pants overlies every pair of underpants;
<br />&#160;&#160;&#160;&#160;now every foundation garment overlies every torso;
<br />&#160;&#160;&#160;&#160;now every jacket overlies every shirt;
<br />&#160;&#160;&#160;&#160;now every jacket overlies every dress;
<br />&#160;&#160;&#160;&#160;now every hat overlies every head;
<br />&#160;&#160;&#160;&#160;now every dress overlies every pair of underpants;
<br />&#160;&#160;&#160;&#160;now every dress overlies every foundation garment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4283_34" -->
<a id="c4283_34"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4284_34" -->
<a id="c4284_34"></a><blockquote class="code"><p class="quoted">
The Dressing Room is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4285_34" -->
<a id="c4285_34"></a><blockquote class="code"><p class="quoted">
The player carries some capris, some jeans, a corset, a plunge bra, a thong, boy-shorts, black satin D'Orsay pumps, brown leather boots, a camisole, a cocktail dress, a bolero, a cashmere shrug, a sheer wrap, and a linen tunic.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4286_34" -->
<a id="c4286_34"></a><blockquote class="code"><p class="quoted">
The woolly socks are a pair of socks.
<br />The D'Orsay pumps and the brown leather boots are pairs of shoes.
<br />The thong and the boy-shorts are pairs of underpants.
<br />The capris and the jeans are pairs of pants.
<br />The tunic is a shirt.
<br />The camisole, the corset, and the plunge bra are foundation garments.
<br />The cocktail dress is a dress.
<br />The bolero, the cashmere shrug, and the sheer wrap are jackets. The shrug and the wrap are transparent.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4287_34" -->
<a id="c4287_34"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wear capris / wear jeans / i / wear thong / i / wear dress / wear corset / wear dress / i / wear wrap / i / wear boots / wear pumps / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "242: Murder on the Orient Express" "e314" -->
<a id="e314"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example314'); return false;"><b>242</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example314'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Murder on the Orient Express</span></b></a><br />A number of sleuths (the player among them) find themselves aboard the Orient Express, where a murder has taken place, and one of them is apparently the culprit. Naturally they do not agree on whom, but there is physical evidence which may change their minds...</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc57.html#e314"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example314" style="display: none;">
<p>The following example creates two new relations, and two new verbs, in order to set up a tangled web of intrigue.</p>
<!-- START CODE "c4288_314" -->
<a id="c4288_314"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Murder on the Orient Express[=0x0022=][=0x000A=][=0x000A=]The Dining Car is a room. Lord Peter is a man in the Dining Car. Sherlock Holmes is a man in the Dining Car. Miss Marple is a woman in the Dining Car. Adam Dalgliesh is a man in the Dining Car.[=0x000A=][=0x000A=]Suspecting relates various people to one person.[=0x000A=][=0x000A=]The verb to suspect means the suspecting relation.[=0x000A=][=0x000A=]Dalgliesh suspects Holmes. Holmes suspects Lord Peter. Lord Peter suspects Holmes. Miss Marple suspects the player.[=0x000A=][=0x000A=]Exculpating relates one thing to various people.[=0x000A=][=0x000A=]The verb to exculpate means the exculpating relation.[=0x000A=][=0x000A=]The silver bullet exculpates the player. The pipe ash exculpates Holmes. The poison pen letter exculpates Lord Peter. The poison pen letter exculpates Miss Marple. [Poor Dalgliesh. I guess he did it.][=0x000A=][=0x000A=]The pipe ash, the letter and the silver bullet are carried.[=0x000A=][=0x000A=][Given this, we can then set up elaborate rules:][=0x000A=][=0x000A=]Instead of showing something to a person who suspects the player:[=0x000A=][=0x0009=]say [=0x0022=][=0x0027=]You would say that,[=0x0027=] remarks [the second noun] darkly.[=0x0022=].[=0x000A=][=0x000A=]Instead of showing something which exculpates the player to someone:[=0x000A=][=0x0009=]say [=0x0022=][=0x0027=]How striking![=0x0027=] says [the second noun]. [=0x0027=]Almost I begin to distrust myself.[=0x0027=][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]show the letter to miss marple / show the silver bullet to holmes[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Murder on the Orient Express&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4289_314" -->
<a id="c4289_314"></a><blockquote class="code"><p class="quoted">
The Dining Car is a room. Lord Peter is a man in the Dining Car. Sherlock Holmes is a man in the Dining Car. Miss Marple is a woman in the Dining Car. Adam Dalgliesh is a man in the Dining Car.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4290_314" -->
<a id="c4290_314"></a><blockquote class="code"><p class="quoted">
Suspecting relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4291_314" -->
<a id="c4291_314"></a><blockquote class="code"><p class="quoted">
The verb to suspect means the suspecting relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4292_314" -->
<a id="c4292_314"></a><blockquote class="code"><p class="quoted">
Dalgliesh suspects Holmes. Holmes suspects Lord Peter. Lord Peter suspects Holmes. Miss Marple suspects the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4293_314" -->
<a id="c4293_314"></a><blockquote class="code"><p class="quoted">
Exculpating relates one thing to various people.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4294_314" -->
<a id="c4294_314"></a><blockquote class="code"><p class="quoted">
The verb to exculpate means the exculpating relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4295_314" -->
<a id="c4295_314"></a><blockquote class="code"><p class="quoted">
The silver bullet exculpates the player. The pipe ash exculpates Holmes. The poison pen letter exculpates Lord Peter. The poison pen letter exculpates Miss Marple. [Poor Dalgliesh. I guess he did it.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4296_314" -->
<a id="c4296_314"></a><blockquote class="code"><p class="quoted">
The pipe ash, the letter and the silver bullet are carried.
</p></blockquote>
<!-- END CODE -->
<p>Given this, we can then set up elaborate rules:</p>
<!-- START CODE "c4297_314" -->
<a id="c4297_314"></a><blockquote class="code"><p class="quoted">
Instead of showing something to a person who suspects the player:
<br />&#160;&#160;&#160;&#160;say &quot;'You would say that,' remarks [the second noun] darkly.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4298_314" -->
<a id="c4298_314"></a><blockquote class="code"><p class="quoted">
Instead of showing something which exculpates the player to someone:
<br />&#160;&#160;&#160;&#160;say &quot;'How striking!' says [the second noun]. 'Almost I begin to distrust myself.'&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4299_314" -->
<a id="c4299_314"></a><blockquote class="code"><p class="quoted">
Test me with &quot;show the letter to miss marple / show the silver bullet to holmes&quot;.
</p></blockquote>
<!-- END CODE -->
<p>And so on: &quot;if Dalgliesh suspects someone who is exculpated by something carried by the player...&quot;, for instance, makes a fitting final example for this chapter. The description</p>
<!-- START CODE "c4300_314" -->
<a id="c4300_314"></a><blockquote class="code"><p class="quoted">
someone who is exculpated by something carried by the player
</p></blockquote>
<!-- END CODE -->
<p>expresses a complicated idea in very few words, and in such a way that a passer-by looking at the source text would immediately see what was meant.</p>
<p>The moral is that relations allow sophisticated patterns of behaviour to be created in a way that reads back naturally as English.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "243: Mathematical view of relations" "e115" -->
<a id="e115"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example115'); return false;"><b>243</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example115'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mathematical view of relations</span></b></a><br />Some notes on relations from a mathematical point of view, provided only to clarify some technicalities for those who are interested.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc4.html#e115"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example115" style="display: none;">
<p>Inform uses the term &quot;relation&quot; in a broader sense than mathematics. Properly speaking, the term &quot;relation&quot; in its mathematical sense only applies to the case where the domain for the left and right objects are the same: for simplicity's sake, let us talk only about the case where they are.</p>
<p>In mathematics, the properties most often looked for in a relation are that it should be:</p>
<p>(a) Reflexive: A &lt;=&gt; A for every A. This is not especially useful for Inform, and seldom appears in practical examples.</p>
<p>(b) Symmetric: A &lt;=&gt; B if and only if B &lt;=&gt; A. Generally, Inform relations are not symmetric, but there are two important cases which are:</p>
<!-- START CODE "c4301_115" -->
<a id="c4301_115"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>These are automatically symmetric, so that to assert one way round is to assert the other as well.</p>
<p>(c) Transitive: A &lt;=&gt; B and B &lt;=&gt; C means that A &lt;=&gt; C as well. Again, Inform relations are not generally transitive. In many relations, there can be long chains of things, each perhaps related to the one in front and the one behind, so that there is some indirect sense in which the two ends of the chain are connected to each other: but they are not related as such. For instance, a journey across the map might pass through ten rooms, each adjacent to the last and next, but the two ends would not themselves be adjacent. The concept we need is the &quot;transitive closure&quot; of the original relation, defined as the smallest transitive relation including the original. If R is a relation between &quot;things&quot;, then the following:</p>
<!-- START CODE "c4302_115" -->
<a id="c4302_115"></a><blockquote class="code"><p class="quoted">
TC relates a thing (called A) to a thing (called B) when the number of steps via R from A to B is greater than 0.
</p></blockquote>
<!-- END CODE -->
<p>is the transitive closure of R. In particular,</p>
<!-- START CODE "c4303_115" -->
<a id="c4303_115"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is greater than 0. The verb to be accessible from means the accessibility relation.
</p></blockquote>
<!-- END CODE -->
<p>calculates the transitive closure of adjacency. Here, though, the way we normally understand &quot;accessible from&quot; suggests that it would be better to write:</p>
<!-- START CODE "c4304_115" -->
<a id="c4304_115"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is at least 0.
</p></blockquote>
<!-- END CODE -->
<p>which is reflexive as well as transitive. The usefulness of Inform's &quot;next step via R from A to B&quot; construction, in a wide variety of settings, reflects the importance of transitivity as an idea.</p>
<p>A relation which has all three properties of being reflexive, symmetric and transitive is called an &quot;equivalence relation&quot;. (If all the map connections are two-way, then the accessibility relation above is symmetric and therefore a full equivalence relation: but if not, it may not be.) Inform has a special construction for making equivalence relations:</p>
<!-- START CODE "c4305_115" -->
<a id="c4305_115"></a><blockquote class="code"><p class="quoted">
Nationality relates people to each other in groups.
</p></blockquote>
<!-- END CODE -->
<p>This language - &quot;in groups&quot; - relies on the standard theorem that every equivalence relation on a set naturally defines a partition of that set, and vice versa. The &quot;groups&quot; referred to are what are normally called &quot;equivalence classes&quot;. (Inform does little with these equivalence classes: it might be interesting to do so, in effect forming quotient kinds.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "244: Graph-theory view of relations" "e265" -->
<a id="e265"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example265'); return false;"><b>244</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example265'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Graph-theory view of relations</span></b></a><br />Some notes on relations from the point of view of graph theory.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc4.html#e265"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example265" style="display: none;">
<p>One way to look at a relation is to regard it as a directed graph: that is, a collection of things (&quot;vertices&quot;) with arrows drawn between them (&quot;edges&quot;). We write our items A, B, C, ... on a piece of paper: then, if A relates to B, we draw an arrow pointing from A to B, and so on. If we made this drawing for the adjacency relation, we would more or less have reconstructed the map (or at least a simplified one which does not care about precise directions, like the famous diagram of the London Underground). But the drawing can be made for any relation. If we define:</p>
<!-- START CODE "c4306_265" -->
<a id="c4306_265"></a><blockquote class="code"><p class="quoted">
Suspecting relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<p>then, in the corresponding graph, each &quot;vertex&quot; will have at most one arrow leading away from it - though there could be many (or none) leading towards. Conversely, a one-to-various relation produces a graph where each vertex has at most one arrow coming in. A one-to-one relation means that the picture consists of some vertices on their own, with no arrows, a few perhaps with looped arrows leading from and to themselves, and then a collection of pairs joined by arrows. On the other hand, a various-to-various relation is just a free-for-all, with no restrictions on the arrows. The relations:</p>
<!-- START CODE "c4307_265" -->
<a id="c4307_265"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>always have the property of working both ways round, and these are easiest to visualise by forgetting the direction of the arrows, so that they just become lines joining the vertices.</p>
<p>Inform uses a different algorithm for finding routes (&quot;the next step via R from A to B&quot;) in each of these cases, and internally it stores relations in different formats in the different cases, because it makes a big difference to the efficiency of Inform to minimise the storage required for a relation and the time taken to explore it.</p>
<p>All the cases are benign except for &quot;various to various&quot; - the most useful - and for its closely related symmetrical version, &quot;relates... to each other&quot;. Inform cannot afford to assume that the relation will be &quot;sparse&quot; (that is: that no vertex will have more than a certain number of arrows, or that the total number of arrows will be small), because it has no idea how the arrows will come and go during play. It therefore uses 1 bit of storage for each pair of objects. This sounds harmless, but if there are 200 rooms, there are 40,000 pairs of rooms, which means a 5000-byte allocation of storage (plus a handful of bytes as overhead). Gratuitous various-to-various relations are therefore not a good idea.</p>
<p>There is a standard algorithm for calculating shortest paths through a directed graph, but Inform does not always use it, because there is not always memory to store the required matrix of partial results. Inform's slow method, likely to be used on the Z-machine, requires a storage overhead which is equal to the number of vertices, not the square of that number, but the worst-case running time can be bad: if there are N vertices, and the diameter of graph (the longest distance between vertices) is D, then the running time is proportional to D times N. The worst case in finding routes from A to B is when almost every vertex can reach B, some across long trails, but A cannot. In the case of finding routes across the game's map, this must be multiplied further by the number of possible directions - usually 16.</p>
<p>This does not sound too awful, but if one is trying to find (say) &quot;the most distant room from A&quot;, that means a further loop and now the running time will be D times N squared. Extension writers will need to be careful of this kind of thing: it is easy to write highly cool prototypes which work terribly slowly on larger, more realistic maps.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc212.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc214.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
