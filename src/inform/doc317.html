<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>18.31. Asking which do you mean</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Asking which do you mean" -->
<!-- SEARCH SECTION "18.31" -->
<!-- SEARCH SORT "000-018-031-000" -->
<!-- START IGNORE 316 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc316.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 18: Activities</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc318.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง18.31. Asking which do you mean</p>
<p><span class="boldface">1. When it happens.</span> When the player has typed an ambiguous noun reference, and Inform has not been able to decide what was meant.</p>
<p><span class="boldface">2. The default behaviour.</span> A question such as &quot;Which do you mean, the laminated mahogany box or the boom box?&quot; is printed. (This activity shapes the question: it is not responsible for parsing the answer. It would be very mysterious to write rules for this activity such that nothing is printed, because the player would then have no idea what to type.)</p>
<p><span class="boldface">3. Examples.</span> The question is harder to print than may first appear, since one must not simply list the options, but also take into account collections of plural objects (&quot;Which do you mean, the gold-tipped pen or a gold coin?&quot;). It is probably better not to try to rewrite this.</p>
<p>(a) But we can place notes before or after: here is a verbose explanation for beginners to IF.</p>
<!-- START CODE "c7117" -->
<a id="c7117"></a><blockquote class="code"><p class="quoted">
Before asking which do you mean: say &quot;Okay, so I'm going to have to ask a question now: you've typed something ambiguous, and I don't know which noun you're referring to.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7118" -->
<a id="c7118"></a><blockquote class="code"><p class="quoted">
After asking which do you mean: say &quot;(Just type a word or two to give me more information.)&quot;
</p></blockquote>
<!-- END CODE -->
<p>(b) We can also use this activity as a context for other activities. For instance:</p>
<!-- START CODE "c7119" -->
<a id="c7119"></a><blockquote class="code"><p class="quoted">
The Champs du Mars is a room. The great Eiffel Tower is here. &quot;The great Tower stands high over you.&quot; The souvenir model Eiffel Tower is here. &quot;Comparatively tiny is the souvenir version.&quot; The great Eiffel Tower is fixed in place. Understand &quot;actual&quot; as the great Tower.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7120" -->
<a id="c7120"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of the great Tower while asking which do you mean: say &quot;actual Tower&quot;. Rule for printing the name of the souvenir tower while asking which do you mean: say &quot;souvenir&quot;.
</p></blockquote>
<!-- END CODE -->
<p>causes TAKE TOWER (for instance) to produce a nice tidy question in reply: &quot;Which do you mean, the actual Tower or the souvenir?&quot;</p>
<p><span class="boldface">4. A note about actions.</span> This activity takes place during the process of understanding the player's command, when the action that will take place is not fully known. So if the player types &quot;TAKE SHOEBOX&quot;, this activity would happen when SHOEBOX is being examined for meaning. Inform knows that the action will be taking, but nothing else. That means attaching a proviso like &quot;... while taking a container&quot; to a rule for this activity will cause the rule to have no effect - whereas &quot;... while taking&quot; would be fine.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "368: Originals" "e188" -->
<a id="e188"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example188'); return false;"><b>368</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example188'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Originals</span></b></a><br />Allowing the player to create models of anything in the game world; parsing the name "model [thing]" or even just "[thing]" to refer to these newly-created models; asking "which do you mean, the model [thing] or the actual [thing]" when there is ambiguity.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc79.html#e188"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example188" style="display: none;">
<p>We rely here on the understanding-by-relations rules we've already learned, but there is an additional trick: we want to make sure that if the player types &quot;original&quot; or &quot;actual&quot;, this word will not be taken to refer to the thing modeled:</p>
<!-- START CODE "c7121_188" -->
<a id="c7121_188"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Originals[=0x0022=][=0x000A=][=0x000A=]A model is a kind of thing. 100 models are in the model-repository.[=0x000A=][=0x000A=]Appearance relates one thing to various models. The verb to be shown by means the appearance relation.[=0x000A=][=0x000A=]Indication relates a model (called X) to a thing (called Y) when Y is shown by X and Y is suitable.[=0x000A=][=0x000A=]Understand [=0x0022=]actual[=0x0022=] or [=0x0022=]original[=0x0022=] as [=0x0022=][actual][=0x0022=]. Understand [=0x0022=][actual][=0x0022=] as something when the item described is not a model.[=0x000A=][=0x000A=]Definition: a thing is suitable:[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=][actual][=0x0022=], no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=]Understand [=0x0022=][something related by indication][=0x0022=] as a model.[=0x000A=][=0x000A=]After printing the name of a model (called target): say [=0x0022=] [random thing shown by the target][=0x0022=][=0x000A=][=0x000A=][Now our duplication command -- for the sake of simplicity, we[=0x0027=]ll suppose that in this scenario the player is duplicating objects by magic rather than creating them out of physical materials or supplies:][=0x000A=][=0x000A=]Understand [=0x0022=]duplicate [something][=0x0022=] as duplicating. Duplicating is an action applying to one visible thing.[=0x000A=][=0x000A=]The duplicating action has an object called the selected model.[=0x000A=][=0x000A=]Setting action variables for duplicating:[=0x000A=][=0x0009=]let N be a random model in the model-repository;[=0x000A=][=0x0009=]now the selected model is N.[=0x000A=][=0x000A=]Check duplicating:[=0x000A=][=0x0009=]if the selected model is nothing, say [=0x0022=]You[=0x0027=]re out of power.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out duplicating:[=0x000A=][=0x0009=]now the noun is shown by the selected model;[=0x000A=][=0x0009=]move the selected model to the player.[=0x000A=][=0x000A=]Report duplicating:[=0x000A=][=0x0009=]say [=0x0022=]You concentrate and manifest [a selected model].[=0x0022=][=0x000A=][=0x000A=][Now, the challenge is that we want to print the word [=0x0022=]actual[=0x0022=] before printing the name of an object, but only during disambiguation questions and only when we are not printing the name of the object as part of a model-name! (If we are not careful about the latter point, we will get responses such as [=0x0022=]Which do you mean, the model actual deer or the actual deer?[=0x0022=] which of course defeats the whole purpose.][=0x000A=][=0x000A=][The way around this is to remember that activities stack: we[=0x0027=]re printing the name of the deer while printing the name of a model that involves the deer. So if we set a flag while printing the name of a model, we can control the way the deer[=0x0027=]s name prints during the transaction. (We could use our ...while clause to specify while not printing the name of a model, except that we[=0x0027=]re already using it for [=0x0022=]while asking which do you mean[=0x0022=], and these do not stack.) So:][=0x000A=][=0x000A=]The virtual-context is a truth state that varies. The virtual-context is false.[=0x000A=][=0x000A=]Before printing the name of a model:[=0x000A=][=0x0009=]now virtual-context is true.[=0x000A=][=0x000A=]After printing the name of a model:[=0x000A=][=0x0009=]now virtual-context is false.[=0x000A=][=0x000A=]Before printing the name of something (called target) while asking which do you mean:[=0x000A=][=0x0009=]if the target is not a model and virtual-context is false:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]actual [=0x0022=].[=0x000A=][=0x000A=]Forest is a room. It contains a deer and a daisy. The deer is an animal.[=0x000A=][=0x000A=]Test me with [=0x0022=]duplicate deer / x model deer / x deer model / drop deer / x deer / actual / x deer / model[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Originals&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7122_188" -->
<a id="c7122_188"></a><blockquote class="code"><p class="quoted">
A model is a kind of thing. 100 models are in the model-repository.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7123_188" -->
<a id="c7123_188"></a><blockquote class="code"><p class="quoted">
Appearance relates one thing to various models. The verb to be shown by means the appearance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7124_188" -->
<a id="c7124_188"></a><blockquote class="code"><p class="quoted">
Indication relates a model (called X) to a thing (called Y) when Y is shown by X and Y is suitable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7125_188" -->
<a id="c7125_188"></a><blockquote class="code"><p class="quoted">
Understand &quot;actual&quot; or &quot;original&quot; as &quot;[actual]&quot;. Understand &quot;[actual]&quot; as something when the item described is not a model.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7126_188" -->
<a id="c7126_188"></a><blockquote class="code"><p class="quoted">
Definition: a thing is suitable:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;[actual]&quot;, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7127_188" -->
<a id="c7127_188"></a><blockquote class="code"><p class="quoted">
Understand &quot;[something related by indication]&quot; as a model.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7128_188" -->
<a id="c7128_188"></a><blockquote class="code"><p class="quoted">
After printing the name of a model (called target): say &quot; [random thing shown by the target]&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now our duplication command -- for the sake of simplicity, we'll suppose that in this scenario the player is duplicating objects by magic rather than creating them out of physical materials or supplies:</p>
<!-- START CODE "c7129_188" -->
<a id="c7129_188"></a><blockquote class="code"><p class="quoted">
Understand &quot;duplicate [something]&quot; as duplicating. Duplicating is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7130_188" -->
<a id="c7130_188"></a><blockquote class="code"><p class="quoted">
The duplicating action has an object called the selected model.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7131_188" -->
<a id="c7131_188"></a><blockquote class="code"><p class="quoted">
Setting action variables for duplicating:
<br />&#160;&#160;&#160;&#160;let N be a random model in the model-repository;
<br />&#160;&#160;&#160;&#160;now the selected model is N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7132_188" -->
<a id="c7132_188"></a><blockquote class="code"><p class="quoted">
Check duplicating:
<br />&#160;&#160;&#160;&#160;if the selected model is nothing, say &quot;You're out of power.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7133_188" -->
<a id="c7133_188"></a><blockquote class="code"><p class="quoted">
Carry out duplicating:
<br />&#160;&#160;&#160;&#160;now the noun is shown by the selected model;
<br />&#160;&#160;&#160;&#160;move the selected model to the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7134_188" -->
<a id="c7134_188"></a><blockquote class="code"><p class="quoted">
Report duplicating:
<br />&#160;&#160;&#160;&#160;say &quot;You concentrate and manifest [a selected model].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now, the challenge is that we want to print the word &quot;actual&quot; before printing the name of an object, but only during disambiguation questions and only when we are not printing the name of the object as part of a model-name! (If we are not careful about the latter point, we will get responses such as &quot;Which do you mean, the model actual deer or the actual deer?&quot; which of course defeats the whole purpose.</p>
<p>The way around this is to remember that activities stack: we're printing the name of the deer while printing the name of a model that involves the deer. So if we set a flag while printing the name of a model, we can control the way the deer's name prints during the transaction. (We could use our ...while clause to specify while not printing the name of a model, except that we're already using it for &quot;while asking which do you mean&quot;, and these do not stack.) So:</p>
<!-- START CODE "c7135_188" -->
<a id="c7135_188"></a><blockquote class="code"><p class="quoted">
The virtual-context is a truth state that varies. The virtual-context is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7136_188" -->
<a id="c7136_188"></a><blockquote class="code"><p class="quoted">
Before printing the name of a model:
<br />&#160;&#160;&#160;&#160;now virtual-context is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7137_188" -->
<a id="c7137_188"></a><blockquote class="code"><p class="quoted">
After printing the name of a model:
<br />&#160;&#160;&#160;&#160;now virtual-context is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7138_188" -->
<a id="c7138_188"></a><blockquote class="code"><p class="quoted">
Before printing the name of something (called target) while asking which do you mean:
<br />&#160;&#160;&#160;&#160;if the target is not a model and virtual-context is false:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;actual &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7139_188" -->
<a id="c7139_188"></a><blockquote class="code"><p class="quoted">
Forest is a room. It contains a deer and a daisy. The deer is an animal.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7140_188" -->
<a id="c7140_188"></a><blockquote class="code"><p class="quoted">
Test me with &quot;duplicate deer / x model deer / x deer model / drop deer / x deer / actual / x deer / model&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "369: Apples" "e201" -->
<a id="e201"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example201'); return false;"><b>369</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example201'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Apples</span></b></a><br />Prompting the player on how to disambiguate otherwise similar objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc45.html#e201"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example201" style="display: none;">
<p>Inform by default detects whether two objects can be disambiguated by any vocabulary available to the player. If so, it asks a question; if not, it picks one of the identical objects at random.</p>
<p>Generally this produces good behavior. Occasionally, though, two objects have some distinguishing characteristic that doesn't appear in the object name. For instance, suppose we've created a class of apples that can be told apart depending on whether they've been bitten or not:</p>
<!-- START CODE "c7141_201" -->
<a id="c7141_201"></a><blockquote class="code"><p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is &quot;It is [consumption].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7142_201" -->
<a id="c7142_201"></a><blockquote class="code"><p class="quoted">
Understand the consumption property as describing an apple.
</p></blockquote>
<!-- END CODE -->
<p>The player can meaningfully type</p>
<!-- START CODE "c7143_201" -->
<a id="c7143_201"></a><blockquote class="code"><p class="quoted">
&gt;EAT BITTEN APPLE
</p></blockquote>
<!-- END CODE -->
<p>or</p>
<!-- START CODE "c7144_201" -->
<a id="c7144_201"></a><blockquote class="code"><p class="quoted">
&gt;EAT PRISTINE APPLE
</p></blockquote>
<!-- END CODE -->
<p>but if he types</p>
<!-- START CODE "c7145_201" -->
<a id="c7145_201"></a><blockquote class="code"><p class="quoted">
&gt;EAT APPLE
</p></blockquote>
<!-- END CODE -->
<p>Inform will, annoyingly, ask</p>
<!-- START CODE "c7146_201" -->
<a id="c7146_201"></a><blockquote class="code"><p class="quoted">
Which do you mean, an apple or the apple?
</p></blockquote>
<!-- END CODE -->
<p>This gives the player no indication of why Inform is making a distinction. So here we add a special &quot;printing the name&quot; rule to get around that situation:</p>
<!-- START CODE "c7147_201" -->
<a id="c7147_201"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Apples[=0x0022=][=0x000A=][=0x000A=]Orchard is a room.[=0x000A=][=0x000A=]An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is [=0x0022=]It is [consumption].[=0x0022=][=0x000A=][=0x000A=]Understand the consumption property as describing an apple.[=0x000A=][=0x000A=]Before printing the name of an apple while asking which do you mean: say [=0x0022=][consumption] [=0x0022=]. Before printing the plural name of an apple while asking which do you mean: say [=0x0022=][consumption] [=0x0022=].[=0x000A=][=0x000A=]The player carries three apples.[=0x000A=][=0x000A=]Instead of eating a pristine apple (called the fruit):[=0x000A=][=0x0009=]say [=0x0022=]You take a satisfying bite.[=0x0022=];[=0x000A=][=0x0009=]now the fruit is bitten.[=0x000A=][=0x000A=]Instead of eating a bitten apple (called the fruit):[=0x000A=][=0x0009=]say [=0x0022=]You consume the apple entirely.[=0x0022=];[=0x000A=][=0x0009=]now the fruit is nowhere.[=0x000A=][=0x000A=][Inform will also separate the bitten from the pristine apples in inventory listings and room descriptions, even though it[=0x0027=]s not clear why; we can improve on that behavior thus:][=0x000A=][=0x000A=]Before listing contents: group apples together.[=0x000A=][=0x000A=]Rule for grouping together an apple (called target):[=0x000A=][=0x0009=]let source be the holder of the target;[=0x000A=][=0x0009=]say [=0x0022=][number of apples held by the source in words] apple[s], some bitten[=0x0022=].[=0x000A=][=0x000A=]Before printing the plural name of an apple (called target):[=0x000A=][=0x0009=]let source be the holder of the target;[=0x000A=][=0x0009=]if every apple held by the source is bitten, say [=0x0022=]bitten [=0x0022=];[=0x000A=][=0x0009=]if every apple held by the source is pristine, say [=0x0022=]pristine [=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]i / eat apple / i / eat apple / pristine / i / eat apple / pristine / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Apples&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7148_201" -->
<a id="c7148_201"></a><blockquote class="code"><p class="quoted">
Orchard is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7149_201" -->
<a id="c7149_201"></a><blockquote class="code"><p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is &quot;It is [consumption].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7150_201" -->
<a id="c7150_201"></a><blockquote class="code"><p class="quoted">
Understand the consumption property as describing an apple.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7151_201" -->
<a id="c7151_201"></a><blockquote class="code"><p class="quoted">
Before printing the name of an apple while asking which do you mean: say &quot;[consumption] &quot;. Before printing the plural name of an apple while asking which do you mean: say &quot;[consumption] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7152_201" -->
<a id="c7152_201"></a><blockquote class="code"><p class="quoted">
The player carries three apples.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7153_201" -->
<a id="c7153_201"></a><blockquote class="code"><p class="quoted">
Instead of eating a pristine apple (called the fruit):
<br />&#160;&#160;&#160;&#160;say &quot;You take a satisfying bite.&quot;;
<br />&#160;&#160;&#160;&#160;now the fruit is bitten.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7154_201" -->
<a id="c7154_201"></a><blockquote class="code"><p class="quoted">
Instead of eating a bitten apple (called the fruit):
<br />&#160;&#160;&#160;&#160;say &quot;You consume the apple entirely.&quot;;
<br />&#160;&#160;&#160;&#160;now the fruit is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>Inform will also separate the bitten from the pristine apples in inventory listings and room descriptions, even though it's not clear why; we can improve on that behavior thus:</p>
<!-- START CODE "c7155_201" -->
<a id="c7155_201"></a><blockquote class="code"><p class="quoted">
Before listing contents: group apples together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7156_201" -->
<a id="c7156_201"></a><blockquote class="code"><p class="quoted">
Rule for grouping together an apple (called target):
<br />&#160;&#160;&#160;&#160;let source be the holder of the target;
<br />&#160;&#160;&#160;&#160;say &quot;[number of apples held by the source in words] apple[s], some bitten&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7157_201" -->
<a id="c7157_201"></a><blockquote class="code"><p class="quoted">
Before printing the plural name of an apple (called target):
<br />&#160;&#160;&#160;&#160;let source be the holder of the target;
<br />&#160;&#160;&#160;&#160;if every apple held by the source is bitten, say &quot;bitten &quot;;
<br />&#160;&#160;&#160;&#160;if every apple held by the source is pristine, say &quot;pristine &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7158_201" -->
<a id="c7158_201"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / eat apple / i / eat apple / pristine / i / eat apple / pristine / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "370: Walls and Noses" "e183" -->
<a id="e183"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example183'); return false;"><b>370</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example183'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Walls and Noses</span></b></a><br />Responding to "EXAMINE WALL" with "In which direction?", and to "EXAMINE NOSE" with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc45.html#e183"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example183" style="display: none;">
<p>Suppose we want our game to respond to &quot;EXAMINE WALL&quot; with &quot;In which direction?&quot;, and to &quot;EXAMINE NOSE&quot; with &quot;Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?&quot;</p>
<p>For the case of EXAMINE WALL, we need a way to determine whether every item being disambiguated is a direction. We'll start by making a &quot;matched&quot; adjective which will identify items being disambiguated:</p>
<!-- START CODE "c7159_183" -->
<a id="c7159_183"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Walls and Noses[=0x0022=][=0x000A=][=0x000A=]Eight-Walled Chamber is a room. [=0x0022=]A perfectly octagonal room whose walls are tinted in various hues.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]wall[=0x0022=] as a direction.[=0x000A=][=0x000A=]Definition: a direction is matched if it fits the parse list.[=0x000A=]Definition: a room is matched if it fits the parse list.[=0x000A=]Definition: a thing is matched if it fits the parse list.[=0x000A=][=0x000A=]Rule for asking which do you mean when everything matched is direction:[=0x000A=][=0x0009=]say [=0x0022=]In which direction?[=0x0022=][=0x000A=][=0x000A=][Checking the parse list requires a bit of behind-the-scenes work with Inform 6. Fortunately, you don[=0x0027=]t have to understand this entirely in order to use the rest of the example:][=0x000A=][=0x000A=]To decide whether (N - an object) fits the parse list:[=0x000A=][=0x0009=](- (FindInParseList({N})) -)[=0x000A=][=0x000A=]Include (-[=0x000A=][ FindInParseList obj i k marker;[=0x000A=][=0x0009=]marker = 0;[=0x000A=][=0x0009=]for (i=1 : i[=0x003C=]=number_of_classes : i++) {[=0x000A=][=0x0009=]while (((match_classes--[=0x003E=]marker) ~= i) [=0x0026=][=0x0026=] ((match_classes--[=0x003E=]marker) ~= -i)) marker++;[=0x000A=][=0x0009=]k = match_list--[=0x003E=]marker;[=0x000A=][=0x0009=]if (k==obj) rtrue;[=0x000A=][=0x0009=]}[=0x000A=][=0x0009=]rfalse;[=0x000A=]];[=0x000A=]-)[=0x000A=][=0x000A=][Now that we[=0x0027=]ve defined our [=0x0022=]matched[=0x0022=] adjective, we can use it for other purposes as well -- even generating our own lists. Our second challenge was to respond to EXAMINE NOSE with [=0x0022=]Whose nose do you mean, Frederica[=0x0027=]s, Betty[=0x0027=]s, Wilma[=0x0027=]s or your own?[=0x0022=]][=0x000A=][=0x000A=][Here we need to change the way the question is worded (not [=0x0022=]which do you mean[=0x0022=] but [=0x0022=]whose nose do you mean[=0x0022=]). We also have to the names of the noses as they[=0x0027=]re printed in this particular context, so that they don[=0x0027=]t repeat the word [=0x0022=]nose[=0x0022=] over and over. And -- as a point of good English style -- we also want [=0x0022=]your own[=0x0022=] nose always to be last on the list.][=0x000A=][=0x000A=][For this purpose we may want to use the built-in [=0x0022=]Complex Listing[=0x0022=] extension, which allows us to print specially ordered lists. So:][=0x000A=][=0x000A=]Include Complex Listing by Emily Short.[=0x000A=][=0x000A=]Wilma, Betty, and Frederica are women in the Eight-Walled Chamber. Understand [=0x0022=]lady[=0x0022=] or [=0x0022=]woman[=0x0022=] as a woman. A nose is a kind of thing. A nose is part of every person.[=0x000A=][=0x000A=]Rule for asking which do you mean when everything matched is a nose:[=0x000A=][=0x0009=]prepare a list of matched things;[=0x000A=][=0x0009=]if your nose is an output listed in the Table of Scored Listing:[=0x000A=][=0x0009=][=0x0009=]choose row with an output of your nose in the Table of Scored Listing;[=0x000A=][=0x0009=][=0x0009=]now the assigned score entry is -1;[=0x000A=][=0x0009=]say [=0x0022=]Whose nose do you mean, [the prepared list delimited in disjunctive style]?[=0x0022=][=0x000A=][=0x000A=]Rule for printing the name of a nose (called target) while asking which do you mean :[=0x000A=][=0x0009=]if everything matched is a nose:[=0x000A=][=0x0009=][=0x0009=]if the target is part of a person (called owner):[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the owner is the player, say [=0x0022=]your own[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise say [=0x0022=][the owner][apostrophe]s[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]make no decision.[=0x000A=][=0x000A=]Understand [=0x0022=]own[=0x0022=] or [=0x0022=]mine[=0x0022=] as your nose.[=0x000A=][=0x000A=]Test me with [=0x0022=]x wall / north / x nose / mine[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Walls and Noses&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7160_183" -->
<a id="c7160_183"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7161_183" -->
<a id="c7161_183"></a><blockquote class="code"><p class="quoted">
Understand &quot;wall&quot; as a direction.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7162_183" -->
<a id="c7162_183"></a><blockquote class="code"><p class="quoted">
Definition: a direction is matched if it fits the parse list.
<br />Definition: a room is matched if it fits the parse list.
<br />Definition: a thing is matched if it fits the parse list.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7163_183" -->
<a id="c7163_183"></a><blockquote class="code"><p class="quoted">
Rule for asking which do you mean when everything matched is direction:
<br />&#160;&#160;&#160;&#160;say &quot;In which direction?&quot;
</p></blockquote>
<!-- END CODE -->
<p>Checking the parse list requires a bit of behind-the-scenes work with Inform 6. Fortunately, you don't have to understand this entirely in order to use the rest of the example:</p>
<!-- START CODE "c7164_183" -->
<a id="c7164_183"></a><blockquote class="code"><p class="quoted">
To decide whether (N - an object) fits the parse list:
<br />&#160;&#160;&#160;&#160;(- (FindInParseList({N})) -)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7165_183" -->
<a id="c7165_183"></a><blockquote class="code"><p class="quoted">
Include (-
<br />[ FindInParseList obj i k marker;
<br />&#160;&#160;&#160;&#160;marker = 0;
<br />&#160;&#160;&#160;&#160;for (i=1 : i&lt;=number_of_classes : i++) {
<br />&#160;&#160;&#160;&#160;while (((match_classes--&gt;marker) ~= i) &amp;&amp; ((match_classes--&gt;marker) ~= -i)) marker++;
<br />&#160;&#160;&#160;&#160;k = match_list--&gt;marker;
<br />&#160;&#160;&#160;&#160;if (k==obj) rtrue;
<br />&#160;&#160;&#160;&#160;}
<br />&#160;&#160;&#160;&#160;rfalse;
<br />];
<br />-)
</p></blockquote>
<!-- END CODE -->
<p>Now that we've defined our &quot;matched&quot; adjective, we can use it for other purposes as well -- even generating our own lists. Our second challenge was to respond to EXAMINE NOSE with &quot;Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?&quot;</p>
<p>Here we need to change the way the question is worded (not &quot;which do you mean&quot; but &quot;whose nose do you mean&quot;). We also have to the names of the noses as they're printed in this particular context, so that they don't repeat the word &quot;nose&quot; over and over. And -- as a point of good English style -- we also want &quot;your own&quot; nose always to be last on the list.</p>
<p>For this purpose we may want to use the built-in &quot;Complex Listing&quot; extension, which allows us to print specially ordered lists. So:</p>
<!-- START CODE "c7166_183" -->
<a id="c7166_183"></a><blockquote class="code"><p class="quoted">
Include Complex Listing by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7167_183" -->
<a id="c7167_183"></a><blockquote class="code"><p class="quoted">
Wilma, Betty, and Frederica are women in the Eight-Walled Chamber. Understand &quot;lady&quot; or &quot;woman&quot; as a woman. A nose is a kind of thing. A nose is part of every person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7168_183" -->
<a id="c7168_183"></a><blockquote class="code"><p class="quoted">
Rule for asking which do you mean when everything matched is a nose:
<br />&#160;&#160;&#160;&#160;prepare a list of matched things;
<br />&#160;&#160;&#160;&#160;if your nose is an output listed in the Table of Scored Listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row with an output of your nose in the Table of Scored Listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the assigned score entry is -1;
<br />&#160;&#160;&#160;&#160;say &quot;Whose nose do you mean, [the prepared list delimited in disjunctive style]?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7169_183" -->
<a id="c7169_183"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a nose (called target) while asking which do you mean :
<br />&#160;&#160;&#160;&#160;if everything matched is a nose:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the target is part of a person (called owner):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the owner is the player, say &quot;your own&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[the owner][apostrophe]s&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make no decision.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7170_183" -->
<a id="c7170_183"></a><blockquote class="code"><p class="quoted">
Understand &quot;own&quot; or &quot;mine&quot; as your nose.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7171_183" -->
<a id="c7171_183"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x wall / north / x nose / mine&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc316.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc318.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
