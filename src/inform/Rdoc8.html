<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>3.1. Room Descriptions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Room Descriptions" -->
<!-- SEARCH SECTION "3.1" -->
<!-- SEARCH SORT "001-003-001-000" -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc7.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 3: Place</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc9.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<p class="sectionheading">§3.1. Room Descriptions</p>
<p>The printing of a room description is a more delicate business than it might initially seem to be: Inform has to consider all the objects that the player might have brought into the room or dropped there, and all the objects on visible supporters, and decide how to group and list them.</p>
<p>All of this behavior is handled by the looking command, so we find the relevant rules in the carry out looking rulebook. To go through the elements step by step:</p>
<p>Looking begins by printing the name and description of the room we're in. We can introduce variations into room names and descriptions by changing their printed name and description properties, as in</p>
<!-- START CODE "c9736" -->
<a id="c9736"></a><blockquote class="code"><p class="quoted">
now the printed name of the Church is &quot;Lightning-Struck Ruin&quot;;
<br />now the description of the Church is &quot;The beams overhead have been burnt away and the pews are charred. Only the stone walls remain.&quot;;
</p></blockquote>
<!-- END CODE -->
<p>If we need more drastic effects, we can turn off or change either of these features by altering the rules in the carry out looking rulebook. For instance, to remove the name of the location entirely from room descriptions, we would write</p>
<!-- START CODE "c9737" -->
<a id="c9737"></a><blockquote class="code"><p class="quoted">
The room description heading rule is not listed in the carry out looking rules.
</p></blockquote>
<!-- END CODE -->
<p>(A word of warning: there is one other context in which the story prints a room name — when restoring a save or undoing a move. To omit the room title here too, add</p>
<!-- START CODE "c9738" -->
<a id="c9738"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a room: do nothing.)
</p></blockquote>
<!-- END CODE -->
<p><span class="boldface">Ant-Sensitive Sunglasses</span> demonstrates how to use activities to make more flexible room description text.</p>
<p>Next, the story determines what items are visible to the player and need to be described. These never include the player himself, or scenery, but other things in the environment will be made &quot;marked for listing&quot;. This is also the stage at which Inform chooses the order in which items will be listed.</p>
<p>We are allowed to meddle by changing the priorities of objects, in case we want some things to be described to the player first or last in the room description; <span class="boldface">Priority Lab</span> goes into detail about how. We can also force things to be left out entirely: <span class="boldface">Low Light</span> handles the case of an object that can only be seen when an extra lamp is switched on, even though the room is not otherwise considered dark. <span class="boldface">Copper River</span> implements the idea of &quot;interesting&quot; and &quot;dull&quot; objects: the story determines which items are currently important to the puzzles or narrative and mentions those in the room description, while suppressing everything else.</p>
<p>Then Inform carries out the writing a paragraph about... activity with anything that provides one; anything it prints the name of, it tags &quot;mentioned&quot;. Thus</p>
<!-- START CODE "c9739" -->
<a id="c9739"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about Mr Wickham:
<br />&#160;&#160;&#160;&#160;say &quot;Mr Wickham looks speculatively at [list of women in the location].&quot;
</p></blockquote>
<!-- END CODE -->
<p>will count Wickham and everyone he looks at as all having been mentioned, and will not refer to them again through the rest of the room description. More complicated uses of writing a paragraph abound. A developed system for handling supporters that don't list contents appears in <span class="boldface">The Eye of the Idol</span>.</p>
<p>Inform then prints the initial appearances of objects that are marked for listing but not already mentioned; and then it performs the listing nondescript items activity, collating the remaining objects into a paragraph like</p>
<!-- START CODE "c9740" -->
<a id="c9740"></a><blockquote class="code"><p class="quoted">
You can see a dog, a hen, ...
</p></blockquote>
<!-- END CODE -->
<p>We can pre-empt items from appearing in this paragraph or change their listing by intervening with a Before listing nondescript items... rule, as in</p>
<!-- START CODE "c9741" -->
<a id="c9741"></a><blockquote class="code"><p class="quoted">
Before listing nondescript items when the player needs the watch:
<br />&#160;&#160;&#160;&#160;if the watch is marked for listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The watch catches your eye.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the watch is not marked for listing.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted the watch always to be listed this way, it would be better to give it an initial appearance, but for conditional cases, the listing nondescript items activity is a good place to intervene. For instance, <span class="boldface">Rip</span> uses this activity to incorporate changeable or portable items into the main description text for a room when (and only when) that is appropriate.</p>
<p>The listing nondescript items activity also allows us to replace the &quot;You can see...&quot; tag with something else more fitting, if for instance we are in a dimly lit room.</p>
<p>When the story compiles the list of nondescript items, it adds tags such as &quot;(open)&quot; or &quot;(empty)&quot; or &quot;(on which is a fish tank)&quot; to the names of containers and supporters. We can suppress or change the &quot;(empty)&quot; tag with the printing room description details of activity, as in</p>
<!-- START CODE "c9742" -->
<a id="c9742"></a><blockquote class="code"><p class="quoted">
Rule for printing room description details: stop.
</p></blockquote>
<!-- END CODE -->
<p>And we can suppress the &quot;(open)&quot; and &quot;(on which is...)&quot; sorts of tags with the &quot;omit the contents in listing&quot; phrase, as in</p>
<!-- START CODE "c9743" -->
<a id="c9743"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of the bottle while not inserting or removing:
<br />&#160;&#160;&#160;&#160;if the bottle contains sand, say &quot;bottle of sand&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;empty bottle&quot;;
<br />&#160;&#160;&#160;&#160;omit contents in listing.
</p></blockquote>
<!-- END CODE -->
<p>Finally, the looking command lists visible non-scenery items that sit on scenery supporters, as in</p>
<!-- START CODE "c9744" -->
<a id="c9744"></a><blockquote class="code"><p class="quoted">
On the table is a folded newspaper.
</p></blockquote>
<!-- END CODE -->
<p>These paragraphs can be manipulated with the printing the locale description activity and the printing a locale paragraph about activity.</p>
<p>Another common thing we may want to do is change the description of a room depending on whether we've been there before (as in <span class="boldface">Slightly Wrong</span>) or on how often we've visited (as in <span class="boldface">Infiltration</span>). <span class="boldface">Night Sky</span>, meanwhile, changes the description of a room when we've examined another object, so that the player's awareness of his environment is affected by other things the character knows.</p>
<p class="crossreference"><a href="Rdoc32.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Looking</b></a><i> for ways to change the default length of room descriptions</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "147: Night Sky" "e379" -->
<a id="e379"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example379'); return false;"><b>147</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example379'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Night Sky</span></b></a><br />A room which changes its description depending on whether an object has been examined.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc146.html#e379"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example379" style="display: none;">
<p>Sometimes a nice effect is to change the way things are described depending on the information the player has gained in the course of play. We could for instance write this:</p>
<!-- START CODE "c9745_379" -->
<a id="c9745_379"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Night Sky[=0x0022=][=0x000A=][=0x000A=]The Planetarium is a room. [=0x0022=][if we have examined the sinister message]A dark room where it seems something is about to jump out at you![otherwise]A tranquil dark room with a ceilingful of stars.[end if][=0x0022=][=0x000A=][=0x000A=]The sinister message is a thing in the Planetarium. [=0x0022=]A message is taped to the wall.[=0x0022=] The description is [=0x0022=][=0x0027=]BEWARE.[=0x0027=][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look / x message / look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Night Sky&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9746_379" -->
<a id="c9746_379"></a><blockquote class="code"><p class="quoted">
The Planetarium is a room. &quot;[if we have examined the sinister message]A dark room where it seems something is about to jump out at you![otherwise]A tranquil dark room with a ceilingful of stars.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9747_379" -->
<a id="c9747_379"></a><blockquote class="code"><p class="quoted">
The sinister message is a thing in the Planetarium. &quot;A message is taped to the wall.&quot; The description is &quot;'BEWARE.'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9748_379" -->
<a id="c9748_379"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / x message / look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>On the other hand, beware that this would not work as desired:</p>
<!-- START CODE "c9749_379" -->
<a id="c9749_379"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Night Sky[=0x0022=][=0x000A=][=0x000A=]The Planetarium is a room. [=0x0022=][if we have listened to the sinister message]A dark room where it seems something is about to jump out at you![otherwise]A tranquil dark room with a ceilingful of stars.[end if][=0x0022=][=0x000A=][=0x000A=]The sinister message is a thing in the Planetarium. [=0x0022=]A message plays very softly, so that you would have to listen to hear it.[=0x0022=] Instead of doing anything other than listening to the message: say [=0x0022=]It[=0x0027=]s only a sound, after all.[=0x0022=]. Instead of listening to the sinister message: say [=0x0022=]A voice whispers, [=0x0027=]BEWARE[=0x0027=].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]listen to message / look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Night Sky&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9750_379" -->
<a id="c9750_379"></a><blockquote class="code"><p class="quoted">
The Planetarium is a room. &quot;[if we have listened to the sinister message]A dark room where it seems something is about to jump out at you![otherwise]A tranquil dark room with a ceilingful of stars.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9751_379" -->
<a id="c9751_379"></a><blockquote class="code"><p class="quoted">
The sinister message is a thing in the Planetarium. &quot;A message plays very softly, so that you would have to listen to hear it.&quot; Instead of doing anything other than listening to the message: say &quot;It's only a sound, after all.&quot;. Instead of listening to the sinister message: say &quot;A voice whispers, 'BEWARE'.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9752_379" -->
<a id="c9752_379"></a><blockquote class="code"><p class="quoted">
Test me with &quot;listen to message / look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The reason is that our Instead rule has pre-empted normal listening, so Inform considers that we have never successfully heard the message. The moral here is that &quot;if we have...&quot; is useful for tracking events that otherwise proceeded completely normally (picking up ordinary objects, examining things); if we have used instead to make some change, we will have to use a different approach to record that the event did occur as scheduled.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "152: Infiltration" "e387" -->
<a id="e387"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example387'); return false;"><b>152</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example387'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Infiltration</span></b></a><br />A room whose description changes depending on the number of times the player has visited.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc148.html#e387"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example387" style="display: none;">
<p>Suppose we have a location that makes the player uncomfortable, and we want its description to change slightly each time he goes there, to reflect his increasing unease. We also want the door to that room to show whether he is going there for the first time, or whether this is a repeat visit.</p>
<p>We start with an ordinary room:</p>
<!-- START CODE "c9753_387" -->
<a id="c9753_387"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Infiltration[=0x0022=][=0x000A=][=0x000A=]The Wasteland is a room. [=0x0022=]In its more distant reaches, the Wasteland has a kind of austere beauty, but here beside the Secure Zone it is the worst of all possible worlds. Barrels of toxins are stacked the regulation hundred and fifty feet out; more traditional garbage has simply been flung over the wall, and this category includes one or two corpses roughly and inadequately disguised by black plastic bags. The wall itself has become a canvas for outcasts and exiles, and is covered with obscene paintings, lewd remarks about the inhabitants of the Secure Zone, and a few maudlin epitaphs.[=0x0022=][=0x000A=][=0x000A=][Now the door, which will change from saying [=0x0022=]leads inside...[=0x0022=] to [=0x0022=]leads back inside...[=0x0022=] when this becomes appropriate:][=0x000A=][=0x000A=]The portal is a door. It is inside from the Wasteland and outside from the Secure Zone. [=0x0022=][if the player is in the Wasteland]To the west, a[otherwise]A[end if] portal in the cinder-block and barbed wire wall leads[if the player is in the Wasteland and the Zone is visited] back[end if] [if the player is in the Wasteland]inside[otherwise]outside[end if].[=0x0022=][=0x000A=][=0x000A=][Here we haven[=0x0027=]t used any conditions that we didn[=0x0027=]t know about in previous sections: the portal line only reflects whether the Zone has been visited never or visited once. But the Secure Zone itself makes use of the number of times visited:][=0x000A=][=0x000A=]The Secure Zone has the description [=0x0022=][if the player is in the Zone for the second time]Re-entering the Zone has not made you any more comfortable inside. [end if]Despite your carefully-chosen outfit and the walk you have been practicing, you are sure those inside can tell you don[=0x0027=]t belong. Not that very many people are visible here[if the player is in the Zone for more than the second time] -- the place seems more desolate than ever[end if].[=0x0022=][=0x000A=][=0x000A=]Instead of going west in the Wasteland, try going inside. Instead of going east in the Secure Zone, try going outside.[=0x000A=][=0x000A=][And finally, to be sure that the player does see our fancy changing descriptions:][=0x000A=][=0x000A=]Use full-length room descriptions.[=0x000A=][=0x000A=]Test me with [=0x0022=]look / open portal / w / look / e / look / w / e / w[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Infiltration&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9754_387" -->
<a id="c9754_387"></a><blockquote class="code"><p class="quoted">
The Wasteland is a room. &quot;In its more distant reaches, the Wasteland has a kind of austere beauty, but here beside the Secure Zone it is the worst of all possible worlds. Barrels of toxins are stacked the regulation hundred and fifty feet out; more traditional garbage has simply been flung over the wall, and this category includes one or two corpses roughly and inadequately disguised by black plastic bags. The wall itself has become a canvas for outcasts and exiles, and is covered with obscene paintings, lewd remarks about the inhabitants of the Secure Zone, and a few maudlin epitaphs.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now the door, which will change from saying &quot;leads inside...&quot; to &quot;leads back inside...&quot; when this becomes appropriate:</p>
<!-- START CODE "c9755_387" -->
<a id="c9755_387"></a><blockquote class="code"><p class="quoted">
The portal is a door. It is inside from the Wasteland and outside from the Secure Zone. &quot;[if the player is in the Wasteland]To the west, a[otherwise]A[end if] portal in the cinder-block and barbed wire wall leads[if the player is in the Wasteland and the Zone is visited] back[end if] [if the player is in the Wasteland]inside[otherwise]outside[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Here we haven't used any conditions that we didn't know about in previous sections: the portal line only reflects whether the Zone has been visited never or visited once. But the Secure Zone itself makes use of the number of times visited:</p>
<!-- START CODE "c9756_387" -->
<a id="c9756_387"></a><blockquote class="code"><p class="quoted">
The Secure Zone has the description &quot;[if the player is in the Zone for the second time]Re-entering the Zone has not made you any more comfortable inside. [end if]Despite your carefully-chosen outfit and the walk you have been practicing, you are sure those inside can tell you don't belong. Not that very many people are visible here[if the player is in the Zone for more than the second time] -- the place seems more desolate than ever[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9757_387" -->
<a id="c9757_387"></a><blockquote class="code"><p class="quoted">
Instead of going west in the Wasteland, try going inside. Instead of going east in the Secure Zone, try going outside.
</p></blockquote>
<!-- END CODE -->
<p>And finally, to be sure that the player does see our fancy changing descriptions:</p>
<!-- START CODE "c9758_387" -->
<a id="c9758_387"></a><blockquote class="code"><p class="quoted">
Use full-length room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9759_387" -->
<a id="c9759_387"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / open portal / w / look / e / look / w / e / w&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that the description of the Secure Zone changes from visit to visit, but that looking repeatedly during a single visit changes nothing.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "334: Ant-Sensitive Sunglasses" "e413" -->
<a id="e413"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example413'); return false;"><b>334</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example413'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Ant-Sensitive Sunglasses</span></b></a><br />What are activities good for? Controlling output when we want the same action to be able to produce very flexible text depending on the state of the world -- in this case, making highly variable room description and object description text.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc287.html#e413"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example413" style="display: none;">
<p>Suppose we want to create an object -- or maybe even a series of objects -- that warp the player's perception of every room description and object around him.</p>
<p>We've already seen some ways to create variations in text. For instance, we could make a room description with if substitutions in it, like so:</p>
<!-- START CODE "c9760_413" -->
<a id="c9760_413"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. &quot;[if the player is wearing the sunglasses]Are ants coming out of the sink? No, probably no.[otherwise]A small kitchen tucked into a corner of the vacation house. There is storage space for five or six cups, a sink, a two-ring stove; nothing else to speak of.[end if]&quot;
</p></blockquote>
<!-- END CODE -->
<p>That works fine if we have one or two variations we want to add; it's not so good if we're going to have several items that work like the sunglasses, or if we want the sunglasses to override the description of every room in the house.</p>
<p>A slightly more flexible method is to use a substitution that calls out to a say phrase, like this:</p>
<!-- START CODE "c9761_413" -->
<a id="c9761_413"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. &quot;[kitchen-description]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9762_413" -->
<a id="c9762_413"></a><blockquote class="code"><p class="quoted">
To say kitchen-description:
<br />&#160;&#160;&#160;&#160;if the player is wearing the sunglasses:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Are ants coming out of the sink? No, probably no.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;A small kitchen tucked into a corner of the vacation house. There is storage space for five or six cups, a sink, a two-ring stove; nothing else to speak of.&quot;
</p></blockquote>
<!-- END CODE -->
<p>But again this doesn't handle the case of overriding multiple rooms at once very well.</p>
<p>When we reach a point where we need a given piece of text to be very flexible depending on the world model, it's time to use an activity.</p>
<p>Activities offer several advantages. One, we can create an activity like this:</p>
<!-- START CODE "c9763_413" -->
<a id="c9763_413"></a><blockquote class="code"><p class="quoted">
Printing the room-description of something is an activity.
</p></blockquote>
<!-- END CODE -->
<p>and then write a rule that applies to multiple rooms at once, like:</p>
<!-- START CODE "c9764_413" -->
<a id="c9764_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the room-description of a room when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;The walls look like they're covered with ants. Just a coincidence, I'm sure.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Inform's usual rule-ranking also means that more-specific rules will override less-specific ones, so we could add</p>
<!-- START CODE "c9765_413" -->
<a id="c9765_413"></a><blockquote class="code"><p class="quoted">
&#160;&#160;&#160;&#160;Rule for printing the room-description of the Kitchen when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;Are ants coming out of the sink? No, probably not.&quot;
</p></blockquote>
<!-- END CODE -->
<p>and have that rule override the behavior of the activity just in the kitchen. Meanwhile, our base room descriptions remain straightforward and uncluttered by if-statements.</p>
<p>Several other examples will show how to hook activities into existing actions: Crusoe goes into detail about how how to make the descriptions of things more variable, and Aftershock demonstrates activities for describing the behavior of switchable devices.</p>
<p>Here, we preview all of those methods, just to get a sense of how they work and why they might be useful in controlling a game. Subsequent chapters go into more detail about the syntax of creating activities and the list of activities that are already defined by Inform.</p>
<!-- START CODE "c9766_413" -->
<a id="c9766_413"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Ant-Sensitive Sunglasses[=0x0022=][=0x000A=][=0x000A=]Part 1 - Procedure[=0x000A=][=0x000A=][To add a new activity to an existing Inform rule, we need to do three things:][=0x000A=][=0x000A=][1) Define our new activity.][=0x000A=][2) Give a basic rule that says what is supposed to happen when that activity occurs, as in [=0x0022=]Rule for...[=0x0022=]][=0x000A=][3) Replace the existing rule in Inform[=0x0027=]s rulebooks with a new one that calls on our activity.][=0x000A=][=0x000A=][Here we do this with examining:][=0x000A=][=0x000A=]Section 1 - Item Description[=0x000A=][=0x000A=]Printing the description of something is an activity.[=0x000A=][=0x000A=][Now, by default, we want to print the description property; we just want the option to write some extra rules overriding that property. So we tell Inform that our most basic rule for printing the description of something is just to give that description text:][=0x000A=][=0x000A=]Rule for printing the description of something (called item):[=0x000A=][=0x0009=]if the description of the item is not [=0x0022=][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][description of item][paragraph break][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You see nothing special about [the item].[=0x0022=].[=0x000A=][=0x000A=][Next, we need the standard examining rule to look at our printing-the-description activity:][=0x000A=][=0x000A=]The activity-based examining rule is listed instead of the standard examining rule in the carry out examining rules.[=0x000A=][=0x000A=]This is the activity-based examining rule:[=0x000A=][=0x0009=]carry out the printing the description activity with the noun;[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][Now we do the same thing to room descriptions.][=0x000A=][=0x000A=]Section 2 - Room Description[=0x000A=][=0x000A=]Printing the room-description of something is an activity.[=0x000A=][=0x000A=]Rule for printing the room-description of a room (called item):[=0x000A=][=0x0009=]if the description of the item is not [=0x0022=][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][description of item][paragraph break][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]do nothing instead.[=0x000A=][=0x000A=]The activity-based room description body text rule is listed instead of the room description body text rule in the carry out looking rules.[=0x000A=][=0x000A=][Our replacement rule this time around is a little bit trickier just because the rule that we[=0x0027=]re replacing is a complicated one: describing a room already checks to see whether there[=0x0027=]s light to see by, whether the player has turned off room descriptions when he enters a room for the second time, and whether the player character is (say) inside a closed box he can[=0x0027=]t see out of.][=0x000A=][=0x000A=][But all of those details are re-copied from the standard rules, and the important thing is that, at the end, we again carry out our activity.][=0x000A=][=0x000A=]This is the activity-based room description body text rule:[=0x000A=][=0x0009=]if the visibility level count is 0:[=0x000A=][=0x0009=][=0x0009=]if set to abbreviated room descriptions, continue the action;[=0x000A=][=0x0009=][=0x0009=]if set to sometimes abbreviated room descriptions and[=0x000A=][=0x0009=][=0x0009=][=0x0009=]abbreviated form allowed is true and[=0x000A=][=0x0009=][=0x0009=][=0x0009=]darkness witnessed is true,[=0x000A=][=0x0009=][=0x0009=][=0x0009=]continue the action;[=0x000A=][=0x0009=][=0x0009=]begin the printing the description of a dark room activity;[=0x000A=][=0x0009=][=0x0009=]if handling the printing the description of a dark room activity,[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]It is pitch dark, and you can[=0x0027=]t see a thing.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the printing the description of a dark room activity;[=0x000A=][=0x0009=]otherwise if the visibility ceiling is the location:[=0x000A=][=0x0009=][=0x0009=]if set to abbreviated room descriptions, continue the action;[=0x000A=][=0x0009=][=0x0009=]if set to sometimes abbreviated room descriptions and abbreviated form[=0x000A=][=0x0009=][=0x0009=][=0x0009=]allowed is true and the location is visited, continue the action;[=0x000A=][=0x0009=][=0x0009=]carry out the printing the room-description activity with the location.[=0x000A=][=0x000A=]Section 3 - Device Description[=0x000A=][=0x000A=]Showing action of something is an activity.[=0x000A=][=0x000A=]Rule for showing action of something (called item):[=0x000A=][=0x0009=]if the item is switched on, say [=0x0022=][The item] is switched on.[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=][The item] is switched off.[=0x0022=][=0x000A=][=0x000A=]The activity-based described devices rule is listed instead of the examine devices rule in the carry out examining rules.[=0x000A=][=0x000A=]This is the activity-based described devices rule:[=0x000A=][=0x0009=]if the noun is a device:[=0x000A=][=0x0009=][=0x0009=]carry out the showing action activity with the noun;[=0x000A=][=0x0009=][=0x0009=]now examine text printed is true.[=0x000A=][=0x000A=]Report switching on something:[=0x000A=][=0x0009=]say [=0x0022=]You flip a switch. [=0x0022=];[=0x000A=][=0x0009=]carry out the showing action activity with the noun instead.[=0x000A=][=0x000A=]Part 2 - Scenario[=0x000A=][=0x000A=]The Kitchen is a room. [=0x0022=]A small kitchen tucked into a corner of the vacation house. There is storage space for five or six cups, a sink, a two-ring stove; nothing else to speak of.[=0x0022=][=0x000A=][=0x000A=]The microwave is a device in the Kitchen.[=0x000A=][=0x000A=]South of the Kitchen is the Living Area. The description of the Living area is [=0x0022=]A whitewashed living/dining/reclining area in what used to be a shepherd[=0x0027=]s stone hut, but now costs vacationers 600 euros a week. It offers no mod cons, only a straight view of the Mediterranean and a wobbly writing table.[=0x0022=][=0x000A=][=0x000A=]Rule for printing the room-description of a room when the player wears the sunglasses:[=0x000A=][=0x0009=]say [=0x0022=]The walls look like they[=0x0027=]re covered with ants. Just a coincidence, I[=0x0027=]m sure[antsy].[=0x0022=][=0x000A=][=0x000A=]Rule for printing the room-description of the Kitchen when the player wears the sunglasses:[=0x000A=][=0x0009=]say [=0x0022=]Are ants coming out of the sink? No, probably not[antsy].[=0x0022=][=0x000A=][=0x000A=]Rule for printing the description of something (called the item) when the player wears the sunglasses:[=0x000A=][=0x0009=]say [=0x0022=][The item] [are] [one of]ant-colored[or]ant-legged[or]covered in ants[at random][antsy].[=0x0022=][=0x000A=][=0x000A=]Rule for showing action of the microwave:[=0x000A=][=0x0009=]say [=0x0022=]The microwave hums meaningfully to itself.[=0x0022=][=0x000A=][=0x000A=]Rule for showing action of the microwave when the player wears the sunglasses:[=0x000A=][=0x0009=]say [=0x0022=]The microwave hums as though inhabited by a billion ants[antsy].[=0x0022=][=0x000A=][=0x000A=]The player carries sunglasses of freakiness and an apple. The apple is edible. The sunglasses are wearable.[=0x000A=][=0x000A=]ant-paranoia is a number that varies.[=0x000A=][=0x000A=]To say antsy:[=0x000A=][=0x0009=]increase ant-paranoia by 1;[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if the ant-paranoia is greater than 3:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Augh! AUUUGH! GET THEM OFF--[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story saying [=0x0022=]You have lost your mind.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look / turn on microwave / turn off microwave / x apple / x sunglasses / s / wear sunglasses / look / x apple / n / turn on microwave[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Ant-Sensitive Sunglasses&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9767_413" -->
<a id="c9767_413"></a><blockquote class="code"><p class="quoted">
Part 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<p>To add a new activity to an existing Inform rule, we need to do three things:</p>
<p>1) Define our new activity.</p>
<p>2) Give a basic rule that says what is supposed to happen when that activity occurs, as in &quot;Rule for...&quot;</p>
<p>3) Replace the existing rule in Inform's rulebooks with a new one that calls on our activity.</p>
<p>Here we do this with examining:</p>
<!-- START CODE "c9768_413" -->
<a id="c9768_413"></a><blockquote class="code"><p class="quoted">
Section 1 - Item Description
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9769_413" -->
<a id="c9769_413"></a><blockquote class="code"><p class="quoted">
Printing the description of something is an activity.
</p></blockquote>
<!-- END CODE -->
<p>Now, by default, we want to print the description property; we just want the option to write some extra rules overriding that property. So we tell Inform that our most basic rule for printing the description of something is just to give that description text:</p>
<!-- START CODE "c9770_413" -->
<a id="c9770_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the description of something (called item):
<br />&#160;&#160;&#160;&#160;if the description of the item is not &quot;&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[description of item][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see nothing special about [the item].&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Next, we need the standard examining rule to look at our printing-the-description activity:</p>
<!-- START CODE "c9771_413" -->
<a id="c9771_413"></a><blockquote class="code"><p class="quoted">
The activity-based examining rule is listed instead of the standard examining rule in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9772_413" -->
<a id="c9772_413"></a><blockquote class="code"><p class="quoted">
This is the activity-based examining rule:
<br />&#160;&#160;&#160;&#160;carry out the printing the description activity with the noun;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>Now we do the same thing to room descriptions.</p>
<!-- START CODE "c9773_413" -->
<a id="c9773_413"></a><blockquote class="code"><p class="quoted">
Section 2 - Room Description
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9774_413" -->
<a id="c9774_413"></a><blockquote class="code"><p class="quoted">
Printing the room-description of something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9775_413" -->
<a id="c9775_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the room-description of a room (called item):
<br />&#160;&#160;&#160;&#160;if the description of the item is not &quot;&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[description of item][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;do nothing instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9776_413" -->
<a id="c9776_413"></a><blockquote class="code"><p class="quoted">
The activity-based room description body text rule is listed instead of the room description body text rule in the carry out looking rules.
</p></blockquote>
<!-- END CODE -->
<p>Our replacement rule this time around is a little bit trickier just because the rule that we're replacing is a complicated one: describing a room already checks to see whether there's light to see by, whether the player has turned off room descriptions when he enters a room for the second time, and whether the player character is (say) inside a closed box he can't see out of.</p>
<p>But all of those details are re-copied from the standard rules, and the important thing is that, at the end, we again carry out our activity.</p>
<!-- START CODE "c9777_413" -->
<a id="c9777_413"></a><blockquote class="code"><p class="quoted">
This is the activity-based room description body text rule:
<br />&#160;&#160;&#160;&#160;if the visibility level count is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if set to abbreviated room descriptions, continue the action;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if set to sometimes abbreviated room descriptions and
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;abbreviated form allowed is true and
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;darkness witnessed is true,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue the action;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;begin the printing the description of a dark room activity;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if handling the printing the description of a dark room activity,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It is pitch dark, and you can't see a thing.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the printing the description of a dark room activity;
<br />&#160;&#160;&#160;&#160;otherwise if the visibility ceiling is the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if set to abbreviated room descriptions, continue the action;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if set to sometimes abbreviated room descriptions and abbreviated form
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;allowed is true and the location is visited, continue the action;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the printing the room-description activity with the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9778_413" -->
<a id="c9778_413"></a><blockquote class="code"><p class="quoted">
Section 3 - Device Description
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9779_413" -->
<a id="c9779_413"></a><blockquote class="code"><p class="quoted">
Showing action of something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9780_413" -->
<a id="c9780_413"></a><blockquote class="code"><p class="quoted">
Rule for showing action of something (called item):
<br />&#160;&#160;&#160;&#160;if the item is switched on, say &quot;[The item] is switched on.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The item] is switched off.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9781_413" -->
<a id="c9781_413"></a><blockquote class="code"><p class="quoted">
The activity-based described devices rule is listed instead of the examine devices rule in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9782_413" -->
<a id="c9782_413"></a><blockquote class="code"><p class="quoted">
This is the activity-based described devices rule:
<br />&#160;&#160;&#160;&#160;if the noun is a device:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the showing action activity with the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now examine text printed is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9783_413" -->
<a id="c9783_413"></a><blockquote class="code"><p class="quoted">
Report switching on something:
<br />&#160;&#160;&#160;&#160;say &quot;You flip a switch. &quot;;
<br />&#160;&#160;&#160;&#160;carry out the showing action activity with the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9784_413" -->
<a id="c9784_413"></a><blockquote class="code"><p class="quoted">
Part 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9785_413" -->
<a id="c9785_413"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. &quot;A small kitchen tucked into a corner of the vacation house. There is storage space for five or six cups, a sink, a two-ring stove; nothing else to speak of.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9786_413" -->
<a id="c9786_413"></a><blockquote class="code"><p class="quoted">
The microwave is a device in the Kitchen.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9787_413" -->
<a id="c9787_413"></a><blockquote class="code"><p class="quoted">
South of the Kitchen is the Living Area. The description of the Living area is &quot;A whitewashed living/dining/reclining area in what used to be a shepherd's stone hut, but now costs vacationers 600 euros a week. It offers no mod cons, only a straight view of the Mediterranean and a wobbly writing table.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9788_413" -->
<a id="c9788_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the room-description of a room when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;The walls look like they're covered with ants. Just a coincidence, I'm sure[antsy].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9789_413" -->
<a id="c9789_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the room-description of the Kitchen when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;Are ants coming out of the sink? No, probably not[antsy].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9790_413" -->
<a id="c9790_413"></a><blockquote class="code"><p class="quoted">
Rule for printing the description of something (called the item) when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [are] [one of]ant-colored[or]ant-legged[or]covered in ants[at random][antsy].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9791_413" -->
<a id="c9791_413"></a><blockquote class="code"><p class="quoted">
Rule for showing action of the microwave:
<br />&#160;&#160;&#160;&#160;say &quot;The microwave hums meaningfully to itself.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9792_413" -->
<a id="c9792_413"></a><blockquote class="code"><p class="quoted">
Rule for showing action of the microwave when the player wears the sunglasses:
<br />&#160;&#160;&#160;&#160;say &quot;The microwave hums as though inhabited by a billion ants[antsy].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9793_413" -->
<a id="c9793_413"></a><blockquote class="code"><p class="quoted">
The player carries sunglasses of freakiness and an apple. The apple is edible. The sunglasses are wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9794_413" -->
<a id="c9794_413"></a><blockquote class="code"><p class="quoted">
ant-paranoia is a number that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9795_413" -->
<a id="c9795_413"></a><blockquote class="code"><p class="quoted">
To say antsy:
<br />&#160;&#160;&#160;&#160;increase ant-paranoia by 1;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9796_413" -->
<a id="c9796_413"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if the ant-paranoia is greater than 3:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Augh! AUUUGH! GET THEM OFF--&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story saying &quot;You have lost your mind.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9797_413" -->
<a id="c9797_413"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / turn on microwave / turn off microwave / x apple / x sunglasses / s / wear sunglasses / look / x apple / n / turn on microwave&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "355: Rip Van Winkle" "e20" -->
<a id="e20"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example20'); return false;"><b>355</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example20'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Rip Van Winkle</span></b></a><br />A simple way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc311.html#e20"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example20" style="display: none;">
<p>There are times when, for greater elegance of prose, we'd like to mention an object in the main body text of a room. For instance:</p>
<!-- START CODE "c9798_20" -->
<a id="c9798_20"></a><blockquote class="code"><p class="quoted">
Here is a lovely, secluded fold in the mountains, far from civilization: as though to prove it, Rip Van Winkle is sleeping under a tree.
</p></blockquote>
<!-- END CODE -->
<p>As we've already seen, that's no problem if Rip is scenery. He'll stay there motionless.</p>
<p>But what if something in the game allows Rip to wake up? Or what if we want to use the same technique on a portable object that the player should be allowed to take? Clearly in that case it's not appropriate to make the mentioned thing be scenery, and at the same time, we need to keep Inform from adding a superfluous</p>
<!-- START CODE "c9799_20" -->
<a id="c9799_20"></a><blockquote class="code"><p class="quoted">
You can see Rip Van Winkle here.
</p></blockquote>
<!-- END CODE -->
<p>to the end of our description.</p>
<p>Here is how:</p>
<!-- START CODE "c9800_20" -->
<a id="c9800_20"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Rip Van Winkle[=0x0022=][=0x000A=][=0x000A=]A person can be asleep.[=0x000A=][=0x000A=]The Catskills is a room. [=0x0022=]Here is a lovely, secluded fold in the mountains, far from civilization[if Rip Van Winkle is asleep]: as though to prove it, Rip Van Winkle is sleeping under a tree[end if].[=0x0022=][=0x000A=][=0x000A=]A tree is scenery in the Catskills.[=0x000A=][=0x000A=]Rip Van Winkle is a man in the Catskills. Rip Van Winkle is asleep.[=0x000A=][=0x000A=]Before listing nondescript items of the Catskills:[=0x000A=][=0x0009=]if Rip Van Winkle is marked for listing:[=0x000A=][=0x0009=][=0x0009=]now Rip Van Winkle is not marked for listing;[=0x000A=][=0x0009=][=0x0009=]if Rip Van Winkle is not asleep,[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]Rip Van Winkle stands here, looking mightily confused.[=0x0022=][=0x000A=][=0x000A=]Instead of waiting:[=0x000A=][=0x0009=]say [=0x0022=]Rip Van Winkle wakes up with a snort.[=0x0022=];[=0x000A=][=0x0009=]now Rip Van Winkle is not asleep.[=0x000A=][=0x000A=]Test me with [=0x0022=]look / z / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Rip Van Winkle&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9801_20" -->
<a id="c9801_20"></a><blockquote class="code"><p class="quoted">
A person can be asleep.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9802_20" -->
<a id="c9802_20"></a><blockquote class="code"><p class="quoted">
The Catskills is a room. &quot;Here is a lovely, secluded fold in the mountains, far from civilization[if Rip Van Winkle is asleep]: as though to prove it, Rip Van Winkle is sleeping under a tree[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9803_20" -->
<a id="c9803_20"></a><blockquote class="code"><p class="quoted">
A tree is scenery in the Catskills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9804_20" -->
<a id="c9804_20"></a><blockquote class="code"><p class="quoted">
Rip Van Winkle is a man in the Catskills. Rip Van Winkle is asleep.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9805_20" -->
<a id="c9805_20"></a><blockquote class="code"><p class="quoted">
Before listing nondescript items of the Catskills:
<br />&#160;&#160;&#160;&#160;if Rip Van Winkle is marked for listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now Rip Van Winkle is not marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if Rip Van Winkle is not asleep,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Rip Van Winkle stands here, looking mightily confused.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9806_20" -->
<a id="c9806_20"></a><blockquote class="code"><p class="quoted">
Instead of waiting:
<br />&#160;&#160;&#160;&#160;say &quot;Rip Van Winkle wakes up with a snort.&quot;;
<br />&#160;&#160;&#160;&#160;now Rip Van Winkle is not asleep.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9807_20" -->
<a id="c9807_20"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / z / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "358: Priority Lab" "e114" -->
<a id="e114"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example114'); return false;"><b>358</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example114'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Priority Lab</span></b></a><br />A debugging rule useful for checking the priorities of objects about to be listed.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc312.html#e114"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example114" style="display: none;">
<p>When it comes time to start manipulating the priorities of items, it is useful to be able to check the table for debugging purposes; the problem is that printing the names of the objects can itself affect the way the room description is generated, foiling our debugging efforts.</p>
<p>What follows is a rule to help with debugging safely, and a sample of how priorities work:</p>
<!-- START CODE "c9808_114" -->
<a id="c9808_114"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Priority Lab[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Before printing the locale description (this is the dump locale table rule):[=0x000A=][=0x0009=]say [=0x0022=]Locale Priority list:[=0x0022=];[=0x000A=][=0x0009=]repeat through Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=]let the flag be whether or not the notable-object entry is mentioned;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][line break]  [notable-object entry]: [locale description priority entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the flag is false, now the notable-object entry is not mentioned;[=0x000A=][=0x0009=]say line break.[=0x000A=][=0x000A=][Now, let[=0x0027=]s look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn[=0x0027=]t appear at all, and the default priority of an object is 1.][=0x000A=][=0x000A=]A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the apply early and late description rule):[=0x000A=][=0x0009=]repeat with item running through early-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0][=0x000A=][=0x0009=]repeat with item running through late-described things:[=0x000A=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5][=0x000A=][=0x0009=]repeat with item running through never-described things:[=0x000A=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [don[=0x0027=]t list at all][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with [=0x0022=]writing a paragraph about...[=0x0022=] or because they have initial appearances). Priorities do not affect the order in which items appear in the final [=0x0022=]You can see...[=0x0022=] list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)][=0x000A=][=0x000A=][There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.][=0x000A=][=0x000A=]After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):[=0x000A=][=0x0009=]if the player is not on a supporter:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through sightline-described things:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][=0x000A=][It may also be useful to know about the [=0x0022=]parameter-object[=0x0022=], which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case [=0x0022=]parameter-object[=0x0022=] would be the location, and then in the second the supporter in question.][=0x000A=][=0x000A=][In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:][=0x000A=][=0x000A=]A thing can be tasteful or icky. A thing is usually tasteful.[=0x000A=][=0x000A=]After choosing notable locale objects (this is the icky things next to players rule):[=0x000A=][=0x0009=]if the player is on the parameter-object:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through icky things :[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if there is a notable-object of item in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.][=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=][The other thing to note is that by default that final collection of generic objects ([=0x0022=]You can also see...[=0x0022=]) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:][=0x000A=][=0x000A=]After choosing notable locale objects (this is the latest-described items priority rule):[=0x000A=][=0x0009=]repeat with item running through latest-described things:[=0x000A=][=0x0009=][=0x0009=]if the item is a notable-object listed in the Table of Locale Priorities:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is mentioned;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is marked for late listing.[=0x000A=][=0x000A=]The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.[=0x000A=][=0x000A=]A thing can be marked for late listing. A thing is usually not marked for late listing.[=0x000A=][=0x000A=]This is the late listing rule:[=0x000A=][=0x0009=]if something is marked for late listing:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Oh! And also [a list of things which are marked for late listing].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now everything is not marked for late listing;[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.[=0x000A=][=0x000A=]The early bird is early-described. The late edition is late-described. The unseen object is never-described.[=0x000A=][=0x000A=]The worm is icky.[=0x000A=][=0x000A=]The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is [=0x0022=]There[=0x0027=]s a tiny high window up near the ceiling that you can[=0x0027=]t see unless you[=0x0027=]re on top of something.[=0x0022=][=0x000A=][=0x000A=][In order for the priorities we just set to be interesting, let[=0x0027=]s give out some initial appearances and writing a paragraph rules:][=0x000A=][=0x000A=]The initial appearance of the worm is [=0x0022=]A worm inches along the ground.[=0x0022=][=0x000A=]The initial appearance of the late edition is [=0x0022=]Finally, the late edition lies at your feet.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the early bird when the early bird is in a room: say [=0x0022=]The early bird always appears first, and here it is.[=0x0022=][=0x000A=]Rule for writing a paragraph about the leaf: say [=0x0022=]Look, there[=0x0027=]s [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]![=0x0022=][=0x000A=]Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say [=0x0022=]Ew, [an icky item] is right next to you.[=0x0022=][=0x000A=][=0x000A=][This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the [=0x0022=]you can see...[=0x0022=] paragraph (since initial appearances only print when the object has not yet been moved).][=0x000A=][=0x000A=]The afterthought is a thing in the Priority Lab. It is latest-described.[=0x000A=][=0x000A=]The bar stool is an enterable supporter in Priority Lab.[=0x000A=][=0x000A=]Test me with [=0x0022=]get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Priority Lab&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9809_114" -->
<a id="c9809_114"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9810_114" -->
<a id="c9810_114"></a><blockquote class="code"><p class="quoted">
Before printing the locale description (this is the dump locale table rule):
<br />&#160;&#160;&#160;&#160;say &quot;Locale Priority list:&quot;;
<br />&#160;&#160;&#160;&#160;repeat through Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the flag be whether or not the notable-object entry is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]  [notable-object entry]: [locale description priority entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the flag is false, now the notable-object entry is not mentioned;
<br />&#160;&#160;&#160;&#160;say line break.
</p></blockquote>
<!-- END CODE -->
<p>Now, let's look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn't appear at all, and the default priority of an object is 1.</p>
<!-- START CODE "c9811_114" -->
<a id="c9811_114"></a><blockquote class="code"><p class="quoted">
A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9812_114" -->
<a id="c9812_114"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the apply early and late description rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through early-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 1; [list before everything else -- this would work with any number lower than 5 and higher than 0]
<br />&#160;&#160;&#160;&#160;repeat with item running through late-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [list after everything else -- this would work with any number larger than 5]
<br />&#160;&#160;&#160;&#160;repeat with item running through never-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [don't list at all]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with &quot;writing a paragraph about...&quot; or because they have initial appearances). Priorities do not affect the order in which items appear in the final &quot;You can see...&quot; list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)</p>
<p>There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.</p>
<!-- START CODE "c9813_114" -->
<a id="c9813_114"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):
<br />&#160;&#160;&#160;&#160;if the player is not on a supporter:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through sightline-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 0; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>It may also be useful to know about the &quot;parameter-object&quot;, which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case &quot;parameter-object&quot; would be the location, and then in the second the supporter in question.</p>
<p>In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:</p>
<!-- START CODE "c9814_114" -->
<a id="c9814_114"></a><blockquote class="code"><p class="quoted">
A thing can be tasteful or icky. A thing is usually tasteful.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9815_114" -->
<a id="c9815_114"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the icky things next to players rule):
<br />&#160;&#160;&#160;&#160;if the player is on the parameter-object:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through icky things :
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a notable-object of item in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 10; [remove objects that can only be seen from higher objects.]
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<p>The other thing to note is that by default that final collection of generic objects (&quot;You can also see...&quot;) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:</p>
<!-- START CODE "c9816_114" -->
<a id="c9816_114"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects (this is the latest-described items priority rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through latest-described things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is a notable-object listed in the Table of Locale Priorities:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is mentioned;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9817_114" -->
<a id="c9817_114"></a><blockquote class="code"><p class="quoted">
The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9818_114" -->
<a id="c9818_114"></a><blockquote class="code"><p class="quoted">
A thing can be marked for late listing. A thing is usually not marked for late listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9819_114" -->
<a id="c9819_114"></a><blockquote class="code"><p class="quoted">
This is the late listing rule:
<br />&#160;&#160;&#160;&#160;if something is marked for late listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Oh! And also [a list of things which are marked for late listing].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now everything is not marked for late listing;
<br />&#160;&#160;&#160;&#160;continue the activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9820_114" -->
<a id="c9820_114"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9821_114" -->
<a id="c9821_114"></a><blockquote class="code"><p class="quoted">
The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9822_114" -->
<a id="c9822_114"></a><blockquote class="code"><p class="quoted">
The early bird is early-described. The late edition is late-described. The unseen object is never-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9823_114" -->
<a id="c9823_114"></a><blockquote class="code"><p class="quoted">
The worm is icky.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9824_114" -->
<a id="c9824_114"></a><blockquote class="code"><p class="quoted">
The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is &quot;There's a tiny high window up near the ceiling that you can't see unless you're on top of something.&quot;
</p></blockquote>
<!-- END CODE -->
<p>In order for the priorities we just set to be interesting, let's give out some initial appearances and writing a paragraph rules:</p>
<!-- START CODE "c9825_114" -->
<a id="c9825_114"></a><blockquote class="code"><p class="quoted">
The initial appearance of the worm is &quot;A worm inches along the ground.&quot;
<br />The initial appearance of the late edition is &quot;Finally, the late edition lies at your feet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9826_114" -->
<a id="c9826_114"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the early bird when the early bird is in a room: say &quot;The early bird always appears first, and here it is.&quot;
<br />Rule for writing a paragraph about the leaf: say &quot;Look, there's [a leaf][unless the leaf is in the location] on [the holder of the leaf][end if]!&quot;
<br />Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say &quot;Ew, [an icky item] is right next to you.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the &quot;you can see...&quot; paragraph (since initial appearances only print when the object has not yet been moved).</p>
<!-- START CODE "c9827_114" -->
<a id="c9827_114"></a><blockquote class="code"><p class="quoted">
The afterthought is a thing in the Priority Lab. It is latest-described.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9828_114" -->
<a id="c9828_114"></a><blockquote class="code"><p class="quoted">
The bar stool is an enterable supporter in Priority Lab.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9829_114" -->
<a id="c9829_114"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "359: Low Light" "e324" -->
<a id="e324"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example324'); return false;"><b>359</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example324'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Low Light</span></b></a><br />An object that is only visible and manipulable when a bright light fixture is on.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc313.html#e324"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example324" style="display: none;">
<p>Suppose we want a different treatment of lighting than the usual: the room isn't totally dark, but there's something we can't see unless we turn on a bright light.</p>
<!-- START CODE "c9830_324" -->
<a id="c9830_324"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Low Light[=0x0022=][=0x000A=][=0x000A=][First we make our environment and its light:][=0x000A=][=0x000A=]The Workroom is a room. The desk is in the Workroom. The brilliant lamp is a device on the desk.[=0x000A=][=0x000A=]To decide whether the light level is high:[=0x000A=][=0x0009=]if the brilliant lamp is switched off, no;[=0x000A=][=0x0009=]if the player cannot see the brilliant lamp, no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=]To decide whether the light level is low:[=0x000A=][=0x0009=]if the light level is high, no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=][Now we make a shadow so that the player can only refer to it if the shadow is in inventory or the light is on:][=0x000A=][=0x000A=]The shadow is a privately-named thing on the desk.[=0x000A=][=0x000A=]Understand [=0x0022=]barely-visible[=0x0022=] or [=0x0022=]barely visible[=0x0022=] or [=0x0022=]shadow[=0x0022=] as the shadow when the light level is high. Understand [=0x0022=]invisible[=0x0022=] or [=0x0022=]shadow[=0x0022=] as the shadow when the player encloses the shadow.[=0x000A=][=0x000A=][And finally a couple of extra touches to make it clear why we[=0x0027=]re able to interact with the shadow when it[=0x0027=]s in inventory, even if the light is low:][=0x000A=][=0x000A=]Before printing the name of the shadow:[=0x000A=][=0x0009=]if the light level is high:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]barely-visible [=0x0022=];[=0x000A=][=0x0009=]otherwise if the player encloses the shadow:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]invisible (but tangible) [=0x0022=][=0x000A=][=0x000A=]After dropping the shadow when the light level is low:[=0x000A=][=0x0009=]say [=0x0022=]You let it go and it fades into the ambient gloom.[=0x0022=][=0x000A=][=0x000A=][To handle the appearance of the object, we want to set its locale priority to 0: that will prevent it being named in room descriptions.][=0x000A=][=0x000A=]After choosing notable locale objects:[=0x000A=][=0x0009=]unless the light level is high:[=0x000A=][=0x0009=][=0x0009=]set locale priority of the shadow to 0.[=0x000A=][=0x000A=]Test me with [=0x0022=]look / get shadow / turn on lamp / look / get shadow / i / turn off lamp / i / drop shadow / look / get shadow / turn on lamp / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Low Light&quot;
</p></blockquote>
<!-- END CODE -->
<p>First we make our environment and its light:</p>
<!-- START CODE "c9831_324" -->
<a id="c9831_324"></a><blockquote class="code"><p class="quoted">
The Workroom is a room. The desk is in the Workroom. The brilliant lamp is a device on the desk.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9832_324" -->
<a id="c9832_324"></a><blockquote class="code"><p class="quoted">
To decide whether the light level is high:
<br />&#160;&#160;&#160;&#160;if the brilliant lamp is switched off, no;
<br />&#160;&#160;&#160;&#160;if the player cannot see the brilliant lamp, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9833_324" -->
<a id="c9833_324"></a><blockquote class="code"><p class="quoted">
To decide whether the light level is low:
<br />&#160;&#160;&#160;&#160;if the light level is high, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<p>Now we make a shadow so that the player can only refer to it if the shadow is in inventory or the light is on:</p>
<!-- START CODE "c9834_324" -->
<a id="c9834_324"></a><blockquote class="code"><p class="quoted">
The shadow is a privately-named thing on the desk.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9835_324" -->
<a id="c9835_324"></a><blockquote class="code"><p class="quoted">
Understand &quot;barely-visible&quot; or &quot;barely visible&quot; or &quot;shadow&quot; as the shadow when the light level is high. Understand &quot;invisible&quot; or &quot;shadow&quot; as the shadow when the player encloses the shadow.
</p></blockquote>
<!-- END CODE -->
<p>And finally a couple of extra touches to make it clear why we're able to interact with the shadow when it's in inventory, even if the light is low:</p>
<!-- START CODE "c9836_324" -->
<a id="c9836_324"></a><blockquote class="code"><p class="quoted">
Before printing the name of the shadow:
<br />&#160;&#160;&#160;&#160;if the light level is high:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;barely-visible &quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the player encloses the shadow:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;invisible (but tangible) &quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9837_324" -->
<a id="c9837_324"></a><blockquote class="code"><p class="quoted">
After dropping the shadow when the light level is low:
<br />&#160;&#160;&#160;&#160;say &quot;You let it go and it fades into the ambient gloom.&quot;
</p></blockquote>
<!-- END CODE -->
<p>To handle the appearance of the object, we want to set its locale priority to 0: that will prevent it being named in room descriptions.</p>
<!-- START CODE "c9838_324" -->
<a id="c9838_324"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects:
<br />&#160;&#160;&#160;&#160;unless the light level is high:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set locale priority of the shadow to 0.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9839_324" -->
<a id="c9839_324"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / get shadow / turn on lamp / look / get shadow / i / turn off lamp / i / drop shadow / look / get shadow / turn on lamp / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "4: Slightly Wrong" "e286" -->
<a id="e286"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example286'); return false;"><b>4</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example286'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Slightly Wrong</span></b></a><br />A room whose description changes slightly after our first visit there.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc26.html#e286"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example286" style="display: none;">
<p>A fairly common effect in interactive fiction is a room which is described differently on the first visit than on subsequent visits. We can produce this effect as follows:</p>
<!-- START CODE "c9840_286" -->
<a id="c9840_286"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Slightly Wrong[=0x0022=][=0x000A=][=0x000A=]Awning is a room. [=0x0022=]A tan awning is stretched on tent poles over the dig-site, providing a little shade to the workers here; you are at the bottom of a square twenty feet on a side, marked out with pegs and lines of string. Uncovered in the south face of this square is an awkward opening into the earth.[=0x0022=][=0x000A=][=0x000A=]Slightly Wrong Chamber is south of the Awning. [=0x0022=][if unvisited]When you first step into the room, you are bothered by the sense that something is not quite right: perhaps the lighting, perhaps the angle of the walls. [end if]A mural on the far wall depicts a woman with a staff, tipped with a pine-cone. She appears to be watching you.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look / s / look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Slightly Wrong&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9841_286" -->
<a id="c9841_286"></a><blockquote class="code"><p class="quoted">
Awning is a room. &quot;A tan awning is stretched on tent poles over the dig-site, providing a little shade to the workers here; you are at the bottom of a square twenty feet on a side, marked out with pegs and lines of string. Uncovered in the south face of this square is an awkward opening into the earth.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9842_286" -->
<a id="c9842_286"></a><blockquote class="code"><p class="quoted">
Slightly Wrong Chamber is south of the Awning. &quot;[if unvisited]When you first step into the room, you are bothered by the sense that something is not quite right: perhaps the lighting, perhaps the angle of the walls. [end if]A mural on the far wall depicts a woman with a staff, tipped with a pine-cone. She appears to be watching you.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9843_286" -->
<a id="c9843_286"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / s / look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note the &quot;[if unvisited]...&quot; in the description of the Slightly Wrong Chamber. A room is considered to be &quot;unvisited&quot; until after the player has seen its description for the first time.</p>
<p>The bracketed text creates a special rule for printing; we will learn more about these in the sections on text with variations and text with substitutions.</p>
<p>Some further fine print: we might write our condition as &quot;if unvisited&quot;, &quot;if the location is unvisited&quot;, or &quot;if the Chamber is unvisited&quot; -- all of these constructions would be acceptable, but in the absence of more specifics, the condition is understood to apply to the object whose description it is.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "357: The Eye of the Idol" "e453" -->
<a id="e453"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example453'); return false;"><b>357</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example453'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Eye of the Idol</span></b></a><br />A systematic way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description, and to control whether supporters list their contents or not.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc311.html#e453"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example453" style="display: none;">
<!-- START CODE "c9844_453" -->
<a id="c9844_453"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]The Eye of the Idol[=0x0022=][=0x000A=][=0x000A=]Section 1 - Reusable Material[=0x000A=][=0x000A=][We start by defining relations that let us know where items [=0x0022=]belong[=0x0022=], with the understanding that if something is where it belongs, it will be described in the main room description and therefore should not be separately listed. Thus:][=0x000A=][=0x000A=]Positioning relates various things to various things. The verb to be placed in means the positioning relation. The verb to be placed on implies the positioning relation.[=0x000A=][=0x000A=]Room-positioning relates various things to various rooms. The verb to be room-placed in means the room-positioning relation.[=0x000A=][=0x000A=][We can[=0x0027=]t make relations relate various objects to various objects, and rooms are not things, so two separate cases are necessary. An alternative approach would be to say [=0x0022=]A thing has an object called the initial placement[=0x0022=], which would allow a thing to have an initial placement that was a room, a supporter, or a container; an advantage of using relations, though, is that that way we can if we like specify multiple placements for the same object, so that, e.g., a sparkling diamond can be described in the main description paragraph as [=0x0022=]half-buried in dust[=0x0022=] in the beginning of the game, and then at the end as [=0x0022=]in the eye of the idol[=0x0022=] at the end.][=0x000A=][=0x000A=][Now we define, based on these relations, an [=0x0022=]in-place[=0x0022=] adjective, which will identify whether something is in a location which will specially describe it:][=0x000A=][=0x000A=]Definition: a thing (called prop) is in-place:[=0x000A=][=0x0009=]if the prop is in the location and the prop is room-placed in the location, yes;[=0x000A=][=0x0009=]if the holder of the prop is a thing and the prop is placed in the holder of the prop, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]Definition: a thing is out-of-place if it is not in-place.[=0x000A=][=0x000A=][With that done, removing these items automatically from the room description is actually pretty easy:][=0x000A=][=0x000A=]Before listing nondescript items:[=0x000A=][=0x0009=]now every marked for listing in-place thing is not marked for listing.[=0x000A=][=0x000A=][One tricky case remains: when something is placed on a supporter that is scenery, it can be mentioned even if we have marked that object [=0x0022=]not marked for listing[=0x0022=]. What matters here is not whether the object itself is marked for listing but whether the supporter has been [=0x0022=]mentioned[=0x0022=]. (A fuller description of how room descriptions are assembled is available in the Looking section of the Commands chapter in the Recipe Book.) So let[=0x0027=]s also add a feature whereby we can easily suppress the descriptions of these supporters when appropriate:][=0x000A=][=0x000A=]A supporter can be quiet.[=0x000A=][=0x000A=][A quiet supporter is one that is never mentioned itself and which only mentions its contents if they are out of place. This allows for maximum flexibility in incorporating it into the body of room descriptions.][=0x000A=][=0x000A=]Rule for writing a paragraph about a quiet supporter (called chosen table):[=0x000A=][=0x0009=]if an out-of-place thing is on the chosen table:[=0x000A=][=0x0009=][=0x0009=]if an in-place thing is on the chosen table,[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]On [the chosen table], in addition to [the list of in-place things on the chosen table], [is-are a list of out-of-place things which are on the chosen table].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=]On [a chosen table] [is-are a list of out-of-place things which are on the chosen table].[=0x0022=];[=0x000A=][=0x0009=]now the chosen table is mentioned.[=0x000A=][=0x000A=][Notice that we can still override this with writing a paragraph rules about specific supporters in our game, if we decide that we want something a little different in some cases.][=0x000A=][=0x000A=][Now, an example to test this out:][=0x000A=][=0x000A=]Section 2 - A Sample Scenario[=0x000A=][=0x000A=]The Sand-Floored Chamber is a room. [=0x0022=]The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow[if the diamond is in the Sand-floored Chamber]. Something sparkling is half-buried in the corner[end if]. A doorway lies open to the north.[=0x0022=][=0x000A=][=0x000A=]The sparkling diamond is in the Sand-floored Chamber. The sparkling diamond is room-placed in the Sand-floored Chamber. The description is [=0x0022=]It is a vast diamond; the front is faceted, the back smoothed to fit in some sort of socket.[=0x0022=][=0x000A=][=0x000A=]The Hexagonal Temple is north of the Sand-Floored Chamber. [=0x0022=]The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory[if the sparkling diamond is in the idol[=0x0027=]s eye], in whose single eye a vast diamond gleams[end if][mat-and-incense text].[=0x0022=].[=0x000A=][=0x000A=]To say mat-and-incense text:[=0x000A=][=0x0009=]if the mat is in the Temple and the incense stick is on the pedestal:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]. A prayer mat at the idol[=0x0027=]s feet, and an incense stick still burning on the pedestal, indicate that someone was only recently consigning her grievances to the care of the deity[=0x0022=];[=0x000A=][=0x0009=]otherwise if the mat is in the Temple:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]. At the idol[=0x0027=]s feet, some worshipper has left a prayer mat[=0x0022=];[=0x000A=][=0x0009=]otherwise if the incense stick is on the pedestal:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]. At the idol[=0x0027=]s side is a pedestal, on which incense still smolders[=0x0022=].[=0x000A=][=0x000A=][We could have done all this with text conditions in the main room description, but it becomes difficult to read when there are too many conditions operating in the same text property, so we break it out into a clearer set of conditions.][=0x000A=][=0x000A=]The idol is scenery in the Hexagonal Temple. Understand [=0x0022=]sculpture[=0x0022=] or [=0x0022=]stone[=0x0022=] or [=0x0022=]ivory[=0x0022=] as the idol. The description is [=0x0022=]The idol is perhaps three times the height of an ordinary man.[=0x0022=][=0x000A=][=0x000A=]The idol[=0x0027=]s eye is part of the idol. It is a container. The description is [=0x0022=][if the diamond is in the idol[=0x0027=]s eye]It gleams with purpose and righteous wrath[otherwise]A round socket in the center of the idol[=0x0027=]s forehead from which something seems to be missing[end if].[=0x0022=][=0x000A=][=0x000A=]The pedestal is a quiet supporter in the Hexagonal Temple. On the pedestal is an incense stick. The incense stick is placed on the pedestal.[=0x000A=][=0x000A=]A mat is in the Hexagonal Temple. It is room-placed in the Hexagonal Temple. The description is [=0x0022=]Woven of assorted grasses.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]get diamond / look / n / get mat / look / drop diamond / look / get diamond / put diamond in eye / look / get incense / look / drop mat / look / get mat / put mat on pedestal / look / put incense on pedestal / look[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;The Eye of the Idol&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9845_453" -->
<a id="c9845_453"></a><blockquote class="code"><p class="quoted">
Section 1 - Reusable Material
</p></blockquote>
<!-- END CODE -->
<p>We start by defining relations that let us know where items &quot;belong&quot;, with the understanding that if something is where it belongs, it will be described in the main room description and therefore should not be separately listed. Thus:</p>
<!-- START CODE "c9846_453" -->
<a id="c9846_453"></a><blockquote class="code"><p class="quoted">
Positioning relates various things to various things. The verb to be placed in means the positioning relation. The verb to be placed on implies the positioning relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9847_453" -->
<a id="c9847_453"></a><blockquote class="code"><p class="quoted">
Room-positioning relates various things to various rooms. The verb to be room-placed in means the room-positioning relation.
</p></blockquote>
<!-- END CODE -->
<p>We can't make relations relate various objects to various objects, and rooms are not things, so two separate cases are necessary. An alternative approach would be to say &quot;A thing has an object called the initial placement&quot;, which would allow a thing to have an initial placement that was a room, a supporter, or a container; an advantage of using relations, though, is that that way we can if we like specify multiple placements for the same object, so that, e.g., a sparkling diamond can be described in the main description paragraph as &quot;half-buried in dust&quot; in the beginning of the game, and then at the end as &quot;in the eye of the idol&quot; at the end.</p>
<p>Now we define, based on these relations, an &quot;in-place&quot; adjective, which will identify whether something is in a location which will specially describe it:</p>
<!-- START CODE "c9848_453" -->
<a id="c9848_453"></a><blockquote class="code"><p class="quoted">
Definition: a thing (called prop) is in-place:
<br />&#160;&#160;&#160;&#160;if the prop is in the location and the prop is room-placed in the location, yes;
<br />&#160;&#160;&#160;&#160;if the holder of the prop is a thing and the prop is placed in the holder of the prop, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9849_453" -->
<a id="c9849_453"></a><blockquote class="code"><p class="quoted">
Definition: a thing is out-of-place if it is not in-place.
</p></blockquote>
<!-- END CODE -->
<p>With that done, removing these items automatically from the room description is actually pretty easy:</p>
<!-- START CODE "c9850_453" -->
<a id="c9850_453"></a><blockquote class="code"><p class="quoted">
Before listing nondescript items:
<br />&#160;&#160;&#160;&#160;now every marked for listing in-place thing is not marked for listing.
</p></blockquote>
<!-- END CODE -->
<p>One tricky case remains: when something is placed on a supporter that is scenery, it can be mentioned even if we have marked that object &quot;not marked for listing&quot;. What matters here is not whether the object itself is marked for listing but whether the supporter has been &quot;mentioned&quot;. (A fuller description of how room descriptions are assembled is available in the Looking section of the Commands chapter in the Recipe Book.) So let's also add a feature whereby we can easily suppress the descriptions of these supporters when appropriate:</p>
<!-- START CODE "c9851_453" -->
<a id="c9851_453"></a><blockquote class="code"><p class="quoted">
A supporter can be quiet.
</p></blockquote>
<!-- END CODE -->
<p>A quiet supporter is one that is never mentioned itself and which only mentions its contents if they are out of place. This allows for maximum flexibility in incorporating it into the body of room descriptions.</p>
<!-- START CODE "c9852_453" -->
<a id="c9852_453"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about a quiet supporter (called chosen table):
<br />&#160;&#160;&#160;&#160;if an out-of-place thing is on the chosen table:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if an in-place thing is on the chosen table,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;On [the chosen table], in addition to [the list of in-place things on the chosen table], [is-are a list of out-of-place things which are on the chosen table].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;On [a chosen table] [is-are a list of out-of-place things which are on the chosen table].&quot;;
<br />&#160;&#160;&#160;&#160;now the chosen table is mentioned.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we can still override this with writing a paragraph rules about specific supporters in our game, if we decide that we want something a little different in some cases.</p>
<p>Now, an example to test this out:</p>
<!-- START CODE "c9853_453" -->
<a id="c9853_453"></a><blockquote class="code"><p class="quoted">
Section 2 - A Sample Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9854_453" -->
<a id="c9854_453"></a><blockquote class="code"><p class="quoted">
The Sand-Floored Chamber is a room. &quot;The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow[if the diamond is in the Sand-floored Chamber]. Something sparkling is half-buried in the corner[end if]. A doorway lies open to the north.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9855_453" -->
<a id="c9855_453"></a><blockquote class="code"><p class="quoted">
The sparkling diamond is in the Sand-floored Chamber. The sparkling diamond is room-placed in the Sand-floored Chamber. The description is &quot;It is a vast diamond; the front is faceted, the back smoothed to fit in some sort of socket.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9856_453" -->
<a id="c9856_453"></a><blockquote class="code"><p class="quoted">
The Hexagonal Temple is north of the Sand-Floored Chamber. &quot;The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory[if the sparkling diamond is in the idol's eye], in whose single eye a vast diamond gleams[end if][mat-and-incense text].&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9857_453" -->
<a id="c9857_453"></a><blockquote class="code"><p class="quoted">
To say mat-and-incense text:
<br />&#160;&#160;&#160;&#160;if the mat is in the Temple and the incense stick is on the pedestal:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;. A prayer mat at the idol's feet, and an incense stick still burning on the pedestal, indicate that someone was only recently consigning her grievances to the care of the deity&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the mat is in the Temple:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;. At the idol's feet, some worshipper has left a prayer mat&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the incense stick is on the pedestal:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;. At the idol's side is a pedestal, on which incense still smolders&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We could have done all this with text conditions in the main room description, but it becomes difficult to read when there are too many conditions operating in the same text property, so we break it out into a clearer set of conditions.</p>
<!-- START CODE "c9858_453" -->
<a id="c9858_453"></a><blockquote class="code"><p class="quoted">
The idol is scenery in the Hexagonal Temple. Understand &quot;sculpture&quot; or &quot;stone&quot; or &quot;ivory&quot; as the idol. The description is &quot;The idol is perhaps three times the height of an ordinary man.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9859_453" -->
<a id="c9859_453"></a><blockquote class="code"><p class="quoted">
The idol's eye is part of the idol. It is a container. The description is &quot;[if the diamond is in the idol's eye]It gleams with purpose and righteous wrath[otherwise]A round socket in the center of the idol's forehead from which something seems to be missing[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9860_453" -->
<a id="c9860_453"></a><blockquote class="code"><p class="quoted">
The pedestal is a quiet supporter in the Hexagonal Temple. On the pedestal is an incense stick. The incense stick is placed on the pedestal.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9861_453" -->
<a id="c9861_453"></a><blockquote class="code"><p class="quoted">
A mat is in the Hexagonal Temple. It is room-placed in the Hexagonal Temple. The description is &quot;Woven of assorted grasses.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9862_453" -->
<a id="c9862_453"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get diamond / look / n / get mat / look / drop diamond / look / get diamond / put diamond in eye / look / get incense / look / drop mat / look / get mat / put mat on pedestal / look / put incense on pedestal / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "362: Copper River" "e101" -->
<a id="e101"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example101'); return false;"><b>362</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example101'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Copper River</span></b></a><br />Manipulating room descriptions so that only interesting items are mentioned, while objects that are present but not currently useful to the player are ignored.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc314.html#e101"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example101" style="display: none;">
<p>In a very dense environment, we might want to offer the player room descriptions in which only the currently-interesting items are mentioned, while other objects are suppressed even if they are present. In effect, this takes the idea of scenery and makes it more flexible: different things might become background objects or foreground objects at different times during play.</p>
<p>There are a wide range of possible reasons to do this -- to shift the narrative emphasis, to change the mood of the game by highlighting different parts of the environment, to show the game from the perspective of different viewpoint characters -- but in the following example, our goal is to show the player only the objects that are currently useful for puzzles.</p>
<p>To do this, we need some notion of what puzzles are currently available and unsolved, so we make an &quot;unsolved&quot; adjective; we also need to know which things solve the puzzle, so we create a &quot;resolving&quot; relation, to indicate which objects resolve which problems.</p>
<p>Given that information, we can create rules about which objects in the game world are currently interesting, which are currently dull, and describe accordingly:</p>
<!-- START CODE "c9863_101" -->
<a id="c9863_101"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Copper River[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Resolving relates various things to various things. The verb to resolve means the resolving relation.[=0x000A=][=0x000A=]Definition: a thing is interesting if it is not dull.[=0x000A=][=0x000A=]Definition: a person is dull:[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]Definition: a thing is dull:[=0x000A=][=0x0009=]if it is unsolved, no;[=0x000A=][=0x0009=]if it resolves an unsolved thing, no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=]Definition: a supporter is dull:[=0x000A=][=0x0009=]if it is unsolved, no;[=0x000A=][=0x0009=]if it resolves an unsolved thing, no;[=0x000A=][=0x0009=]if it supports an interesting thing, no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=]Definition: a container is dull:[=0x000A=][=0x0009=]if it is unsolved, no;[=0x000A=][=0x0009=]if it resolves an unsolved thing, no;[=0x000A=][=0x0009=]if it contains an interesting thing, no;[=0x000A=][=0x0009=]yes.[=0x000A=][=0x000A=]After choosing notable locale objects:[=0x000A=][=0x0009=]repeat with item running through unsolved things:[=0x000A=][=0x0009=][=0x0009=]set the locale priority of the item to 1.[=0x000A=][=0x000A=]For printing a locale paragraph about a dull thing (called item):[=0x000A=][=0x0009=]now the item is mentioned.[=0x000A=][=0x000A=]Before printing a locale paragraph about a supporter (called item):[=0x000A=][=0x0009=]now every dull thing on the item is mentioned.[=0x000A=][=0x000A=]Before printing a locale paragraph about a container (called item):[=0x000A=][=0x0009=]now every dull thing on the item is mentioned.[=0x000A=][=0x000A=]Instead of searching a supporter:[=0x000A=][=0x0009=]if the noun supports something interesting:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][A list of interesting things on the noun] [are] on [the noun][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the noun supports something dull:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=] (alongside [a list of dull things on the noun])[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=].[=0x0022=];[=0x000A=][=0x0009=]otherwise if the noun supports something dull:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]There[=0x0027=]s nothing very useful here, only [a list of dull things on the noun].[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun] [are] completely bare.[=0x0022=][=0x000A=][=0x000A=]Instead of searching a container:[=0x000A=][=0x0009=]if the noun contains something interesting:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][A list of interesting things in the noun] [are] in [the noun][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if the noun contains something dull:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=] (alongside [a list of dull things in the noun])[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=].[=0x0022=];[=0x000A=][=0x0009=]otherwise if the noun contains something dull:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]There[=0x0027=]s nothing very useful here, only [a list of dull things in the noun].[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun] [are] completely empty.[=0x0022=][=0x000A=][=0x000A=]Before listing contents when not taking inventory: group dull things together.[=0x000A=][=0x000A=]Rule for grouping together dull things: say [=0x0022=]assorted dull items[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]Section 2 - Scenario World and Objects[=0x000A=][=0x000A=]The Kitchen is a room. [=0x0022=]Your Aunt Fiona[=0x0027=]s kitchen looks as though it has been at the eye of a glitter storm. Fine, sparkling grit dusts every surface. The appliances are slightly askew, too, as though they hadn[=0x0027=]t quite settled after a vigorous earthquake.[=0x0022=][=0x000A=][=0x000A=]The shelf is a scenery supporter in the Kitchen. On the shelf is a can of beans, a can of potato leek soup, and a tin of deflating powder.[=0x000A=][=0x000A=]The cabinet is a scenery container in the Kitchen. In the cabinet is a book of matches, a bottle of descaling solution, a fish hook, and a rusty knife. It is openable and closed.[=0x000A=][=0x000A=]The counter is a scenery supporter in the Kitchen. On the counter is an espresso machine, a blender, and a mortar. The blender and the mortar are containers. In the mortar is a pestle. Understand [=0x0022=]countertop[=0x0022=] as the counter.[=0x000A=][=0x000A=]The stove is a scenery supporter in the Kitchen. The oven is part of the stove. The oven is a closed openable container.[=0x000A=][=0x000A=]The refrigerator is a fixed in place container in the Kitchen.[=0x000A=][=0x0009=]Understand [=0x0022=]fridge[=0x0022=] as the refrigerator.[=0x000A=][=0x0009=]The description is [=0x0022=]The refrigerator is a dull blue-green, and has a puffy, marshmallow texture on the outside, which means that it[=0x0027=]s no good for sticking magnets to. Aunt Fiona has never been willing to explain where she got it.[=0x0022=] The refrigerator is openable and closed.[=0x000A=][=0x000A=]In the refrigerator are a bottle of ice wine, a bag of carrot sticks, and an egg.[=0x000A=][=0x000A=]Aunt Fiona is a woman in the Kitchen. Aunt Fiona can be inflated or deflated. Aunt Fiona is inflated. [=0x0022=][if Aunt Fiona is inflated]Aunt Fiona stands nearby. Or perhaps [=0x0027=]stands[=0x0027=] is the wrong word: she has been sort of puffed up in her own skin like a balloon, and is now propped in a corner of the room with her head lolling back[otherwise]Aunt Fiona stands -- on her own two slender legs -- at the center of the room[end if].[=0x0022=][=0x000A=][=0x000A=]Every turn when Fiona is unsolved and Fiona can see the player:[=0x000A=][=0x0009=]if a random chance of 1 in 3 succeeds:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][one of]Aunt Fiona[=0x0027=]s eyes follow you, wide and desperate, but it doesn[=0x0027=]t look like she[=0x0027=]s able to do anything[or]Aunt Fiona is still looking reproachful[or]A faint gurgling comes from Aunt Fiona[or]Aunt Fiona makes a funny croak noise[or]Aunt Fiona is still having trouble speaking. Perhaps her throat is as swollen as the rest of her[or]Aunt Fiona twitches[stopping].[=0x0022=][=0x000A=][=0x000A=]There is a thing called a salmon. Understand [=0x0022=]fish[=0x0022=] as the salmon. The salmon can be scaly or prepared. The salmon is scaly. The description is [=0x0022=][if scaly]It looks delicious, but is still covered with scales[otherwise]The salmon has been scaled and is ready to eat[end if].[=0x0022=][=0x000A=][=0x000A=]Before printing the name of the salmon when the salmon is scaly:[=0x000A=][=0x0009=]say [=0x0022=]very scaly [=0x0022=].[=0x000A=][=0x000A=]Section 3 - Scenario Puzzles[=0x000A=][=0x000A=]Definition: Aunt Fiona is unsolved if she is inflated.[=0x000A=]Definition: the salmon is unsolved:[=0x000A=][=0x0009=]if the salmon is off-stage, no;[=0x000A=][=0x0009=]if the salmon is scaly, yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]The deflating powder resolves Aunt Fiona.[=0x000A=][=0x000A=]Instead of putting the deflating powder on Aunt Fiona:[=0x000A=][=0x0009=]try throwing the deflating powder at Aunt Fiona.[=0x000A=]Instead of giving the deflating powder to Aunt Fiona:[=0x000A=][=0x0009=]try throwing the deflating powder at Aunt Fiona.[=0x000A=][=0x000A=]Instead of throwing the deflating powder at Aunt Fiona:[=0x000A=][=0x0009=]if Aunt Fiona is inflated:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You toss some of the powder in Aunt Fiona[=0x0027=]s direction, and with a sudden gaseous HUFF! she returns to her usual shape and size. [paragraph break][=0x0027=]Well![=0x0027=] she says, brushing herself off. [=0x0027=]That was bracing![=0x0027=] [paragraph break]You give her an embarrassed smile, to apologize for not curing her faster.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now Aunt Fiona is deflated;[=0x000A=][=0x0009=][=0x0009=]increase the score by 2;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][one of]You throw another hefty dose of the powder at your aunt. [paragraph break][=0x0027=]Thank you, child,[=0x0027=] she says, sneezing. [=0x0027=]But I think you[=0x0027=]ve done enough now.[=0x0027=][or]You throw another hefty dose of the powder at your aunt. [paragraph break][=0x0027=]You[=0x0027=]re too kind,[=0x0027=] she wheezes, through a cloud of glittering dust.[or]You[=0x0027=]ve probably done enough with the powder.[stopping][=0x0022=].[=0x000A=][=0x000A=]Every turn when Aunt Fiona is deflated and the salmon is off-stage:[=0x000A=][=0x0009=]move the salmon to the counter;[=0x000A=][=0x0009=]say [=0x0022=][=0x0027=]At least they didn[=0x0027=]t get this,[=0x0027=] she says, producing from somewhere on her person a fresh-caught salmon. An odd pattern around its eye sockets makes it looks comically as though it wears spectacles. [=0x0027=]It[=0x0027=]s the Salmon of Knowledge,[=0x0027=] she explains casually. [=0x0027=]We just need to scale and cook it.[=0x0027=][=0x0022=][=0x000A=][=0x000A=]The bottle of descaling solution resolves the salmon.[=0x000A=][=0x000A=]Does the player mean putting the descaling solution on the fish hook: it is unlikely.[=0x000A=]Does the player mean putting the descaling solution on the salmon: it is very likely.[=0x000A=][=0x000A=]Instead of putting the bottle of descaling solution on the salmon:[=0x000A=][=0x0009=]if the salmon is scaly:[=0x000A=][=0x0009=][=0x0009=]now the salmon is prepared;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]With just a single squirt of the descaling solution (which confusingly has a picture of bathroom tiles on the label), you remove the scales from the salmon, leaving its pink flesh ready for preparation.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]increase the score by 2;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][=0x0027=]Don[=0x0027=]t do that,[=0x0027=] Aunt Fiona warns you. [=0x0027=]Excessive applications could damage the flesh.[=0x0027=][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look / get powder / drop powder / look / look in cabinet / get powder / put powder on fiona / look / open cabinet / look in cabinet / get solution / open fridge / put solution in fridge / look / get solution / put solution on salmon / look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Copper River&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9864_101" -->
<a id="c9864_101"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9865_101" -->
<a id="c9865_101"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9866_101" -->
<a id="c9866_101"></a><blockquote class="code"><p class="quoted">
Resolving relates various things to various things. The verb to resolve means the resolving relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9867_101" -->
<a id="c9867_101"></a><blockquote class="code"><p class="quoted">
Definition: a thing is interesting if it is not dull.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9868_101" -->
<a id="c9868_101"></a><blockquote class="code"><p class="quoted">
Definition: a person is dull:
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9869_101" -->
<a id="c9869_101"></a><blockquote class="code"><p class="quoted">
Definition: a thing is dull:
<br />&#160;&#160;&#160;&#160;if it is unsolved, no;
<br />&#160;&#160;&#160;&#160;if it resolves an unsolved thing, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9870_101" -->
<a id="c9870_101"></a><blockquote class="code"><p class="quoted">
Definition: a supporter is dull:
<br />&#160;&#160;&#160;&#160;if it is unsolved, no;
<br />&#160;&#160;&#160;&#160;if it resolves an unsolved thing, no;
<br />&#160;&#160;&#160;&#160;if it supports an interesting thing, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9871_101" -->
<a id="c9871_101"></a><blockquote class="code"><p class="quoted">
Definition: a container is dull:
<br />&#160;&#160;&#160;&#160;if it is unsolved, no;
<br />&#160;&#160;&#160;&#160;if it resolves an unsolved thing, no;
<br />&#160;&#160;&#160;&#160;if it contains an interesting thing, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9872_101" -->
<a id="c9872_101"></a><blockquote class="code"><p class="quoted">
After choosing notable locale objects:
<br />&#160;&#160;&#160;&#160;repeat with item running through unsolved things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set the locale priority of the item to 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9873_101" -->
<a id="c9873_101"></a><blockquote class="code"><p class="quoted">
For printing a locale paragraph about a dull thing (called item):
<br />&#160;&#160;&#160;&#160;now the item is mentioned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9874_101" -->
<a id="c9874_101"></a><blockquote class="code"><p class="quoted">
Before printing a locale paragraph about a supporter (called item):
<br />&#160;&#160;&#160;&#160;now every dull thing on the item is mentioned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9875_101" -->
<a id="c9875_101"></a><blockquote class="code"><p class="quoted">
Before printing a locale paragraph about a container (called item):
<br />&#160;&#160;&#160;&#160;now every dull thing on the item is mentioned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9876_101" -->
<a id="c9876_101"></a><blockquote class="code"><p class="quoted">
Instead of searching a supporter:
<br />&#160;&#160;&#160;&#160;if the noun supports something interesting:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[A list of interesting things on the noun] [are] on [the noun]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun supports something dull:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (alongside [a list of dull things on the noun])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the noun supports something dull:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;There's nothing very useful here, only [a list of dull things on the noun].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] [are] completely bare.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9877_101" -->
<a id="c9877_101"></a><blockquote class="code"><p class="quoted">
Instead of searching a container:
<br />&#160;&#160;&#160;&#160;if the noun contains something interesting:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[A list of interesting things in the noun] [are] in [the noun]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun contains something dull:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (alongside [a list of dull things in the noun])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the noun contains something dull:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;There's nothing very useful here, only [a list of dull things in the noun].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] [are] completely empty.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9878_101" -->
<a id="c9878_101"></a><blockquote class="code"><p class="quoted">
Before listing contents when not taking inventory: group dull things together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9879_101" -->
<a id="c9879_101"></a><blockquote class="code"><p class="quoted">
Rule for grouping together dull things: say &quot;assorted dull items&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9880_101" -->
<a id="c9880_101"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario World and Objects
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9881_101" -->
<a id="c9881_101"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. &quot;Your Aunt Fiona's kitchen looks as though it has been at the eye of a glitter storm. Fine, sparkling grit dusts every surface. The appliances are slightly askew, too, as though they hadn't quite settled after a vigorous earthquake.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9882_101" -->
<a id="c9882_101"></a><blockquote class="code"><p class="quoted">
The shelf is a scenery supporter in the Kitchen. On the shelf is a can of beans, a can of potato leek soup, and a tin of deflating powder.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9883_101" -->
<a id="c9883_101"></a><blockquote class="code"><p class="quoted">
The cabinet is a scenery container in the Kitchen. In the cabinet is a book of matches, a bottle of descaling solution, a fish hook, and a rusty knife. It is openable and closed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9884_101" -->
<a id="c9884_101"></a><blockquote class="code"><p class="quoted">
The counter is a scenery supporter in the Kitchen. On the counter is an espresso machine, a blender, and a mortar. The blender and the mortar are containers. In the mortar is a pestle. Understand &quot;countertop&quot; as the counter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9885_101" -->
<a id="c9885_101"></a><blockquote class="code"><p class="quoted">
The stove is a scenery supporter in the Kitchen. The oven is part of the stove. The oven is a closed openable container.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9886_101" -->
<a id="c9886_101"></a><blockquote class="code"><p class="quoted">
The refrigerator is a fixed in place container in the Kitchen.
<br />&#160;&#160;&#160;&#160;Understand &quot;fridge&quot; as the refrigerator.
<br />&#160;&#160;&#160;&#160;The description is &quot;The refrigerator is a dull blue-green, and has a puffy, marshmallow texture on the outside, which means that it's no good for sticking magnets to. Aunt Fiona has never been willing to explain where she got it.&quot; The refrigerator is openable and closed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9887_101" -->
<a id="c9887_101"></a><blockquote class="code"><p class="quoted">
In the refrigerator are a bottle of ice wine, a bag of carrot sticks, and an egg.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9888_101" -->
<a id="c9888_101"></a><blockquote class="code"><p class="quoted">
Aunt Fiona is a woman in the Kitchen. Aunt Fiona can be inflated or deflated. Aunt Fiona is inflated. &quot;[if Aunt Fiona is inflated]Aunt Fiona stands nearby. Or perhaps 'stands' is the wrong word: she has been sort of puffed up in her own skin like a balloon, and is now propped in a corner of the room with her head lolling back[otherwise]Aunt Fiona stands -- on her own two slender legs -- at the center of the room[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9889_101" -->
<a id="c9889_101"></a><blockquote class="code"><p class="quoted">
Every turn when Fiona is unsolved and Fiona can see the player:
<br />&#160;&#160;&#160;&#160;if a random chance of 1 in 3 succeeds:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[one of]Aunt Fiona's eyes follow you, wide and desperate, but it doesn't look like she's able to do anything[or]Aunt Fiona is still looking reproachful[or]A faint gurgling comes from Aunt Fiona[or]Aunt Fiona makes a funny croak noise[or]Aunt Fiona is still having trouble speaking. Perhaps her throat is as swollen as the rest of her[or]Aunt Fiona twitches[stopping].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9890_101" -->
<a id="c9890_101"></a><blockquote class="code"><p class="quoted">
There is a thing called a salmon. Understand &quot;fish&quot; as the salmon. The salmon can be scaly or prepared. The salmon is scaly. The description is &quot;[if scaly]It looks delicious, but is still covered with scales[otherwise]The salmon has been scaled and is ready to eat[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9891_101" -->
<a id="c9891_101"></a><blockquote class="code"><p class="quoted">
Before printing the name of the salmon when the salmon is scaly:
<br />&#160;&#160;&#160;&#160;say &quot;very scaly &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9892_101" -->
<a id="c9892_101"></a><blockquote class="code"><p class="quoted">
Section 3 - Scenario Puzzles
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9893_101" -->
<a id="c9893_101"></a><blockquote class="code"><p class="quoted">
Definition: Aunt Fiona is unsolved if she is inflated.
<br />Definition: the salmon is unsolved:
<br />&#160;&#160;&#160;&#160;if the salmon is off-stage, no;
<br />&#160;&#160;&#160;&#160;if the salmon is scaly, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9894_101" -->
<a id="c9894_101"></a><blockquote class="code"><p class="quoted">
The deflating powder resolves Aunt Fiona.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9895_101" -->
<a id="c9895_101"></a><blockquote class="code"><p class="quoted">
Instead of putting the deflating powder on Aunt Fiona:
<br />&#160;&#160;&#160;&#160;try throwing the deflating powder at Aunt Fiona.
<br />Instead of giving the deflating powder to Aunt Fiona:
<br />&#160;&#160;&#160;&#160;try throwing the deflating powder at Aunt Fiona.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9896_101" -->
<a id="c9896_101"></a><blockquote class="code"><p class="quoted">
Instead of throwing the deflating powder at Aunt Fiona:
<br />&#160;&#160;&#160;&#160;if Aunt Fiona is inflated:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You toss some of the powder in Aunt Fiona's direction, and with a sudden gaseous HUFF! she returns to her usual shape and size. [paragraph break]'Well!' she says, brushing herself off. 'That was bracing!' [paragraph break]You give her an embarrassed smile, to apologize for not curing her faster.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now Aunt Fiona is deflated;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase the score by 2;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[one of]You throw another hefty dose of the powder at your aunt. [paragraph break]'Thank you, child,' she says, sneezing. 'But I think you've done enough now.'[or]You throw another hefty dose of the powder at your aunt. [paragraph break]'You're too kind,' she wheezes, through a cloud of glittering dust.[or]You've probably done enough with the powder.[stopping]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9897_101" -->
<a id="c9897_101"></a><blockquote class="code"><p class="quoted">
Every turn when Aunt Fiona is deflated and the salmon is off-stage:
<br />&#160;&#160;&#160;&#160;move the salmon to the counter;
<br />&#160;&#160;&#160;&#160;say &quot;'At least they didn't get this,' she says, producing from somewhere on her person a fresh-caught salmon. An odd pattern around its eye sockets makes it looks comically as though it wears spectacles. 'It's the Salmon of Knowledge,' she explains casually. 'We just need to scale and cook it.'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9898_101" -->
<a id="c9898_101"></a><blockquote class="code"><p class="quoted">
The bottle of descaling solution resolves the salmon.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9899_101" -->
<a id="c9899_101"></a><blockquote class="code"><p class="quoted">
Does the player mean putting the descaling solution on the fish hook: it is unlikely.
<br />Does the player mean putting the descaling solution on the salmon: it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9900_101" -->
<a id="c9900_101"></a><blockquote class="code"><p class="quoted">
Instead of putting the bottle of descaling solution on the salmon:
<br />&#160;&#160;&#160;&#160;if the salmon is scaly:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the salmon is prepared;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;With just a single squirt of the descaling solution (which confusingly has a picture of bathroom tiles on the label), you remove the scales from the salmon, leaving its pink flesh ready for preparation.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase the score by 2;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;'Don't do that,' Aunt Fiona warns you. 'Excessive applications could damage the flesh.'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9901_101" -->
<a id="c9901_101"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / get powder / drop powder / look / look in cabinet / get powder / put powder on fiona / look / open cabinet / look in cabinet / get solution / open fridge / put solution in fridge / look / get solution / put solution on salmon / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc7.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc9.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
