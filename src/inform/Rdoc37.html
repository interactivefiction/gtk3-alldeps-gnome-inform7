<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>6.9. Going, Pushing Things in Directions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Going, Pushing Things in Directions" -->
<!-- SEARCH SECTION "6.9" -->
<!-- SEARCH SORT "001-006-009-000" -->
<!-- START IGNORE 36 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc36.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 6: Commands</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc38.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง6.9. Going, Pushing Things in Directions</p>
<p>Going is the most complex of actions after looking (or perhaps including looking): the success of every movement depends on the direction the player goes; the room he starts from; the room he intends to reach; whether there are any doors intervening (and, if so, whether these are closed or locked); whether he is traveling by vehicle; and whether he is pushing anything in front of him. When he gets there, the description he sees is itself generated by a looking command.</p>
<p>Pushing something in a direction is really a sort of going. The command &gt;PUSH WHEELBARROW WEST first checks certain qualifying rules: by default, only things defined as pushable between rooms may be pushed, and they may be pushed only in horizontal directions (not UP or DOWN) -- though these rules can be overridden, as we see in <span class="boldface">Zorb</span>. If the player's pushing attempt passes these criteria, the action is translated automatically into a going action, with all the usual checks about whether that direction leads anywhere, whether a door is in the way, and so on. The converted action afterward can be caught with such rules as</p>
<!-- START CODE "c11678" -->
<a id="c11678"></a><blockquote class="code"><p class="quoted">
Instead of going to the Alpine Meadow with the wheelbarrow:
<br />&#160;&#160;&#160;&#160;say &quot;You don't want to crush the delicate blooms.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11679" -->
<a id="c11679"></a><blockquote class="code"><p class="quoted">
Instead of going north with the handcart:
<br />&#160;&#160;&#160;&#160;say &quot;The headwind is so stiff that you are unable to make much northerly progress at all while encumbered by the handcart.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Since the two actions are internally being handled as one, both are discussed here.</p>
<p>It is very common for players to make a mistake and type the wrong direction command, or even to misunderstand the room description and not recognize all the possible exits. <span class="boldface">Bumping into Walls</span> helpfully adds a facility so that when the player tries to go in the wrong direction, the story lists the correct possibilities, as in</p>
<!-- START CODE "c11680" -->
<a id="c11680"></a><blockquote class="code"><p class="quoted">
From here, the viable exits are to the south, the east and the west.
</p></blockquote>
<!-- END CODE -->
<p>Assuming that travel succeeds, another useful technique is to provide some sense of the journey between locations, especially if they are remote from one another or the player has to do something unusual to get from one to the other. <span class="boldface">Up and Up</span> adds a short description of travel when we approach a new room, before the room description is printed; <span class="boldface">Veronica</span>, conversely, adds a comment when the player leaves a region of the map. <span class="boldface">The Second Oldest Problem</span> intervenes and kills a player who tries to travel from one dark room to another. <span class="boldface">Mattress King</span> embellishes the description that automatically results from PUSH MATTRESS WEST, adding a line that describes the player pushing the object before describing the new room approached.</p>
<p>We may also want to add a brief comment when we arrive in a new room, after the room description is printed. One trivial way to do this is to append the line to the room's main description, conditionally, like this:</p>
<!-- START CODE "c11681" -->
<a id="c11681"></a><blockquote class="code"><p class="quoted">
The Hammock Emporium is a room. &quot;This is Cousin Ed's shop, the big dream he left accounting to pursue. You can't help gawking at the Luxury Leather Space Hammock, made of genuine red buffalo skins[if unvisited]. [paragraph break]So this is why Grampa makes all those 'lying down on the job' jokes every Thanksgiving[end if].&quot;.
</p></blockquote>
<!-- END CODE -->
<p>But often we want our first-glance comment to come after some items in the room are described; and for this effect, we would use the &quot;first look rule&quot; defined in <span class="boldface">Saint Eligius</span>.</p>
<p>If these methods are not enough, the looking action has an action-specific variable called &quot;the room-describing action&quot;, which records whether this particular instance of looking comes about because the player typed LOOK or because the player traveled to a new location. We can consult this variable if we want to make looking work  differently after going, as for instance here:</p>
<!-- START CODE "c11682" -->
<a id="c11682"></a><blockquote class="code"><p class="quoted">
Check looking when the room-describing action is the going action:
<br />&#160;&#160;&#160;&#160;say &quot;You are temporarily too blinded to see.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Another category of examples treat how we handle the movement commands themselves. The eight compass directions, with UP and DOWN, IN and OUT, are used as standard in most interactive fiction, but they are not the only possible way of navigating, and strike many newcomers to the genre as counter-intuitive, since when strolling around in real life most of us rarely think about our travel in terms of compass orientation. <span class="boldface">Misadventure</span> allows the player to GO TO a named room, instead, and calculates the best route to reach the destination; <span class="boldface">Safari Guide</span> builds on this by letting the player make the whole trip in a single move, automatically opening any doors that stand in his way en route.</p>
<p>In the same spirit of interpreting the player's intentions sensibly, <span class="boldface">Provenance Unknown</span> modifies the pushing command so that if the player pushes the top object in a stack of objects towards a direction, Inform attempts to move the bottom item instead. This is convenient if, for instance, we have a heavy television on a movable cart and want PUSH TELEVISION WEST to work just as well as PUSH CART WEST.</p>
<p>We also sometimes want to respond sensibly to terse movement commands or ones that rely on some knowledge of where the player has already been. <span class="boldface">Polarity</span> provides a GO BACK command, allowing the player to retreat in the direction from which he came, while <span class="boldface">Minimal Movement</span> understands LEAVE, GO, and so on as OUT, in the absence of other information. <span class="boldface">Owen's Law</span> takes this further, calculating from the best routes on a map how to make OUT mean &quot;move towards the exit of this indoor room&quot;, and IN mean &quot;proceed further into the interior&quot;. <span class="boldface">Wonderland</span> assigns altitudes to all rooms and works out the local best meaning of UP and DOWN accordingly.</p>
<p class="crossreference"><a href="Rdoc9.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Map</b></a><i> for how to create other kinds of new direction</i></p><p class="crossreference"><a href="Rdoc6.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Varying What Is Read</b></a><i> for further divisions of the standard compass, such as north-northwest</i></p><p class="crossreference"><a href="Rdoc64.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Ships, Trains and Elevators</b></a><i> for ship-board directions</i></p><p class="crossreference"><a href="Rdoc63.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Bicycles, Cars and Boats</b></a><i> for common vehicles in which to travel the map</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "100: Veronica" "e168" -->
<a id="e168"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example168'); return false;"><b>100</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example168'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Veronica</span></b></a><br />An effect that occurs only when the player leaves a region entirely.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc110.html#e168"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example168" style="display: none;">
<p>Suppose that we want to have something happen when the player leaves a region we've defined. &quot;Instead of going from (the region)...&quot; will not suffice for this, because this rule will be invoked every time the player successfully leaves a room within the region, whether or not he is going to a room that is also in the same region.</p>
<p>Instead we need a rule that is a bit more specific, like this:</p>
<!-- START CODE "c11683_168" -->
<a id="c11683_168"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Veronica[=0x0022=][=0x000A=][=0x000A=]Neptune is a region.[=0x000A=][=0x000A=]Tijuana is a room.[=0x000A=][=0x000A=]High School is north of Tijuana. It is in Neptune.[=0x000A=][=0x000A=]Detective Offices is west of High School. It is in Neptune.[=0x000A=][=0x000A=]The player is in High School.[=0x000A=][=0x000A=]Instead of going from Neptune to a room which is not in Neptune:[=0x000A=][=0x0009=]say [=0x0022=]It[=0x0027=]s a bad time to leave Neptune.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]s / w / e[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Veronica&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11684_168" -->
<a id="c11684_168"></a><blockquote class="code"><p class="quoted">
Neptune is a region.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11685_168" -->
<a id="c11685_168"></a><blockquote class="code"><p class="quoted">
Tijuana is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11686_168" -->
<a id="c11686_168"></a><blockquote class="code"><p class="quoted">
High School is north of Tijuana. It is in Neptune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11687_168" -->
<a id="c11687_168"></a><blockquote class="code"><p class="quoted">
Detective Offices is west of High School. It is in Neptune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11688_168" -->
<a id="c11688_168"></a><blockquote class="code"><p class="quoted">
The player is in High School.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11689_168" -->
<a id="c11689_168"></a><blockquote class="code"><p class="quoted">
Instead of going from Neptune to a room which is not in Neptune:
<br />&#160;&#160;&#160;&#160;say &quot;It's a bad time to leave Neptune.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11690_168" -->
<a id="c11690_168"></a><blockquote class="code"><p class="quoted">
Test me with &quot;s / w / e&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "105: Mattress King" "e44" -->
<a id="e44"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example44'); return false;"><b>105</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example44'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mattress King</span></b></a><br />Adding extra phrasing to the action to PUSH something in a direction.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc111.html#e44"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example44" style="display: none;">
<p>By default, when the player pushes something a direction, Inform checks to make sure that the object is pushable between rooms. If not, it blocks the action; if so, it carries out a normal going action with the pushed object taken along.</p>
<p>Also by default, this action produces only a description of the new room that we've traveled into. But suppose we would like to print a short message describing the pushing action first:</p>
<!-- START CODE "c11691_44" -->
<a id="c11691_44"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Mattress King[=0x0022=][=0x000A=][=0x000A=]Monica[=0x0027=]s Bedroom is a room. The Living Room is south of Monica[=0x0027=]s Bedroom. Rachel[=0x0027=]s Bedroom is south of the Living Room.[=0x000A=][=0x000A=]After going a direction (called way-pushed) with something (called the thing-pushed):[=0x000A=][=0x0009=]say [=0x0022=]You push [the thing-pushed] [way-pushed] to [the location].[=0x0022=];[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]The race car bed is an enterable supporter in Monica[=0x0027=]s Bedroom. It is pushable between rooms.[=0x000A=][=0x000A=]Test me with [=0x0022=]push bed south[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Mattress King&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11692_44" -->
<a id="c11692_44"></a><blockquote class="code"><p class="quoted">
Monica's Bedroom is a room. The Living Room is south of Monica's Bedroom. Rachel's Bedroom is south of the Living Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11693_44" -->
<a id="c11693_44"></a><blockquote class="code"><p class="quoted">
After going a direction (called way-pushed) with something (called the thing-pushed):
<br />&#160;&#160;&#160;&#160;say &quot;You push [the thing-pushed] [way-pushed] to [the location].&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11694_44" -->
<a id="c11694_44"></a><blockquote class="code"><p class="quoted">
The race car bed is an enterable supporter in Monica's Bedroom. It is pushable between rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11695_44" -->
<a id="c11695_44"></a><blockquote class="code"><p class="quoted">
Test me with &quot;push bed south&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "198: The Second Oldest Problem" "e75" -->
<a id="e75"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example75'); return false;"><b>198</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example75'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Second Oldest Problem</span></b></a><br />Adapting the going action so that something special can happen when going from a dark room to another dark room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc186.html#e75"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example75" style="display: none;">
<p>Text in this example is drawn from Will Crowther's original 1976 FORTRAN implementation of ADVENTURE, the founding work of the genre, whose source code was rediscovered by Dennis G. Jerz in 2007. Note the capitals: the program ran on an early computer without lower case lettering. They look a little mimsy now, but picture them glowing green on an old-style cathode ray tube monitor in a darkened room late at night.</p>
<p>The problem alluded to is that the player is forbidden to walk between two dark rooms, so that he must always have light to see by from at least one end of any movement. Writing source text to achieve this is tricky to get right in every case, because the determination of light is hard to do. Here we interleave the necessary rules into the existing &quot;going&quot; action, using a new action variable to record the number of ends which are dark as experienced by the player, which might be 0, 1 or 2:</p>
<!-- START CODE "c11696_75" -->
<a id="c11696_75"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]THE SECOND OLDEST PROBLEM[=0x0022=][=0x000A=][=0x000A=]The going action has a number called the dark terminus count.[=0x000A=]Setting action variables for going:[=0x000A=][=0x0009=]now the dark terminus count is 0;[=0x000A=][=0x0009=]if in darkness, increment the dark terminus count.[=0x000A=]The last carry out going rule:[=0x000A=][=0x0009=]if in darkness, increment the dark terminus count;[=0x000A=][=0x0009=]if the dark terminus count is 2, end the story saying [=0x0022=]YOU FELL INTO A PIT AND BROKE EVERY BONE IN YOUR BODY![=0x0022=] instead.[=0x000A=][=0x000A=][And now three early rooms to try this out.][=0x000A=][=0x000A=]COBBLE CRAWL is a room. [=0x0022=]YOU ARE CRAWLING OVER COBBLES IN A LOW PASSAGE. THERE IS A DIM LIGHT AT THE EAST END OF THE PASSAGE.[=0x0022=][=0x000A=][=0x000A=]DEBRIS ROOM is west of COBBLE CRAWL. [=0x0022=]YOU ARE IN A DEBRIS ROOM, FILLED WITH STUFF WASHED IN FROM THE SURFACE. A LOW WIDE PASSAGE WITH COBBLES BECOMES PLUGGED WITH MUD AND DEBRIS HERE,BUT AN AWKWARD CANYON LEADS UPWARD AND WEST.[=0x0022=][=0x000A=][=0x000A=]AWKWARD CANYON is west of DEBRIS ROOM. [=0x0022=]YOU ARE IN AN AWKWARD SLOPING EAST/WEST CANYON.[=0x0022=][=0x000A=][=0x000A=]DEBRIS ROOM and AWKWARD CANYON are dark.[=0x000A=][=0x000A=]Rule for printing the name of a dark room: say [=0x0022=]DARKNESS[=0x0022=] instead.[=0x000A=]Rule for printing the description of a dark room: say [=0x0022=]IT IS NOW PITCH BLACK. IF YOU PROCEED YOU WILL LIKELY FALL INTO A PIT.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]w / e / w / w[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;THE SECOND OLDEST PROBLEM&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11697_75" -->
<a id="c11697_75"></a><blockquote class="code"><p class="quoted">
The going action has a number called the dark terminus count.
<br />Setting action variables for going:
<br />&#160;&#160;&#160;&#160;now the dark terminus count is 0;
<br />&#160;&#160;&#160;&#160;if in darkness, increment the dark terminus count.
<br />The last carry out going rule:
<br />&#160;&#160;&#160;&#160;if in darkness, increment the dark terminus count;
<br />&#160;&#160;&#160;&#160;if the dark terminus count is 2, end the story saying &quot;YOU FELL INTO A PIT AND BROKE EVERY BONE IN YOUR BODY!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And now three early rooms to try this out.</p>
<!-- START CODE "c11698_75" -->
<a id="c11698_75"></a><blockquote class="code"><p class="quoted">
COBBLE CRAWL is a room. &quot;YOU ARE CRAWLING OVER COBBLES IN A LOW PASSAGE. THERE IS A DIM LIGHT AT THE EAST END OF THE PASSAGE.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11699_75" -->
<a id="c11699_75"></a><blockquote class="code"><p class="quoted">
DEBRIS ROOM is west of COBBLE CRAWL. &quot;YOU ARE IN A DEBRIS ROOM, FILLED WITH STUFF WASHED IN FROM THE SURFACE. A LOW WIDE PASSAGE WITH COBBLES BECOMES PLUGGED WITH MUD AND DEBRIS HERE,BUT AN AWKWARD CANYON LEADS UPWARD AND WEST.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11700_75" -->
<a id="c11700_75"></a><blockquote class="code"><p class="quoted">
AWKWARD CANYON is west of DEBRIS ROOM. &quot;YOU ARE IN AN AWKWARD SLOPING EAST/WEST CANYON.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11701_75" -->
<a id="c11701_75"></a><blockquote class="code"><p class="quoted">
DEBRIS ROOM and AWKWARD CANYON are dark.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11702_75" -->
<a id="c11702_75"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a dark room: say &quot;DARKNESS&quot; instead.
<br />Rule for printing the description of a dark room: say &quot;IT IS NOW PITCH BLACK. IF YOU PROCEED YOU WILL LIKELY FALL INTO A PIT.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11703_75" -->
<a id="c11703_75"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e / w / w&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This is only the second oldest problem in the IF literature: the earliest puzzle is unlocking the steel grate which bars entrance to the cave.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "306: Misadventure" "e182" -->
<a id="e182"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example182'); return false;"><b>306</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example182'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Misadventure</span></b></a><br />A going by name command which does respect movement rules, and accepts names of rooms as commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc274.html#e182"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example182" style="display: none;">
<p>The original Adventure allowed the player to type the names of rooms in order to move to them, and it is now not too difficult for us to do the same. Adventure restricted this option to adjacent rooms, but we might want to be a bit more flexible, so we will accept any room:</p>
<!-- START CODE "c11704_182" -->
<a id="c11704_182"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Misadventure[=0x0022=][=0x000A=][=0x000A=]Plover Room is a room. [=0x0022=]You[=0x0027=]re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.[=0x0022=][=0x000A=][=0x000A=]The Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is [=0x0022=]Dark Room[=0x0022=]. The description of the Dark Corridor is [=0x0022=]You[=0x0027=]re in the dark-room. A corridor leading south is the only exit.[=0x0022=][=0x000A=][=0x000A=]The Alcove is west of Plover Room. [=0x0022=]You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.[=0x0022=][=0x000A=][=0x000A=]Northwest of the Alcove is the Misty Cavern. The description of Misty Cavern is [=0x0022=]You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.[=0x0022=] West of Misty Cavern is the Alcove.[=0x000A=][=0x000A=]Understand [=0x0022=][any room][=0x0022=] as going by name. Understand [=0x0022=]go to [any room][=0x0022=] as going by name.[=0x000A=][=0x000A=]Going by name is an action applying to one thing.[=0x000A=][=0x000A=][We should reject movement to the player[=0x0027=]s current location, or to anywhere he hasn[=0x0027=]t been and can[=0x0027=]t see:][=0x000A=][=0x000A=]Check going by name:[=0x000A=][=0x0009=]if the noun is the location, say [=0x0022=]You[=0x0027=]re already in [the location].[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is not adjacent and the noun is unvisited, say [=0x0022=]That noun did not make sense in this context.[=0x0022=] instead.[=0x000A=][=0x000A=][The assumption here is that the player does know the names of the rooms adjacent to his current location, even if he hasn[=0x0027=]t been there yet.][=0x000A=][=0x000A=][Now for the travel itself. The simplest way to ensure that the usual movement rules will still apply is to convert GO BY NAME into a GO action, and here the best route comes to our aid:][=0x000A=][=0x000A=]Carry out going by name:[=0x000A=][=0x0009=]let aim be the best route from the location to the noun, using doors;[=0x000A=][=0x0009=]if aim is not a direction, say [=0x0022=]You can[=0x0027=]t think how to get there from here.[=0x0022=] instead;[=0x000A=][=0x0009=]say [=0x0022=](heading [aim])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]try going aim;[=0x000A=][=0x0009=]if the location is not the noun, say [=0x0022=]You[=0x0027=]ll have to stop here.[=0x0022=][=0x000A=][=0x000A=][This will allow the player to travel toward rooms he has already visited even if they are several moves away.][=0x000A=][=0x000A=][Finally, so that the player can also use the names of doors as commands:][=0x000A=][=0x000A=]Understand [=0x0022=][door][=0x0022=] as entering.[=0x000A=][=0x000A=][And in keeping with the original, we might add to our scenario a rule or two about restrictions on movement, just to test that it[=0x0027=]s all working right:][=0x000A=][=0x000A=]The player carries a plover egg and a platinum pyramid. The description of the egg is [=0x0022=]Plover[=0x0027=]s eggs, by the way, are quite large.[=0x0022=] The printed name of the egg is [=0x0022=]emerald the size of a plover[=0x0027=]s egg[=0x0022=]. Understand [=0x0022=]emerald[=0x0022=] as the egg. The description of the pyramid is [=0x0022=]The platinum pyramid is 8 inches on a side![=0x0022=][=0x000A=][=0x000A=]Instead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:[=0x000A=][=0x0009=]say [=0x0022=]Something you[=0x0027=]re carrying won[=0x0027=]t fit through the tunnel with you. You[=0x0027=]d best take inventory and drop something.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Misadventure&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11705_182" -->
<a id="c11705_182"></a><blockquote class="code"><p class="quoted">
Plover Room is a room. &quot;You're in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11706_182" -->
<a id="c11706_182"></a><blockquote class="code"><p class="quoted">
The Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is &quot;Dark Room&quot;. The description of the Dark Corridor is &quot;You're in the dark-room. A corridor leading south is the only exit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11707_182" -->
<a id="c11707_182"></a><blockquote class="code"><p class="quoted">
The Alcove is west of Plover Room. &quot;You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11708_182" -->
<a id="c11708_182"></a><blockquote class="code"><p class="quoted">
Northwest of the Alcove is the Misty Cavern. The description of Misty Cavern is &quot;You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.&quot; West of Misty Cavern is the Alcove.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11709_182" -->
<a id="c11709_182"></a><blockquote class="code"><p class="quoted">
Understand &quot;[any room]&quot; as going by name. Understand &quot;go to [any room]&quot; as going by name.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11710_182" -->
<a id="c11710_182"></a><blockquote class="code"><p class="quoted">
Going by name is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<p>We should reject movement to the player's current location, or to anywhere he hasn't been and can't see:</p>
<!-- START CODE "c11711_182" -->
<a id="c11711_182"></a><blockquote class="code"><p class="quoted">
Check going by name:
<br />&#160;&#160;&#160;&#160;if the noun is the location, say &quot;You're already in [the location].&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is not adjacent and the noun is unvisited, say &quot;That noun did not make sense in this context.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The assumption here is that the player does know the names of the rooms adjacent to his current location, even if he hasn't been there yet.</p>
<p>Now for the travel itself. The simplest way to ensure that the usual movement rules will still apply is to convert GO BY NAME into a GO action, and here the best route comes to our aid:</p>
<!-- START CODE "c11712_182" -->
<a id="c11712_182"></a><blockquote class="code"><p class="quoted">
Carry out going by name:
<br />&#160;&#160;&#160;&#160;let aim be the best route from the location to the noun, using doors;
<br />&#160;&#160;&#160;&#160;if aim is not a direction, say &quot;You can't think how to get there from here.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(heading [aim])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;try going aim;
<br />&#160;&#160;&#160;&#160;if the location is not the noun, say &quot;You'll have to stop here.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This will allow the player to travel toward rooms he has already visited even if they are several moves away.</p>
<p>Finally, so that the player can also use the names of doors as commands:</p>
<!-- START CODE "c11713_182" -->
<a id="c11713_182"></a><blockquote class="code"><p class="quoted">
Understand &quot;[door]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<p>And in keeping with the original, we might add to our scenario a rule or two about restrictions on movement, just to test that it's all working right:</p>
<!-- START CODE "c11714_182" -->
<a id="c11714_182"></a><blockquote class="code"><p class="quoted">
The player carries a plover egg and a platinum pyramid. The description of the egg is &quot;Plover's eggs, by the way, are quite large.&quot; The printed name of the egg is &quot;emerald the size of a plover's egg&quot;. Understand &quot;emerald&quot; as the egg. The description of the pyramid is &quot;The platinum pyramid is 8 inches on a side!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11715_182" -->
<a id="c11715_182"></a><blockquote class="code"><p class="quoted">
Instead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:
<br />&#160;&#160;&#160;&#160;say &quot;Something you're carrying won't fit through the tunnel with you. You'd best take inventory and drop something.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11716_182" -->
<a id="c11716_182"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "372: Minimal Movement" "e315" -->
<a id="e315"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example315'); return false;"><b>372</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example315'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Minimal Movement</span></b></a><br />Supplying a default direction for "go", so that "leave", "go", etc., are always interpreted as "out".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc318.html#e315"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example315" style="display: none;">
<p>Sometimes it would be nice to respond a little more sensitively to a vague command such as &quot;leave&quot; -- converting it, perhaps, to a &quot;go out&quot; command.</p>
<!-- START CODE "c11717_315" -->
<a id="c11717_315"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Minimal Movement[=0x0022=][=0x000A=][=0x000A=]The Doll-like House is a room. The Postage-Stamp-Sized Garden is outside from the House.[=0x000A=][=0x000A=]Rule for supplying a missing noun while going:[=0x000A=][=0x0009=]now noun is outside.[=0x000A=][=0x000A=][This particular situation is very slightly complicated by the existing rules about vague movement, but fortunately we can easily turn those off.][=0x000A=][=0x000A=]The block vaguely going rule is not listed in the for supplying a missing noun rules.[=0x000A=][=0x000A=]Test me with [=0x0022=]go[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Minimal Movement&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11718_315" -->
<a id="c11718_315"></a><blockquote class="code"><p class="quoted">
The Doll-like House is a room. The Postage-Stamp-Sized Garden is outside from the House.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11719_315" -->
<a id="c11719_315"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing noun while going:
<br />&#160;&#160;&#160;&#160;now noun is outside.
</p></blockquote>
<!-- END CODE -->
<p>This particular situation is very slightly complicated by the existing rules about vague movement, but fortunately we can easily turn those off.</p>
<!-- START CODE "c11720_315" -->
<a id="c11720_315"></a><blockquote class="code"><p class="quoted">
The block vaguely going rule is not listed in the for supplying a missing noun rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11721_315" -->
<a id="c11721_315"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "394: Saint Eligius" "e436" -->
<a id="e436"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example436'); return false;"><b>394</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example436'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Saint Eligius</span></b></a><br />Adding a first look rule that comments on locations when we visit them for the first time, inserting text after objects are listed but before any "every turn" rules might occur.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc330.html#e436"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example436" style="display: none;">
<p>A not-infrequent desire in IF is to provide a few lines of comment when the player first enters a new room, after the objects are described but before anything else (such as an every turn rule) can fire. The cleanest, most systematic solution is to add a rule to the carry out looking rulebook, so:</p>
<!-- START CODE "c11722_436" -->
<a id="c11722_436"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Saint Eligius[=0x0022=][=0x000A=][=0x000A=]The first look rule is listed after the room description paragraphs about objects rule in the carry out looking rules. A room can be commented or uncommented. A room is usually uncommented.[=0x000A=][=0x000A=]This is the first look rule:[=0x000A=][=0x0009=]if the location is uncommented, carry out the gawking at activity with the location.[=0x000A=][=0x000A=]Gawking at something is an activity.[=0x000A=][=0x000A=]Rule for gawking at the Diamond Market:[=0x000A=][=0x0009=]say [=0x0022=]Your throat closes and your eyes begin to sting. You have long disdained pomp and luxury, and railed against the oppression that brings such wealth to some men at the cost of the lives of others; you were not prepared for the magnificence.[=0x0022=][=0x000A=][=0x000A=]After gawking at a room (called the target): now the target is commented.[=0x000A=][=0x000A=][And now the scene itself:][=0x000A=][=0x000A=]The Cobbled Alley is a room. [=0x0022=]The Alley has never been made into a proper street: the buildings on either side are simply too important to tear down. For all that, there isn[=0x0027=]t much sign of the magnificence nearby. The entrance you seek is set below street level, four grimy steps down to a half-basement.[=0x0022=][=0x000A=][=0x000A=]After going to Diamond Market:[=0x000A=][=0x0009=]say [=0x0022=]You descend the steps quickly and step into the small foyer, allowing yourself to be searched for weapons, before going on to...[=0x0022=];[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Diamond Market is down from Cobbled Alley. [=0x0022=]The roof is vaulted and painted in allegorical images representing Plenty, the Riches of the Earth, and Saint Eligius, patron of goldsmiths and jewelers.[=0x000A=][=0x000A=]Under their watchful eye, dozens of men in sober black robes sit; and on the tables before them are rubies, emeralds, sapphires from oversea, but most of all diamonds, both raw and cut.[=0x0022=][=0x000A=][=0x000A=]The burly guard is a man in Diamond Market. [=0x0022=]A burly guard patrols quite close to you, but even he is more sumptuously dressed than the average burly guard, and his buttons shine.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]d / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Saint Eligius&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11723_436" -->
<a id="c11723_436"></a><blockquote class="code"><p class="quoted">
The first look rule is listed after the room description paragraphs about objects rule in the carry out looking rules. A room can be commented or uncommented. A room is usually uncommented.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11724_436" -->
<a id="c11724_436"></a><blockquote class="code"><p class="quoted">
This is the first look rule:
<br />&#160;&#160;&#160;&#160;if the location is uncommented, carry out the gawking at activity with the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11725_436" -->
<a id="c11725_436"></a><blockquote class="code"><p class="quoted">
Gawking at something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11726_436" -->
<a id="c11726_436"></a><blockquote class="code"><p class="quoted">
Rule for gawking at the Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;Your throat closes and your eyes begin to sting. You have long disdained pomp and luxury, and railed against the oppression that brings such wealth to some men at the cost of the lives of others; you were not prepared for the magnificence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11727_436" -->
<a id="c11727_436"></a><blockquote class="code"><p class="quoted">
After gawking at a room (called the target): now the target is commented.
</p></blockquote>
<!-- END CODE -->
<p>And now the scene itself:</p>
<!-- START CODE "c11728_436" -->
<a id="c11728_436"></a><blockquote class="code"><p class="quoted">
The Cobbled Alley is a room. &quot;The Alley has never been made into a proper street: the buildings on either side are simply too important to tear down. For all that, there isn't much sign of the magnificence nearby. The entrance you seek is set below street level, four grimy steps down to a half-basement.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11729_436" -->
<a id="c11729_436"></a><blockquote class="code"><p class="quoted">
After going to Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;You descend the steps quickly and step into the small foyer, allowing yourself to be searched for weapons, before going on to...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11730_436" -->
<a id="c11730_436"></a><blockquote class="code"><p class="quoted">
Diamond Market is down from Cobbled Alley. &quot;The roof is vaulted and painted in allegorical images representing Plenty, the Riches of the Earth, and Saint Eligius, patron of goldsmiths and jewelers.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11731_436" -->
<a id="c11731_436"></a><blockquote class="code"><p class="quoted">
Under their watchful eye, dozens of men in sober black robes sit; and on the tables before them are rubies, emeralds, sapphires from oversea, but most of all diamonds, both raw and cut.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11732_436" -->
<a id="c11732_436"></a><blockquote class="code"><p class="quoted">
The burly guard is a man in Diamond Market. &quot;A burly guard patrols quite close to you, but even he is more sumptuously dressed than the average burly guard, and his buttons shine.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11733_436" -->
<a id="c11733_436"></a><blockquote class="code"><p class="quoted">
Test me with &quot;d / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "6: Up and Up" "e448" -->
<a id="e448"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example448'); return false;"><b>6</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example448'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Up and Up</span></b></a><br />Adding a short message as the player approaches a room, before the room description itself appears.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc27.html#e448"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example448" style="display: none;">
<p>Sometimes when a player moves from one room to another, we want to imply that a considerable amount of time elapses, or that something interesting occurs on the way. In that case, we might want to print more than just the room description itself. Here is how we might define a couple of rooms that are far apart:</p>
<!-- START CODE "c11734_448" -->
<a id="c11734_448"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Up and Up[=0x0022=][=0x000A=][=0x000A=]The Plain of the Skull is below the Endless Tower. The description of the Plain of the Skull is [=0x0022=]A vast and trackless plain, enlivened only by the bones of those who have previously tried and failed to cross. Above you is the Endless Tower, which rises half-way to the moon.[=0x0022=][=0x000A=][=0x000A=]The description of the Endless Tower is [=0x0022=]From up here the Plain of the Skull seems only a small bald patch: the world is round and most of it is covered with trees. Far off to the southwest is a shimmering surface that might be water; but there are no signs of cities or civilizations, only the lizard-skeletons.[=0x0022=][=0x000A=][=0x000A=][And now we borrow from the instructions on Actions to create our actual message. [=0x0022=]Before...[=0x0022=] introduces a rule that occurs when the player tries to do something; in this case, we will make a Before rule for going to the tower.][=0x000A=][=0x000A=]Before going to the Endless Tower:[=0x000A=][=0x0009=]say [=0x0022=]You climb... and climb... and climb... The sun sets. The moon rises. The wind begins to blow. You continue to climb...[=0x0022=][=0x000A=][=0x000A=]The player carries a bit of harness. The description of the harness is [=0x0022=]A strip of worked leather and a loop of metal, scavenged from one of the skeletons on the plain. Without it, you might think your entire quest was in vain.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look / up[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Up and Up&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11735_448" -->
<a id="c11735_448"></a><blockquote class="code"><p class="quoted">
The Plain of the Skull is below the Endless Tower. The description of the Plain of the Skull is &quot;A vast and trackless plain, enlivened only by the bones of those who have previously tried and failed to cross. Above you is the Endless Tower, which rises half-way to the moon.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11736_448" -->
<a id="c11736_448"></a><blockquote class="code"><p class="quoted">
The description of the Endless Tower is &quot;From up here the Plain of the Skull seems only a small bald patch: the world is round and most of it is covered with trees. Far off to the southwest is a shimmering surface that might be water; but there are no signs of cities or civilizations, only the lizard-skeletons.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now we borrow from the instructions on Actions to create our actual message. &quot;Before...&quot; introduces a rule that occurs when the player tries to do something; in this case, we will make a Before rule for going to the tower.</p>
<!-- START CODE "c11737_448" -->
<a id="c11737_448"></a><blockquote class="code"><p class="quoted">
Before going to the Endless Tower:
<br />&#160;&#160;&#160;&#160;say &quot;You climb... and climb... and climb... The sun sets. The moon rises. The wind begins to blow. You continue to climb...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11738_448" -->
<a id="c11738_448"></a><blockquote class="code"><p class="quoted">
The player carries a bit of harness. The description of the harness is &quot;A strip of worked leather and a loop of metal, scavenged from one of the skeletons on the plain. Without it, you might think your entire quest was in vain.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11739_448" -->
<a id="c11739_448"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / up&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "256: Wonderland" "e195" -->
<a id="e195"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example195'); return false;"><b>256</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example195'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wonderland</span></b></a><br />Hiking Mount Rainier, with attention to which locations are higher and which lower than the present location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc233.html#e195"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example195" style="display: none;">
<p>Suppose we have a landscape with a great deal of up and down variation, where GO UP and GO DOWN will be significant almost everywhere, and specifying them all individually a tremendous pain:</p>
<!-- START CODE "c11740_195" -->
<a id="c11740_195"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Wonderland[=0x0022=][=0x000A=][=0x000A=]An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.[=0x000A=][=0x000A=]Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.[=0x000A=][=0x000A=]Instead of going down:[=0x000A=][=0x0009=]if an adjacent room is lower than the location:[=0x000A=][=0x0009=][=0x0009=]let the valley be the lowest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the valley;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re in a local valley: there[=0x0027=]s no down from here.[=0x0022=][=0x000A=][=0x000A=]Instead of going up:[=0x000A=][=0x0009=]if an adjacent room is higher than the location:[=0x000A=][=0x0009=][=0x0009=]let the peak be the highest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the peak;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re on a local peak.[=0x0022=][=0x000A=][=0x000A=]Paradise is a room. Paradise has altitude 5400 feet. [=0x0022=]A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.[=0x0022=][=0x000A=][=0x000A=]Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. [=0x0022=]Numerous individual campsites and (on the road inventively labeled [=0x0027=]F[=0x0027=]) a handful of larger campgrounds suitable for church groups and family reunions.[=0x0022=][=0x000A=][=0x000A=]Longmire is southwest of Cougar Rock. It has altitude 2760 feet. [=0x0022=]A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.[=0x0022=][=0x000A=][=0x000A=]Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.[=0x000A=][=0x000A=][Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:][=0x000A=][=0x000A=]Instead of going up in the highest room:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]up / up / up / down / down / up / up[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Wonderland&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11741_195" -->
<a id="c11741_195"></a><blockquote class="code"><p class="quoted">
An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11742_195" -->
<a id="c11742_195"></a><blockquote class="code"><p class="quoted">
Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11743_195" -->
<a id="c11743_195"></a><blockquote class="code"><p class="quoted">
Instead of going down:
<br />&#160;&#160;&#160;&#160;if an adjacent room is lower than the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the valley be the lowest adjacent room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the valley;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're in a local valley: there's no down from here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11744_195" -->
<a id="c11744_195"></a><blockquote class="code"><p class="quoted">
Instead of going up:
<br />&#160;&#160;&#160;&#160;if an adjacent room is higher than the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the peak be the highest adjacent room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the peak;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're on a local peak.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11745_195" -->
<a id="c11745_195"></a><blockquote class="code"><p class="quoted">
Paradise is a room. Paradise has altitude 5400 feet. &quot;A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11746_195" -->
<a id="c11746_195"></a><blockquote class="code"><p class="quoted">
Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. &quot;Numerous individual campsites and (on the road inventively labeled 'F') a handful of larger campgrounds suitable for church groups and family reunions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11747_195" -->
<a id="c11747_195"></a><blockquote class="code"><p class="quoted">
Longmire is southwest of Cougar Rock. It has altitude 2760 feet. &quot;A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11748_195" -->
<a id="c11748_195"></a><blockquote class="code"><p class="quoted">
Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.
</p></blockquote>
<!-- END CODE -->
<p>Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:</p>
<!-- START CODE "c11749_195" -->
<a id="c11749_195"></a><blockquote class="code"><p class="quoted">
Instead of going up in the highest room:
<br />&#160;&#160;&#160;&#160;say &quot;You're standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11750_195" -->
<a id="c11750_195"></a><blockquote class="code"><p class="quoted">
Test me with &quot;up / up / up / down / down / up / up&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "307: Safari Guide" "e330" -->
<a id="e330"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example330'); return false;"><b>307</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example330'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Safari Guide</span></b></a><br />The same functionality, but making the player continue to move until he reaches his destination or a barrier, handling all openable doors on the way.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc274.html#e330"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example330" style="display: none;">
<p>The foregoing example moves the player one location towards his destination, and requires that rooms have been visited before. But suppose we wanted to be a bit more lenient about movement, and let the player make as many steps as necessary per turn. We will also show consideration about doors, using the &quot;Locksmith&quot; extension supplied with Inform. (Now every time the code attempts opening a door, unlocking rules will also be invoked.)</p>
<!-- START CODE "c11751_330" -->
<a id="c11751_330"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Safari Guide[=0x0022=][=0x000A=][=0x000A=]Include Locksmith by Emily Short.[=0x000A=][=0x000A=]The Monkey House is a room. The African Grasslands Exhibit is north of the Monkey House. The bird door is north of the African Grasslands Exhibit and south of the Aviary. The Ostrich Enclosure is west of the Aviary. The bird door is a door. It is closed, lockable, and locked. The silver key is a passkey. It unlocks the bird door. The player carries the silver key.[=0x000A=][=0x000A=]Understand [=0x0022=]go to [any room][=0x0022=] as going by name. Understand [=0x0022=][any room][=0x0022=] as going by name. Understand [=0x0022=][door][=0x0022=] as entering.[=0x000A=][=0x000A=]Going by name is an action applying to one thing.[=0x000A=][=0x000A=]Check going by name:[=0x000A=][=0x0009=]if the noun is the location, say [=0x0022=]You[=0x0027=]re already in [the location].[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out going by name:[=0x000A=][=0x0009=]while the player is not in the noun:[=0x000A=][=0x0009=][=0x0009=]let heading be the best route from the location to the noun, using even locked doors;[=0x000A=][=0x0009=][=0x0009=]if heading is not a direction, say [=0x0022=]You can[=0x0027=]t think how to get there from here.[=0x0022=] instead;[=0x000A=][=0x0009=][=0x0009=]let destination be the room heading from the location;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](heading [heading])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going heading;[=0x000A=][=0x0009=][=0x0009=]if the player is not in the destination, rule fails.[=0x000A=][=0x000A=]Test me with [=0x0022=]go to aviary / go to ostrich enclosure / african grasslands[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Safari Guide&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11752_330" -->
<a id="c11752_330"></a><blockquote class="code"><p class="quoted">
Include Locksmith by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11753_330" -->
<a id="c11753_330"></a><blockquote class="code"><p class="quoted">
The Monkey House is a room. The African Grasslands Exhibit is north of the Monkey House. The bird door is north of the African Grasslands Exhibit and south of the Aviary. The Ostrich Enclosure is west of the Aviary. The bird door is a door. It is closed, lockable, and locked. The silver key is a passkey. It unlocks the bird door. The player carries the silver key.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11754_330" -->
<a id="c11754_330"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to [any room]&quot; as going by name. Understand &quot;[any room]&quot; as going by name. Understand &quot;[door]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11755_330" -->
<a id="c11755_330"></a><blockquote class="code"><p class="quoted">
Going by name is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11756_330" -->
<a id="c11756_330"></a><blockquote class="code"><p class="quoted">
Check going by name:
<br />&#160;&#160;&#160;&#160;if the noun is the location, say &quot;You're already in [the location].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11757_330" -->
<a id="c11757_330"></a><blockquote class="code"><p class="quoted">
Carry out going by name:
<br />&#160;&#160;&#160;&#160;while the player is not in the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let heading be the best route from the location to the noun, using even locked doors;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if heading is not a direction, say &quot;You can't think how to get there from here.&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let destination be the room heading from the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(heading [heading])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going heading;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is not in the destination, rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11758_330" -->
<a id="c11758_330"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go to aviary / go to ostrich enclosure / african grasslands&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we continue the movement until one of two things happens: either the player reaches the room that is his destination, or the going attempt doesn't work. In the latter case we stop the action in order to avoid hanging the game up in a loop. This event might occur when the player runs into a locked door, for instance.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "102: Polarity" "e256" -->
<a id="e256"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example256'); return false;"><b>102</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example256'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Polarity</span></b></a><br />A "go back" command that keeps track of the direction from which the player came, and sends him back.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc110.html#e256"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example256" style="display: none;">
<p>The main trick of this is always to record where the player has gone when he has just moved.</p>
<!-- START CODE "c11759_256" -->
<a id="c11759_256"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Polarity[=0x0022=][=0x000A=][=0x000A=]The former location is a room that varies.[=0x000A=][=0x000A=][Here we record where the player has been before moving him; by calling this the [=0x0022=]first carry out going rule[=0x0022=], we make sure that this rule is followed during the going action before any other pieces of the movement occur. For more detail, see the chapters on advanced actions and on rules.][=0x000A=][=0x000A=]First carry out going rule:[=0x000A=][=0x0009=]now the former location is the location.[=0x000A=][=0x000A=]Understand [=0x0022=]go back[=0x0022=] as retreating. Understand [=0x0022=]back[=0x0022=] or [=0x0022=]return[=0x0022=] or [=0x0022=]retreat[=0x0022=] as retreating.[=0x000A=][=0x000A=]Retreating is an action applying to nothing.[=0x000A=][=0x000A=]Carry out retreating:[=0x000A=][=0x0009=]let way be the best route from the location to the former location, using doors;[=0x000A=][=0x0009=]if way is a direction, try going way;[=0x000A=][=0x0009=]otherwise say [=0x0022=]You can[=0x0027=]t see an open way back.[=0x0022=][=0x000A=][=0x000A=][And to deal with the case where the player has not yet moved:][=0x000A=][=0x000A=]When play begins: now the former location is the Dome.[=0x000A=][=0x000A=]Instead of retreating when the former location is the location: say [=0x0022=]You haven[=0x0027=]t gone anywhere yet.[=0x0022=][=0x000A=][=0x000A=]Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.[=0x000A=][=0x000A=]The church door is east of Eastern End and west of the Courtyard. The church door is a door.[=0x000A=][=0x000A=]Test me with [=0x0022=]back / n / go back / e / open door / go through door / go back[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Polarity&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11760_256" -->
<a id="c11760_256"></a><blockquote class="code"><p class="quoted">
The former location is a room that varies.
</p></blockquote>
<!-- END CODE -->
<p>Here we record where the player has been before moving him; by calling this the &quot;first carry out going rule&quot;, we make sure that this rule is followed during the going action before any other pieces of the movement occur. For more detail, see the chapters on advanced actions and on rules.</p>
<!-- START CODE "c11761_256" -->
<a id="c11761_256"></a><blockquote class="code"><p class="quoted">
First carry out going rule:
<br />&#160;&#160;&#160;&#160;now the former location is the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11762_256" -->
<a id="c11762_256"></a><blockquote class="code"><p class="quoted">
Understand &quot;go back&quot; as retreating. Understand &quot;back&quot; or &quot;return&quot; or &quot;retreat&quot; as retreating.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11763_256" -->
<a id="c11763_256"></a><blockquote class="code"><p class="quoted">
Retreating is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11764_256" -->
<a id="c11764_256"></a><blockquote class="code"><p class="quoted">
Carry out retreating:
<br />&#160;&#160;&#160;&#160;let way be the best route from the location to the former location, using doors;
<br />&#160;&#160;&#160;&#160;if way is a direction, try going way;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You can't see an open way back.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And to deal with the case where the player has not yet moved:</p>
<!-- START CODE "c11765_256" -->
<a id="c11765_256"></a><blockquote class="code"><p class="quoted">
When play begins: now the former location is the Dome.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11766_256" -->
<a id="c11766_256"></a><blockquote class="code"><p class="quoted">
Instead of retreating when the former location is the location: say &quot;You haven't gone anywhere yet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11767_256" -->
<a id="c11767_256"></a><blockquote class="code"><p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11768_256" -->
<a id="c11768_256"></a><blockquote class="code"><p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11769_256" -->
<a id="c11769_256"></a><blockquote class="code"><p class="quoted">
Test me with &quot;back / n / go back / e / open door / go through door / go back&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "103: Bumping into Walls" "e266" -->
<a id="e266"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example266'); return false;"><b>103</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example266'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Bumping into Walls</span></b></a><br />Offering the player a list of valid directions if he tries to go in a direction that leads nowhere.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc110.html#e266"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example266" style="display: none;">
<!-- START CODE "c11770_266" -->
<a id="c11770_266"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Bumping into Walls[=0x0022=][=0x000A=][=0x000A=][First we add an instruction to determine which ways lead to other rooms.][=0x000A=][=0x000A=]Definition: a direction (called thataway) is viable if the room thataway from the location is a room.[=0x000A=][=0x000A=][Now we build in the instruction for what Inform should say if the player tries to head in a direction that leads nowhere:][=0x000A=][=0x000A=]Instead of going nowhere:[=0x000A=][=0x0009=]let count of exits be the number of viable directions;[=0x000A=][=0x0009=]if the count of exits is 0, say [=0x0022=]You appear to be trapped in here.[=0x0022=] instead;[=0x000A=][=0x0009=]if the count of exits is 1, say [=0x0022=]From here, the only way out is [list of viable directions].[=0x0022=];[=0x000A=][=0x0009=]otherwise say [=0x0022=]From here, the viable exits are [list of viable directions].[=0x0022=][=0x000A=][=0x000A=][There is no theoretical reason why we have to define [=0x0022=]count of exits[=0x0022=] here: we could, if we wanted, just say [=0x0022=]if the number of viable directions is 0[=0x0022=], [=0x0022=]if the number of viable directions is 1[=0x0022=], and so on. However, each calculation of a [=0x0022=]viable direction[=0x0022=] takes a bit of computing power, so there is some slight savings in not requiring the game to count viable directions more than once in this routine.][=0x000A=][=0x000A=]Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.[=0x000A=][=0x000A=]The Crypt is below the dome.[=0x000A=][=0x000A=]The church door is east of Eastern End and west of the Courtyard. The church door is a door.[=0x000A=][=0x000A=]Test me with [=0x0022=]u / n / n / e / n / s / u / open door / e / n[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Bumping into Walls&quot;
</p></blockquote>
<!-- END CODE -->
<p>First we add an instruction to determine which ways lead to other rooms.</p>
<!-- START CODE "c11771_266" -->
<a id="c11771_266"></a><blockquote class="code"><p class="quoted">
Definition: a direction (called thataway) is viable if the room thataway from the location is a room.
</p></blockquote>
<!-- END CODE -->
<p>Now we build in the instruction for what Inform should say if the player tries to head in a direction that leads nowhere:</p>
<!-- START CODE "c11772_266" -->
<a id="c11772_266"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere:
<br />&#160;&#160;&#160;&#160;let count of exits be the number of viable directions;
<br />&#160;&#160;&#160;&#160;if the count of exits is 0, say &quot;You appear to be trapped in here.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the count of exits is 1, say &quot;From here, the only way out is [list of viable directions].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;From here, the viable exits are [list of viable directions].&quot;
</p></blockquote>
<!-- END CODE -->
<p>There is no theoretical reason why we have to define &quot;count of exits&quot; here: we could, if we wanted, just say &quot;if the number of viable directions is 0&quot;, &quot;if the number of viable directions is 1&quot;, and so on. However, each calculation of a &quot;viable direction&quot; takes a bit of computing power, so there is some slight savings in not requiring the game to count viable directions more than once in this routine.</p>
<!-- START CODE "c11773_266" -->
<a id="c11773_266"></a><blockquote class="code"><p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11774_266" -->
<a id="c11774_266"></a><blockquote class="code"><p class="quoted">
The Crypt is below the dome.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11775_266" -->
<a id="c11775_266"></a><blockquote class="code"><p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11776_266" -->
<a id="c11776_266"></a><blockquote class="code"><p class="quoted">
Test me with &quot;u / n / n / e / n / s / u / open door / e / n&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "107: Zorb" "e70" -->
<a id="e70"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example70'); return false;"><b>107</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example70'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Zorb</span></b></a><br />Replacing the message the player receives when attempting to push something that isn't pushable, and also to remove the restriction that objects cannot be pushed up or down.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc111.html#e70"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example70" style="display: none;">
<p>There are two aspects of Inform's handling of pushable objects that are particularly prime for modification. One is that we may want to change the language used to refuse the pushing of unpushable objects.</p>
<p>Second, Inform by default assumes that it is impossible to push objects in up or down directions. This makes lots of sense if the player is trying to push a wheelbarrow up a ladder; it makes less sense if instead we're pushing a ball up a slope.</p>
<p>We solve both problems with some syntax borrowed from the chapter on rulebooks: in the first case, we replace the old rule with a new one with more friendly phrasing; in the second, we remove the rule entirely. More about how to do this is described in the rulebooks chapter; and in general we can find out what rules contribute to any given action by looking at the Actions index. In this case, the action is &quot;pushing it to&quot;, which has its own set of prerequisites (called check rules) that make sure the object can safely be pushed, before turning processing over to the going action.</p>
<!-- START CODE "c11777_70" -->
<a id="c11777_70"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Zorb[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The new can[=0x0027=]t push unpushable things rule is listed instead of the can[=0x0027=]t push unpushable things rule in the check pushing it to rules.[=0x000A=][=0x000A=]This is the new can[=0x0027=]t push unpushable things rule:[=0x000A=][=0x0009=]if the noun is not pushable between rooms:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun] [are] not amenable to being pushed from place to place.[=0x0022=] instead.[=0x000A=][=0x000A=]The can[=0x0027=]t push vertically rule is not listed in any rulebook.[=0x000A=][=0x000A=][And now to provide a scenario where the player can push something up and down a hillside. Most of the rest of the example is there for local color and to provide a way to demonstrate these rule adjustments:][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Steep Hill is a room. The Crest is above Steep Hill. The Valley is below Steep Hill.[=0x000A=][=0x000A=]The flat rock is a fixed in place thing in the Steep Hill.[=0x000A=][=0x000A=]The Zorb is a transparent open enterable container in the Steep Hill. [=0x0022=][if the player props the Zorb]The Zorb rests here, kept from further rolling by your support[otherwise]The Zorb is here[end if].[=0x0022=]. It is pushable between rooms. The description of the Zorb is [=0x0022=]A giant plastic inflatable ball, like a hamster ball for humans[if someone is in the Zorb]. Inside [is-are list of people in the Zorb][end if].[=0x0022=][=0x000A=][=0x000A=]Lucy is a woman in the Zorb.[=0x000A=][=0x000A=]Carry out going with the Zorb when the Zorb contains Lucy:[=0x000A=][=0x0009=]say [=0x0022=]Lucy whoops delightedly as she rides along in the Zorb.[=0x0022=][=0x000A=][=0x000A=]Every turn when the Zorb is not in the Valley and the player does not prop the Zorb:[=0x000A=][=0x0009=]let next room be the room down from the location of the Zorb;[=0x000A=][=0x0009=]if the player is not in the Zorb and the player can see the Zorb:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The Zorb succumbs to gravity and rolls down toward [the next room].[=0x0022=];[=0x000A=][=0x0009=]move the Zorb to the next room;[=0x000A=][=0x0009=]if the player is in the Zorb:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The Zorb rolls you down the hill![=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try looking;[=0x000A=][=0x0009=]otherwise if the player can see the Zorb:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The Zorb rolls ponderously but inevitably into the vicinity.[=0x0022=];[=0x000A=][=0x000A=]Propping relates one person to one thing. The verb to prop means the propping relation.[=0x000A=][=0x000A=]Carry out going with the Zorb:[=0x000A=][=0x0009=]now the player props the Zorb.[=0x000A=][=0x000A=]Before doing something when the action requires a touchable noun:[=0x000A=][=0x0009=]if the noun is not the Zorb, now the player does not prop the Zorb.[=0x000A=][=0x000A=]Check waving hands when the player is propping something (called casualty):[=0x000A=][=0x0009=]try the player releasing the casualty.[=0x000A=][=0x000A=]Carry out entering the Zorb:[=0x000A=][=0x0009=]now the player does not prop the Zorb.[=0x000A=][=0x000A=]Understand [=0x0022=]let go of [something][=0x0022=] or [=0x0022=]let [something] go[=0x0022=] or [=0x0022=]release [something][=0x0022=] or [=0x0022=]free [something][=0x0022=] as releasing. Releasing is an action applying to one thing.[=0x000A=][=0x000A=]Check releasing:[=0x000A=][=0x0009=]if the player carries the noun:[=0x000A=][=0x0009=][=0x0009=]try dropping the noun instead.[=0x000A=][=0x000A=]Check releasing:[=0x000A=][=0x0009=]if the player does not prop the noun:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You are not supporting [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out releasing:[=0x000A=][=0x0009=]now the player does not prop the noun.[=0x000A=][=0x000A=]Report releasing:[=0x000A=][=0x0009=]say [=0x0022=]You let go of [the noun].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]d / push zorb up / look / push zorb up / wave / d / d / push zorb up / release zorb / d / push zorb up / touch rock / push the flat rock south[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Zorb&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11778_70" -->
<a id="c11778_70"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11779_70" -->
<a id="c11779_70"></a><blockquote class="code"><p class="quoted">
The new can't push unpushable things rule is listed instead of the can't push unpushable things rule in the check pushing it to rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11780_70" -->
<a id="c11780_70"></a><blockquote class="code"><p class="quoted">
This is the new can't push unpushable things rule:
<br />&#160;&#160;&#160;&#160;if the noun is not pushable between rooms:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] [are] not amenable to being pushed from place to place.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11781_70" -->
<a id="c11781_70"></a><blockquote class="code"><p class="quoted">
The can't push vertically rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>And now to provide a scenario where the player can push something up and down a hillside. Most of the rest of the example is there for local color and to provide a way to demonstrate these rule adjustments:</p>
<!-- START CODE "c11782_70" -->
<a id="c11782_70"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11783_70" -->
<a id="c11783_70"></a><blockquote class="code"><p class="quoted">
The Steep Hill is a room. The Crest is above Steep Hill. The Valley is below Steep Hill.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11784_70" -->
<a id="c11784_70"></a><blockquote class="code"><p class="quoted">
The flat rock is a fixed in place thing in the Steep Hill.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11785_70" -->
<a id="c11785_70"></a><blockquote class="code"><p class="quoted">
The Zorb is a transparent open enterable container in the Steep Hill. &quot;[if the player props the Zorb]The Zorb rests here, kept from further rolling by your support[otherwise]The Zorb is here[end if].&quot;. It is pushable between rooms. The description of the Zorb is &quot;A giant plastic inflatable ball, like a hamster ball for humans[if someone is in the Zorb]. Inside [is-are list of people in the Zorb][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11786_70" -->
<a id="c11786_70"></a><blockquote class="code"><p class="quoted">
Lucy is a woman in the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11787_70" -->
<a id="c11787_70"></a><blockquote class="code"><p class="quoted">
Carry out going with the Zorb when the Zorb contains Lucy:
<br />&#160;&#160;&#160;&#160;say &quot;Lucy whoops delightedly as she rides along in the Zorb.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11788_70" -->
<a id="c11788_70"></a><blockquote class="code"><p class="quoted">
Every turn when the Zorb is not in the Valley and the player does not prop the Zorb:
<br />&#160;&#160;&#160;&#160;let next room be the room down from the location of the Zorb;
<br />&#160;&#160;&#160;&#160;if the player is not in the Zorb and the player can see the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb succumbs to gravity and rolls down toward [the next room].&quot;;
<br />&#160;&#160;&#160;&#160;move the Zorb to the next room;
<br />&#160;&#160;&#160;&#160;if the player is in the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb rolls you down the hill!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try looking;
<br />&#160;&#160;&#160;&#160;otherwise if the player can see the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb rolls ponderously but inevitably into the vicinity.&quot;;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11789_70" -->
<a id="c11789_70"></a><blockquote class="code"><p class="quoted">
Propping relates one person to one thing. The verb to prop means the propping relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11790_70" -->
<a id="c11790_70"></a><blockquote class="code"><p class="quoted">
Carry out going with the Zorb:
<br />&#160;&#160;&#160;&#160;now the player props the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11791_70" -->
<a id="c11791_70"></a><blockquote class="code"><p class="quoted">
Before doing something when the action requires a touchable noun:
<br />&#160;&#160;&#160;&#160;if the noun is not the Zorb, now the player does not prop the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11792_70" -->
<a id="c11792_70"></a><blockquote class="code"><p class="quoted">
Check waving hands when the player is propping something (called casualty):
<br />&#160;&#160;&#160;&#160;try the player releasing the casualty.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11793_70" -->
<a id="c11793_70"></a><blockquote class="code"><p class="quoted">
Carry out entering the Zorb:
<br />&#160;&#160;&#160;&#160;now the player does not prop the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11794_70" -->
<a id="c11794_70"></a><blockquote class="code"><p class="quoted">
Understand &quot;let go of [something]&quot; or &quot;let [something] go&quot; or &quot;release [something]&quot; or &quot;free [something]&quot; as releasing. Releasing is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11795_70" -->
<a id="c11795_70"></a><blockquote class="code"><p class="quoted">
Check releasing:
<br />&#160;&#160;&#160;&#160;if the player carries the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try dropping the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11796_70" -->
<a id="c11796_70"></a><blockquote class="code"><p class="quoted">
Check releasing:
<br />&#160;&#160;&#160;&#160;if the player does not prop the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are not supporting [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11797_70" -->
<a id="c11797_70"></a><blockquote class="code"><p class="quoted">
Carry out releasing:
<br />&#160;&#160;&#160;&#160;now the player does not prop the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11798_70" -->
<a id="c11798_70"></a><blockquote class="code"><p class="quoted">
Report releasing:
<br />&#160;&#160;&#160;&#160;say &quot;You let go of [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11799_70" -->
<a id="c11799_70"></a><blockquote class="code"><p class="quoted">
Test me with &quot;d / push zorb up / look / push zorb up / wave / d / d / push zorb up / release zorb / d / push zorb up / touch rock / push the flat rock south&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "108: Provenance Unknown" "e414" -->
<a id="e414"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example414'); return false;"><b>108</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example414'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Provenance Unknown</span></b></a><br />Allowing something like PUSH TELEVISION EAST to push the cart on which the television rests.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc111.html#e414"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example414" style="display: none;">
<p>Suppose we have a series of items that might be stacked on top of one another -- say a heavy television on a rolling cart, and we want the player to be able to move the cart with PUSH TELEVISION EAST just as well as with PUSH CART EAST.</p>
<p>This takes a little redirection, using a setting action variables rule. This is not a kind of rule we've encountered yet, and in fact we won't meet it until the Advanced Actions chapter; it is included here for the convenience of authors who want to modify the effect of pushing without reading that far ahead:</p>
<!-- START CODE "c11800_414" -->
<a id="c11800_414"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Provenance Unknown[=0x0022=][=0x000A=][=0x000A=]Setting action variables for pushing something to:[=0x000A=][=0x0009=]if the noun is enclosed by a pushable between rooms thing (called the pushed item) which is in the location:[=0x000A=][=0x0009=][=0x0009=]now the noun is the pushed item instead.[=0x000A=][=0x000A=][This rule says that any time we push an object that is on top of a stack of pushable objects, we should transfer the action to the item at the bottom of the stack.][=0x000A=][=0x000A=][The rest is merely a test case.][=0x000A=][=0x000A=]The heavy golden idol is on a roller board. The roller board is on a hovercraft.[=0x000A=][=0x000A=]The hovercraft, the tea trolley, and the skateboard are pushable between rooms.[=0x000A=][=0x000A=]The hovercraft is in Zeta Proximan Dig Field.[=0x000A=][=0x000A=]Zeta Proximan Dig Field is a room. [=0x0022=]During the day, the field is massed with sweating native workers, overseers, and officials from central command. Now the spades, trowels, brushes, metal detectors, ground probes, plumb lines, and sighting tripods have been laid aside.[=0x000A=][=0x000A=]All that remains are the trenches and the fine grey dust that blows slowly across them; the moonlight; and the just-emerging outlines of an ancient and alien wall.[=0x0022=][=0x000A=][=0x000A=]The Hover-Road is west of the Dig Field. [=0x0022=]A long road hastily laid down, stretching east to west, from the dig site toward the safety of the city.[=0x0022=][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]say [=0x0022=]You have, at last, loaded your illicit cargo without setting off any of the many and sensitive alarms set here; now it remains only to sneak out of the area, under the light of Zeta Proxima[=0x0027=]s lone green moon.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]push idol west / look / push roller board east / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Provenance Unknown&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11801_414" -->
<a id="c11801_414"></a><blockquote class="code"><p class="quoted">
Setting action variables for pushing something to:
<br />&#160;&#160;&#160;&#160;if the noun is enclosed by a pushable between rooms thing (called the pushed item) which is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is the pushed item instead.
</p></blockquote>
<!-- END CODE -->
<p>This rule says that any time we push an object that is on top of a stack of pushable objects, we should transfer the action to the item at the bottom of the stack.</p>
<p>The rest is merely a test case.</p>
<!-- START CODE "c11802_414" -->
<a id="c11802_414"></a><blockquote class="code"><p class="quoted">
The heavy golden idol is on a roller board. The roller board is on a hovercraft.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11803_414" -->
<a id="c11803_414"></a><blockquote class="code"><p class="quoted">
The hovercraft, the tea trolley, and the skateboard are pushable between rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11804_414" -->
<a id="c11804_414"></a><blockquote class="code"><p class="quoted">
The hovercraft is in Zeta Proximan Dig Field.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11805_414" -->
<a id="c11805_414"></a><blockquote class="code"><p class="quoted">
Zeta Proximan Dig Field is a room. &quot;During the day, the field is massed with sweating native workers, overseers, and officials from central command. Now the spades, trowels, brushes, metal detectors, ground probes, plumb lines, and sighting tripods have been laid aside.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11806_414" -->
<a id="c11806_414"></a><blockquote class="code"><p class="quoted">
All that remains are the trenches and the fine grey dust that blows slowly across them; the moonlight; and the just-emerging outlines of an ancient and alien wall.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11807_414" -->
<a id="c11807_414"></a><blockquote class="code"><p class="quoted">
The Hover-Road is west of the Dig Field. &quot;A long road hastily laid down, stretching east to west, from the dig site toward the safety of the city.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11808_414" -->
<a id="c11808_414"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;say &quot;You have, at last, loaded your illicit cargo without setting off any of the many and sensitive alarms set here; now it remains only to sneak out of the area, under the light of Zeta Proxima's lone green moon.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11809_414" -->
<a id="c11809_414"></a><blockquote class="code"><p class="quoted">
Test me with &quot;push idol west / look / push roller board east / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "179: Owen's Law" "e411" -->
<a id="e411"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example411'); return false;"><b>179</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example411'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Owen's Law</span></b></a><br />OUT always means "move to an outdoors room, or else to a room with more exits than this one has"; IN always means the opposite.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc174.html#e411"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example411" style="display: none;">
<p>Suppose we want the game to interpret &quot;GO OUT&quot; as &quot;move towards an outdoors room, or towards a room with more exits than the current room&quot;, while &quot;GO IN&quot; means &quot;move toward a room with fewer exits, or towards an indoors room&quot;. Thus going in repeatedly within a building would lead towards dead-ends, while going out repeatedly would lead towards the center of the building and then towards an exit to the outside world.</p>
<p>We start by encoding these rules as definitions:</p>
<!-- START CODE "c11810_411" -->
<a id="c11810_411"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Owen[=0x0027=]s Law[=0x0022=][=0x000A=][=0x000A=]A room can be indoors or outdoors. A room is usually indoors.[=0x000A=][=0x000A=]Definition: a room is outward:[=0x000A=][=0x0009=]if it is not adjacent, no;[=0x000A=][=0x0009=]if it is indoors and the location is outdoors, no;[=0x000A=][=0x0009=]if it is outdoors and the location is indoors, yes;[=0x000A=][=0x0009=]if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;[=0x000A=][=0x0009=]otherwise no.[=0x000A=][=0x000A=]Definition: a room is inward:[=0x000A=][=0x0009=]if it is not adjacent, no;[=0x000A=][=0x0009=]if it is outdoors and the location is indoors, no;[=0x000A=][=0x0009=]if it is indoors and the location is outdoors, yes;[=0x000A=][=0x0009=]if the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;[=0x000A=][=0x0009=]otherwise no.[=0x000A=][=0x000A=]Instead of going nowhere when the noun is outside: try exiting.[=0x000A=][=0x000A=]Instead of exiting when the player is in a room:[=0x000A=][=0x0009=]if at least one room is outward:[=0x000A=][=0x0009=][=0x0009=]let the destination be a random outward room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to[=0x0009=] the destination;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way instead;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It[=0x0027=]s not entirely obvious which way you mean. [=0x0022=];[=0x000A=][=0x0009=][=0x0009=]carry out the listing available exits activity.[=0x000A=][=0x000A=]Instead of going inside when the room inside from the location is not a room and at least one room is inward:[=0x000A=][=0x0009=]if more than one room is inward:[=0x000A=][=0x0009=][=0x0009=]carry out the listing available exits activity;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]let the destination be a random inward room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the destination;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[command clarification break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way instead.[=0x000A=][=0x000A=]Instead of going nowhere:[=0x000A=][=0x0009=]carry out the listing available exits activity.[=0x000A=][=0x000A=][This [=0x0022=]listing available exits[=0x0022=] is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:][=0x000A=][=0x000A=]Listing available exits is an activity.[=0x000A=][=0x000A=]Rule for listing available exits:[=0x000A=][=0x0009=]if going inside and an adjacent room is inward:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]From here [=0x0027=]in[=0x0027=] could reasonably mean [a list of adjacent inward rooms].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]if exiting and an adjacent room is outward:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]From here [=0x0027=]out[=0x0027=] could reasonably mean [a list of outward adjacent rooms].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=]From here you can go [a list of adjacent rooms].[=0x0022=][=0x000A=][=0x000A=]Before printing the name of a room (called the target) while listing available exits:[=0x000A=][=0x0009=]let aim be the best route from the location to the target;[=0x000A=][=0x0009=]say [=0x0022=][aim] to the [=0x0022=].[=0x000A=][=0x000A=]Rule for printing the name of an unvisited room which is not the location:[=0x000A=][=0x0009=]say [=0x0022=]unknown location[=0x0022=].[=0x000A=][=0x000A=]Dune is an outdoors room. [=0x0022=]Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.[=0x0022=][=0x000A=][=0x000A=]Ocean Shores Military Installation is east of the Dune. It is an outdoors room. [=0x0022=]The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.[=0x0022=][=0x000A=][=0x000A=]Walkway is above Ocean Shores Military Installation. [=0x0022=]From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.[=0x0022=][=0x000A=][=0x000A=]Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually [=0x0022=]It is dark in here, and feels unsafe.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]e / u / d / in / s / out / n / out / e / in / out / out / out[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Owen's Law&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11811_411" -->
<a id="c11811_411"></a><blockquote class="code"><p class="quoted">
A room can be indoors or outdoors. A room is usually indoors.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11812_411" -->
<a id="c11812_411"></a><blockquote class="code"><p class="quoted">
Definition: a room is outward:
<br />&#160;&#160;&#160;&#160;if it is not adjacent, no;
<br />&#160;&#160;&#160;&#160;if it is indoors and the location is outdoors, no;
<br />&#160;&#160;&#160;&#160;if it is outdoors and the location is indoors, yes;
<br />&#160;&#160;&#160;&#160;if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;
<br />&#160;&#160;&#160;&#160;otherwise no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11813_411" -->
<a id="c11813_411"></a><blockquote class="code"><p class="quoted">
Definition: a room is inward:
<br />&#160;&#160;&#160;&#160;if it is not adjacent, no;
<br />&#160;&#160;&#160;&#160;if it is outdoors and the location is indoors, no;
<br />&#160;&#160;&#160;&#160;if it is indoors and the location is outdoors, yes;
<br />&#160;&#160;&#160;&#160;if the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;
<br />&#160;&#160;&#160;&#160;otherwise no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11814_411" -->
<a id="c11814_411"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere when the noun is outside: try exiting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11815_411" -->
<a id="c11815_411"></a><blockquote class="code"><p class="quoted">
Instead of exiting when the player is in a room:
<br />&#160;&#160;&#160;&#160;if at least one room is outward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the destination be a random outward room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to	 the destination;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's not entirely obvious which way you mean. &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the listing available exits activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11816_411" -->
<a id="c11816_411"></a><blockquote class="code"><p class="quoted">
Instead of going inside when the room inside from the location is not a room and at least one room is inward:
<br />&#160;&#160;&#160;&#160;if more than one room is inward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the listing available exits activity;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the destination be a random inward room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the destination;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11817_411" -->
<a id="c11817_411"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere:
<br />&#160;&#160;&#160;&#160;carry out the listing available exits activity.
</p></blockquote>
<!-- END CODE -->
<p>This &quot;listing available exits&quot; is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:</p>
<!-- START CODE "c11818_411" -->
<a id="c11818_411"></a><blockquote class="code"><p class="quoted">
Listing available exits is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11819_411" -->
<a id="c11819_411"></a><blockquote class="code"><p class="quoted">
Rule for listing available exits:
<br />&#160;&#160;&#160;&#160;if going inside and an adjacent room is inward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From here 'in' could reasonably mean [a list of adjacent inward rooms].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if exiting and an adjacent room is outward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From here 'out' could reasonably mean [a list of outward adjacent rooms].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;From here you can go [a list of adjacent rooms].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11820_411" -->
<a id="c11820_411"></a><blockquote class="code"><p class="quoted">
Before printing the name of a room (called the target) while listing available exits:
<br />&#160;&#160;&#160;&#160;let aim be the best route from the location to the target;
<br />&#160;&#160;&#160;&#160;say &quot;[aim] to the &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11821_411" -->
<a id="c11821_411"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of an unvisited room which is not the location:
<br />&#160;&#160;&#160;&#160;say &quot;unknown location&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11822_411" -->
<a id="c11822_411"></a><blockquote class="code"><p class="quoted">
Dune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11823_411" -->
<a id="c11823_411"></a><blockquote class="code"><p class="quoted">
Ocean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11824_411" -->
<a id="c11824_411"></a><blockquote class="code"><p class="quoted">
Walkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11825_411" -->
<a id="c11825_411"></a><blockquote class="code"><p class="quoted">
Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11826_411" -->
<a id="c11826_411"></a><blockquote class="code"><p class="quoted">
Test me with &quot;e / u / d / in / s / out / n / out / e / in / out / out / out&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc36.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc38.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
