<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>11.6. Ending The Story</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Ending The Story" -->
<!-- SEARCH SECTION "11.6" -->
<!-- SEARCH SORT "001-011-006-000" -->
<!-- START IGNORE 95 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc95.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 11: Out Of World Actions and Effects</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc97.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง11.6. Ending The Story</p>
<p>Play can end in many ways, at the writer's discretion:</p>
<!-- START CODE "c16300" -->
<a id="c16300"></a><blockquote class="code"><p class="quoted">
end the story;
<br />end the story finally;
<br />end the story saying &quot;You have reached an impasse, a stalemate&quot;;
<br />end the story finally saying &quot;You have succeeded.&quot;;
</p></blockquote>
<!-- END CODE -->
<p>The phrase &quot;end the story&quot; by itself will finish play, printing &quot;*** The End ***&quot;. Using one of the phrases with &quot;saying...&quot; allows us to specify some other text with which to conclude. Including &quot;finally&quot; means that the player has earned access to AMUSING text and other notes, if any of these are provided.</p>
<p>We can eliminate the asterisked headline entirely by removing the rule that prints it, thus:</p>
<!-- START CODE "c16301" -->
<a id="c16301"></a><blockquote class="code"><p class="quoted">
The print obituary headline rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>The next step is to print the player's score and, if applicable, the rank he achieved. By default a story doesn't feature scoring, but the following use option will incorporate it:</p>
<!-- START CODE "c16302" -->
<a id="c16302"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<p>Then, if we want to allow a score but alter the way it is reported, we may remove or modify the print final score rule, as in</p>
<!-- START CODE "c16303" -->
<a id="c16303"></a><blockquote class="code"><p class="quoted">
The print final score rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>or perhaps something like</p>
<!-- START CODE "c16304" -->
<a id="c16304"></a><blockquote class="code"><p class="quoted">
The chatty final score rule is listed instead of the print final score rule in for printing the player's obituary.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16305" -->
<a id="c16305"></a><blockquote class="code"><p class="quoted">
This is the chatty final score rule: say &quot;Wow, you achieved a whole [score in words] point[s] out of a possible [maximum score in words]! I'm very proud of you. This was a triumph. I'm being so sincere right now.&quot;
</p></blockquote>
<!-- END CODE -->
<p>What happens next is normally that the player is invited to RESTART, RESTORE (from a saved story), QUIT or UNDO the last command. The presence of the question can somewhat undercut a tragedy, and <span class="boldface">Battle of Ridgefield</span> shows another way to go out.</p>
<p>If we do leave the question in, the text is formed by the Table of Final Question Options, which by default looks like this:</p>
<!-- START CODE "c16306" -->
<a id="c16306"></a><blockquote class="code"><p class="quoted">
Table of Final Question Options
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">final question wording</p></td><td class="quotedtablecell"><p class="quoted">only if victorious</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">final response rule</p></td><td class="quotedtablecell"><p class="quoted">final response activity</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;RESTART&quot;</p></td><td class="quotedtablecell"><p class="quoted">false</p></td><td class="quotedtablecell"><p class="quoted">&quot;restart&quot;</p></td><td class="quotedtablecell"><p class="quoted">immediately restart the VM rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;RESTORE a saved story&quot;</p></td><td class="quotedtablecell"><p class="quoted">false</p></td><td class="quotedtablecell"><p class="quoted">&quot;restore&quot;</p></td><td class="quotedtablecell"><p class="quoted">immediately restore saved story rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;see some suggestions for AMUSING things to do&quot;</p></td><td class="quotedtablecell"><p class="quoted">true</p></td><td class="quotedtablecell"><p class="quoted">&quot;amusing&quot;</p></td><td class="quotedtablecell"><p class="quoted">--</p></td><td class="quotedtablecell"><p class="quoted">amusing a victorious player</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;QUIT&quot;</p></td><td class="quotedtablecell"><p class="quoted">false</p></td><td class="quotedtablecell"><p class="quoted">&quot;quit&quot;</p></td><td class="quotedtablecell"><p class="quoted">immediately quit rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;UNDO the last command&quot;</p></td><td class="quotedtablecell"><p class="quoted">false</p></td><td class="quotedtablecell"><p class="quoted">&quot;undo&quot;</p></td><td class="quotedtablecell"><p class="quoted">immediately undo rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>Because this is a table, we may alter the behavior by changing entries or continuing the table. <span class="boldface">Finality</span> shows how we might take out the option to UNDO the last command, for instance.</p>
<p>Using an ending phrase that includes &quot;finally&quot; tells Inform to include the options that are marked &quot;only if victorious&quot;. One common use is to let the player read some special bit of additional text, perhaps describing easter eggs he might have missed in the story or presenting some authorial notes. <span class="boldface">Xerxes</span> demonstrates a simple AMUSING command to read final information, while <span class="boldface">Jamaica 1688</span> shows how to add completely new elements to the list of options.</p>
<p>Old-school adventures expected their adventurers to die early and die often. <span class="boldface">Labyrinth of Ghosts</span> shows how the residue of such past attempts can be preserved into subsequent attempts, using an external file. <span class="boldface">Big Sky Country</span> shows how a player can be resurrected by, let us say, some beneficent god, so that a player can even die more than once in the same attempt.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "383: Jamaica 1688" "e264" -->
<a id="e264"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example264'); return false;"><b>383</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example264'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Jamaica 1688</span></b></a><br />Adding a feature to the final question after victory, so that the player can choose to reveal notes about items in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc324.html#e264"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example264" style="display: none;">
<p>The options offered to the player at the end of the game are listed in the Table of Final Question Options, which means that we can add to them simply by continuing the table; what's more, the table gives us the opportunity to create a &quot;final response rule&quot;, a rule that the game should follow in order to parse the player's input at this point.</p>
<p>So, for instance, if we wanted the player to be allowed to ask for notes about any of the rooms, characters, or objects in a historical game:</p>
<!-- START CODE "c16307_264" -->
<a id="c16307_264"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Jamaica 1688[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Table of Final Question Options (continued)[=0x000A=]final question wording[=0x0009=]only if victorious[=0x0009=]topic[=0x0009=]final response rule[=0x0009=]final response activity[=0x000A=][=0x0022=]REVEAL the inspiration for something or somewhere[=0x0022=][=0x0009=]true[=0x0009=][=0x0022=]reveal [any thing][=0x0022=][=0x0009=]investigate something rule[=0x0009=]--[=0x000A=]--[=0x0009=]true[=0x0009=][=0x0022=]reveal [any room][=0x0022=][=0x0009=]investigate something rule[=0x0009=]--[=0x000A=][=0x000A=]This is the investigate something rule:[=0x000A=][=0x0009=]repeat through the Table of Footnotey Stuff:[=0x000A=][=0x0009=][=0x0009=]if the player[=0x0027=]s command matches the topic entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][revelation entry][paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=]I[=0x0027=]m afraid I have no revelation to vouchsafe there.[=0x0022=][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Upper Deck is a room. Lucius is a man in the Upper Deck.[=0x000A=][=0x000A=]The maximum score is 501.[=0x000A=][=0x000A=]When play begins: now the score is 501; end the story finally.[=0x000A=][=0x000A=]Table of Footnotey Stuff[=0x000A=]topic[=0x0009=]revelation[=0x000A=][=0x0022=]reveal [Lucius][=0x0022=][=0x0009=][=0x0022=]Lucius is based on a historical buccaneer who sailed with William Dampier. The original did carry a Greek New Testament, from which he read aloud when the men were stranded in the jungles near Panama.[=0x0022=][=0x000A=][=0x0022=]reveal [Upper Deck][=0x0022=][=0x0009=][=0x0022=]The Callisto is a simplified and tidied representation of a pirate sloop ca. 1688.[=0x0022=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Jamaica 1688&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16308_264" -->
<a id="c16308_264"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16309_264" -->
<a id="c16309_264"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16310_264" -->
<a id="c16310_264"></a><blockquote class="code"><p class="quoted">
Table of Final Question Options (continued)
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">final question wording</p></td><td class="quotedtablecell"><p class="quoted">only if victorious</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">final response rule</p></td><td class="quotedtablecell"><p class="quoted">final response activity</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;REVEAL the inspiration for something or somewhere&quot;</p></td><td class="quotedtablecell"><p class="quoted">true</p></td><td class="quotedtablecell"><p class="quoted">&quot;reveal [any thing]&quot;</p></td><td class="quotedtablecell"><p class="quoted">investigate something rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">--</p></td><td class="quotedtablecell"><p class="quoted">true</p></td><td class="quotedtablecell"><p class="quoted">&quot;reveal [any room]&quot;</p></td><td class="quotedtablecell"><p class="quoted">investigate something rule</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16311_264" -->
<a id="c16311_264"></a><blockquote class="code"><p class="quoted">
This is the investigate something rule:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Footnotey Stuff:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player's command matches the topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[revelation entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;I'm afraid I have no revelation to vouchsafe there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16312_264" -->
<a id="c16312_264"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16313_264" -->
<a id="c16313_264"></a><blockquote class="code"><p class="quoted">
The Upper Deck is a room. Lucius is a man in the Upper Deck.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16314_264" -->
<a id="c16314_264"></a><blockquote class="code"><p class="quoted">
The maximum score is 501.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16315_264" -->
<a id="c16315_264"></a><blockquote class="code"><p class="quoted">
When play begins: now the score is 501; end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16316_264" -->
<a id="c16316_264"></a><blockquote class="code"><p class="quoted">
Table of Footnotey Stuff
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">revelation</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;reveal [Lucius]&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Lucius is based on a historical buccaneer who sailed with William Dampier. The original did carry a Greek New Testament, from which he read aloud when the men were stranded in the jungles near Panama.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;reveal [Upper Deck]&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;The Callisto is a simplified and tidied representation of a pirate sloop ca. 1688.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "384: Finality" "e322" -->
<a id="e322"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example322'); return false;"><b>384</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example322'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Finality</span></b></a><br />Not mentioning UNDO in the final set of options.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc324.html#e322"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example322" style="display: none;">
<p>By default, Inform reminds the player that he has the option of typing UNDO after a story-ending action. This is generally good practice, especially for the sake of novice players who might not be aware of this possibility otherwise, and might be frustrated by a loss they could easily step back from.</p>
<p>Just occasionally, though, we may decide that the player does not deserve any such notification:</p>
<!-- START CODE "c16317_322" -->
<a id="c16317_322"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Finality[=0x0022=][=0x000A=][=0x000A=]Cliff Edge is a room. [=0x0022=]This narrow strip overlooks a gorge many hundreds of feet deep, at whose bottom is a river of molten lava. The walls of the gorge are lined with poison-tipped spikes. Furthermore, the birds that inhabit this valley spit balls of fire. Good thing you[=0x0027=]re safe up here.[=0x0022=][=0x000A=][=0x000A=][The Table of Final Question Options determines what options are to be given to the player after the story ends. We can change what is mentioned there by altering the entries. (The example Jamaica 1688 explains this table in more detail, and demonstrates some other things that we might do with it.)][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]choose row with a final response rule of immediately undo rule in the Table of Final Question Options;[=0x000A=][=0x0009=]blank out the final question wording entry.[=0x000A=][=0x000A=]Instead of jumping:[=0x000A=][=0x0009=]say [=0x0022=]If you insist.[=0x0022=];[=0x000A=][=0x0009=]end the story.[=0x000A=][=0x000A=][And if we decided that we didn[=0x0027=]t want the player to be able to undo the command at all, we should add the use option][=0x000A=][=0x000A=]Use undo prevention.[=0x000A=][=0x000A=]Test me with [=0x0022=]jump[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Finality&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16318_322" -->
<a id="c16318_322"></a><blockquote class="code"><p class="quoted">
Cliff Edge is a room. &quot;This narrow strip overlooks a gorge many hundreds of feet deep, at whose bottom is a river of molten lava. The walls of the gorge are lined with poison-tipped spikes. Furthermore, the birds that inhabit this valley spit balls of fire. Good thing you're safe up here.&quot;
</p></blockquote>
<!-- END CODE -->
<p>The Table of Final Question Options determines what options are to be given to the player after the story ends. We can change what is mentioned there by altering the entries. (The example Jamaica 1688 explains this table in more detail, and demonstrates some other things that we might do with it.)</p>
<!-- START CODE "c16319_322" -->
<a id="c16319_322"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;choose row with a final response rule of immediately undo rule in the Table of Final Question Options;
<br />&#160;&#160;&#160;&#160;blank out the final question wording entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16320_322" -->
<a id="c16320_322"></a><blockquote class="code"><p class="quoted">
Instead of jumping:
<br />&#160;&#160;&#160;&#160;say &quot;If you insist.&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<p>And if we decided that we didn't want the player to be able to undo the command at all, we should add the use option</p>
<!-- START CODE "c16321_322" -->
<a id="c16321_322"></a><blockquote class="code"><p class="quoted">
Use undo prevention.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16322_322" -->
<a id="c16322_322"></a><blockquote class="code"><p class="quoted">
Test me with &quot;jump&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "385: Battle of Ridgefield" "e447" -->
<a id="e447"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example447'); return false;"><b>385</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example447'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Battle of Ridgefield</span></b></a><br />Completely replacing the endgame text and stopping the game without giving the player a chance to restart or restore.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc324.html#e447"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example447" style="display: none;">
<p>Occasionally, a piece of IF is sufficiently serious that it feels bathetic to offer the player the usual restore-restart-undo-quit options at the end. The following would replace &quot;*** You have died ***&quot; with a centered epitaph, then quit the game when the player hits a key.</p>
<p>This example relies on a standard extension to avoid any fancy programming:</p>
<!-- START CODE "c16323_447" -->
<a id="c16323_447"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Battle of Ridgefield[=0x0022=][=0x000A=][=0x000A=]Include Basic Screen Effects by Emily Short.[=0x000A=][=0x000A=]Ridgefield is a room.[=0x000A=][=0x000A=]Instead of doing something when the turn count is greater than 1: say [=0x0022=]Alas, you no longer have the strength.[=0x0022=]; end the story.[=0x000A=][=0x000A=]Rule for printing the player[=0x0027=]s obituary:[=0x000A=][=0x0009=]say paragraph break;[=0x000A=][=0x0009=]center [=0x0022=]In defense of American Independence[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]at the Battle of Ridgefield, April 27, 1777,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]died Eight Patriots who were laid in this ground,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Companioned by Sixteen British Soldiers,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Living, their enemies,[=0x0022=];[=0x000A=][=0x0009=]center [=0x0022=]Dying, their guests[=0x0022=];[=0x000A=][=0x0009=]say paragraph break;[=0x000A=][=0x0009=]wait for any key;[=0x000A=][=0x0009=]stop game abruptly;[=0x000A=][=0x0009=]rule succeeds.[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Battle of Ridgefield&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16324_447" -->
<a id="c16324_447"></a><blockquote class="code"><p class="quoted">
Include Basic Screen Effects by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16325_447" -->
<a id="c16325_447"></a><blockquote class="code"><p class="quoted">
Ridgefield is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16326_447" -->
<a id="c16326_447"></a><blockquote class="code"><p class="quoted">
Instead of doing something when the turn count is greater than 1: say &quot;Alas, you no longer have the strength.&quot;; end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16327_447" -->
<a id="c16327_447"></a><blockquote class="code"><p class="quoted">
Rule for printing the player's obituary:
<br />&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;center &quot;In defense of American Independence&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;at the Battle of Ridgefield, April 27, 1777,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;died Eight Patriots who were laid in this ground,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Companioned by Sixteen British Soldiers,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Living, their enemies,&quot;;
<br />&#160;&#160;&#160;&#160;center &quot;Dying, their guests&quot;;
<br />&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;wait for any key;
<br />&#160;&#160;&#160;&#160;stop game abruptly;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "386: Xerxes" "e140" -->
<a id="e140"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example140'); return false;"><b>386</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example140'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Xerxes</span></b></a><br />Offering the player a menu of things to read after winning the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc325.html#e140"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example140" style="display: none;">
<p>Building a menu is moderately tedious, so we will rely on the standard menu extensions provided. Thus:</p>
<!-- START CODE "c16328_140" -->
<a id="c16328_140"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Xerxes[=0x0022=][=0x000A=][=0x000A=]Include Basic Screen Effects by Emily Short. Include Menus by Emily Short.[=0x000A=][=0x000A=]Table of Amusing Matter[=0x000A=]title[=0x0009=]subtable[=0x0009=]description[=0x0009=]toggle[=0x000A=][=0x0022=]Cult Revisions[=0x0022=][=0x0009=]--[=0x0009=][=0x0022=]Did you try... [paragraph break]  banning the worship of Seth? [line break]  of Dionysus? [line break]  assigning all your priests to Re? [line break]  assigning male priests to Cybele? [line break]  assigning married priestesses to Hestia? [line break]  identifying one god as another (e.g., Isis and Hecate)? [line break]  identifying a mortal as a god (e.g., Alexander as Helios-Apollo)?[=0x0022=][=0x0009=]--[=0x000A=][=0x0022=]Military Revisions[=0x0022=][=0x0009=]--[=0x0009=][=0x0022=]Did you try... [paragraph break]  allying a Greek city-state with the Persians? (try [=0x003E=]MEDIZE) [line break]  playing Athens as a land-based power?[=0x0022=][=0x0009=]--[=0x000A=][=0x000A=]Rule for amusing a victorious player:[=0x000A=][=0x0009=]now the current menu is the Table of Amusing Matter;[=0x000A=][=0x0009=]now the current menu title is [=0x0022=]Things to Try[=0x0022=];[=0x000A=][=0x0009=]carry out the displaying activity;[=0x000A=][=0x0009=]clear the screen.[=0x000A=][=0x000A=][Omitting about a half million words from this rigorous and educational but nonetheless enthralling simulation of centuries of history, culture, and religion, we will skip directly to:][=0x000A=][=0x000A=]Athens is a room.[=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if the score is greater than 10000, end the story finally.[=0x000A=][=0x000A=]When play begins: now the score is 10001.[=0x000A=][=0x000A=]Test me with [=0x0022=]z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Xerxes&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16329_140" -->
<a id="c16329_140"></a><blockquote class="code"><p class="quoted">
Include Basic Screen Effects by Emily Short. Include Menus by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16330_140" -->
<a id="c16330_140"></a><blockquote class="code"><p class="quoted">
Table of Amusing Matter
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">title</p></td><td class="quotedtablecell"><p class="quoted">subtable</p></td><td class="quotedtablecell"><p class="quoted">description</p></td><td class="quotedtablecell"><p class="quoted">toggle</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;Cult Revisions&quot;</p></td><td class="quotedtablecell"><p class="quoted">--</p></td><td class="quotedtablecell"><p class="quoted">&quot;Did you try... [paragraph break]  banning the worship of Seth? [line break]  of Dionysus? [line break]  assigning all your priests to Re? [line break]  assigning male priests to Cybele? [line break]  assigning married priestesses to Hestia? [line break]  identifying one god as another (e.g., Isis and Hecate)? [line break]  identifying a mortal as a god (e.g., Alexander as Helios-Apollo)?&quot;</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;Military Revisions&quot;</p></td><td class="quotedtablecell"><p class="quoted">--</p></td><td class="quotedtablecell"><p class="quoted">&quot;Did you try... [paragraph break]  allying a Greek city-state with the Persians? (try &gt;MEDIZE) [line break]  playing Athens as a land-based power?&quot;</p></td><td class="quotedtablecell"><p class="quoted">--</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16331_140" -->
<a id="c16331_140"></a><blockquote class="code"><p class="quoted">
Rule for amusing a victorious player:
<br />&#160;&#160;&#160;&#160;now the current menu is the Table of Amusing Matter;
<br />&#160;&#160;&#160;&#160;now the current menu title is &quot;Things to Try&quot;;
<br />&#160;&#160;&#160;&#160;carry out the displaying activity;
<br />&#160;&#160;&#160;&#160;clear the screen.
</p></blockquote>
<!-- END CODE -->
<p>Omitting about a half million words from this rigorous and educational but nonetheless enthralling simulation of centuries of history, culture, and religion, we will skip directly to:</p>
<!-- START CODE "c16332_140" -->
<a id="c16332_140"></a><blockquote class="code"><p class="quoted">
Athens is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16333_140" -->
<a id="c16333_140"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16334_140" -->
<a id="c16334_140"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if the score is greater than 10000, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16335_140" -->
<a id="c16335_140"></a><blockquote class="code"><p class="quoted">
When play begins: now the score is 10001.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16336_140" -->
<a id="c16336_140"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "441: Labyrinth of Ghosts" "e122" -->
<a id="e122"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example122'); return false;"><b>441</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example122'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Labyrinth of Ghosts</span></b></a><br />Remembering the fates of all previous explorers of the labyrinth.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc385.html#e122"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example122" style="display: none;">
<p>A tradition among Nethack-like computer games of the old school is that a player's death in a given place leaves a ghost behind to haunt subsequent players. Information about past lives is sometimes stored in a &quot;bones file&quot;, and in this example we do exactly that, for a grievously unfair little dungeon.</p>
<p>To begin with, the labyrinth itself. We create a kind of value to remember possible means of death in these tunnels, and we assign a coordinate position in some grid to each location. (We do this because grid positions can safely be stored in tables saved out to external files, whereas room names cannot - they represent data which changes each time we amend the source.)</p>
<!-- START CODE "c16337_122" -->
<a id="c16337_122"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Labyrinth of Ghosts[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]A demise is a kind of value. The demises are drowned, buried by a rockfall, pierced by an arrow and slain. The latest demise is a demise that varies.[=0x000A=][=0x000A=]A grid location is a kind of value. (1,19) specifies a grid location. A room has a grid location called coordinates.[=0x000A=][=0x000A=]The Gateway is a room. [=0x0022=]For the foolhardy adventurer, the perilous labyrinth lies north, east or south.[=0x0022=] The coordinates are (6,6). The Tomb is east of the Gateway. The coordinates are (7,6). The Rockfall Cave is north of the Gateway. [=0x0022=]This partly fallen cave may perhaps extend further north.[=0x0022=] The coordinates are (6,5). Instead of going north in the Rockfall Cave, have the player buried by a rockfall. The Archery Canyon is south of the Gateway. [=0x0022=]No telling why this canyon is named after archery, but perhaps if you wait around you[=0x0027=]ll find out.[=0x0022=] The coordinates are (6,7). Instead of waiting in the Archery Canyon, have the player pierced by an arrow. The Rock Pool is east of the Tomb. The coordinates are (8,6). The cold mountain pool is in the Rock Pool. The cold pool is fixed in place. Instead of entering the cold mountain pool, have the player drowned.[=0x000A=][=0x000A=]Every turn when a random chance of 1 in 10 succeeds:[=0x000A=][=0x0009=]say [=0x0022=]A dwarf appears out of nowhere, and throws a nasty little knife.[=0x0022=];[=0x000A=][=0x0009=]have the player slain.[=0x000A=][=0x000A=][And as compensation for these hazards:][=0x000A=][=0x000A=]Some silver bars are in the Tomb. The emerald is in the Rock Pool. The platinum pyramid is in the Canyon.[=0x000A=][=0x000A=]Table of Point Values[=0x000A=]item [=0x0009=]  [=0x0009=]score[=0x000A=]silver bars[=0x0009=]3[=0x000A=]platinum pyramid[=0x0009=]10[=0x000A=]emerald[=0x0009=]4[=0x000A=][=0x000A=]Report taking an item listed in the Table of Point Values:[=0x000A=][=0x0009=]increase the score by the score entry;[=0x000A=][=0x0009=]blank out the whole row.[=0x000A=][=0x000A=][We are now ready for the actual undertaking. The Table of Ghostly Presences holds up to twenty death notices, and is initially blank. Deaths are sequentially numbered, and this number is stored in the sequence column.][=0x000A=][=0x000A=]Table of Ghostly Presences[=0x000A=]haunted position[=0x0009=]score at death[=0x0009=]turns at death[=0x0009=]manner of death[=0x0009=]sequence[=0x000A=]a grid location[=0x0009=]a number[=0x0009=]a number[=0x0009=]a demise[=0x0009=]a number[=0x000A=]with 19 blank rows.[=0x000A=][=0x000A=][As the story file starts up, we look to see if a ghosts file already exists. If one does, we load up the Table of Ghostly Presences with it: and if not, as will be the case the first time the player explores, we leave the table blank. We sort the table so that it has earlier deaths (lower sequence numbers) first.][=0x000A=][=0x000A=]The File of Ghosts is called [=0x0022=]ghosts[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Ghosts exists, read File of Ghosts into the Table of Ghostly Presences;[=0x000A=][=0x0009=]sort the Table of Ghostly Presences in sequence order.[=0x000A=][=0x000A=][How will ghosts manifest themselves? Because this is only a small example, we will simply tell the player that he senses something. If several ghosts are present in the same place, the most aggrieved (that is, the most recent) is sensed first...][=0x000A=][=0x000A=]After looking:[=0x000A=][=0x0009=]repeat through the Table of Ghostly Presences in reverse sequence order:[=0x000A=][=0x0009=][=0x0009=]if the haunted position entry is the coordinates of the location, say [=0x0022=]You sense the ghostly presence of an adventurer, [manner of death entry] with a score of [score at death entry] in [turns at death entry] turns.[=0x0022=][=0x000A=][=0x000A=][(For instance, [=0x0022=]You sense the ghostly presence of an adventurer, buried by a rockfall with a score of 10 in 5 turns.[=0x0022=]) That just leaves the rule for bumping off the player. When the Table is full, and there are already 20 ghosts, the one who died longest ago (with the lowest sequence count) is eliminated, and his row blanked out. (This will always be row 1 since we sorted the table in sequence order on reading it in.)][=0x000A=][=0x000A=]To have the player (sticky end - a demise):[=0x000A=][=0x0009=]let the new sequence number be 0;[=0x000A=][=0x0009=]repeat through the Table of Ghostly Presences:[=0x000A=][=0x0009=][=0x0009=]let S be the sequence entry;[=0x000A=][=0x0009=][=0x0009=]if S is greater than the new sequence number, let the new sequence number be S;[=0x000A=][=0x0009=]increment the new sequence number;[=0x000A=][=0x0009=]if the number of blank rows in the Table of Ghostly Presences is 0:[=0x000A=][=0x0009=][=0x0009=]choose row 1 in the Table of Ghostly Presences;[=0x000A=][=0x0009=][=0x0009=]blank out the whole row;[=0x000A=][=0x0009=]choose a blank row in the Table of Ghostly Presences;[=0x000A=][=0x0009=]now the sequence entry is the new sequence number;[=0x000A=][=0x0009=]now the manner of death entry is the sticky end;[=0x000A=][=0x0009=]now the turns at death entry is the turn count;[=0x000A=][=0x0009=]now the score at death entry is the score;[=0x000A=][=0x0009=]now the haunted position entry is the coordinates of the location;[=0x000A=][=0x0009=]write the File of Ghosts from the Table of Ghostly Presences;[=0x000A=][=0x0009=]now the latest demise is the sticky end;[=0x000A=][=0x0009=]end the story saying [=0x0022=]You have been [latest demise][=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Labyrinth of Ghosts&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16338_122" -->
<a id="c16338_122"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16339_122" -->
<a id="c16339_122"></a><blockquote class="code"><p class="quoted">
A demise is a kind of value. The demises are drowned, buried by a rockfall, pierced by an arrow and slain. The latest demise is a demise that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16340_122" -->
<a id="c16340_122"></a><blockquote class="code"><p class="quoted">
A grid location is a kind of value. (1,19) specifies a grid location. A room has a grid location called coordinates.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16341_122" -->
<a id="c16341_122"></a><blockquote class="code"><p class="quoted">
The Gateway is a room. &quot;For the foolhardy adventurer, the perilous labyrinth lies north, east or south.&quot; The coordinates are (6,6). The Tomb is east of the Gateway. The coordinates are (7,6). The Rockfall Cave is north of the Gateway. &quot;This partly fallen cave may perhaps extend further north.&quot; The coordinates are (6,5). Instead of going north in the Rockfall Cave, have the player buried by a rockfall. The Archery Canyon is south of the Gateway. &quot;No telling why this canyon is named after archery, but perhaps if you wait around you'll find out.&quot; The coordinates are (6,7). Instead of waiting in the Archery Canyon, have the player pierced by an arrow. The Rock Pool is east of the Tomb. The coordinates are (8,6). The cold mountain pool is in the Rock Pool. The cold pool is fixed in place. Instead of entering the cold mountain pool, have the player drowned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16342_122" -->
<a id="c16342_122"></a><blockquote class="code"><p class="quoted">
Every turn when a random chance of 1 in 10 succeeds:
<br />&#160;&#160;&#160;&#160;say &quot;A dwarf appears out of nowhere, and throws a nasty little knife.&quot;;
<br />&#160;&#160;&#160;&#160;have the player slain.
</p></blockquote>
<!-- END CODE -->
<p>And as compensation for these hazards:</p>
<!-- START CODE "c16343_122" -->
<a id="c16343_122"></a><blockquote class="code"><p class="quoted">
Some silver bars are in the Tomb. The emerald is in the Rock Pool. The platinum pyramid is in the Canyon.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16344_122" -->
<a id="c16344_122"></a><blockquote class="code"><p class="quoted">
Table of Point Values
<br />item 	  	score
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">silver bars</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">platinum pyramid</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">emerald</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16345_122" -->
<a id="c16345_122"></a><blockquote class="code"><p class="quoted">
Report taking an item listed in the Table of Point Values:
<br />&#160;&#160;&#160;&#160;increase the score by the score entry;
<br />&#160;&#160;&#160;&#160;blank out the whole row.
</p></blockquote>
<!-- END CODE -->
<p>We are now ready for the actual undertaking. The Table of Ghostly Presences holds up to twenty death notices, and is initially blank. Deaths are sequentially numbered, and this number is stored in the sequence column.</p>
<!-- START CODE "c16346_122" -->
<a id="c16346_122"></a><blockquote class="code"><p class="quoted">
Table of Ghostly Presences
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">haunted position</p></td><td class="quotedtablecell"><p class="quoted">score at death</p></td><td class="quotedtablecell"><p class="quoted">turns at death</p></td><td class="quotedtablecell"><p class="quoted">manner of death</p></td><td class="quotedtablecell"><p class="quoted">sequence</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">a grid location</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td><td class="quotedtablecell"><p class="quoted">a demise</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">with 19 blank rows.</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>As the story file starts up, we look to see if a ghosts file already exists. If one does, we load up the Table of Ghostly Presences with it: and if not, as will be the case the first time the player explores, we leave the table blank. We sort the table so that it has earlier deaths (lower sequence numbers) first.</p>
<!-- START CODE "c16347_122" -->
<a id="c16347_122"></a><blockquote class="code"><p class="quoted">
The File of Ghosts is called &quot;ghosts&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16348_122" -->
<a id="c16348_122"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;if the File of Ghosts exists, read File of Ghosts into the Table of Ghostly Presences;
<br />&#160;&#160;&#160;&#160;sort the Table of Ghostly Presences in sequence order.
</p></blockquote>
<!-- END CODE -->
<p>How will ghosts manifest themselves? Because this is only a small example, we will simply tell the player that he senses something. If several ghosts are present in the same place, the most aggrieved (that is, the most recent) is sensed first...</p>
<!-- START CODE "c16349_122" -->
<a id="c16349_122"></a><blockquote class="code"><p class="quoted">
After looking:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Ghostly Presences in reverse sequence order:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the haunted position entry is the coordinates of the location, say &quot;You sense the ghostly presence of an adventurer, [manner of death entry] with a score of [score at death entry] in [turns at death entry] turns.&quot;
</p></blockquote>
<!-- END CODE -->
<p>(For instance, &quot;You sense the ghostly presence of an adventurer, buried by a rockfall with a score of 10 in 5 turns.&quot;) That just leaves the rule for bumping off the player. When the Table is full, and there are already 20 ghosts, the one who died longest ago (with the lowest sequence count) is eliminated, and his row blanked out. (This will always be row 1 since we sorted the table in sequence order on reading it in.)</p>
<!-- START CODE "c16350_122" -->
<a id="c16350_122"></a><blockquote class="code"><p class="quoted">
To have the player (sticky end - a demise):
<br />&#160;&#160;&#160;&#160;let the new sequence number be 0;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Ghostly Presences:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let S be the sequence entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if S is greater than the new sequence number, let the new sequence number be S;
<br />&#160;&#160;&#160;&#160;increment the new sequence number;
<br />&#160;&#160;&#160;&#160;if the number of blank rows in the Table of Ghostly Presences is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row 1 in the Table of Ghostly Presences;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;choose a blank row in the Table of Ghostly Presences;
<br />&#160;&#160;&#160;&#160;now the sequence entry is the new sequence number;
<br />&#160;&#160;&#160;&#160;now the manner of death entry is the sticky end;
<br />&#160;&#160;&#160;&#160;now the turns at death entry is the turn count;
<br />&#160;&#160;&#160;&#160;now the score at death entry is the score;
<br />&#160;&#160;&#160;&#160;now the haunted position entry is the coordinates of the location;
<br />&#160;&#160;&#160;&#160;write the File of Ghosts from the Table of Ghostly Presences;
<br />&#160;&#160;&#160;&#160;now the latest demise is the sticky end;
<br />&#160;&#160;&#160;&#160;end the story saying &quot;You have been [latest demise]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Strictly speaking we ought to worry that after 2,147,483,647 deaths, the sequence numbers would grow too large to store in a single value, and then the sequence of ghosts will be erratic. But it seems unlikely that anyone will play this example 2.1 billion times.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "138: Big Sky Country" "e239" -->
<a id="e239"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example239'); return false;"><b>138</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example239'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Big Sky Country</span></b></a><br />Allowing the player to continue play after a fatal accident, but penalizing him by scattering his possessions around the game map.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc138.html#e239"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example239" style="display: none;">
<p>Some older games allowed the player to be resurrected after a death, but punished him by distributing his possessions far and wide. Here we emulate that effect.</p>
<!-- START CODE "c16351_239" -->
<a id="c16351_239"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Big Sky Country[=0x0022=][=0x000A=][=0x000A=]Use scoring.[=0x000A=][=0x000A=]When play begins: say [=0x0022=]There[=0x0027=]s a bit of a drive over from Anaconda, Montana, and then through a couple or three ghost towns, but finally you find what you[=0x0027=]re looking for, and strike out on foot...[=0x0022=][=0x000A=][=0x000A=]Entrance to Devil[=0x0027=]s Canyon is a room. [=0x0022=]You are at the top of a steep road, which proceeds down into the canyon proper.[=0x0022=] A sign is in Devil[=0x0027=]s Canyon. It is fixed in place. [=0x0022=]An ominous sign has been put up by the local sheriff[=0x0027=]s office.[=0x0022=] The description is [=0x0022=]PROCEED AT OWN RISK - NO RESCUES![=0x0022=][=0x000A=][=0x000A=]Instead of going down when a random chance of 1 in 3 succeeds:[=0x000A=][=0x0009=]say [=0x0022=]Whoooops, your footing is not as secure as you thought...[=0x0022=];[=0x000A=][=0x0009=]end the story.[=0x000A=][=0x000A=]Dusty Path is below Entrance. [=0x0022=]A dusty path, with grey-brown thorny bushes on either side. Immediately to your right is a sheer drop; far below you can see the rusting remains of a Model T that some fool tried to drive by here.[=0x0022=][=0x000A=][=0x000A=]Hairpin is below Dusty Path. [=0x0022=]A sharp bend in the road, doubling back down towards the bottom of the canyon. Just north of here there is also a small cavern of some kind[if the stick pin is in the cavern], which attracts your eye with some glittery thing[end if].[=0x0022=][=0x000A=][=0x000A=]The Cavern is north of Hairpin. [=0x0022=]Really not much more than a little hollow in the side of the canyon.[=0x0022=] In the cavern are a snake and a diamond stick pin. The snake is an animal. The description of the snake is [=0x0022=]You[=0x0027=]re no expert, but it looks like a rattler.[=0x0022=][=0x000A=][=0x000A=]Instead of taking the diamond stick pin in the presence of the snake: say [=0x0022=]Turns out the snake is partial to that there pin, and takes exception to your intending to make off with it.[=0x0022=]; end the story.[=0x000A=][=0x000A=][In a fuller implementation of this game, we might make it possible to get by the snake, but in this version, it[=0x0027=]s just going to remain troublesome.][=0x000A=][=0x000A=]Crooked Path is below Hairpin. [=0x0022=]You[=0x0027=]re about two thirds of the way down to the bottom of the cavern at this point.[=0x0022=][=0x000A=][=0x000A=]At the Spot is below Crooked Path. [=0x0022=]This[=0x0027=]ll be it: a bare patch of ground that might as well have an X painted right on it.[=0x0022=][=0x000A=][=0x000A=]Rule for supplying a missing noun while digging:[=0x000A=][=0x0009=]now noun is the location.[=0x000A=][=0x000A=]Understand [=0x0022=]dig[=0x0022=] or [=0x0022=]dig hole/here[=0x0022=] or [=0x0022=]dig in ground/dirt/earth[=0x0022=] as digging. Digging is an action applying to one thing.[=0x000A=][=0x000A=]Instead of digging at the spot:[=0x000A=][=0x0009=]say [=0x0022=]You dig and dig, and after a half hour or so, sure enough, you do turn up a big box of gold! You[=0x0027=]re going to be richer than God and Bill Gates put together.[=0x0022=];[=0x000A=][=0x0009=]increase the score by 5;[=0x000A=][=0x0009=]end the story finally.[=0x000A=][=0x000A=]Instead of digging at the spot when the player does not carry the shovel:[=0x000A=][=0x0009=]say [=0x0022=]What, without your shovel? That won[=0x0027=]t work too well.[=0x0022=][=0x000A=][=0x000A=]The player carries a walking stick. The player wears a hat, a whistle, and a daypack. The daypack contains a mylar blanket, a granola bar, a cellular phone, a water bottle, a folding shovel, and a photocopied map. The granola bar is edible. Instead of drinking the water, say [=0x0022=]You quench your thirst, for the time being.[=0x0022=] The description of the map is [=0x0022=]The map shows the winding path of Devil[=0x0027=]s Canyon, with a large X down by the south end. That would be where your uncle Jesse buried the gold from the train robbery.[=0x0022=][=0x000A=][=0x000A=]The maximum score is 5.[=0x000A=][=0x000A=]When play ends when the story has not ended finally:[=0x000A=][=0x0009=]say [=0x0022=]Oh dear, that ought to be fatal! However, if you like I can get you out of it...[=0x000A=][=0x000A=][=0x0009=]Shall I? [=0x003E=][=0x0022=];[=0x000A=][=0x0009=]if the player consents:[=0x000A=][=0x0009=][=0x0009=]repeat with item running through things had by the player:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]move the item to a random visited room;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]A strong wind picks you up and sets you back at [the location], though perhaps minus a few of your things.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]resume the story;[=0x000A=][=0x0009=][=0x0009=]try looking.[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Big Sky Country&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16352_239" -->
<a id="c16352_239"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16353_239" -->
<a id="c16353_239"></a><blockquote class="code"><p class="quoted">
When play begins: say &quot;There's a bit of a drive over from Anaconda, Montana, and then through a couple or three ghost towns, but finally you find what you're looking for, and strike out on foot...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16354_239" -->
<a id="c16354_239"></a><blockquote class="code"><p class="quoted">
Entrance to Devil's Canyon is a room. &quot;You are at the top of a steep road, which proceeds down into the canyon proper.&quot; A sign is in Devil's Canyon. It is fixed in place. &quot;An ominous sign has been put up by the local sheriff's office.&quot; The description is &quot;PROCEED AT OWN RISK - NO RESCUES!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16355_239" -->
<a id="c16355_239"></a><blockquote class="code"><p class="quoted">
Instead of going down when a random chance of 1 in 3 succeeds:
<br />&#160;&#160;&#160;&#160;say &quot;Whoooops, your footing is not as secure as you thought...&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16356_239" -->
<a id="c16356_239"></a><blockquote class="code"><p class="quoted">
Dusty Path is below Entrance. &quot;A dusty path, with grey-brown thorny bushes on either side. Immediately to your right is a sheer drop; far below you can see the rusting remains of a Model T that some fool tried to drive by here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16357_239" -->
<a id="c16357_239"></a><blockquote class="code"><p class="quoted">
Hairpin is below Dusty Path. &quot;A sharp bend in the road, doubling back down towards the bottom of the canyon. Just north of here there is also a small cavern of some kind[if the stick pin is in the cavern], which attracts your eye with some glittery thing[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16358_239" -->
<a id="c16358_239"></a><blockquote class="code"><p class="quoted">
The Cavern is north of Hairpin. &quot;Really not much more than a little hollow in the side of the canyon.&quot; In the cavern are a snake and a diamond stick pin. The snake is an animal. The description of the snake is &quot;You're no expert, but it looks like a rattler.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16359_239" -->
<a id="c16359_239"></a><blockquote class="code"><p class="quoted">
Instead of taking the diamond stick pin in the presence of the snake: say &quot;Turns out the snake is partial to that there pin, and takes exception to your intending to make off with it.&quot;; end the story.
</p></blockquote>
<!-- END CODE -->
<p>In a fuller implementation of this game, we might make it possible to get by the snake, but in this version, it's just going to remain troublesome.</p>
<!-- START CODE "c16360_239" -->
<a id="c16360_239"></a><blockquote class="code"><p class="quoted">
Crooked Path is below Hairpin. &quot;You're about two thirds of the way down to the bottom of the cavern at this point.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16361_239" -->
<a id="c16361_239"></a><blockquote class="code"><p class="quoted">
At the Spot is below Crooked Path. &quot;This'll be it: a bare patch of ground that might as well have an X painted right on it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16362_239" -->
<a id="c16362_239"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing noun while digging:
<br />&#160;&#160;&#160;&#160;now noun is the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16363_239" -->
<a id="c16363_239"></a><blockquote class="code"><p class="quoted">
Understand &quot;dig&quot; or &quot;dig hole/here&quot; or &quot;dig in ground/dirt/earth&quot; as digging. Digging is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16364_239" -->
<a id="c16364_239"></a><blockquote class="code"><p class="quoted">
Instead of digging at the spot:
<br />&#160;&#160;&#160;&#160;say &quot;You dig and dig, and after a half hour or so, sure enough, you do turn up a big box of gold! You're going to be richer than God and Bill Gates put together.&quot;;
<br />&#160;&#160;&#160;&#160;increase the score by 5;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16365_239" -->
<a id="c16365_239"></a><blockquote class="code"><p class="quoted">
Instead of digging at the spot when the player does not carry the shovel:
<br />&#160;&#160;&#160;&#160;say &quot;What, without your shovel? That won't work too well.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16366_239" -->
<a id="c16366_239"></a><blockquote class="code"><p class="quoted">
The player carries a walking stick. The player wears a hat, a whistle, and a daypack. The daypack contains a mylar blanket, a granola bar, a cellular phone, a water bottle, a folding shovel, and a photocopied map. The granola bar is edible. Instead of drinking the water, say &quot;You quench your thirst, for the time being.&quot; The description of the map is &quot;The map shows the winding path of Devil's Canyon, with a large X down by the south end. That would be where your uncle Jesse buried the gold from the train robbery.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16367_239" -->
<a id="c16367_239"></a><blockquote class="code"><p class="quoted">
The maximum score is 5.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16368_239" -->
<a id="c16368_239"></a><blockquote class="code"><p class="quoted">
When play ends when the story has not ended finally:
<br />&#160;&#160;&#160;&#160;say &quot;Oh dear, that ought to be fatal! However, if you like I can get you out of it...
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c16369_239" -->
<a id="c16369_239"></a><blockquote class="code"><p class="quoted">
&#160;&#160;&#160;&#160;Shall I? &gt;&quot;;
<br />&#160;&#160;&#160;&#160;if the player consents:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through things had by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the item to a random visited room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;A strong wind picks you up and sets you back at [the location], though perhaps minus a few of your things.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resume the story;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try looking.
</p></blockquote>
<!-- END CODE -->
<p>&quot;If the player consents&quot; is just a convenient way to ask a yes/no question that the player must answer before going on with the game.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc95.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc97.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
