<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>20.7. Making new text with text substitutions</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Making new text with text substitutions" -->
<!-- SEARCH SECTION "20.7" -->
<!-- SEARCH SORT "000-020-007-000" -->
<!-- START IGNORE 348 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc348.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 20: Advanced Text</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc350.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง20.7. Making new text with text substitutions</p>
<p>Substitutions are most often used just for printing, like so:</p>
<!-- START CODE "c8177" -->
<a id="c8177"></a><blockquote class="code"><p class="quoted">
say &quot;The clock reads [time of day].&quot;;
</p></blockquote>
<!-- END CODE -->
<p>But they can also produce text which can be stored up or used in other ways. For example, defining</p>
<!-- START CODE "c8178" -->
<a id="c8178"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>makes</p>
<!-- START CODE "c8179" -->
<a id="c8179"></a><blockquote class="code"><p class="quoted">
let the Gerard Kenny reference be &quot;NewYork&quot; doubled;
</p></blockquote>
<!-- END CODE -->
<p>set this temporary variable to &quot;NewYorkNewYork&quot;.</p>
<p>There is, however, a subtlety here. A text with a substitution in it, like:</p>
<!-- START CODE "c8180" -->
<a id="c8180"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads [time of day].&quot;
</p></blockquote>
<!-- END CODE -->
<p>is always waiting to be substituted, that is, to become something like:</p>
<!-- START CODE "c8181" -->
<a id="c8181"></a><blockquote class="code"><p class="quoted">
&quot;The clock reads 11:12 AM.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If all we do with text is to print it, there's nothing to worry about. But if we're storing it up, especially for multiple turns, there are ambiguities. For example, suppose we're changing the look of the black status line bar at the top of the text window:</p>
<!-- START CODE "c8182" -->
<a id="c8182"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>Just copying &quot;[time of day]&quot; to the &quot;left hand status line&quot; variable doesn't make it substitute - which is just as well, or the top of the screen would perpetually show &quot;9:00 AM&quot;.</p>
<p>On the other hand, looking back at the phrase example:</p>
<!-- START CODE "c8183" -->
<a id="c8183"></a><blockquote class="code"><p class="quoted">
To decide what text is (T - text) doubled:
<br />&#160;&#160;&#160;&#160;decide on &quot;[T][T]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>&quot;[T][T]&quot; is substituted immediately it's formed. That's also a good thing, because &quot;T&quot; loses its meaning the moment the phrase finishes, which would make &quot;[T][T]&quot; meaningless anywhere else.</p>
<p>What's going on here is this: Inform substitutes text immediately if it contains references to a temporary value such as &quot;T&quot;, and otherwise only if it needs to access the contents. This is why &quot;[time of day]&quot; isn't substituted until we need to print it out (or, say, access the third character): &quot;time of day&quot; is a value which always exists, not a temporary one.</p>
<p>Using the adjectives &quot;substituted&quot; and &quot;unsubstituted&quot;, it's always possible to test whether a given text is in either state, should this ever be useful. For example,</p>
<!-- START CODE "c8184" -->
<a id="c8184"></a><blockquote class="code"><p class="quoted">
now the left hand status line is &quot;[time of day]&quot;;
<br />if the left hand status line is unsubstituted, say &quot;Yes!&quot;;
</p></blockquote>
<!-- END CODE -->
<p>will say &quot;Yes!&quot;: the LHSL is like a bomb waiting to go off. Speaking of which:</p>
<!-- START CODE "c8185" -->
<a id="c8185"></a><blockquote class="code"><p class="quoted">
The player is holding a temporal bomb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8186" -->
<a id="c8186"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Clock reads: [time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8187" -->
<a id="c8187"></a><blockquote class="code"><p class="quoted">
After dropping the temporal bomb:
<br />&#160;&#160;&#160;&#160;now the left hand status line is the substituted form of the left hand status line;
<br />&#160;&#160;&#160;&#160;say &quot;Time itself is now broken. Well done.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This is making use of:</p>
<!-- START PHRASE "defn313" -->
<div class="definition"><a id="defn313"></a><p class="defnprototype"><b>substituted form of </b>(text)<b> ... text</b></p>
<!-- END PHRASE -->
<!-- definition of ph_subform -->

<p>This takes a text and makes substitution occur immediately. For example,</p>
<!-- START CODE "c8188" -->
<a id="c8188"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;time of death, [time of day]&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces something like &quot;time of death, 9:15 AM&quot; rather than &quot;time of death, [time of day]&quot;. It's entirely legal to apply this to text which never had any substitutions in, so</p>
<!-- START CODE "c8189" -->
<a id="c8189"></a><blockquote class="code"><p class="quoted">
substituted form of &quot;balloon&quot;
</p></blockquote>
<!-- END CODE -->
<p>produces &quot;balloon&quot;.</p>

<!-- end definition -->
</div>

<p>Note that there's no analogous phrase for &quot;unsubstituted form of...&quot;, because once text has substituted, there's no way to go back.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "416: Mirror, Mirror" "e7" -->
<a id="e7"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example7'); return false;"><b>416</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example7'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mirror, Mirror</span></b></a><br />The sorcerer's mirror can, when held up high, form an impression of its surroundings which it then preserves.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc79.html#e7"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example7" style="display: none;">
<!-- START CODE "c8190_7" -->
<a id="c8190_7"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Mirror, Mirror[=0x0022=][=0x000A=][=0x000A=]The Sorcerer[=0x0027=]s Workshop is a room. [=0x0022=]The sorcerer[=0x0027=]s den is a dusty, whispering place. A grandfather clock with skeletal hands reads [the time of day in words]. The floorboards are stained where that porridge just wouldn[=0x0027=]t come out.[=0x0022=][=0x000A=][=0x000A=]The Apprentice[=0x0027=]s Pantry is east of the Workshop. [=0x0022=]This is where the aproned apprentice traditionally makes the camomile tea, cleans out the jackdaw cages and furtively examines purloined artefacts.[=0x0022=][=0x000A=][=0x000A=]When play begins: erase the mirror.[=0x000A=][=0x000A=]The player carries a magic mirror. The magic mirror has a text called the mirror vision.[=0x000A=][=0x000A=]To erase the mirror: now mirror vision of the mirror is [=0x0022=]The mirror is polished clean, and has no impression upon it.[=0x0022=][=0x000A=][=0x000A=]To say current room description: try looking.[=0x000A=]To expose the mirror:[=0x000A=][=0x0009=]say [=0x0022=]The mirror shines momentarily with a dazzling light.[paragraph break][=0x0022=];[=0x000A=][=0x0009=]now mirror vision of the mirror is the substituted form of [=0x0022=]The hazy image in the mirror preserves a past sight:[line break][current room description]All is distorted and yet living, as though the past and present are coterminous in the mirror.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]hold up [something preferably held][=0x0022=] or [=0x0022=]hold [something preferably held] up[=0x0022=] as holding aloft. Holding aloft is an action applying to one carried thing. Report holding aloft: say [=0x0022=]You hold [the noun] aloft.[=0x0022=][=0x000A=][=0x000A=]Instead of rubbing the mirror: erase the mirror; try examining the mirror. Instead of holding aloft the mirror: expose the mirror.[=0x000A=][=0x000A=]The description of the mirror is [=0x0022=][mirror vision of the mirror][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]look / examine mirror / hold up mirror / z / look / x mirror / rub mirror / east / hold mirror up / west / x mirror[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Mirror, Mirror&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8191_7" -->
<a id="c8191_7"></a><blockquote class="code"><p class="quoted">
The Sorcerer's Workshop is a room. &quot;The sorcerer's den is a dusty, whispering place. A grandfather clock with skeletal hands reads [the time of day in words]. The floorboards are stained where that porridge just wouldn't come out.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8192_7" -->
<a id="c8192_7"></a><blockquote class="code"><p class="quoted">
The Apprentice's Pantry is east of the Workshop. &quot;This is where the aproned apprentice traditionally makes the camomile tea, cleans out the jackdaw cages and furtively examines purloined artefacts.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8193_7" -->
<a id="c8193_7"></a><blockquote class="code"><p class="quoted">
When play begins: erase the mirror.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8194_7" -->
<a id="c8194_7"></a><blockquote class="code"><p class="quoted">
The player carries a magic mirror. The magic mirror has a text called the mirror vision.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8195_7" -->
<a id="c8195_7"></a><blockquote class="code"><p class="quoted">
To erase the mirror: now mirror vision of the mirror is &quot;The mirror is polished clean, and has no impression upon it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8196_7" -->
<a id="c8196_7"></a><blockquote class="code"><p class="quoted">
To say current room description: try looking.
<br />To expose the mirror:
<br />&#160;&#160;&#160;&#160;say &quot;The mirror shines momentarily with a dazzling light.[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;now mirror vision of the mirror is the substituted form of &quot;The hazy image in the mirror preserves a past sight:[line break][current room description]All is distorted and yet living, as though the past and present are coterminous in the mirror.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8197_7" -->
<a id="c8197_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;hold up [something preferably held]&quot; or &quot;hold [something preferably held] up&quot; as holding aloft. Holding aloft is an action applying to one carried thing. Report holding aloft: say &quot;You hold [the noun] aloft.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8198_7" -->
<a id="c8198_7"></a><blockquote class="code"><p class="quoted">
Instead of rubbing the mirror: erase the mirror; try examining the mirror. Instead of holding aloft the mirror: expose the mirror.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8199_7" -->
<a id="c8199_7"></a><blockquote class="code"><p class="quoted">
The description of the mirror is &quot;[mirror vision of the mirror]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8200_7" -->
<a id="c8200_7"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / examine mirror / hold up mirror / z / look / x mirror / rub mirror / east / hold mirror up / west / x mirror&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "417: Identity Theft" "e376" -->
<a id="e376"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example376'); return false;"><b>417</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example376'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Identity Theft</span></b></a><br />Allowing the player to enter a name to be used for the player character during the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc24.html#e376"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example376" style="display: none;">
<p>Let's say we want to allow the player to enter any name he likes for his character. Moreover, we want to reject very long names (which are likely to be mistakes anyway), and we want to extract the player's chosen first name from the rest.</p>
<!-- START CODE "c8201_376" -->
<a id="c8201_376"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Identity Theft[=0x0022=][=0x000A=][=0x000A=]The player[=0x0027=]s forename is a text that varies. The player[=0x0027=]s full name is a text that varies.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=].[=0x000A=][=0x000A=]To decide whether collecting names:[=0x000A=][=0x0009=]if the command prompt is [=0x0022=]What is your name? [=0x003E=] [=0x0022=], yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![paragraph break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=][We also want to postpone the proper beginning of the game until we[=0x0027=]ve gotten the name:][=0x000A=][=0x000A=]Instead of looking when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for printing the banner text when collecting names: do nothing.[=0x000A=][=0x000A=]Rule for constructing the status line when collecting names: do nothing.[=0x000A=][=0x000A=]Your Bedroom is a room. The printed name of Your Bedroom is [=0x0022=][player[=0x0027=]s forename][=0x0027=]s Bedroom[=0x0022=].[=0x000A=][=0x000A=]The player carries a letter. The description of the letter is [=0x0022=]Dear [player[=0x0027=]s full name], [paragraph break]You have won the Norwegian Daily Lottery! ...[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Identity Theft&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8202_376" -->
<a id="c8202_376"></a><blockquote class="code"><p class="quoted">
The player's forename is a text that varies. The player's full name is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8203_376" -->
<a id="c8203_376"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;What is your name? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8204_376" -->
<a id="c8204_376"></a><blockquote class="code"><p class="quoted">
To decide whether collecting names:
<br />&#160;&#160;&#160;&#160;if the command prompt is &quot;What is your name? &gt; &quot;, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8205_376" -->
<a id="c8205_376"></a><blockquote class="code"><p class="quoted">
After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the player's command;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's command;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]![paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<p>We also want to postpone the proper beginning of the game until we've gotten the name:</p>
<!-- START CODE "c8206_376" -->
<a id="c8206_376"></a><blockquote class="code"><p class="quoted">
Instead of looking when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8207_376" -->
<a id="c8207_376"></a><blockquote class="code"><p class="quoted">
Rule for printing the banner text when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8208_376" -->
<a id="c8208_376"></a><blockquote class="code"><p class="quoted">
Rule for constructing the status line when collecting names: do nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8209_376" -->
<a id="c8209_376"></a><blockquote class="code"><p class="quoted">
Your Bedroom is a room. The printed name of Your Bedroom is &quot;[player's forename]'s Bedroom&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8210_376" -->
<a id="c8210_376"></a><blockquote class="code"><p class="quoted">
The player carries a letter. The description of the letter is &quot;Dear [player's full name], [paragraph break]You have won the Norwegian Daily Lottery! ...&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we are compiling for Glulx, this is enough to capture not only the player's name but also the capitalization he uses.</p>
<p>If we are compiling for the Z-machine, the player's input will unfortunately be reduced to lower case before we can inspect it. If we would like by default to capitalize the first letter of each word of the name, we might substitute the following after reading a command rule:</p>
<!-- START CODE "c8211_376" -->
<a id="c8211_376"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('After reading a command when collecting names:[=0x000A=][=0x0009=]if the number of words in the player[=0x0027=]s command is greater than 5:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][paragraph break]Who are you, a member of the British royal family? No one has that many names. Let[=0x0027=]s try this again.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]now the player[=0x0027=]s full name is the substituted form of [=0x0022=][the player[=0x0027=]s command in title case][=0x0022=];[=0x000A=][=0x0009=]now the player[=0x0027=]s forename is word number 1 in the player[=0x0027=]s full name;[=0x000A=][=0x0009=]now the command prompt is [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]Hi, [player[=0x0027=]s forename]![paragraph break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][banner text][=0x0022=];[=0x000A=][=0x0009=]move the player to the location;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> After reading a command when collecting names:
<br />&#160;&#160;&#160;&#160;if the number of words in the player's command is greater than 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[paragraph break]Who are you, a member of the British royal family? No one has that many names. Let's try this again.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;now the player's full name is the substituted form of &quot;[the player's command in title case]&quot;;
<br />&#160;&#160;&#160;&#160;now the player's forename is word number 1 in the player's full name;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;&gt;&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;Hi, [player's forename]![paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[banner text]&quot;;
<br />&#160;&#160;&#160;&#160;move the player to the location;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "418: The Cow Exonerated" "e160" -->
<a id="e160"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example160'); return false;"><b>418</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example160'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Cow Exonerated</span></b></a><br />Creating a class of matches that burn for a time and then go out, with elegant reporting when several matches go out at once.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc87.html#e160"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example160" style="display: none;">
<p>Here we create a class of matches that can be used to burn other objects. Our objectives are as follow:</p>
<p>Burned objects other than matches should be removed from play instantly (just as edible objects are instantly eaten). We could give everything its own burning duration, but that complicates matters and allows for fire to spread from one object to another; for an example of how to do that, see the example &quot;In Fire or in Flood&quot;.</p>
<p>Matches should be described to show whether they are burning or extinguished, and when the parser chooses one of several identical matches, it should make very clear which match it has selected.</p>
<p>The game must sensibly select and, if necessary, automatically light new matches to carry out a &gt;BURN THING command.</p>
<p>The matches must burn for a set number of turns before going out, never to be used again.</p>
<p>And finally, the part for which the text will be useful: when several matches go out in the same turn, we want the game to print</p>
<!-- START CODE "c8212_160" -->
<a id="c8212_160"></a><blockquote class="code"><p class="quoted">
Four matches go out.
</p></blockquote>
<!-- END CODE -->
<p>rather than</p>
<!-- START CODE "c8213_160" -->
<a id="c8213_160"></a><blockquote class="code"><p class="quoted">
A match goes out.
<br />A match goes out.
<br />A match goes out.
<br />A match goes out.
</p></blockquote>
<!-- END CODE -->
<p>This last function appears down in Section 3, if we wish to skip ahead and look at it.</p>
<!-- START CODE "c8214_160" -->
<a id="c8214_160"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]The Cow Exonerated[=0x0022=][=0x000A=][=0x000A=]Section 1 - Simple Burning[=0x000A=][=0x000A=]Understand the commands [=0x0022=]light[=0x0022=] and [=0x0022=]burn[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [something] with [strikable-match][=0x0022=] as burning it with. Understand [=0x0022=]burn [something] with [something preferably held][=0x0022=] as burning it with. Burning it with is an action applying to one thing and one carried thing.[=0x000A=][=0x000A=]Understand the command [=0x0022=]light[=0x0022=] as [=0x0022=]burn[=0x0022=].[=0x000A=][=0x000A=]A thing can be flammable or impervious. A thing is usually impervious.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only with flaming matches rule):[=0x000A=][=0x0009=]if the second noun is not a strikable-match, say [=0x0022=]You can only light things with matches.[=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is not flaming, say [=0x0022=][The second noun] needs to be burning first.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only flammable things rule):[=0x000A=][=0x0009=]if the noun is impervious, say [=0x0022=][The noun] cannot be burned.[=0x0022=] instead.[=0x000A=][=0x000A=]Check burning something with something (this is the burn only things not held rule):[=0x000A=][=0x0009=]say [=0x0022=][one of]It occurs to you to set down [the noun] before burning, just for safety[=0x0027=]s sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on][=0x0022=];[=0x000A=][=0x0009=]silently try the player dropping the noun;[=0x000A=][=0x0009=]if the player encloses the noun, stop the action.[=0x000A=][=0x000A=]Carry out burning something with something (this is the simplistic burning rule):[=0x000A=][=0x0009=]now the noun is nowhere.[=0x000A=][=0x000A=]Report burning something with something:[=0x000A=][=0x0009=]say [=0x0022=]You burn up [the noun].[=0x0022=][=0x000A=][=0x000A=]Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:[=0x000A=][=0x0009=]say [=0x0022=]You can only light things with matches.[=0x0022=];[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Section 2 - Matches[=0x000A=][=0x000A=][The word [=0x0022=]matches[=0x0022=] is used by Inform to compare snippets of text (see [=0x0022=]Reading a command[=0x0022=] in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called [=0x0022=]match[=0x0022=], so for the occasion we will give our matches a more specialized name, never visible to the player:][=0x000A=][=0x000A=]A strikable-match is a kind of thing. The plural of strikable-match is s-matches.[=0x000A=][=0x000A=]A strikable-match has a number called duration. The duration of a strikable-match is usually 3.[=0x000A=][=0x000A=]Rule for printing the name of a strikable-match: say [=0x0022=]match[=0x0022=].[=0x000A=]Rule for printing the plural name of a strikable-match: say [=0x0022=]matches[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]match[=0x0022=] as a strikable-match. Understand [=0x0022=]matches[=0x0022=] as a strikable-match.[=0x000A=][=0x000A=]Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand [=0x0022=]burning[=0x0022=] or [=0x0022=]lit[=0x0022=] as flaming. Understand [=0x0022=]unused[=0x0022=] as new.[=0x000A=][=0x000A=]A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.[=0x000A=][=0x000A=]Before printing the name of a strikable-match while asking which do you mean:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=]Before printing the plural name of a strikable-match while taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]Before printing the name of a strikable-match while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if not taking inventory, say [=0x0022=][flame-state] [=0x0022=].[=0x000A=][=0x000A=]After printing the name of a strikable-match (called special-target) while clarifying the parser[=0x0027=]s choice of something:[=0x000A=][=0x0009=]if the player carries the special-target:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] you[=0x0027=]re carrying[=0x0022=];[=0x000A=][=0x0009=]otherwise if the special-target is in the location:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] on the ground[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target][=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]strike [something][=0x0022=] as attacking.[=0x000A=][=0x000A=]Understand [=0x0022=]strike [strikable-match][=0x0022=] as striking. Striking is an action applying to one carried thing.[=0x000A=][=0x000A=]Understand [=0x0022=]burn [strikable-match][=0x0022=] as striking.[=0x000A=][=0x000A=]Does the player mean striking a new strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean striking a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Check striking a strikable-match (this is the strike only new matches rule):[=0x000A=][=0x0009=]if the noun is burnt, say [=0x0022=][The noun] has already burnt down and cannot be relit.[=0x0022=] instead;[=0x000A=][=0x0009=]if the noun is flaming, say [=0x0022=][The noun] is already burning.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out striking a strikable-match (this is the standard striking rule):[=0x000A=][=0x0009=]now the noun is flaming;[=0x000A=][=0x0009=]now the noun is lit.[=0x000A=][=0x000A=]Report striking a strikable-match (this is the standard report striking rule):[=0x000A=][=0x0009=]say [=0x0022=]You light [the noun].[=0x0022=][=0x000A=][=0x000A=]Before burning something with a new strikable-match (this is the prior lighting rule):[=0x000A=][=0x0009=]say [=0x0022=](first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]silently try striking the second noun;[=0x000A=][=0x0009=]if the second noun is not flaming, stop the action.[=0x000A=][=0x000A=]Rule for implicitly taking a strikable-match (called target) while striking:[=0x000A=][=0x0009=]try silently taking the target.[=0x000A=][=0x000A=]Does the player mean burning something with a flaming strikable-match:[=0x000A=][=0x0009=]it is very likely.[=0x000A=][=0x000A=]Does the player mean burning something with a new strikable-match:[=0x000A=][=0x0009=]it is likely.[=0x000A=][=0x000A=]Does the player mean burning something with a burnt strikable-match:[=0x000A=][=0x0009=]it is unlikely.[=0x000A=][=0x000A=]Instead of burning a burnt strikable-match with something:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is completely consumed and cannot be relit.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Putting the Matches Out[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]let N be 0; [here we track how many matches are being put out during this turn, so that we don[=0x0027=]t have to mention each match individually if several go out during the same move][=0x000A=][=0x0009=]repeat with item running through flaming s-matches:[=0x000A=][=0x0009=][=0x0009=]decrement the duration of the item;[=0x000A=][=0x0009=][=0x0009=]if the duration of the item is 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is burnt;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]now the item is unlit;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if the item is visible, increment N;[=0x000A=][=0x0009=]if N is 1:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.[=0x0022=];[=0x000A=][=0x0009=]otherwise if N is greater than 1:[=0x000A=][=0x0009=][=0x0009=]let enumeration be [=0x0022=][N in words][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if N is the number of visible s-matches:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if N is two, say [=0x0022=]Both[=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]otherwise say [=0x0022=]All [enumeration][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][enumeration in title case][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=] matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].[=0x0022=][=0x000A=][=0x000A=]Section 4 - Scenario[=0x000A=][=0x000A=]Old Chicago is a room.[=0x000A=][=0x000A=]The player carries a flammable thing called a log. Understand [=0x0022=]wooden[=0x0022=] and [=0x0022=]wood[=0x0022=] as the log.[=0x000A=][=0x000A=]The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now every strikable-match carried by the player is flaming;[=0x000A=][=0x0009=]now every strikable-match carried by the player is lit.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / burn match / i / i / burn log with match / burn matchbox with match / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;The Cow Exonerated&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8215_160" -->
<a id="c8215_160"></a><blockquote class="code"><p class="quoted">
Section 1 - Simple Burning
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8216_160" -->
<a id="c8216_160"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;light&quot; and &quot;burn&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8217_160" -->
<a id="c8217_160"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [something] with [strikable-match]&quot; as burning it with. Understand &quot;burn [something] with [something preferably held]&quot; as burning it with. Burning it with is an action applying to one thing and one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8218_160" -->
<a id="c8218_160"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;light&quot; as &quot;burn&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8219_160" -->
<a id="c8219_160"></a><blockquote class="code"><p class="quoted">
A thing can be flammable or impervious. A thing is usually impervious.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8220_160" -->
<a id="c8220_160"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only with flaming matches rule):
<br />&#160;&#160;&#160;&#160;if the second noun is not a strikable-match, say &quot;You can only light things with matches.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, say &quot;[The second noun] needs to be burning first.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8221_160" -->
<a id="c8221_160"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only flammable things rule):
<br />&#160;&#160;&#160;&#160;if the noun is impervious, say &quot;[The noun] cannot be burned.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8222_160" -->
<a id="c8222_160"></a><blockquote class="code"><p class="quoted">
Check burning something with something (this is the burn only things not held rule):
<br />&#160;&#160;&#160;&#160;say &quot;[one of]It occurs to you to set down [the noun] before burning, just for safety's sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;silently try the player dropping the noun;
<br />&#160;&#160;&#160;&#160;if the player encloses the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8223_160" -->
<a id="c8223_160"></a><blockquote class="code"><p class="quoted">
Carry out burning something with something (this is the simplistic burning rule):
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8224_160" -->
<a id="c8224_160"></a><blockquote class="code"><p class="quoted">
Report burning something with something:
<br />&#160;&#160;&#160;&#160;say &quot;You burn up [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8225_160" -->
<a id="c8225_160"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:
<br />&#160;&#160;&#160;&#160;say &quot;You can only light things with matches.&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8226_160" -->
<a id="c8226_160"></a><blockquote class="code"><p class="quoted">
Section 2 - Matches
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;matches&quot; is used by Inform to compare snippets of text (see &quot;Reading a command&quot; in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called &quot;match&quot;, so for the occasion we will give our matches a more specialized name, never visible to the player:</p>
<!-- START CODE "c8227_160" -->
<a id="c8227_160"></a><blockquote class="code"><p class="quoted">
A strikable-match is a kind of thing. The plural of strikable-match is s-matches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8228_160" -->
<a id="c8228_160"></a><blockquote class="code"><p class="quoted">
A strikable-match has a number called duration. The duration of a strikable-match is usually 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8229_160" -->
<a id="c8229_160"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a strikable-match: say &quot;match&quot;.
<br />Rule for printing the plural name of a strikable-match: say &quot;matches&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8230_160" -->
<a id="c8230_160"></a><blockquote class="code"><p class="quoted">
Understand &quot;match&quot; as a strikable-match. Understand &quot;matches&quot; as a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8231_160" -->
<a id="c8231_160"></a><blockquote class="code"><p class="quoted">
Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand &quot;burning&quot; or &quot;lit&quot; as flaming. Understand &quot;unused&quot; as new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8232_160" -->
<a id="c8232_160"></a><blockquote class="code"><p class="quoted">
A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8233_160" -->
<a id="c8233_160"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while asking which do you mean:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8234_160" -->
<a id="c8234_160"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
<br />Before printing the plural name of a strikable-match while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8235_160" -->
<a id="c8235_160"></a><blockquote class="code"><p class="quoted">
Before printing the name of a strikable-match while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if not taking inventory, say &quot;[flame-state] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8236_160" -->
<a id="c8236_160"></a><blockquote class="code"><p class="quoted">
After printing the name of a strikable-match (called special-target) while clarifying the parser's choice of something:
<br />&#160;&#160;&#160;&#160;if the player carries the special-target:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; you're carrying&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the special-target is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; on the ground&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8237_160" -->
<a id="c8237_160"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [something]&quot; as attacking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8238_160" -->
<a id="c8238_160"></a><blockquote class="code"><p class="quoted">
Understand &quot;strike [strikable-match]&quot; as striking. Striking is an action applying to one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8239_160" -->
<a id="c8239_160"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [strikable-match]&quot; as striking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8240_160" -->
<a id="c8240_160"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8241_160" -->
<a id="c8241_160"></a><blockquote class="code"><p class="quoted">
Does the player mean striking a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8242_160" -->
<a id="c8242_160"></a><blockquote class="code"><p class="quoted">
Check striking a strikable-match (this is the strike only new matches rule):
<br />&#160;&#160;&#160;&#160;if the noun is burnt, say &quot;[The noun] has already burnt down and cannot be relit.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is flaming, say &quot;[The noun] is already burning.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8243_160" -->
<a id="c8243_160"></a><blockquote class="code"><p class="quoted">
Carry out striking a strikable-match (this is the standard striking rule):
<br />&#160;&#160;&#160;&#160;now the noun is flaming;
<br />&#160;&#160;&#160;&#160;now the noun is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8244_160" -->
<a id="c8244_160"></a><blockquote class="code"><p class="quoted">
Report striking a strikable-match (this is the standard report striking rule):
<br />&#160;&#160;&#160;&#160;say &quot;You light [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8245_160" -->
<a id="c8245_160"></a><blockquote class="code"><p class="quoted">
Before burning something with a new strikable-match (this is the prior lighting rule):
<br />&#160;&#160;&#160;&#160;say &quot;(first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try striking the second noun;
<br />&#160;&#160;&#160;&#160;if the second noun is not flaming, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8246_160" -->
<a id="c8246_160"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking a strikable-match (called target) while striking:
<br />&#160;&#160;&#160;&#160;try silently taking the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8247_160" -->
<a id="c8247_160"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a flaming strikable-match:
<br />&#160;&#160;&#160;&#160;it is very likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8248_160" -->
<a id="c8248_160"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a new strikable-match:
<br />&#160;&#160;&#160;&#160;it is likely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8249_160" -->
<a id="c8249_160"></a><blockquote class="code"><p class="quoted">
Does the player mean burning something with a burnt strikable-match:
<br />&#160;&#160;&#160;&#160;it is unlikely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8250_160" -->
<a id="c8250_160"></a><blockquote class="code"><p class="quoted">
Instead of burning a burnt strikable-match with something:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is completely consumed and cannot be relit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8251_160" -->
<a id="c8251_160"></a><blockquote class="code"><p class="quoted">
Section 3 - Putting the Matches Out
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8252_160" -->
<a id="c8252_160"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let N be 0; [here we track how many matches are being put out during this turn, so that we don't have to mention each match individually if several go out during the same move]
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement the duration of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the duration of the item is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is burnt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is unlit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is visible, increment N;
<br />&#160;&#160;&#160;&#160;if N is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if N is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let enumeration be &quot;[N in words]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is the number of visible s-matches:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is two, say &quot;Both&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;All [enumeration]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[enumeration in title case]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8253_160" -->
<a id="c8253_160"></a><blockquote class="code"><p class="quoted">
Section 4 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8254_160" -->
<a id="c8254_160"></a><blockquote class="code"><p class="quoted">
Old Chicago is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8255_160" -->
<a id="c8255_160"></a><blockquote class="code"><p class="quoted">
The player carries a flammable thing called a log. Understand &quot;wooden&quot; and &quot;wood&quot; as the log.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8256_160" -->
<a id="c8256_160"></a><blockquote class="code"><p class="quoted">
The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8257_160" -->
<a id="c8257_160"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is flaming;
<br />&#160;&#160;&#160;&#160;now every strikable-match carried by the player is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8258_160" -->
<a id="c8258_160"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / burn match / i / i / burn log with match / burn matchbox with match / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc348.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc350.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
