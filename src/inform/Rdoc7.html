<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>2.3. Using the Player's Input</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Using the Player's Input" -->
<!-- SEARCH SECTION "2.3" -->
<!-- SEARCH SORT "001-002-003-000" -->
<!-- START IGNORE 6 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc6.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 2: Adaptive Prose</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc8.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง2.3. Using the Player's Input</p>
<p>We may sometimes want to capture specific words the player has used and then feature that text elsewhere in the story.</p>
<p><span class="boldface">Terracottissima Maxima</span> demonstrates using text to describe objects; <span class="boldface">Mr. Burns' Repast</span> lets the player refer to a fish by any of a number of names, and changes the way the fish is described as a result.</p>
<p>More specialized effects are also possible: <span class="boldface">Xot</span> shows how to collect the player's erroneous input and store the command line to be printed back later. <span class="boldface">Igpay Atinlay</span> shows how to parrot the player's command back in pig Latin form.</p>
<p class="crossreference"><a href="Rdoc65.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Animals</b></a><i> for a dog which the player can re-name</i></p><p class="crossreference"><a href="Rdoc24.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Traits Determined By the Player</b></a><i> for a way to let the player name the player character</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "419: Igpay Atinlay" "e111" -->
<a id="e111"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example111'); return false;"><b>419</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example111'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Igpay Atinlay</span></b></a><br />A pig Latin filter for the player's commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc350.html#e111"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example111" style="display: none;">
<p>For the sake of argument, suppose we want to parrot back all the player's commands in pig Latin:</p>
<!-- START CODE "c9714_111" -->
<a id="c9714_111"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Igpay Atinlay[=0x0022=][=0x000A=][=0x000A=]Armfay is a room.[=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]let N be [=0x0022=][the player[=0x0027=]s command][=0x0022=];[=0x000A=][=0x0009=]replace the regular expression [=0x0022=][=0x005C=]b([=0x003C=]aeiou[=0x003E=]+)([=0x005C=]w*)[=0x0022=] in N with [=0x0022=][=0x005C=]1[=0x005C=]2ay[=0x0022=];[=0x000A=][=0x0009=]replace the regular expression [=0x0022=][=0x005C=]b([=0x003C=]bcdfghjklmnpqrstvwxz[=0x003E=]+)([=0x005C=]w*)[=0x0022=] in N with [=0x0022=][=0x005C=]2[=0x005C=]1ay[=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][N][paragraph break][=0x0022=];[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Test me with [=0x0022=]nix on the stupid[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Igpay Atinlay&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9715_111" -->
<a id="c9715_111"></a><blockquote class="code"><p class="quoted">
Armfay is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9716_111" -->
<a id="c9716_111"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;replace the regular expression &quot;\b(&lt;aeiou&gt;+)(\w*)&quot; in N with &quot;\1\2ay&quot;;
<br />&#160;&#160;&#160;&#160;replace the regular expression &quot;\b(&lt;bcdfghjklmnpqrstvwxz&gt;+)(\w*)&quot; in N with &quot;\2\1ay&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[N][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9717_111" -->
<a id="c9717_111"></a><blockquote class="code"><p class="quoted">
Test me with &quot;nix on the stupid&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "423: Mr. Burns' Repast" "e296" -->
<a id="e296"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example296'); return false;"><b>423</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example296'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mr. Burns' Repast</span></b></a><br />Letting the player guess types for an unidentifiable fish.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc350.html#e296"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example296" style="display: none;">
<p>Suppose we have an unhappily mutated fish that the player can refer to by any of a number of species names, or any word followed by -fish. We want to reject these commands, but preserve a memory of what the player last tried to call the thing:</p>
<!-- START CODE "c9718_296" -->
<a id="c9718_296"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Mr. Burns[=0x0027=] Repast[=0x0022=][=0x000A=][=0x000A=]Wharf is a room.[=0x000A=][=0x000A=]There is an unknown fish in the Wharf. The unknown fish has some a text called the supposed name. The description of the unknown fish is [=0x0022=]The victim of heavy mutagens, this thing is not really recognizable as any species you know.[=0x0022=].[=0x000A=][=0x000A=]Fish variety is a kind of value. The fish varieties are salmon, albacore, mackerel.[=0x000A=][=0x000A=]Rule for printing the name of the unknown fish:[=0x000A=][=0x0009=]if the supposed name of the unknown fish is [=0x0022=][=0x0022=], say the printed name of the unknown fish;[=0x000A=][=0x0009=]otherwise say the supposed name of the unknown fish.[=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the unknown fish is visible and player[=0x0027=]s command matches the regular expression [=0x0022=][=0x005C=]b[=0x005C=]w+fish[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]let N be [=0x0022=][the player[=0x0027=]s command][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]replace the regular expression [=0x0022=].*(?=[=0x005C=]b[=0x005C=]w+fish)[=0x0022=] in N with [=0x0022=][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now N is [=0x0022=][N](?)[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now the supposed name of the unknown fish is N;[=0x000A=][=0x0009=][=0x0009=]respond with doubt;[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command;[=0x000A=][=0x0009=]otherwise if the unknown fish is visible and the player[=0x0027=]s command includes [=0x0022=][fish variety][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]now supposed name of the fish is [=0x0022=][fish variety understood](?)[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]respond with doubt;[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]To respond with doubt:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re not [italic type]sure[roman type] you[=0x0027=]re seeing any such thing.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]get swordfish / look / touch monkfish / look / listen to tunafish / x fish / x salmon / look[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Mr. Burns' Repast&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9719_296" -->
<a id="c9719_296"></a><blockquote class="code"><p class="quoted">
Wharf is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9720_296" -->
<a id="c9720_296"></a><blockquote class="code"><p class="quoted">
There is an unknown fish in the Wharf. The unknown fish has some a text called the supposed name. The description of the unknown fish is &quot;The victim of heavy mutagens, this thing is not really recognizable as any species you know.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9721_296" -->
<a id="c9721_296"></a><blockquote class="code"><p class="quoted">
Fish variety is a kind of value. The fish varieties are salmon, albacore, mackerel.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9722_296" -->
<a id="c9722_296"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of the unknown fish:
<br />&#160;&#160;&#160;&#160;if the supposed name of the unknown fish is &quot;&quot;, say the printed name of the unknown fish;
<br />&#160;&#160;&#160;&#160;otherwise say the supposed name of the unknown fish.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9723_296" -->
<a id="c9723_296"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the unknown fish is visible and player's command matches the regular expression &quot;\b\w+fish&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the regular expression &quot;.*(?=\b\w+fish)&quot; in N with &quot;&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now N is &quot;[N](?)&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the supposed name of the unknown fish is N;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;respond with doubt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command;
<br />&#160;&#160;&#160;&#160;otherwise if the unknown fish is visible and the player's command includes &quot;[fish variety]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now supposed name of the fish is &quot;[fish variety understood](?)&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;respond with doubt;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9724_296" -->
<a id="c9724_296"></a><blockquote class="code"><p class="quoted">
To respond with doubt:
<br />&#160;&#160;&#160;&#160;say &quot;You're not [italic type]sure[roman type] you're seeing any such thing.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9725_296" -->
<a id="c9725_296"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get swordfish / look / touch monkfish / look / listen to tunafish / x fish / x salmon / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "318: Terracottissima Maxima" "e393" -->
<a id="e393"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example393'); return false;"><b>318</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example393'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Terracottissima Maxima</span></b></a><br />Flowerpots with textual names that might change during play.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc279.html#e393"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example393" style="display: none;">
<p>Inform can also understand text properties:</p>
<!-- START CODE "c9726_393" -->
<a id="c9726_393"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Terracottissima Maxima[=0x0022=][=0x000A=][=0x000A=]A flowerpot is a kind of thing. A flowerpot has a text called pattern. Understand the pattern property as describing a flowerpot. The printed name of a flowerpot is usually [=0x0022=][pattern] flowerpot[=0x0022=]. The printed plural name of a flowerpot is usually [=0x0022=][pattern] flowerpots[=0x0022=].[=0x000A=][=0x000A=]The Herb Garden is a room. In the Herb Garden is a flowerpot with pattern [=0x0022=]blue willow[=0x0022=]. In the Herb Garden is a flowerpot with pattern [=0x0022=]striped[=0x0022=]. In the Herb Garden is a flowerpot with pattern [=0x0022=]striped[=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]x blue willow / get striped / look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Terracottissima Maxima&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9727_393" -->
<a id="c9727_393"></a><blockquote class="code"><p class="quoted">
A flowerpot is a kind of thing. A flowerpot has a text called pattern. Understand the pattern property as describing a flowerpot. The printed name of a flowerpot is usually &quot;[pattern] flowerpot&quot;. The printed plural name of a flowerpot is usually &quot;[pattern] flowerpots&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9728_393" -->
<a id="c9728_393"></a><blockquote class="code"><p class="quoted">
The Herb Garden is a room. In the Herb Garden is a flowerpot with pattern &quot;blue willow&quot;. In the Herb Garden is a flowerpot with pattern &quot;striped&quot;. In the Herb Garden is a flowerpot with pattern &quot;striped&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9729_393" -->
<a id="c9729_393"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x blue willow / get striped / look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This may not seem very much different from having the pattern be a kind of value -- except that texts can, of course, hold almost anything. Further exploration of these possibilities may be found in the chapter on Advanced Text.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "381: Xot" "e249" -->
<a id="e249"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example249'); return false;"><b>381</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example249'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Xot</span></b></a><br />Storing an invalid command to be repeated as text later in the game.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc321.html#e249"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example249" style="display: none;">
<p>In Hitchhiker's Guide to the Galaxy, any erroneous command the player types can return to haunt him later in the game. We could do the same, if we liked, by storing the player's command whenever we print a parser error.</p>
<!-- START CODE "c9730_249" -->
<a id="c9730_249"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode(' [=0x0022=]Xot[=0x0022=][=0x000A=][=0x000A=]Humiliation Chamber is a room. [=0x0022=]A grim, grey-walled room. Cameras watch you from every angle; convex mirrors reflect your actions; and up near the ceiling, where you can[=0x0027=]t disable it, is a loudspeaker.[=0x0022=][=0x000A=][=0x000A=]The last error is a text that varies. The last error is [=0x0022=]xot[=0x0022=].[=0x000A=][=0x000A=]Before printing a parser error:[=0x000A=][=0x0009=]now the last error is the player[=0x0027=]s command.[=0x000A=][=0x000A=]Every turn when a random chance of 1 in 2 succeeds:[=0x000A=][=0x0009=]say [=0x0022=]Over the loudspeaker comes some distorted nonsense. If you listen carefully, it sounds as though some fool is saying [=0x0027=][last error], [last error], [last error]![=0x0027=][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]wiggle / z / z / z / z / z / z[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a>  &quot;Xot&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9731_249" -->
<a id="c9731_249"></a><blockquote class="code"><p class="quoted">
Humiliation Chamber is a room. &quot;A grim, grey-walled room. Cameras watch you from every angle; convex mirrors reflect your actions; and up near the ceiling, where you can't disable it, is a loudspeaker.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9732_249" -->
<a id="c9732_249"></a><blockquote class="code"><p class="quoted">
The last error is a text that varies. The last error is &quot;xot&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9733_249" -->
<a id="c9733_249"></a><blockquote class="code"><p class="quoted">
Before printing a parser error:
<br />&#160;&#160;&#160;&#160;now the last error is the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9734_249" -->
<a id="c9734_249"></a><blockquote class="code"><p class="quoted">
Every turn when a random chance of 1 in 2 succeeds:
<br />&#160;&#160;&#160;&#160;say &quot;Over the loudspeaker comes some distorted nonsense. If you listen carefully, it sounds as though some fool is saying '[last error], [last error], [last error]!'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9735_249" -->
<a id="c9735_249"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wiggle / z / z / z / z / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc6.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc8.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
