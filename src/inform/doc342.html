<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>19.16. The Laws for Sorting Rulebooks</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "The Laws for Sorting Rulebooks" -->
<!-- SEARCH SECTION "19.16" -->
<!-- SEARCH SORT "000-019-016-000" -->
<!-- START IGNORE 341 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc341.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 19: Rulebooks</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc343.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง19.16. The Laws for Sorting Rulebooks</p>
<p>Large works created by Inform are heaped high with rules, most of them instead rules, but with a leavening of befores and afters as well. What will happen if these conflict with each other? For instance:</p>
<!-- START CODE "c8089" -->
<a id="c8089"></a><blockquote class="code"><p class="quoted">
Instead of opening a container, say &quot;Your mother-in-law looks on with such evident disappointment that you withdraw your hand again.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8090" -->
<a id="c8090"></a><blockquote class="code"><p class="quoted">
Instead of opening an open container, say &quot;Your daughter tuts in theatrical exasperation at your, like, lameness.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Such clashes are resolved by sorting the rulebooks in order of specificity: thus your daughter gets in before your mother-in-law, because although both have rules hanging on the &quot;opening&quot; action, &quot;an open container&quot; is more specific than &quot;a container&quot;. The full set of Laws used by Inform to sort rulebooks is quite elaborate. As we've seen, practical consequences can be investigated using the Rules index; and in most cases, the results are either natural (as above) or irrelevant (because the two rules being compared could not both activate at the same time anyway); but the full set of Laws is laid out below, for reference. It is probably a bad idea to write source text which absolutely relies on non-obvious rule sorting conventions, just the same, because this will make the source text harder to read and understand.</p>
<p>Sorting is done by comparing rules in pairs to decide which is more specific. We shall call these rules X and Y. The Laws are tried in sequence; the first Law to distinguish X and Y gets to decide which is more specific. If no Law is able to decide, X and Y go into the rulebook in order of their appearance in the source text - that is, whichever is defined first appears earlier in the rulebook and therefore takes priority.</p>
<p><span class="boldface">Law I - Number of aspects constrained</span>. For action-based rulebooks, rules are scored from 0 to 6 according to whether they constrain any of: (i) the exotic &quot;going&quot; clauses (pushing, by and through), (ii) the location of the action (in, from and to), (iii) the things directly involved (actor, noun, second noun, &quot;nowhere&quot; in the case of &quot;going&quot;), (iv) the presence of others (in the presence of...), (v) the time at which the action occurs (when, or &quot;for the nth time&quot; or &quot;for the nth turn&quot;), and/or (vi) the scene the action occurs in (during). For value based rulebooks, rules are scored from 0 to 3 according to whether they constrain: (i) the value parameter, (ii) the scene in which the rulebook is followed (when, during), and/or (iii) any condition which must hold or activities going on at the same time (when/while). A higher score is more specific than a lower one.</p>
<p><span class="boldface">Law II - When/while requirement</span>. A rule with a when/while restriction beats one without.</p>
<p><span class="boldface">Law III - Action requirement</span>. A rule with a more specific action requirement beats one with a more general action requirement. (Or similarly, for value based rulebooks, a rule with a more specific parameter requirement beats a more general one.) Details are given below.</p>
<p><span class="boldface">Law IV - Scene requirement</span>. A rule with a scene restriction (&quot;during&quot;) beats one without.</p>
<p>Details of Law III now follow:</p>
<p><span class="boldface">Law III.1 - Object To Which Rule Applies</span>. For value based rulebooks only: the more specific value requirement wins.</p>
<p><span class="boldface">Law III.2.1 - Action/Where/Going In Exotic Ways</span>. A more specific combination of &quot;...pushing...&quot;, &quot;... by ...&quot;, and &quot;... through ...&quot; clauses in a &quot;going&quot; action beats a less specific. (Placing conditions on all three of these clauses beats placing conditions on any two, which beats any one, which beats none at all.) In cases where X and Y each place, let's say, two such conditions, they are considered in the order &quot;...pushing...&quot;, &quot;...by...&quot; and then &quot;...through...&quot; until one wins. (The idea here is that pushing something from room to room is rarer than travelling in a vehicle, which in turn is rarer than going through a door. The rarer action goes first, as more specific.)</p>
<p><span class="boldface">Law III.2.2 - Action/Where/Room Where Action Takes Place</span>. A more specific combination of conditions on the room in which the action starts, and in which it ends, beats a less specific. For all actions other than &quot;going&quot;, there is no combination to be considered, and what we do is to look at the specificity of the &quot;... in ...&quot; clause. (So &quot;Before looking in the Taj Mahal&quot; beats &quot;Before looking&quot;.)</p>
<p>For &quot;going&quot; actions, there are strictly speaking three possible room clauses: &quot;... in ...&quot;, &quot;... from ...&quot; and &quot;... to ...&quot;. However, &quot;... in ...&quot; and &quot;... from ...&quot; cannot both be present, so that in practice a &quot;going&quot; rule constraining two rooms beats a &quot;going&quot; rule constraining only one.</p>
<p>If both the room gone from (the &quot;...in...&quot; or &quot;...from...&quot; room, whichever is given) and the room gone to (the &quot;... to...&quot; room) are constrained, then the constraints are looked at in the order from-room followed by to-room, since an action which goes to room Z could start in many different places and thus is likely to be more general.</p>
<p>Giving a place as a specific room beats giving only the name of a region; if region R is entirely within region S, then a rule applying in R beats a rule applying in S. (Note that regions can only overlap if one is contained in the other, so this does not lead to ambiguity.)</p>
<p><span class="boldface">Law III.2.3 - Action/Where/In The Presence Of</span>. A more specific &quot;...in the presence of...&quot; clause beats a less specific one. (This is again a constraint on where the action can take place, but it's now a potentially a constraint which could be passed in many different places at different times, so it's the most likely to be achieved and therefore the last to be considered of the Laws on Where.)</p>
<p><span class="boldface">Law III.3.1 - Action/What/Second Thing Acted On</span>. A more specific constraint on the second noun beats a less specific. Thus &quot;putting something in the wooden box&quot; beats &quot;putting something in a container&quot;.</p>
<p><span class="boldface">Law III.3.2 - Action/What/Thing Acted On</span>. A more specific constraint on the first noun beats a less specific. Thus &quot;taking a container which is on a supporter&quot; beats &quot;taking a container&quot;.</p>
<p>In the case of &quot;going&quot; actions, the first noun is a direction. The special constraint &quot;going nowhere&quot; (which means: a direction in which the actor's location has no map connection) is considered more general than any other constraint placed on the first noun, but more specific than having no constraint at all. Thus &quot;Instead of going north&quot; beats &quot;Instead of going nowhere&quot; which beats &quot;Instead of going&quot;.</p>
<p><span class="boldface">Law III.3.3 - Action/What/Actor Performing Action</span>. A more specific constraint on the actor beats a less specific.</p>
<p><span class="boldface">Law III.4.1 - Action/How/What Happens</span>. A more specific set of actions beats a less specific. For instance, &quot;taking&quot; beats &quot;taking or dropping&quot; beats &quot;doing something other than looking&quot; beats &quot;doing something&quot;. A named kind of action (such as &quot;behaving badly&quot;) is more specific than &quot;doing something&quot;, but considered less specific than any explicitly spelled out list of actions.</p>
<p><span class="boldface">Law III.5.1 - Action/When/Duration</span>. An action with a constraint on its history (&quot;for the fifth time&quot;, say, or &quot;for the fifth turn&quot;) beats one without. If both rules place constraints on history, then the one occurring on the smaller number of possible turns wins (thus &quot;for the third to seventh time&quot; - 5 possible turns of applicability - beats &quot;for less than the tenth turn&quot; - 9 possible turns).</p>
<p><span class="boldface">Law III.5.2 - Action/When/Circumstances</span>. A more specific condition under &quot;...when...&quot; beats a less specific one. These conditions could potentially be complex: Inform judges how specific they are by counting the clauses found in them. The more clauses, the more specific the condition, it is assumed.</p>
<p><span class="boldface">Law III.6.1 - Action/Name/Is This Named</span>. A rule with a name (&quot;the apple blossom rule&quot;, say) beats a rule without.</p>
<hr />
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc341.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc343.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
