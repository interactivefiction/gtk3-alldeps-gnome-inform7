<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>6.14. Adjacent rooms and routes through the map</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Adjacent rooms and routes through the map" -->
<!-- SEARCH SECTION "6.14" -->
<!-- SEARCH SORT "000-006-014-000" -->
<!-- START IGNORE 94 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc94.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 6: Descriptions</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc96.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง6.14. Adjacent rooms and routes through the map</p>
<p>Another useful adjective built into Inform is &quot;adjacent&quot;. Two rooms are said to be adjacent if there is a map connection between them which does not pass through some barrier such as a door. This is easily tested:</p>
<!-- START CODE "c1148" -->
<a id="c1148"></a><blockquote class="code"><p class="quoted">
if the Hallway is adjacent to the Study ...
</p></blockquote>
<!-- END CODE -->
<p>We usually want to know about the places adjacent to the current scene of the action, so that is what the adjective &quot;adjacent&quot; means when applied to rooms. For instance:</p>
<!-- START CODE "c1149" -->
<a id="c1149"></a><blockquote class="code"><p class="quoted">
if somebody is in an adjacent room, ...
</p></blockquote>
<!-- END CODE -->
<p>As with the case of &quot;visible&quot;, the adjective is a cut-down version of the more general relationship. This often happens: &quot;worn&quot; and &quot;carried&quot;, for instance, imply &quot;by the player&quot; unless something else is specified.</p>
<p>If we want to ask a more direct question, we can obtain specific map connections as follows. (Recall that every map connection leads either to a door, to a room, or to nothing.) If we know which direction we want to look in, then the easiest thing is to use its relation - every direction in the map, say &quot;north&quot;, has its own relation, say &quot;mapped north of&quot;. So:</p>
<!-- START CODE "c1150" -->
<a id="c1150"></a><blockquote class="code"><p class="quoted">
if the Ballroom is mapped north of the Hallway, ...
</p></blockquote>
<!-- END CODE -->
<p>Alternatively, and particularly if the direction is not a constant,</p>
<!-- START PHRASE "defn60" -->
<div class="definition"><a id="defn60"></a><p class="defnprototype"><b>room </b>(direction)<b> from</b>/of<b> </b>(room)<b> ... room</b></p>
<!-- END PHRASE -->
<!-- definition of ph_roomdirof -->

<p>This phrase produces the room which the given map direction leads to, or the special value &quot;nothing&quot; if it leads nowhere. If it leads to a door, the result is the room through that door. Examples:</p>
<!-- START CODE "c1151" -->
<a id="c1151"></a><blockquote class="code"><p class="quoted">
say &quot;You look north into [the room north from the Garden].&quot;
<br />if the room north from the Garden is nothing, say &quot;The grass leads nowhere.&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn61" -->
<div class="definition"><a id="defn61"></a><p class="defnprototype"><b>door </b>(direction)<b> from</b>/of<b> </b>(room)<b> ... door</b></p>
<!-- END PHRASE -->
<!-- definition of ph_doordirof -->

<p>This phrase produces the door which the given map direction leads to, or the special value &quot;nothing&quot; if it leads nowhere or to a room. Examples:</p>
<!-- START CODE "c1152" -->
<a id="c1152"></a><blockquote class="code"><p class="quoted">
let the barrier be the door north from the Garden;
<br />if the barrier is a door, say &quot;Well, [the barrier] is in the way.&quot;;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn62" -->
<div class="definition"><a id="defn62"></a><p class="defnprototype"><b>room-or-door </b>(direction)<b> from</b>/of<b> </b>(room)<b> ... object</b></p>
<!-- END PHRASE -->
<!-- definition of ph_roomordoor -->

<p>This phrase produces the object which the given map direction leads to, which will always be either a room, a door or the special value &quot;nothing&quot;. The phrase is used mainly by the Standard Rules, for technical reasons, and usually it's better to use &quot;room ... from ...&quot; or &quot;door ... from ...&quot; instead.</p>

<!-- end definition -->
</div>

<p>The map can be a great sprawling mass of rooms and doors connected together, and it can be quite hard to find a way through it one step at a time.</p>
<!-- START PHRASE "defn63" -->
<div class="definition"><a id="defn63"></a><p class="defnprototype"><b>best route from </b>(object)<b> to </b>(object)<b> ... object</b></p>
<!-- END PHRASE -->
<!-- definition of ph_bestroute -->

<p>This phrase produces a direction to take in order to get from A to B by the shortest number of movements between rooms, or produces &quot;nothing&quot; if there is no way through at all. Example:</p>
<!-- START CODE "c1153" -->
<a id="c1153"></a><blockquote class="code"><p class="quoted">
The description of the brass compass is &quot;The dial points quiveringly to [best route from the location to the Lodestone Room].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Best routes are ordinarily forbidden to go through doors, but if the suffix &quot;using doors&quot; is added as an option then any open or openable and unlocked door may be used on the way; and if &quot;using even locked doors&quot; is given, then any door at all will do. Since magnetism is no respecter of property, that seems right here:</p>
<!-- START CODE "c1154" -->
<a id="c1154"></a><blockquote class="code"><p class="quoted">
The description of the brass compass is &quot;The dial points quiveringly to [best route from the location to the Lodestone Room, using even locked doors].&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>In practice this simple approach sometimes produces impossible journeys, rather the way Google Maps directions from New York to London would recommend driving down to the docks and then swimming. A more careful approach is to use:</p>
<!-- START PHRASE "defn64" -->
<div class="definition"><a id="defn64"></a><p class="defnprototype"><b>best route from </b>(object)<b> to </b>(object)<b> through </b>(description of objects)<b> ... object</b></p>
<!-- END PHRASE -->
<!-- definition of ph_bestroutethrough -->

<p>This phrase produces a direction to take in order to get from A to B by the shortest number of movements between rooms which match the given description, or produces &quot;nothing&quot; if there is no way through at all. Example:</p>
<!-- START CODE "c1155" -->
<a id="c1155"></a><blockquote class="code"><p class="quoted">
best route from the Drawbridge to the Keep through visited rooms
</p></blockquote>
<!-- END CODE -->
<p>The condition - in this case, that &quot;visited rooms&quot; must be used - also applies to both ends of the journey, so if either Drawbridge or Keep are unvisited then this is &quot;nothing&quot;. (Similarly, saying something like &quot;...through containers&quot; would mean there is never a route.)</p>

<!-- end definition -->
</div>

<p>Lastly, the following phrases can find out how long the journey would be. (They are quite a bit faster than using the &quot;best route...&quot; phrases repeatedly and counting.)</p>
<!-- START PHRASE "defn65" -->
<div class="definition"><a id="defn65"></a><p class="defnprototype"><b>number of moves from </b>(object)<b> to </b>(object)<b> ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_bestroutelength -->

<p>This phrase produces the number of map connections which must be followed in order to get from A to B by the shortest number of movements between rooms. If A and B are the same, the answer is 0; if there is no route at all, the answer is -1. Example:</p>
<!-- START CODE "c1156" -->
<a id="c1156"></a><blockquote class="code"><p class="quoted">
The description of the proximity gadget is &quot;You are now [number of moves from the location to the Sundial] moves from the Sundial.&quot;;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn66" -->
<div class="definition"><a id="defn66"></a><p class="defnprototype"><b>number of moves from </b>(object)<b> to </b>(object)<b> through </b>(description of objects)<b> ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_bestroutethroughlength -->

<p>This phrase produces the number of map connections which must be followed in order to get from A to B by the shortest number of movements between rooms matching the given description. If A and B are the same, the answer is 0; if there is no route at all, or if either A or B fail to match the description themselves, the answer is -1.</p>

<!-- end definition -->
</div>

<p>Route-finding makes it possible to write quite sophisticated conditions concisely. But these sometimes run slowly, because they call for large amounts of computation. How rapidly Inform can find routes depends on which of two methods it uses. Both have advantages - one is fast but needs large amounts of memory, the other is slow but economical. We can choose between them with one of these two use options:</p>
<!-- START CODE "c1157" -->
<a id="c1157"></a><blockquote class="code"><p class="quoted">
Use fast route-finding.
<br />Use slow route-finding.
</p></blockquote>
<!-- END CODE -->
<p>If neither is specified, &quot;fast&quot; is used where the project uses the Glulx virtual machine (see the Settings panel), and &quot;slow&quot; on the Z-machine, where memory is tighter. Fast route-finding is ideally suited to situations where dozens of characters are constantly route-finding through the map as they meander around in a landscape.</p>
<p class="crossreference"><a href="doc208.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Indirect relations</b></a><i> for route-finding through a relation rather than the map</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "77: Mistress of Animals" "e31" -->
<a id="e31"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example31'); return false;"><b>77</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example31'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mistress of Animals</span></b></a><br />A person who moves randomly between rooms of the map.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc59.html#e31"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example31" style="display: none;">
<p>Suppose we want a restless sort of character always pacing from room to room. It is quite easy to use adjacency to achieve this effect:</p>
<!-- START CODE "c1158_31" -->
<a id="c1158_31"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Mistress of Animals[=0x0022=][=0x000A=][=0x000A=]Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.[=0x000A=][=0x000A=]Artemis is a woman in Thebes.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if Artemis is in a room (called the current space):[=0x000A=][=0x0009=][=0x0009=]let next space be a random room which is adjacent to the current space;[=0x000A=][=0x0009=][=0x0009=]if Artemis is visible, say [=0x0022=]Artemis heads to [the next space].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]move Artemis to next space;[=0x000A=][=0x0009=][=0x0009=]if Artemis is visible, say [=0x0022=]Artemis arrives from [the current space].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / z / z / z[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Mistress of Animals&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1159_31" -->
<a id="c1159_31"></a><blockquote class="code"><p class="quoted">
Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1160_31" -->
<a id="c1160_31"></a><blockquote class="code"><p class="quoted">
Artemis is a woman in Thebes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1161_31" -->
<a id="c1161_31"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if Artemis is in a room (called the current space):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let next space be a random room which is adjacent to the current space;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if Artemis is visible, say &quot;Artemis heads to [the next space].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move Artemis to next space;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if Artemis is visible, say &quot;Artemis arrives from [the current space].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1162_31" -->
<a id="c1162_31"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / z / z / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Of course, it helps that Artemis is the sort to like open spaces. The implementation would become more complicated if there were doors which might block transit between these locations.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "78: All Roads Lead to Mars" "e335" -->
<a id="e335"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example335'); return false;"><b>78</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example335'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">All Roads Lead to Mars</span></b></a><br />Layout where the player is allowed to wander any direction he likes, and the map will arrange itself in order so that he finds the correct "next" location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc9.html#e335"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example335" style="display: none;">
<p>Suppose we want to allow the player to wander freely in any direction, but ourselves maintain control over the order in which he encounters the rooms. This sort of effect emphasizes the order of the story-telling over any kind of rigorous simulation of space; on multiple play-throughs, the player might not find all the same rooms in the same locations.</p>
<!-- START CODE "c1163_335" -->
<a id="c1163_335"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]All Roads Lead to Mars[=0x0022=][=0x000A=][=0x000A=]Before going a direction (called way) when a room (called next location) is not visited:[=0x000A=][=0x0009=]let further place be the room the way from the location;[=0x000A=][=0x0009=]if further place is a room, continue the action;[=0x000A=][=0x0009=]change the way exit of the location to the next location;[=0x000A=][=0x0009=]let reverse be the opposite of the way;[=0x000A=][=0x0009=]change the reverse exit of the next location to the location.[=0x000A=][=0x000A=]The Open Plain is a room. [=0x0022=]A wide-open grassy expanse, from which you could really go any way at all.[=0x0022=][=0x000A=][=0x000A=]The Hilly Place is a room. [=0x0022=]The grassland gives way to a somewhat more hilly area, though there is still very little to guide you any particular way.[=0x0022=][=0x000A=][=0x000A=]The Stream is a room. [=0x0022=]This is the third place you[=0x0027=]ve been today, and so the stream is welcome. How refreshing![=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]n / s / e / e[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;All Roads Lead to Mars&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1164_335" -->
<a id="c1164_335"></a><blockquote class="code"><p class="quoted">
Before going a direction (called way) when a room (called next location) is not visited:
<br />&#160;&#160;&#160;&#160;let further place be the room the way from the location;
<br />&#160;&#160;&#160;&#160;if further place is a room, continue the action;
<br />&#160;&#160;&#160;&#160;change the way exit of the location to the next location;
<br />&#160;&#160;&#160;&#160;let reverse be the opposite of the way;
<br />&#160;&#160;&#160;&#160;change the reverse exit of the next location to the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1165_335" -->
<a id="c1165_335"></a><blockquote class="code"><p class="quoted">
The Open Plain is a room. &quot;A wide-open grassy expanse, from which you could really go any way at all.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1166_335" -->
<a id="c1166_335"></a><blockquote class="code"><p class="quoted">
The Hilly Place is a room. &quot;The grassland gives way to a somewhat more hilly area, though there is still very little to guide you any particular way.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1167_335" -->
<a id="c1167_335"></a><blockquote class="code"><p class="quoted">
The Stream is a room. &quot;This is the third place you've been today, and so the stream is welcome. How refreshing!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1168_335" -->
<a id="c1168_335"></a><blockquote class="code"><p class="quoted">
Test me with &quot;n / s / e / e&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted still to be able to find routes between places, we could define a relationship of connection between rooms, which we would add to as we went along.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "79: Hotel Stechelberg" "e397" -->
<a id="e397"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example397'); return false;"><b>79</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example397'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Hotel Stechelberg</span></b></a><br />Signposts such as those provided on hiking paths in the Swiss Alps, which show the correct direction and hiking time to all other locations.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc11.html#e397"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example397" style="display: none;">
<p>The following rule appends a paragraph to every room description. We need not worry about doors (despite the pass in the Bernese Oberland known figuratively as the &quot;Little Door&quot;).</p>
<!-- START CODE "c1169_397" -->
<a id="c1169_397"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Hotel Stechelberg[=0x0022=][=0x000A=][=0x000A=]After looking:[=0x000A=][=0x0009=]say [=0x0022=]Yellow arms on the signpost point:-[line break][=0x0022=];[=0x000A=][=0x0009=]repeat with destination running through interesting rooms:[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the destination;[=0x000A=][=0x0009=][=0x0009=]if the way is a direction, say [=0x0022=]  [way] for [the destination]: [number of moves from the location to the destination] Std.[=0x0022=][=0x000A=][=0x000A=]Hotel Stechelberg is a room. [=0x0022=]The wooden hiking inn at the end of the road, with flowerboxes, canton flags, outdoor tables and a triangular paddock for the cows contesting the annual Miss Stechelberg competition. Otto and Marianne do cheerful innkeeper things, while the sun blazes from a gentian-blue sky.[=0x0022=][=0x000A=][=0x000A=]A room can be dull or interesting. A room is usually dull.[=0x000A=][=0x000A=]North of Hotel Stechelberg is Trummelbachfalle. North of Trummelbachfalle is Lauterbrunnen. Lauterbrunnen is interesting.[=0x000A=][=0x000A=]Southeast of Hotel Stechelberg is Trachsellauenen. Trachsellauenen is interesting.[=0x000A=][=0x000A=]Test me with [=0x0022=]look[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Hotel Stechelberg&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1170_397" -->
<a id="c1170_397"></a><blockquote class="code"><p class="quoted">
After looking:
<br />&#160;&#160;&#160;&#160;say &quot;Yellow arms on the signpost point:-[line break]&quot;;
<br />&#160;&#160;&#160;&#160;repeat with destination running through interesting rooms:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the destination;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the way is a direction, say &quot;  [way] for [the destination]: [number of moves from the location to the destination] Std.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1171_397" -->
<a id="c1171_397"></a><blockquote class="code"><p class="quoted">
Hotel Stechelberg is a room. &quot;The wooden hiking inn at the end of the road, with flowerboxes, canton flags, outdoor tables and a triangular paddock for the cows contesting the annual Miss Stechelberg competition. Otto and Marianne do cheerful innkeeper things, while the sun blazes from a gentian-blue sky.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1172_397" -->
<a id="c1172_397"></a><blockquote class="code"><p class="quoted">
A room can be dull or interesting. A room is usually dull.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1173_397" -->
<a id="c1173_397"></a><blockquote class="code"><p class="quoted">
North of Hotel Stechelberg is Trummelbachfalle. North of Trummelbachfalle is Lauterbrunnen. Lauterbrunnen is interesting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1174_397" -->
<a id="c1174_397"></a><blockquote class="code"><p class="quoted">
Southeast of Hotel Stechelberg is Trachsellauenen. Trachsellauenen is interesting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1175_397" -->
<a id="c1175_397"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>With a bit more work, the result might be:</p>
<!-- START CODE "c1176_397" -->
<a id="c1176_397"></a><blockquote class="code"><p class="quoted">
Hotel Stechelberg
<br />The wooden hiking inn at the end of the road, with flowerboxes, canton flags, outdoor tables and a triangular paddock for the cows contesting the annual Miss Stechelberg competition. Otto and Marianne do cheerful innkeeper things, while the sun blazes from a gentian-blue sky.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1177_397" -->
<a id="c1177_397"></a><blockquote class="code"><p class="quoted">
Yellow arms on the signpost point:-
<br />&#160;&#160;&#160;&#160;north for Lauterbrunnen: 2 Std.
<br />&#160;&#160;&#160;&#160;west for Sefinental: 2 Std.
<br />&#160;&#160;&#160;&#160;west for Schilthorn: 6 Std.
<br />&#160;&#160;&#160;&#160;southeast for Trachsellauenen: 1 Std.
<br />&#160;&#160;&#160;&#160;southeast for Oberhornsee: 3 Std.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "80: A View of Green Hills" "e199" -->
<a id="e199"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example199'); return false;"><b>80</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example199'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">A View of Green Hills</span></b></a><br />A LOOK [direction] command which allows the player to see descriptions of the nearby landscape.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc11.html#e199"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example199" style="display: none;">
<p>Suppose a game in which the player is wandering an open landscape with long vistas, allowing him to LOOK in some direction, or even look at an adjacent location.</p>
<!-- START CODE "c1178_199" -->
<a id="c1178_199"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]A View of Green Hills[=0x0022=][=0x000A=][=0x000A=]Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.[=0x000A=][=0x000A=]Understand [=0x0022=]look [direction][=0x0022=] as facing.[=0x000A=][=0x000A=]Facing is an action applying to one visible thing.[=0x000A=][=0x000A=]Carry out facing:[=0x000A=][=0x0009=]let the viewed item be the room noun from the location;[=0x000A=][=0x0009=]if the viewed item is not a room, say [=0x0022=]You can[=0x0027=]t see anything promising that way.[=0x0022=] instead;[=0x000A=][=0x0009=]try looking toward the viewed item.[=0x000A=][=0x000A=][In rules about action handling, [=0x0022=]noun[=0x0022=] refers to the first object that the player has mentioned in his command, so if the player typed [=0x003E=]LOOK WEST, [=0x0022=]let the viewed item be the room noun from the location[=0x0022=] would be processed as [=0x0022=]let the viewed item be the room west from the location[=0x0022=], and so on.][=0x000A=][=0x000A=][We can at need override the default behavior, if it is not going to be appropriate for the player to see the next room over. There is only sky above at any time, so...][=0x000A=][=0x000A=]Instead of facing up:[=0x000A=][=0x0009=]say [=0x0022=]Above you is bright sky.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]look toward [any adjacent room][=0x0022=] as looking toward. Understand [=0x0022=]examine [any adjacent room][=0x0022=] as looking toward.[=0x000A=][=0x000A=]Looking toward is an action applying to one visible thing.[=0x000A=][=0x000A=]Carry out looking toward:[=0x000A=][=0x0009=]say [=0x0022=]You make out [the noun] that way.[=0x0022=][=0x000A=][=0x000A=][This design allows us to create descriptions for rooms (as seen from the outside) which will work regardless of where we[=0x0027=]re looking from. For instance:][=0x000A=][=0x000A=]Instead of looking toward Athens:[=0x000A=][=0x0009=]say [=0x0022=]Even from here you can make out the silhouette of the Acropolis.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]look north / look south / look up / look east / east / look west[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;A View of Green Hills&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1179_199" -->
<a id="c1179_199"></a><blockquote class="code"><p class="quoted">
Corinth is a room. Athens is east of Corinth. Epidaurus is southeast of Corinth and east of Mycenae. Mycenae is south of Corinth. Olympia is west of Mycenae. Argos is south of Mycenae. Thebes is northwest of Athens. Pylos is south of Olympia. Sparta is east of Pylos and south of Argos. Delphi is northwest of Thebes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1180_199" -->
<a id="c1180_199"></a><blockquote class="code"><p class="quoted">
Understand &quot;look [direction]&quot; as facing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1181_199" -->
<a id="c1181_199"></a><blockquote class="code"><p class="quoted">
Facing is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1182_199" -->
<a id="c1182_199"></a><blockquote class="code"><p class="quoted">
Carry out facing:
<br />&#160;&#160;&#160;&#160;let the viewed item be the room noun from the location;
<br />&#160;&#160;&#160;&#160;if the viewed item is not a room, say &quot;You can't see anything promising that way.&quot; instead;
<br />&#160;&#160;&#160;&#160;try looking toward the viewed item.
</p></blockquote>
<!-- END CODE -->
<p>In rules about action handling, &quot;noun&quot; refers to the first object that the player has mentioned in his command, so if the player typed &gt;LOOK WEST, &quot;let the viewed item be the room noun from the location&quot; would be processed as &quot;let the viewed item be the room west from the location&quot;, and so on.</p>
<p>We can at need override the default behavior, if it is not going to be appropriate for the player to see the next room over. There is only sky above at any time, so...</p>
<!-- START CODE "c1183_199" -->
<a id="c1183_199"></a><blockquote class="code"><p class="quoted">
Instead of facing up:
<br />&#160;&#160;&#160;&#160;say &quot;Above you is bright sky.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1184_199" -->
<a id="c1184_199"></a><blockquote class="code"><p class="quoted">
Understand &quot;look toward [any adjacent room]&quot; as looking toward. Understand &quot;examine [any adjacent room]&quot; as looking toward.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1185_199" -->
<a id="c1185_199"></a><blockquote class="code"><p class="quoted">
Looking toward is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1186_199" -->
<a id="c1186_199"></a><blockquote class="code"><p class="quoted">
Carry out looking toward:
<br />&#160;&#160;&#160;&#160;say &quot;You make out [the noun] that way.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This design allows us to create descriptions for rooms (as seen from the outside) which will work regardless of where we're looking from. For instance:</p>
<!-- START CODE "c1187_199" -->
<a id="c1187_199"></a><blockquote class="code"><p class="quoted">
Instead of looking toward Athens:
<br />&#160;&#160;&#160;&#160;say &quot;Even from here you can make out the silhouette of the Acropolis.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1188_199" -->
<a id="c1188_199"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look north / look south / look up / look east / east / look west&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "81: Unblinking" "e443" -->
<a id="e443"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example443'); return false;"><b>81</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example443'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Unblinking</span></b></a><br />Finding a best route through light-filled rooms only, leaving aside any that might be dark.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc14.html#e443"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example443" style="display: none;">
<p>Suppose we're simulating a situation where the player needs to travel through lit areas only, but we want to give him some hints about which way might be safe. Here we'll find our best route through light-filled rooms.</p>
<p>The slightly tricky part is that it's not necessarily easy to tell whether a room has a lamp in it. We may say &quot;if the Crypt is lighted&quot;, but that only tells us whether it has been declared to be inherently lighted or dark, not whether it happens to contain a light source that the player would be able to see if he went in.</p>
<p>The easiest way to get around this is to create an object -- the light-meter; place it in the target location; and check whether it &quot;can see&quot; a lit object. This preserves all the usual rules about open and closed containers, transparency, etc.</p>
<!-- START CODE "c1189_443" -->
<a id="c1189_443"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Unblinking[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]The light-meter is a privately-named scenery thing.[=0x000A=][=0x000A=]Definition: a room (called the target room) is light-filled:[=0x000A=][=0x0009=]if the target room is lighted:[=0x000A=][=0x0009=][=0x0009=]yes;[=0x000A=][=0x0009=]move the light-meter to the target room;[=0x000A=][=0x0009=]let the answer be false;[=0x000A=][=0x0009=]if the light-meter can see a lit thing:[=0x000A=][=0x0009=][=0x0009=]now the answer is true;[=0x000A=][=0x0009=]now the light-meter is nowhere;[=0x000A=][=0x0009=]decide on the answer.[=0x000A=][=0x000A=][That done, we[=0x0027=]re free to use our best-route phrases to choose a particular route.][=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Tomb of Angels is a room. [=0x0022=]This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.[=0x0022=][=0x000A=][=0x000A=]The Upward Path is above the Tomb of Angels. It is dark. [=0x0022=]The staircase switches back on itself many times as it ascends towards the Crash Site.[=0x0022=][=0x000A=][=0x000A=]A container called the sarcophagus is in the Upward Path. It is closed and openable. [=0x0022=]A sarcophagus rests in the niche here, [if open]the lid pushed aside[otherwise]the lid firmly in place[end if].[=0x0022=][=0x000A=][=0x000A=]The Crash Site is above the Upward Path. [=0x0022=]The ceiling has wholly caved in here, and the belly of the spaceship above you is visible -- including the escape hatch.[=0x0022=][=0x000A=][=0x000A=]A candle is a kind of thing. A candle is usually lit. The player carries four candles.[=0x000A=][=0x000A=]After looking when the location is not the Crash Site:[=0x000A=][=0x0009=]if the best route from the location to the Crash Site through light-filled rooms is a direction (called next way):[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It looks like there[=0x0027=]s a safe, lit path [if the number of moves from the location to the Crash Site through light-filled rooms is 1]straight[otherwise]if you go[end if] [next way].[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It looks like there is no fully lit path from here to the Crash Site.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]up / drop candle / down / up / take the candle / open sarcophagus / put candle in sarcophagus / down / up / close sarcophagus / d[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Unblinking&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1190_443" -->
<a id="c1190_443"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1191_443" -->
<a id="c1191_443"></a><blockquote class="code"><p class="quoted">
The light-meter is a privately-named scenery thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1192_443" -->
<a id="c1192_443"></a><blockquote class="code"><p class="quoted">
Definition: a room (called the target room) is light-filled:
<br />&#160;&#160;&#160;&#160;if the target room is lighted:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yes;
<br />&#160;&#160;&#160;&#160;move the light-meter to the target room;
<br />&#160;&#160;&#160;&#160;let the answer be false;
<br />&#160;&#160;&#160;&#160;if the light-meter can see a lit thing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the answer is true;
<br />&#160;&#160;&#160;&#160;now the light-meter is nowhere;
<br />&#160;&#160;&#160;&#160;decide on the answer.
</p></blockquote>
<!-- END CODE -->
<p>That done, we're free to use our best-route phrases to choose a particular route.</p>
<!-- START CODE "c1193_443" -->
<a id="c1193_443"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1194_443" -->
<a id="c1194_443"></a><blockquote class="code"><p class="quoted">
The Tomb of Angels is a room. &quot;This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1195_443" -->
<a id="c1195_443"></a><blockquote class="code"><p class="quoted">
The Upward Path is above the Tomb of Angels. It is dark. &quot;The staircase switches back on itself many times as it ascends towards the Crash Site.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1196_443" -->
<a id="c1196_443"></a><blockquote class="code"><p class="quoted">
A container called the sarcophagus is in the Upward Path. It is closed and openable. &quot;A sarcophagus rests in the niche here, [if open]the lid pushed aside[otherwise]the lid firmly in place[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1197_443" -->
<a id="c1197_443"></a><blockquote class="code"><p class="quoted">
The Crash Site is above the Upward Path. &quot;The ceiling has wholly caved in here, and the belly of the spaceship above you is visible -- including the escape hatch.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1198_443" -->
<a id="c1198_443"></a><blockquote class="code"><p class="quoted">
A candle is a kind of thing. A candle is usually lit. The player carries four candles.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1199_443" -->
<a id="c1199_443"></a><blockquote class="code"><p class="quoted">
After looking when the location is not the Crash Site:
<br />&#160;&#160;&#160;&#160;if the best route from the location to the Crash Site through light-filled rooms is a direction (called next way):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It looks like there's a safe, lit path [if the number of moves from the location to the Crash Site through light-filled rooms is 1]straight[otherwise]if you go[end if] [next way].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It looks like there is no fully lit path from here to the Crash Site.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c1200_443" -->
<a id="c1200_443"></a><blockquote class="code"><p class="quoted">
Test me with &quot;up / drop candle / down / up / take the candle / open sarcophagus / put candle in sarcophagus / down / up / close sarcophagus / d&quot;.
</p></blockquote>
<!-- END CODE -->
<p>An important word of caution: this method would give false negatives if there were a backdrop lightsource, such as the moon, providing light to the Upward Path. This is because backdrops are actually moved around the map by Inform during play, following the player around. So if the moon backdrop is in the Crash Site with the player, it will not be in the Upward Path as well -- even if it's scheduled to move there as soon as the player does.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc94.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc96.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
