<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>6.18. Alternatives To Standard Parsing</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Alternatives To Standard Parsing" -->
<!-- SEARCH SECTION "6.18" -->
<!-- SEARCH SORT "001-006-018-000" -->
<!-- START IGNORE 45 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc45.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 6: Commands</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc47.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง6.18. Alternatives To Standard Parsing</p>
<p>Very occasionally, for out-of-the-ordinary games, we want to make major changes to the way that Inform ordinarily understands commands.</p>
<p><span class="boldface">Cloves</span> shows how we might read adverbs in the player's command: adverbs are challenging because they can legitimately appear anywhere in a command structure, so must be found and accounted for before the rest of the command is understood.</p>
<p><span class="boldface">Fragment of a Greek Tragedy</span> goes further, substituting a keyword-recognition parser for the usual structure of commands and objects.</p>
<p>Less drastically, menus of numbered options can temporarily replace or augment standard commands. <span class="boldface">Down in Oodville</span> demonstrates how to add a list of transporter destinations from which the player may choose by numeral.</p>
<p class="crossreference"><a href="Rdoc24.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Traits Determined By the Player</b></a><i> for ways to ask the player a question at the beginning of play</i></p><p class="crossreference"><a href="Rdoc53.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Saying Simple Things</b></a><i> for a way to ask the player a yes-no question any time during play</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "304: Down in Oodville" "e236" -->
<a id="e236"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example236'); return false;"><b>304</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example236'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Down in Oodville</span></b></a><br />Offering the player a choice of numbered options at certain times, without otherwise interfering with his ability to give regular commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc273.html#e236"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example236" style="display: none;">
<p>Now and then in IF there is a situation where we need to ask the player for a numbered choice rather than an ordinary action command. What's more, that numbered choice might change during the game, so we don't want to just hard-wire the meanings of &quot;1&quot;, &quot;2&quot;, and &quot;3&quot; whenever the player types them.</p>
<p>A better trick is to keep a list or table (we'll use a table here because it involves slightly less overhead) recording what the player's numerical choices currently mean. Then every time the player selects a number, the table is consulted, and if the number corresponds to something, the player's choice is acted on.</p>
<p>In our example, we'll have a transporter pad that can take the player to any room in the game that he's already visited. (Just for the sake of example, we'll start him off with a few pre-visited rooms.)</p>
<!-- START CODE "c12121_236" -->
<a id="c12121_236"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Down in Oodville[=0x0022=][=0x000A=][=0x000A=]Section 1 - Method[=0x000A=][=0x000A=]Understand [=0x0022=][number][=0x0022=] as selecting.[=0x000A=][=0x000A=]Selecting is an action applying to one number.[=0x000A=][=0x000A=]Check selecting: [assuming we don[=0x0027=]t want to be able to transport from just anywhere][=0x000A=][=0x0009=]if the player is not on the transporter pad:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]empty the transport options instead.[=0x000A=][=0x000A=]Check selecting:[=0x000A=][=0x0009=]if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The number understood] is not a valid option. [=0x0022=];[=0x000A=][=0x0009=][=0x0009=]list the transport options instead.[=0x000A=][=0x000A=]Carry out selecting:[=0x000A=][=0x0009=]let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand][=0x000A=][=0x0009=]choose row N in the Table of Transport Options;[=0x000A=][=0x0009=]if the transport entry is a room:[=0x000A=][=0x0009=][=0x0009=]move the player to the transport entry;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]*** BUG: Improperly filled table of transport options ***[=0x0022=] [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code][=0x000A=][=0x000A=]To list the transport options:[=0x000A=][=0x0009=]let N be 1;[=0x000A=][=0x0009=]say [=0x0022=]From here you could choose to go to: [line break][=0x0022=];[=0x000A=][=0x0009=]repeat through the Table of Transport Options:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]  [N]: [transport entry][line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]increment N.[=0x000A=][=0x000A=]To empty the transport options:[=0x000A=][=0x0009=]repeat through the Table of Transport Options:[=0x000A=][=0x0009=][=0x0009=]blank out the whole row; [first we empty the table][=0x000A=][=0x000A=]To load the transport options:[=0x000A=][=0x0009=]repeat with interesting room running through visited rooms which are not the Transporter Room:[=0x000A=][=0x0009=][=0x0009=]choose a blank row in the Table of Transport Options;[=0x000A=][=0x0009=][=0x0009=]now the transport entry is the interesting room.[=0x000A=][=0x000A=]Table of Transport Options[=0x000A=]transport[=0x000A=]an object[=0x000A=]with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.][=0x000A=][=0x000A=][=0x000A=]Understand [=0x0022=]home[=0x0022=] as homing. Homing is an action applying to nothing.[=0x000A=][=0x000A=]Check homing:[=0x000A=][=0x0009=]if the player is in the Transporter Room:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re already here![=0x0022=] instead.[=0x000A=][=0x000A=]Carry out homing:[=0x000A=][=0x0009=]move the player to the transporter room.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]The Transporter Room is a room.[=0x000A=][=0x000A=]Oodville is a visited room.[=0x000A=][=0x000A=]Midnight is a visited room. The Diamond City is west of Midnight.[=0x000A=][=0x000A=]The transporter pad is an enterable supporter in the Transporter Room. [=0x0022=]The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied.[=0x0022=][=0x000A=][=0x000A=]After entering the transporter pad:[=0x000A=][=0x0009=]say [=0x0022=]The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on][=0x0022=];[=0x000A=][=0x0009=]empty the transport options;[=0x000A=][=0x0009=]load the transport options;[=0x000A=][=0x0009=]list the transport options.[=0x000A=][=0x000A=]Test me with [=0x0022=]get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Down in Oodville&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12122_236" -->
<a id="c12122_236"></a><blockquote class="code"><p class="quoted">
Section 1 - Method
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12123_236" -->
<a id="c12123_236"></a><blockquote class="code"><p class="quoted">
Understand &quot;[number]&quot; as selecting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12124_236" -->
<a id="c12124_236"></a><blockquote class="code"><p class="quoted">
Selecting is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12125_236" -->
<a id="c12125_236"></a><blockquote class="code"><p class="quoted">
Check selecting: [assuming we don't want to be able to transport from just anywhere]
<br />&#160;&#160;&#160;&#160;if the player is not on the transporter pad:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;empty the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12126_236" -->
<a id="c12126_236"></a><blockquote class="code"><p class="quoted">
Check selecting:
<br />&#160;&#160;&#160;&#160;if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The number understood] is not a valid option. &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12127_236" -->
<a id="c12127_236"></a><blockquote class="code"><p class="quoted">
Carry out selecting:
<br />&#160;&#160;&#160;&#160;let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand]
<br />&#160;&#160;&#160;&#160;choose row N in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;if the transport entry is a room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the player to the transport entry;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;*** BUG: Improperly filled table of transport options ***&quot; [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12128_236" -->
<a id="c12128_236"></a><blockquote class="code"><p class="quoted">
To list the transport options:
<br />&#160;&#160;&#160;&#160;let N be 1;
<br />&#160;&#160;&#160;&#160;say &quot;From here you could choose to go to: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [N]: [transport entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12129_236" -->
<a id="c12129_236"></a><blockquote class="code"><p class="quoted">
To empty the transport options:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row; [first we empty the table]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12130_236" -->
<a id="c12130_236"></a><blockquote class="code"><p class="quoted">
To load the transport options:
<br />&#160;&#160;&#160;&#160;repeat with interesting room running through visited rooms which are not the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose a blank row in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the transport entry is the interesting room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12131_236" -->
<a id="c12131_236"></a><blockquote class="code"><p class="quoted">
Table of Transport Options
<br />transport
<br />an object
<br />with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12132_236" -->
<a id="c12132_236"></a><blockquote class="code"><p class="quoted">
Understand &quot;home&quot; as homing. Homing is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12133_236" -->
<a id="c12133_236"></a><blockquote class="code"><p class="quoted">
Check homing:
<br />&#160;&#160;&#160;&#160;if the player is in the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're already here!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12134_236" -->
<a id="c12134_236"></a><blockquote class="code"><p class="quoted">
Carry out homing:
<br />&#160;&#160;&#160;&#160;move the player to the transporter room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12135_236" -->
<a id="c12135_236"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12136_236" -->
<a id="c12136_236"></a><blockquote class="code"><p class="quoted">
The Transporter Room is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12137_236" -->
<a id="c12137_236"></a><blockquote class="code"><p class="quoted">
Oodville is a visited room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12138_236" -->
<a id="c12138_236"></a><blockquote class="code"><p class="quoted">
Midnight is a visited room. The Diamond City is west of Midnight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12139_236" -->
<a id="c12139_236"></a><blockquote class="code"><p class="quoted">
The transporter pad is an enterable supporter in the Transporter Room. &quot;The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12140_236" -->
<a id="c12140_236"></a><blockquote class="code"><p class="quoted">
After entering the transporter pad:
<br />&#160;&#160;&#160;&#160;say &quot;The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;empty the transport options;
<br />&#160;&#160;&#160;&#160;load the transport options;
<br />&#160;&#160;&#160;&#160;list the transport options.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12141_236" -->
<a id="c12141_236"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to replace the regular command structure entirely with numbered menus, or use menus to hold conversation options, we could: several Inform extensions provide these functions.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "373: Cloves" "e263" -->
<a id="e263"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example263'); return false;"><b>373</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example263'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Cloves</span></b></a><br />Accepting adverbs anywhere in a command, registering what the player typed but then cutting them out before interpreting the command.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc319.html#e263"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example263" style="display: none;">
<p>It has sometimes been suggested that IF should allow for the player to use adverbs, so that doing something &quot;carefully&quot; will have a different effect from doing it &quot;quickly&quot;. There are several inherent challenges here: it's a good idea to make very sure the player knows all his adverb options, and the list of possibilities should probably not be too long.</p>
<p>Another trick is that adverbs complicate understanding commands, because they can occur anywhere: one might type &gt;GO WEST CAREFULLY or &gt;CAREFULLY GO WEST, and ideally the game should understand both. After reading a command is the best point to do this sort of thing, because we can find adverbs, interpret them, and remove them from the command stream. So:</p>
<!-- START CODE "c12142_263" -->
<a id="c12142_263"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Cloves[=0x0022=][=0x000A=][=0x000A=]Manner is a kind of value. The manners are insouciantly, sheepishly, and defiantly.[=0x000A=][=0x000A=][Now we have, automatically, a value called manner understood to be used whenever parsing manners, and we can use this even during the [=0x0022=]after reading a command[=0x0022=] stage, so:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the player[=0x0027=]s command includes [=0x0022=][manner][=0x0022=]:[=0x000A=][=0x0009=][=0x0009=]cut the matched text;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]But how, my dear boy, how? You simply can[=0x0027=]t do something without a pose. Thus far you have mastered doing things [list of manners].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the left hand status line is [=0x0022=]Behaving [manner understood][=0x0022=];[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=][location][=0x0022=];[=0x000A=][=0x0009=]now the manner understood is insouciantly.[=0x000A=][=0x000A=]The Poseur Club is a room. [=0x0022=]Lady Mary is laid out on a sofa, her wrists bandaged importantly[if the manner understood is insouciantly] -- and she looks all the more depressed by your indifference to her state[end if]; Salvatore is at the gaming table, clutching his hair with both hands[if the manner understood is defiantly] -- though he looks up long enough to snarl in response to that expression of yours[end if]; Frackenbush is muttering lines from another of his works in progress, as though poetry has nearly made him mad[if the manner understood is sheepishly]. But he spares you a reassuring smile. He[=0x0027=]s not a bad fellow, Frackenbush[end if].[=0x000A=][=0x000A=]The usual people, in short.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something other than waiting or looking:[=0x000A=][=0x0009=]say [=0x0022=]Dear. No. That would smack of effort.[=0x0022=][=0x000A=][=0x000A=]Instead of waiting when the manner understood is sheepishly:[=0x000A=][=0x0009=]say [=0x0022=]You scuff your foot against the ground for a moment, and allow a seemly blush to creep over your cheek. It[=0x0027=]s quite effective, you are sure, though you can[=0x0027=]t look up and see how it is going.[=0x0022=][=0x000A=][=0x000A=]Instead of waiting when the manner understood is insouciantly:[=0x000A=][=0x0009=]say [=0x0022=]Thrusting your hands into your pockets, you whistle a jaunty tune.[=0x000A=][=0x000A=][=0x0027=]Do shut up,[=0x0027=] says a Melancholy Poseur from over by the window.[=0x0022=][=0x000A=][=0x000A=]Instead of waiting when the manner understood is defiantly:[=0x000A=][=0x0009=]say [=0x0022=]You raise your chin and give a pointed glance around the room as though to say that you are waiting for someone; you are unembarrassed about waiting for her; you have by no means been stood up; and the first person to comment will receive a poke in the eye.[=0x0022=][=0x000A=][=0x000A=]Before looking when the manner understood is sheepishly:[=0x000A=][=0x0009=]say [=0x0022=]You gaze up from under your brows...[=0x0022=][=0x000A=][=0x000A=]Before looking when the manner understood is defiantly:[=0x000A=][=0x0009=]say [=0x0022=]You cast a withering gaze over the room.[=0x0022=][=0x000A=][=0x000A=]Before looking when the manner understood is insouciantly:[=0x000A=][=0x0009=]if turn count [=0x003E=] 1,[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You turn an eye to your surroundings, looking faintly-- just faintly-- amused.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]wait / wait insouciantly / sheepishly look / defiantly look / look insouciantly[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Cloves&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12143_263" -->
<a id="c12143_263"></a><blockquote class="code"><p class="quoted">
Manner is a kind of value. The manners are insouciantly, sheepishly, and defiantly.
</p></blockquote>
<!-- END CODE -->
<p>Now we have, automatically, a value called manner understood to be used whenever parsing manners, and we can use this even during the &quot;after reading a command&quot; stage, so:</p>
<!-- START CODE "c12144_263" -->
<a id="c12144_263"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;[manner]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;But how, my dear boy, how? You simply can't do something without a pose. Thus far you have mastered doing things [list of manners].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12145_263" -->
<a id="c12145_263"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Behaving [manner understood]&quot;;
<br />&#160;&#160;&#160;&#160;now the right hand status line is &quot;[location]&quot;;
<br />&#160;&#160;&#160;&#160;now the manner understood is insouciantly.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12146_263" -->
<a id="c12146_263"></a><blockquote class="code"><p class="quoted">
The Poseur Club is a room. &quot;Lady Mary is laid out on a sofa, her wrists bandaged importantly[if the manner understood is insouciantly] -- and she looks all the more depressed by your indifference to her state[end if]; Salvatore is at the gaming table, clutching his hair with both hands[if the manner understood is defiantly] -- though he looks up long enough to snarl in response to that expression of yours[end if]; Frackenbush is muttering lines from another of his works in progress, as though poetry has nearly made him mad[if the manner understood is sheepishly]. But he spares you a reassuring smile. He's not a bad fellow, Frackenbush[end if].
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12147_263" -->
<a id="c12147_263"></a><blockquote class="code"><p class="quoted">
The usual people, in short.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12148_263" -->
<a id="c12148_263"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than waiting or looking:
<br />&#160;&#160;&#160;&#160;say &quot;Dear. No. That would smack of effort.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12149_263" -->
<a id="c12149_263"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is sheepishly:
<br />&#160;&#160;&#160;&#160;say &quot;You scuff your foot against the ground for a moment, and allow a seemly blush to creep over your cheek. It's quite effective, you are sure, though you can't look up and see how it is going.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12150_263" -->
<a id="c12150_263"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is insouciantly:
<br />&#160;&#160;&#160;&#160;say &quot;Thrusting your hands into your pockets, you whistle a jaunty tune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12151_263" -->
<a id="c12151_263"></a><blockquote class="code"><p class="quoted">
'Do shut up,' says a Melancholy Poseur from over by the window.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12152_263" -->
<a id="c12152_263"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is defiantly:
<br />&#160;&#160;&#160;&#160;say &quot;You raise your chin and give a pointed glance around the room as though to say that you are waiting for someone; you are unembarrassed about waiting for her; you have by no means been stood up; and the first person to comment will receive a poke in the eye.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12153_263" -->
<a id="c12153_263"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is sheepishly:
<br />&#160;&#160;&#160;&#160;say &quot;You gaze up from under your brows...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12154_263" -->
<a id="c12154_263"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is defiantly:
<br />&#160;&#160;&#160;&#160;say &quot;You cast a withering gaze over the room.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12155_263" -->
<a id="c12155_263"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is insouciantly:
<br />&#160;&#160;&#160;&#160;if turn count &gt; 1,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You turn an eye to your surroundings, looking faintly-- just faintly-- amused.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12156_263" -->
<a id="c12156_263"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wait / wait insouciantly / sheepishly look / defiantly look / look insouciantly&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The qualification about turn count is to prevent this before message from occurring when the player first looks around the room (automatically) at the start of play.</p>
<p>Note that to test this example, one must type INSOUCIANTLY TEST ME, and not simply TEST ME: a poseur's work is never done.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "375: Fragment of a Greek Tragedy" "e351" -->
<a id="e351"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example351'); return false;"><b>375</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example351'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Fragment of a Greek Tragedy</span></b></a><br />Responding to the player's input based on keywords only, and overriding the original parser entirely.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc319.html#e351"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example351" style="display: none;">
<p>Apologies to the shade of A. E. Housman.</p>
<!-- START CODE "c12157_351" -->
<a id="c12157_351"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Fragment of a Greek Tragedy[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]restart/restore/save/quit[=0x0022=] as [=0x0022=][meta-command][=0x0022=].[=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]if the player[=0x0027=]s command matches [=0x0022=][meta-command][=0x0022=], make no decision;[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]repeat through Table of Current Topics:[=0x000A=][=0x0009=][=0x0009=]if the player[=0x0027=]s command includes topic entry:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]CHORUS: [reply entry][paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]follow the advance time rule;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=][italic type]   Pause.[roman type][line break][=0x0022=];[=0x000A=][=0x0009=]follow the advance time rule;[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=]Table of Current Topics[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]journey/trip/travel/came/arrived[=0x0022=][=0x0009=][=0x0022=]Sailing on horseback, or with feet for oars?[=0x0022=][=0x000A=][=0x0022=]horseback/legs/feet/oars[=0x0022=][=0x0009=][=0x0022=]Beneath a shining or a rainy Zeus?[=0x0022=][=0x000A=][=0x0022=]shining/rainy/weather/zeus[=0x0022=][=0x0009=][=0x0022=]Mud[=0x0027=]s sister, not herself, adorns thy boots.[=0x0022=][=0x000A=][=0x000A=][This would be a bit bare if we didn[=0x0027=]t provide the player with some sort of context at the outset, so let[=0x0027=]s put some remarks before the first command prompt:][=0x000A=][=0x000A=]Before reading a command while the turn count is 1:[=0x000A=][=0x0009=]say [=0x0022=]CHORUS: O suitably-attired-in-leather-boots[=0x000A=][=0x0009=]Head of a traveller, wherefore seeking whom[=0x000A=][=0x0009=]Whence by what way how purposed art thou come[=0x000A=][=0x0009=]To this well-nightingaled vicinity?[=0x000A=][=0x0009=]My object in inquiring is to know.[=0x000A=][=0x0009=]But if you happen to be deaf and dumb[=0x000A=][=0x0009=]And do not understand a word I say,[=0x000A=][=0x0009=]Then wave your hand, to signify as much.[=0x0022=][=0x000A=][=0x000A=][This [=0x0022=]turn count[=0x0022=] condition is why it was useful to follow the advance time rule in [=0x0022=]after reading a command[=0x0022=]: the game (or drama, if you like) will continue to count moves elapsed even though the rest of Inform[=0x0027=]s command parsing and world model is being ignored. In a longer and more ambitious implementation of this idea, we might want to allow scenes to govern the behavior and responses of the Chorus.][=0x000A=][=0x000A=][And then to give the whole exchange a play[=0x0027=]s format:][=0x000A=][=0x000A=]The Stage is a room.[=0x000A=][=0x000A=]The room description heading rule is not listed in the carry out looking rules.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the command prompt is [=0x0022=]YOU: [=0x0022=];[=0x000A=][=0x0009=]now left hand status line is [=0x0022=]Fragment of a Greek Tragedy[=0x0022=];[=0x000A=][=0x0009=]now right hand status line is [=0x0022=]A. E. Housman[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Fragment of a Greek Tragedy&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12158_351" -->
<a id="c12158_351"></a><blockquote class="code"><p class="quoted">
Understand &quot;restart/restore/save/quit&quot; as &quot;[meta-command]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12159_351" -->
<a id="c12159_351"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command matches &quot;[meta-command]&quot;, make no decision;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;repeat through Table of Current Topics:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player's command includes topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;CHORUS: [reply entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the advance time rule;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;[italic type]   Pause.[roman type][line break]&quot;;
<br />&#160;&#160;&#160;&#160;follow the advance time rule;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12160_351" -->
<a id="c12160_351"></a><blockquote class="code"><p class="quoted">
Table of Current Topics
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;journey/trip/travel/came/arrived&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Sailing on horseback, or with feet for oars?&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;horseback/legs/feet/oars&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Beneath a shining or a rainy Zeus?&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;shining/rainy/weather/zeus&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Mud's sister, not herself, adorns thy boots.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>This would be a bit bare if we didn't provide the player with some sort of context at the outset, so let's put some remarks before the first command prompt:</p>
<!-- START CODE "c12161_351" -->
<a id="c12161_351"></a><blockquote class="code"><p class="quoted">
Before reading a command while the turn count is 1:
<br />&#160;&#160;&#160;&#160;say &quot;CHORUS: O suitably-attired-in-leather-boots
<br />&#160;&#160;&#160;&#160;Head of a traveller, wherefore seeking whom
<br />&#160;&#160;&#160;&#160;Whence by what way how purposed art thou come
<br />&#160;&#160;&#160;&#160;To this well-nightingaled vicinity?
<br />&#160;&#160;&#160;&#160;My object in inquiring is to know.
<br />&#160;&#160;&#160;&#160;But if you happen to be deaf and dumb
<br />&#160;&#160;&#160;&#160;And do not understand a word I say,
<br />&#160;&#160;&#160;&#160;Then wave your hand, to signify as much.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This &quot;turn count&quot; condition is why it was useful to follow the advance time rule in &quot;after reading a command&quot;: the game (or drama, if you like) will continue to count moves elapsed even though the rest of Inform's command parsing and world model is being ignored. In a longer and more ambitious implementation of this idea, we might want to allow scenes to govern the behavior and responses of the Chorus.</p>
<p>And then to give the whole exchange a play's format:</p>
<!-- START CODE "c12162_351" -->
<a id="c12162_351"></a><blockquote class="code"><p class="quoted">
The Stage is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12163_351" -->
<a id="c12163_351"></a><blockquote class="code"><p class="quoted">
The room description heading rule is not listed in the carry out looking rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12164_351" -->
<a id="c12164_351"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;YOU: &quot;;
<br />&#160;&#160;&#160;&#160;now left hand status line is &quot;Fragment of a Greek Tragedy&quot;;
<br />&#160;&#160;&#160;&#160;now right hand status line is &quot;A. E. Housman&quot;.
</p></blockquote>
<!-- END CODE -->
<p>(Because this example manipulates commands outside of the normal parser, the mechanism for TEST will not work here. Try typing commands such as: TELL CHORUS ABOUT JOURNEY / TELL CHORUS ABOUT FEET / TELL CHORUS ABOUT SHROPSHIRE / TELL CHORUS ABOUT ZEUS)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc45.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc47.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
