<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>13.6. Making reciprocal relations</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Making reciprocal relations" -->
<!-- SEARCH SECTION "13.6" -->
<!-- SEARCH SORT "000-013-006-000" -->
<!-- START IGNORE 202 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc202.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 13: Relations</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc204.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง13.6. Making reciprocal relations</p>
<p>The relationships described in this chapter so far are by no means always reciprocated. For instance, if a stone is on a table, then it is never true that the table is also on the stone. And the question may not even be meaningful to ask. If Peter wears a jacket, the jacket does not even have the possibility of wearing Peter.</p>
<p>But sometimes we do want a relation which works both ways equally well. These are simple to set up:</p>
<!-- START CODE "c3773" -->
<a id="c3773"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
</p></blockquote>
<!-- END CODE -->
<p>The effect is that various people know various other people, and this is always reciprocated. If Daisy knows Sophie then, automatically, Sophie knows Daisy. This even-handedness is maintained throughout play, so that whatever changes are made it is always true that if A knows B then B knows A.</p>
<p>And similarly for a reciprocal relation between one and another:</p>
<!-- START CODE "c3774" -->
<a id="c3774"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>In this case, we can again give a name to the partner under a relation:</p>
<!-- START CODE "c3775" -->
<a id="c3775"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another (called the spouse).
</p></blockquote>
<!-- END CODE -->
<p>and now, for instance, we may have that the spouse of John is Yoko and the spouse of Yoko is John.</p>
<p>Since many of these examples have involved people, it might be worth mentioning again that any kind can be involved, not just the &quot;person&quot; kind.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "226: Four Cheeses" "e53" -->
<a id="e53"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example53'); return false;"><b>226</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example53'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Four Cheeses</span></b></a><br />A system of telephones on which the player can call distant persons and have conversations.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc77.html#e53"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example53" style="display: none;">
<!-- START CODE "c3776_53" -->
<a id="c3776_53"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Four Cheeses[=0x0022=][=0x000A=][=0x000A=]Section 1 - Telephones and Connections[=0x000A=][=0x000A=]A telephone is a kind of thing. Understand [=0x0022=]phone[=0x0022=] as a telephone.[=0x000A=][=0x000A=]Understand [=0x0022=]call [any telephone] on [something][=0x0022=] as calling it on. Understand [=0x0022=]call [any telephone][=0x0022=] as calling it on. Understand the commands [=0x0022=]dial[=0x0022=] or [=0x0022=]phone[=0x0022=] or [=0x0022=]telephone[=0x0022=] as [=0x0022=]call[=0x0022=]. Understand [=0x0022=]call [any known person][=0x0022=] as calling it by name on.[=0x000A=][=0x000A=]Connection relates one thing to another (called the other party).[=0x000A=][=0x000A=]The verb to reach means the connection relation.[=0x000A=][=0x000A=]Calling it on is an action applying to one visible thing and one thing.[=0x000A=][=0x000A=]Check calling it on:[=0x000A=][=0x0009=]if the second noun is not a telephone, say [=0x0022=][The second noun] is unlikely to be much use in that respect.[=0x0022=] instead;[=0x000A=][=0x0009=]if the second noun is the noun, say [=0x0022=]You get a busy signal.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out calling it on:[=0x000A=][=0x0009=]if a person (called the listener) can see the noun, now the player reaches the listener.[=0x000A=][=0x000A=][Because we[=0x0027=]ve said that connection is a reciprocal, one-to-one relationship, Inform will do the rest of the bookkeeping: if (for instance) we telephone someone else, the first connection will be broken automatically.][=0x000A=][=0x000A=]Report calling it on:[=0x000A=][=0x0009=]say [=0x0022=][=0x0027=]Hello?[=0x0027=] says [the other party of the player].[=0x0022=][=0x000A=][=0x000A=][To avoid annoyance, we should also let the player use CALL #### as well as CALL #### ON TELEPHONE. A rule from the chapter on Activities comes in handy here:][=0x000A=][=0x000A=]Rule for supplying a missing second noun while calling something on:[=0x000A=][=0x0009=]assign a phone.[=0x000A=][=0x000A=]To assign a phone:[=0x000A=][=0x0009=]if the player can touch a telephone (called the current phone):[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](on [the current phone])[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now the second noun is the current phone;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You don[=0x0027=]t have a phone handy.[=0x0022=][=0x000A=][=0x000A=][Things might be a little more complicated if we had cell phones that could be moved around, but for right now the player can only touch a maximum of one phone at a time.][=0x000A=][=0x000A=][Suppose we further want to allow the player to call people up by name, but only if they[=0x0027=]ve already been encountered or are familiar to the player for some reason.][=0x000A=][=0x000A=]A person can be known or unknown.[=0x000A=][=0x000A=]Understand [=0x0022=]call [any known person][=0x0022=] as calling it by name on.[=0x000A=][=0x000A=]Understand [=0x0022=]call [any known person] on [something][=0x0022=] as calling it by name on.[=0x000A=][=0x000A=]Rule for supplying a missing second noun while calling something by name on:[=0x000A=][=0x0009=]assign a phone.[=0x000A=][=0x000A=]Calling it by name on is an action applying to one visible thing and one thing.[=0x000A=][=0x000A=]Check calling it by name on:[=0x000A=][=0x0009=]if the noun is in the location, say [=0x0022=][The noun] is right here.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out calling it by name on:[=0x000A=][=0x0009=]if the noun can touch a telephone (called the link), try calling the link on the second noun;[=0x000A=][=0x0009=]otherwise say [=0x0022=]You can[=0x0027=]t reach [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Before calling something on something when the player reaches someone:[=0x000A=][=0x0009=]say [=0x0022=](first ending your conversation with [the other party of the player])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]end current conversation.[=0x000A=][=0x000A=]Understand [=0x0022=]hang up [something][=0x0022=] as hanging up.[=0x000A=][=0x000A=]Hanging up is an action applying to one thing.[=0x000A=][=0x000A=]Check hanging up:[=0x000A=][=0x0009=]if the noun is not a telephone, say [=0x0022=]You can[=0x0027=]t hang up [the noun].[=0x0022=] instead;[=0x000A=][=0x0009=]if the player does not reach someone, say [=0x0022=]You[=0x0027=]re not on the line with anyone.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out hanging up:[=0x000A=][=0x0009=]now the player does not reach anyone.[=0x000A=][=0x000A=]Report hanging up:[=0x000A=][=0x0009=]say [=0x0022=]You put down [the noun], cutting the connection.[=0x0022=][=0x000A=][=0x000A=]Before going somewhere when the player reaches someone:[=0x000A=][=0x0009=]say [=0x0022=](first hanging up on [the other party of the player])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]end current conversation.[=0x000A=][=0x000A=][And finally we want to make sure that calling random other numbers produces a sensible result:][=0x000A=][=0x000A=]Understand [=0x0022=]call [text][=0x0022=] as misdialling. Misdialling is an action applying to one topic. Carry out misdialling: say [=0x0022=]The phone rings and rings but no one answers.[=0x0022=][=0x000A=][=0x000A=]Understand [=0x0022=]call 911[=0x0022=] or [=0x0022=]call 999[=0x0022=] or [=0x0022=]call police[=0x0022=] or [=0x0022=]call fire department[=0x0022=] as a mistake ([=0x0022=]After strict warnings, you[=0x0027=]ve given up making prank calls to emergency services.[=0x0022=]).[=0x000A=][=0x000A=]Before misdialling when the player reaches someone:[=0x000A=][=0x0009=]say [=0x0022=](first ending your conversation with [the other party of the player])[command clarification break][=0x0022=];[=0x000A=][=0x0009=]end current conversation.[=0x000A=][=0x000A=]To end current conversation:[=0x000A=][=0x0009=]let the current phone be a random telephone which can be touched by the player;[=0x000A=][=0x0009=]silently try hanging up the current phone.[=0x000A=][=0x000A=]After deciding the scope of the player while the player reaches someone:[=0x000A=][=0x0009=]place the other party of the player in scope, but not its contents.[=0x000A=][=0x000A=][A note about this scope addition: the player can refer to the other party whenever he has the other person on the phone. He can[=0x0027=]t, however, see or refer to anything that person might be holding or wearing, thanks to the [=0x0022=]but not its contents[=0x0022=] option.][=0x000A=][=0x000A=][Furthermore, the player can[=0x0027=]t actually do anything to that person that requires touching. That[=0x0027=]s because of the reaching inside rules, which govern whether the player can reach through intervening barriers such as rooms. (See the Advanced Actions chapter for more about changing reachability.) There are two things we might want to be careful about, though.][=0x000A=][=0x000A=][First, we should specifically disallow the player from looking at the person on the other end of the line. Since sight doesn[=0x0027=]t require touching, the reaching inside rules will not be consulted about a command such as EXAMINE BOSS or LOOK UNDER BOSS. We can, however, intervene in such cases using the visibility rules, which are consulted for any actions that [=0x0022=]require light[=0x0022=] (including EXAMINE and LOOK UNDER). Here again we borrow some options from the Advanced Actions chapter:][=0x000A=][=0x000A=]To decide whether acting through the line:[=0x000A=][=0x0009=]if the noun is something and the location of the noun is not the location of the player:[=0x000A=][=0x0009=][=0x0009=]yes;[=0x000A=][=0x0009=]if the second noun is something and the location of the second noun is not the location of the player:[=0x000A=][=0x0009=][=0x0009=]yes;[=0x000A=][=0x0009=]no.[=0x000A=][=0x000A=]Visibility rule when acting through the line:[=0x000A=][=0x0009=]there is insufficient light.[=0x000A=][=0x000A=]Rule for printing a refusal to act in the dark when acting through the line:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re not on a video phone, so you can only hear.[=0x0022=] instead.[=0x000A=][=0x000A=][Second, though the existing reaching inside rules are adequate to stop us from touching the person on the other end of the line, the response that[=0x0027=]s currently printed is a bit generic: it just says [=0x0022=]You can[=0x0027=]t reach into [the room containing the person].[=0x0022=] Let[=0x0027=]s add our own custom reply, instead:][=0x000A=][=0x000A=]A rule for reaching inside a room (called destination):[=0x000A=][=0x0009=]if the other party of the player is enclosed by the destination:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Though you[=0x0027=]re on the line with [the other party of the player], you can[=0x0027=]t physically reach to [the destination].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]deny access.[=0x000A=][=0x000A=]Section 2 - Conversation over the Phone, In General[=0x000A=][=0x000A=][This portion supplies a simple method of conversation; but we could substitute some completely different conversation system if appropriate. The effect of the telephones is that we are allowed to talk to characters in distant locations under certain circumstances, after which the usual conversation rules apply.][=0x000A=][=0x000A=]Instead of listening to a telephone when the player reaches someone:[=0x000A=][=0x0009=]say [=0x0022=]You can hear [the other party of the player] breathing.[=0x0022=][=0x000A=][=0x000A=]Before listening to someone when the player cannot touch the noun:[=0x000A=][=0x0009=]say [=0x0022=][The noun] is waiting for you to carry on the conversation.[=0x0022=] instead.[=0x000A=][=0x000A=]A person has a table name called chatter.[=0x000A=][=0x000A=]Before telling someone about something:[=0x000A=][=0x0009=]try asking the noun about it instead.[=0x000A=][=0x000A=]Before answering someone that something:[=0x000A=][=0x0009=]say [=0x0022=]Best to confine your conversation to questions and answers.[=0x0022=] instead.[=0x000A=][=0x000A=]Before asking someone about something:[=0x000A=][=0x0009=]if the topic understood is a topic listed in the chatter of the noun, say [=0x0022=][reply entry][paragraph break][=0x0022=] instead;[=0x000A=][=0x0009=]otherwise say [=0x0022=][The noun] does not reply.[=0x0022=] instead.[=0x000A=][=0x000A=]Section 3 - The Scenario[=0x000A=][=0x000A=]The Guard House is a room. [=0x0022=]Here you spend all your nights. Bullet-proof windows offer a panoramic view of serene cliffs, palm trees, and a moonlit ocean. Occasionally someone is foolish enough to try a cliff ascent or even an attack by helicopter, but lately things have been pretty quiet.[=0x000A=][=0x000A=]The mansion is up the hill behind you, security lights ablaze.[=0x0022=][=0x000A=][=0x000A=]The grey telephone is a telephone in the Guard House. Understand [=0x0022=]6885[=0x0022=] as the grey telephone. [=0x0022=]Before you is a grey telephone. In black marker someone has written on it: MAIN OFFICE 2802.[=0x0022=][=0x000A=][=0x000A=]Before going a direction in the Guard House, say [=0x0022=]And leave your post? The boss would have you flayed. No kidding.[=0x0022=] instead.[=0x000A=][=0x000A=][In a game where the player could walk around, we would of course want to add a before rule so that he automatically hung up any phone he was using before leaving the room.][=0x000A=][=0x000A=]The Main Office is a room. The boss is a known woman in the Main Office. A telephone called the red telephone is in the Main Office. Understand [=0x0022=]2802[=0x0022=] as the red telephone.[=0x000A=][=0x000A=]The Guild is a room. The ninja is an unknown man in the Guild. A telephone called the black telephone is in the Guild. Understand [=0x0022=]4431[=0x0022=] as the black telephone.[=0x000A=][=0x000A=]Potter[=0x0027=]s Pizza is a room. The pizza delivery boy is a known man in Pizza. A telephone called the saucy telephone is in Pizza. Understand [=0x0022=]8885[=0x0022=] as the saucy telephone.[=0x000A=][=0x000A=]The chatter of the boss is the Table of Boss Conversation. The chatter of the delivery boy is the Table of Pizza Conversation. The chatter of the ninja is the Table of Ninja Conversation.[=0x000A=][=0x000A=]After calling the red telephone on something for the first time:[=0x000A=][=0x0009=]say [=0x0022=][=0x0027=]Yes?[=0x0027=] asks the boss. Her voice is especially husky this evening. Maybe that night of passion isn[=0x0027=]t so far off after all.[=0x0022=][=0x000A=][=0x000A=]Table of Boss Conversation[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]love/passion/tonight/night[=0x0022=] or [=0x0022=]night of passion[=0x0022=][=0x0009=][=0x0022=][=0x0027=]...Sorry, what?[=0x0027=] she asks. [=0x0027=]I wasn[=0x0027=]t listening.[=0x0027=] Oh. Maybe she[=0x0027=]d go for some pizza, though.[=0x0022=][=0x000A=][=0x0022=]pizza[=0x0022=][=0x0009=][=0x0022=][=0x0027=]I[=0x0027=]d love some. No pepperoni, though,[=0x0027=] she says, sounding dreamy. Yes, this is definitely time for a call to your old friend, the pizza boy.[=0x0022=][=0x000A=][=0x0022=]imminent ninja attack[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Don[=0x0027=]t worry about it,[=0x0027=] says the boss crisply. [=0x0027=]I have everything under control.[=0x0027=][=0x0022=][=0x000A=][=0x000A=]Table of Pizza Conversation[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]pizza[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Pepperoni special tonight![=0x0027=] he says proudly.[=0x0022=][=0x000A=][=0x0022=]pepperoni[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Pepperoni is included free on ALL our pizzas,[=0x0027=] he says proudly.[=0x0022=][=0x000A=][=0x0022=]no pepperoni[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Well, I don[=0x0027=]t see why you[=0x0027=]d want that,[=0x0027=] replies the boy sniffily. [=0x0027=]It[=0x0027=]s free![=0x0027=][=0x0022=][=0x000A=][=0x0022=]jalapeno[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Sorry, we[=0x0027=]re out of jalapenos this evening. There was a run on them.[=0x0027=][=0x0022=][=0x000A=][=0x0022=]sausage[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Sausage, sure, we can do you sausage.[=0x0027=][=0x0022=][=0x000A=][=0x0022=]canadian bacon[=0x0022=][=0x0009=][=0x0022=][=0x0027=]There[=0x0027=]s currently an embargo on Canadian pig products.[=0x0027=][=0x0022=][=0x000A=][=0x0022=]cheese[=0x0022=][=0x0009=][=0x0022=][=0x0027=]We use four kinds,[=0x0027=] says the boy, then lowers his voice confidentially. [=0x0027=]Actually, two of them are the same. Nobody ever counts. The stringy one, the one that comes in dollops and the orangey one. You know.[=0x0027=][=0x0022=][=0x000A=][=0x0022=]pineapple[=0x0022=][=0x0009=][=0x0022=][=0x0027=]We could put pineapple on there, sure,[=0x0027=] says the delivery boy, in a tone that lets you know his opinion of people who order fruit-based pizzas.[=0x0022=][=0x000A=][=0x0022=]pineapple and garlic[=0x0022=][=0x0009=][=0x0022=][=0x0027=]What kind of crazy combination is that?[=0x0027=] demands the delivery boy, finally losing all self-control.[=0x0022=][=0x000A=][=0x0022=]delivery[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Well, I don[=0x0027=]t know,[=0x0027=] says the boy in a worried voice. [=0x0027=]Last time I came there were attack dogs. And ninjas.[=0x0027=][=0x0022=][=0x000A=][=0x0022=]massive gratuity[=0x0022=][=0x0009=][=0x0022=][=0x0027=]There[=0x0027=]s no use in a big tip you don[=0x0027=]t live to spend,[=0x0027=] says the delivery boy quite firmly.[=0x0022=][=0x000A=][=0x000A=]Table of Ninja Conversation[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]imminent attack[=0x0022=][=0x0009=][=0x0022=][=0x0027=]Yes, still on for tonight,[=0x0027=] confirms the voice at the other end of the line.[=0x0022=][=0x000A=][=0x0022=]pizza delivery boy[=0x0022=][=0x0009=][=0x0022=]The voice, in tones of velvet, indicates that it cannot guarantee the safety of any delivery persons whomsoever.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]call 2802 / examine boss / ask boss about night of passion / ask boss about pizza / listen to telephone / call delivery boy on telephone / ask boy about cheese / tell boy about no pepperoni / ask boy about delivery / tell boy about massive gratuity / attack boy[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Four Cheeses&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3777_53" -->
<a id="c3777_53"></a><blockquote class="code"><p class="quoted">
Section 1 - Telephones and Connections
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3778_53" -->
<a id="c3778_53"></a><blockquote class="code"><p class="quoted">
A telephone is a kind of thing. Understand &quot;phone&quot; as a telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3779_53" -->
<a id="c3779_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any telephone] on [something]&quot; as calling it on. Understand &quot;call [any telephone]&quot; as calling it on. Understand the commands &quot;dial&quot; or &quot;phone&quot; or &quot;telephone&quot; as &quot;call&quot;. Understand &quot;call [any known person]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3780_53" -->
<a id="c3780_53"></a><blockquote class="code"><p class="quoted">
Connection relates one thing to another (called the other party).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3781_53" -->
<a id="c3781_53"></a><blockquote class="code"><p class="quoted">
The verb to reach means the connection relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3782_53" -->
<a id="c3782_53"></a><blockquote class="code"><p class="quoted">
Calling it on is an action applying to one visible thing and one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3783_53" -->
<a id="c3783_53"></a><blockquote class="code"><p class="quoted">
Check calling it on:
<br />&#160;&#160;&#160;&#160;if the second noun is not a telephone, say &quot;[The second noun] is unlikely to be much use in that respect.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is the noun, say &quot;You get a busy signal.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3784_53" -->
<a id="c3784_53"></a><blockquote class="code"><p class="quoted">
Carry out calling it on:
<br />&#160;&#160;&#160;&#160;if a person (called the listener) can see the noun, now the player reaches the listener.
</p></blockquote>
<!-- END CODE -->
<p>Because we've said that connection is a reciprocal, one-to-one relationship, Inform will do the rest of the bookkeeping: if (for instance) we telephone someone else, the first connection will be broken automatically.</p>
<!-- START CODE "c3785_53" -->
<a id="c3785_53"></a><blockquote class="code"><p class="quoted">
Report calling it on:
<br />&#160;&#160;&#160;&#160;say &quot;'Hello?' says [the other party of the player].&quot;
</p></blockquote>
<!-- END CODE -->
<p>To avoid annoyance, we should also let the player use CALL #### as well as CALL #### ON TELEPHONE. A rule from the chapter on Activities comes in handy here:</p>
<!-- START CODE "c3786_53" -->
<a id="c3786_53"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing second noun while calling something on:
<br />&#160;&#160;&#160;&#160;assign a phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3787_53" -->
<a id="c3787_53"></a><blockquote class="code"><p class="quoted">
To assign a phone:
<br />&#160;&#160;&#160;&#160;if the player can touch a telephone (called the current phone):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(on [the current phone])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the second noun is the current phone;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You don't have a phone handy.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Things might be a little more complicated if we had cell phones that could be moved around, but for right now the player can only touch a maximum of one phone at a time.</p>
<p>Suppose we further want to allow the player to call people up by name, but only if they've already been encountered or are familiar to the player for some reason.</p>
<!-- START CODE "c3788_53" -->
<a id="c3788_53"></a><blockquote class="code"><p class="quoted">
A person can be known or unknown.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3789_53" -->
<a id="c3789_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any known person]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3790_53" -->
<a id="c3790_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any known person] on [something]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3791_53" -->
<a id="c3791_53"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing second noun while calling something by name on:
<br />&#160;&#160;&#160;&#160;assign a phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3792_53" -->
<a id="c3792_53"></a><blockquote class="code"><p class="quoted">
Calling it by name on is an action applying to one visible thing and one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3793_53" -->
<a id="c3793_53"></a><blockquote class="code"><p class="quoted">
Check calling it by name on:
<br />&#160;&#160;&#160;&#160;if the noun is in the location, say &quot;[The noun] is right here.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3794_53" -->
<a id="c3794_53"></a><blockquote class="code"><p class="quoted">
Carry out calling it by name on:
<br />&#160;&#160;&#160;&#160;if the noun can touch a telephone (called the link), try calling the link on the second noun;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You can't reach [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3795_53" -->
<a id="c3795_53"></a><blockquote class="code"><p class="quoted">
Before calling something on something when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first ending your conversation with [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3796_53" -->
<a id="c3796_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;hang up [something]&quot; as hanging up.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3797_53" -->
<a id="c3797_53"></a><blockquote class="code"><p class="quoted">
Hanging up is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3798_53" -->
<a id="c3798_53"></a><blockquote class="code"><p class="quoted">
Check hanging up:
<br />&#160;&#160;&#160;&#160;if the noun is not a telephone, say &quot;You can't hang up [the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player does not reach someone, say &quot;You're not on the line with anyone.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3799_53" -->
<a id="c3799_53"></a><blockquote class="code"><p class="quoted">
Carry out hanging up:
<br />&#160;&#160;&#160;&#160;now the player does not reach anyone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3800_53" -->
<a id="c3800_53"></a><blockquote class="code"><p class="quoted">
Report hanging up:
<br />&#160;&#160;&#160;&#160;say &quot;You put down [the noun], cutting the connection.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3801_53" -->
<a id="c3801_53"></a><blockquote class="code"><p class="quoted">
Before going somewhere when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first hanging up on [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<p>And finally we want to make sure that calling random other numbers produces a sensible result:</p>
<!-- START CODE "c3802_53" -->
<a id="c3802_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [text]&quot; as misdialling. Misdialling is an action applying to one topic. Carry out misdialling: say &quot;The phone rings and rings but no one answers.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3803_53" -->
<a id="c3803_53"></a><blockquote class="code"><p class="quoted">
Understand &quot;call 911&quot; or &quot;call 999&quot; or &quot;call police&quot; or &quot;call fire department&quot; as a mistake (&quot;After strict warnings, you've given up making prank calls to emergency services.&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3804_53" -->
<a id="c3804_53"></a><blockquote class="code"><p class="quoted">
Before misdialling when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first ending your conversation with [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3805_53" -->
<a id="c3805_53"></a><blockquote class="code"><p class="quoted">
To end current conversation:
<br />&#160;&#160;&#160;&#160;let the current phone be a random telephone which can be touched by the player;
<br />&#160;&#160;&#160;&#160;silently try hanging up the current phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3806_53" -->
<a id="c3806_53"></a><blockquote class="code"><p class="quoted">
After deciding the scope of the player while the player reaches someone:
<br />&#160;&#160;&#160;&#160;place the other party of the player in scope, but not its contents.
</p></blockquote>
<!-- END CODE -->
<p>A note about this scope addition: the player can refer to the other party whenever he has the other person on the phone. He can't, however, see or refer to anything that person might be holding or wearing, thanks to the &quot;but not its contents&quot; option.</p>
<p>Furthermore, the player can't actually do anything to that person that requires touching. That's because of the reaching inside rules, which govern whether the player can reach through intervening barriers such as rooms. (See the Advanced Actions chapter for more about changing reachability.) There are two things we might want to be careful about, though.</p>
<p>First, we should specifically disallow the player from looking at the person on the other end of the line. Since sight doesn't require touching, the reaching inside rules will not be consulted about a command such as EXAMINE BOSS or LOOK UNDER BOSS. We can, however, intervene in such cases using the visibility rules, which are consulted for any actions that &quot;require light&quot; (including EXAMINE and LOOK UNDER). Here again we borrow some options from the Advanced Actions chapter:</p>
<!-- START CODE "c3807_53" -->
<a id="c3807_53"></a><blockquote class="code"><p class="quoted">
To decide whether acting through the line:
<br />&#160;&#160;&#160;&#160;if the noun is something and the location of the noun is not the location of the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yes;
<br />&#160;&#160;&#160;&#160;if the second noun is something and the location of the second noun is not the location of the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3808_53" -->
<a id="c3808_53"></a><blockquote class="code"><p class="quoted">
Visibility rule when acting through the line:
<br />&#160;&#160;&#160;&#160;there is insufficient light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3809_53" -->
<a id="c3809_53"></a><blockquote class="code"><p class="quoted">
Rule for printing a refusal to act in the dark when acting through the line:
<br />&#160;&#160;&#160;&#160;say &quot;You're not on a video phone, so you can only hear.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Second, though the existing reaching inside rules are adequate to stop us from touching the person on the other end of the line, the response that's currently printed is a bit generic: it just says &quot;You can't reach into [the room containing the person].&quot; Let's add our own custom reply, instead:</p>
<!-- START CODE "c3810_53" -->
<a id="c3810_53"></a><blockquote class="code"><p class="quoted">
A rule for reaching inside a room (called destination):
<br />&#160;&#160;&#160;&#160;if the other party of the player is enclosed by the destination:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Though you're on the line with [the other party of the player], you can't physically reach to [the destination].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deny access.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3811_53" -->
<a id="c3811_53"></a><blockquote class="code"><p class="quoted">
Section 2 - Conversation over the Phone, In General
</p></blockquote>
<!-- END CODE -->
<p>This portion supplies a simple method of conversation; but we could substitute some completely different conversation system if appropriate. The effect of the telephones is that we are allowed to talk to characters in distant locations under certain circumstances, after which the usual conversation rules apply.</p>
<!-- START CODE "c3812_53" -->
<a id="c3812_53"></a><blockquote class="code"><p class="quoted">
Instead of listening to a telephone when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;You can hear [the other party of the player] breathing.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3813_53" -->
<a id="c3813_53"></a><blockquote class="code"><p class="quoted">
Before listening to someone when the player cannot touch the noun:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is waiting for you to carry on the conversation.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3814_53" -->
<a id="c3814_53"></a><blockquote class="code"><p class="quoted">
A person has a table name called chatter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3815_53" -->
<a id="c3815_53"></a><blockquote class="code"><p class="quoted">
Before telling someone about something:
<br />&#160;&#160;&#160;&#160;try asking the noun about it instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3816_53" -->
<a id="c3816_53"></a><blockquote class="code"><p class="quoted">
Before answering someone that something:
<br />&#160;&#160;&#160;&#160;say &quot;Best to confine your conversation to questions and answers.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3817_53" -->
<a id="c3817_53"></a><blockquote class="code"><p class="quoted">
Before asking someone about something:
<br />&#160;&#160;&#160;&#160;if the topic understood is a topic listed in the chatter of the noun, say &quot;[reply entry][paragraph break]&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The noun] does not reply.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3818_53" -->
<a id="c3818_53"></a><blockquote class="code"><p class="quoted">
Section 3 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3819_53" -->
<a id="c3819_53"></a><blockquote class="code"><p class="quoted">
The Guard House is a room. &quot;Here you spend all your nights. Bullet-proof windows offer a panoramic view of serene cliffs, palm trees, and a moonlit ocean. Occasionally someone is foolish enough to try a cliff ascent or even an attack by helicopter, but lately things have been pretty quiet.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3820_53" -->
<a id="c3820_53"></a><blockquote class="code"><p class="quoted">
The mansion is up the hill behind you, security lights ablaze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3821_53" -->
<a id="c3821_53"></a><blockquote class="code"><p class="quoted">
The grey telephone is a telephone in the Guard House. Understand &quot;6885&quot; as the grey telephone. &quot;Before you is a grey telephone. In black marker someone has written on it: MAIN OFFICE 2802.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3822_53" -->
<a id="c3822_53"></a><blockquote class="code"><p class="quoted">
Before going a direction in the Guard House, say &quot;And leave your post? The boss would have you flayed. No kidding.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>In a game where the player could walk around, we would of course want to add a before rule so that he automatically hung up any phone he was using before leaving the room.</p>
<!-- START CODE "c3823_53" -->
<a id="c3823_53"></a><blockquote class="code"><p class="quoted">
The Main Office is a room. The boss is a known woman in the Main Office. A telephone called the red telephone is in the Main Office. Understand &quot;2802&quot; as the red telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3824_53" -->
<a id="c3824_53"></a><blockquote class="code"><p class="quoted">
The Guild is a room. The ninja is an unknown man in the Guild. A telephone called the black telephone is in the Guild. Understand &quot;4431&quot; as the black telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3825_53" -->
<a id="c3825_53"></a><blockquote class="code"><p class="quoted">
Potter's Pizza is a room. The pizza delivery boy is a known man in Pizza. A telephone called the saucy telephone is in Pizza. Understand &quot;8885&quot; as the saucy telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3826_53" -->
<a id="c3826_53"></a><blockquote class="code"><p class="quoted">
The chatter of the boss is the Table of Boss Conversation. The chatter of the delivery boy is the Table of Pizza Conversation. The chatter of the ninja is the Table of Ninja Conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3827_53" -->
<a id="c3827_53"></a><blockquote class="code"><p class="quoted">
After calling the red telephone on something for the first time:
<br />&#160;&#160;&#160;&#160;say &quot;'Yes?' asks the boss. Her voice is especially husky this evening. Maybe that night of passion isn't so far off after all.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3828_53" -->
<a id="c3828_53"></a><blockquote class="code"><p class="quoted">
Table of Boss Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;love/passion/tonight/night&quot; or &quot;night of passion&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'...Sorry, what?' she asks. 'I wasn't listening.' Oh. Maybe she'd go for some pizza, though.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'I'd love some. No pepperoni, though,' she says, sounding dreamy. Yes, this is definitely time for a call to your old friend, the pizza boy.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;imminent ninja attack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Don't worry about it,' says the boss crisply. 'I have everything under control.'&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3829_53" -->
<a id="c3829_53"></a><blockquote class="code"><p class="quoted">
Table of Pizza Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Pepperoni special tonight!' he says proudly.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pepperoni&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Pepperoni is included free on ALL our pizzas,' he says proudly.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;no pepperoni&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Well, I don't see why you'd want that,' replies the boy sniffily. 'It's free!'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;jalapeno&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Sorry, we're out of jalapenos this evening. There was a run on them.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;sausage&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Sausage, sure, we can do you sausage.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;canadian bacon&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'There's currently an embargo on Canadian pig products.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cheese&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'We use four kinds,' says the boy, then lowers his voice confidentially. 'Actually, two of them are the same. Nobody ever counts. The stringy one, the one that comes in dollops and the orangey one. You know.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pineapple&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'We could put pineapple on there, sure,' says the delivery boy, in a tone that lets you know his opinion of people who order fruit-based pizzas.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pineapple and garlic&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'What kind of crazy combination is that?' demands the delivery boy, finally losing all self-control.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;delivery&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Well, I don't know,' says the boy in a worried voice. 'Last time I came there were attack dogs. And ninjas.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;massive gratuity&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'There's no use in a big tip you don't live to spend,' says the delivery boy quite firmly.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3830_53" -->
<a id="c3830_53"></a><blockquote class="code"><p class="quoted">
Table of Ninja Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;imminent attack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Yes, still on for tonight,' confirms the voice at the other end of the line.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza delivery boy&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;The voice, in tones of velvet, indicates that it cannot guarantee the safety of any delivery persons whomsoever.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3831_53" -->
<a id="c3831_53"></a><blockquote class="code"><p class="quoted">
Test me with &quot;call 2802 / examine boss / ask boss about night of passion / ask boss about pizza / listen to telephone / call delivery boy on telephone / ask boy about cheese / tell boy about no pepperoni / ask boy about delivery / tell boy about massive gratuity / attack boy&quot;.
</p></blockquote>
<!-- END CODE -->
<p>...and it more or less writes itself from there.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc202.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc204.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
