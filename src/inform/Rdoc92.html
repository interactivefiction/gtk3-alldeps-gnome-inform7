<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>11.2. Saving and Undoing</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Saving and Undoing" -->
<!-- SEARCH SECTION "11.2" -->
<!-- SEARCH SORT "001-011-002-000" -->
<!-- START IGNORE 91 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc91.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 11: Out Of World Actions and Effects</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc93.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง11.2. Saving and Undoing</p>
<p>A very few titles in the IF literature - very few being still too many, some would say - restrict the player's ability to save the story.</p>
<p>Removing the player's ability to UNDO is also a risky choice. Inform does provide the facility with the use option</p>
<!-- START CODE "c15950" -->
<a id="c15950"></a><blockquote class="code"><p class="quoted">
Use undo prevention.
</p></blockquote>
<!-- END CODE -->
<p>which makes it impossible to UNDO at any time (unless, that is, the player is playing on an interpreter that itself has a built-in UNDO feature -- these do exist). When it works, undo prevention safeguards a randomized story or combat session against brute-force solutions, but it also means that the player who makes even a minor mistake of typing will be stuck with the undesired results.</p>
<p>In many cases it may be preferable to use some subtler method to enforce random effects in a story. Several extensions exist for Inform that either allow selective manipulation of the UNDO command or rig randomization to prevent UNDO and replay attempts.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "210: Spellbreaker" "e207" -->
<a id="e207"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example207'); return false;"><b>210</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example207'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Spellbreaker</span></b></a><br />P. David Lebling's classic "Spellbreaker" (1986) includes a room where the game cannot be saved: here is an Inform implementation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc191.html#e207"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example207" style="display: none;">
<p>The answer is easy, but there is a trap:</p>
<!-- START CODE "c15951_207" -->
<a id="c15951_207"></a><blockquote class="code"><p class="quoted">
Check saving the game when the location is the Vault: say &quot;That spell does not work here.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The trap is that &quot;Before saving the game...&quot;, which might have been our first guess, does not work: because out of world actions are exempt from Before, Instead and After rules.</p>
<p>&quot;Spellbreaker&quot; pulls this unpleasant, but in context witty, stunt as part of a situation which is engineered to force the player to reason through a weighing-objects puzzle using the perfect strategy rather than by guesswork. The illusion that the situation is fair - not rigged against the player, that is - would collapse if the player could save the game and keep retrying possibilities in the light of knowledge gained from earlier attempts. The moral of this story is that any attempt to use in-world situations to influence out-of-world commands should be <span class="italic">extremely uncommon</span>.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "211: A point for never saving the game" "e362" -->
<a id="e362"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example362'); return false;"><b>211</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example362'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">A point for never saving the game</span></b></a><br />In some of the late 1970s "cave crawl" adventure games, an elaborate scoring system might still leave the player perplexed as to why an apparently perfect play-through resulted in a score which was still one point short of the supposed maximum. Why only 349 out of 350? The answer varied, but sometimes the last point was earned by never saving the game - in other words by playing it right through with nothing to guard against mistakes (except perhaps UNDO for the last command), and in one long session.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc191.html#e362"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example362" style="display: none;">
<p>Here is one way to score this point with Inform:</p>
<!-- START CODE "c15952_362" -->
<a id="c15952_362"></a><blockquote class="code"><p class="quoted">
Check saving the game for the first time: decrement the score.
</p></blockquote>
<!-- END CODE -->
<p>That has the right effect, but it just isn't sneaky enough. Instead let us quietly keep track of how many times the player saves:</p>
<!-- START CODE "c15953_362" -->
<a id="c15953_362"></a><blockquote class="code"><p class="quoted">
Check saving the game: increment the number of saves.
<br />When play ends: if the number of saves is 0, increment the score.
</p></blockquote>
<!-- END CODE -->
<p>Sneakier, certainly, but now we could get the bonus even if the game ends earlier on, so finally:</p>
<!-- START CODE "c15954_362" -->
<a id="c15954_362"></a><blockquote class="code"><p class="quoted">
When play ends: if the number of saves is 0 and the score is 349, increment the score.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc91.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc93.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
