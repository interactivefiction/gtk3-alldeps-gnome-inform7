<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>24.2. Debugging features to use in source</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Debugging features to use in source" -->
<!-- SEARCH SECTION "24.2" -->
<!-- SEARCH SORT "000-024-002-000" -->
<!-- START IGNORE 388 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc388.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 24: Testing and Debugging</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc390.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง24.2. Debugging features to use in source</p>
<p>The TEST command is an extremely useful way of managing a story and continuing to verify that it does everything we want. We can create new test commands of the form</p>
<!-- START CODE "c8875" -->
<a id="c8875"></a><blockquote class="code"><p class="quoted">
Test me with &quot;up / kill captain eo&quot;.
<br />Test eo with &quot;zap eo&quot; holding the ray gun.
<br />Test dinner with &quot;eat bread / eat soup / eat butter&quot; in the Ship Cafeteria.
</p></blockquote>
<!-- END CODE -->
<p>and we are free to have as many of these tests as we would like. Test commands can call other tests, as well, so we might have a test command such as</p>
<!-- START CODE "c8876" -->
<a id="c8876"></a><blockquote class="code"><p class="quoted">
Test megatest with &quot;test me / test eo&quot;.
</p></blockquote>
<!-- END CODE -->
<p>A word of warning: if the first command in the test is &quot;again&quot;, that will likely repeat the TEST command, sending Inform round in circles forever.</p>
<p>For complicated objects and commands, sometimes it's a good idea to develop the test commands at the same time that we're writing the source code itself. Each time we add a new rule or piece of behavior, we also add to that object's special test command something that will put that new feature to the test. This means that we can keep running the test command as we work and verify that everything is behaving as expected.</p>
<p>Sometimes we need to get a look at what is happening within the source itself. Many of the most annoying bugs come about because we're making some assumptions about what's true in the story world that differ from Inform's assumptions. When that happens, we may need to add something to the source to check that the variables are set to what we think, that certain parts of the source are being reached, and so on.</p>
<p>For instance, suppose we have a phrase like this:</p>
<!-- START CODE "c8877" -->
<a id="c8877"></a><blockquote class="code"><p class="quoted">
To say key score:
<br />&#160;&#160;&#160;&#160;let count be the number of keys which are not carried by the player;
<br />&#160;&#160;&#160;&#160;if count is greater than 2 and the player is timid:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're still missing a lot of keys, bucko!&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now, we expect this to print something, but perhaps it's not doing so when we had anticipated that it would. At some point when we think the count is greater than 2 and the player is timid, at least one of those things is not true. An easy way to check up on this is to add a showme line to the source, like so:</p>
<!-- START CODE "c8878" -->
<a id="c8878"></a><blockquote class="code"><p class="quoted">
To say key score:
<br />&#160;&#160;&#160;&#160;let count be the number of keys which are not carried by the player;
<br />&#160;&#160;&#160;&#160;showme count;
<br />&#160;&#160;&#160;&#160;if count is greater than 2 and the player is timid:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're still missing a lot of keys, bucko!&quot;
</p></blockquote>
<!-- END CODE -->
<p>and this will then check the relevant number and print it to screen when this phrase is called, like so</p>
<!-- START CODE "c8879" -->
<a id="c8879"></a><blockquote class="code"><p class="quoted">
&quot;count&quot; = number: 1
</p></blockquote>
<!-- END CODE -->
<p>In this case, it looks like the count is not high enough to trigger the text, so we can concentrate on working out why that might be. Maybe we didn't correctly define something as a key, for instance.</p>
<hr />
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc388.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc390.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
