<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>16.6. Repeating through tables</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Repeating through tables" -->
<!-- SEARCH SECTION "16.6" -->
<!-- SEARCH SORT "000-016-006-000" -->
<!-- START IGNORE 250 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc250.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 16: Tables</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc252.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง16.6. Repeating through tables</p>
<p>We very often want to run through a table doing something to, or with, each row in turn, so a special loop is provided for this. Rather than having to write all this out:</p>
<!-- START CODE "c5093" -->
<a id="c5093"></a><blockquote class="code"><p class="quoted">
To list the succession:
<br />&#160;&#160;&#160;&#160;say &quot;The Succession List runs as follows...&quot;;
<br />&#160;&#160;&#160;&#160;repeat with N running from 1 to the number of rows in the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row N in the Table of Recent Monarchs;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[accession entry]: [name entry] ([family entry]).&quot;
</p></blockquote>
<!-- END CODE -->
<p>We can simply use this instead:</p>
<!-- START PHRASE "defn228" -->
<div class="definition"><a id="defn228"></a><p class="defnprototype"><b>repeat through </b>(table name)<b>:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattable -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, from top to bottom. Blank rows are skipped. Example:</p>
<!-- START CODE "c5094" -->
<a id="c5094"></a><blockquote class="code"><p class="quoted">
To list the succession:
<br />&#160;&#160;&#160;&#160;say &quot;The Succession List runs as follows...&quot;;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Recent Monarchs:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[accession entry]: [name entry] ([family entry]).&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Note that there is no loop variable here, unlike in other forms of &quot;repeat&quot;, because it's the choice of row which keeps track of how far we have got.</p>
<p>We can alternatively go backwards:</p>
<!-- START PHRASE "defn229" -->
<div class="definition"><a id="defn229"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in reverse order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablereverse -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, from bottom to top. Blank rows are skipped.</p>

<!-- end definition -->
</div>

<p>More often we want a sequence which is neither forwards nor backwards, but which depends on the actual values in the table.</p>
<!-- START PHRASE "defn230" -->
<div class="definition"><a id="defn230"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in </b>(table column)<b> order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablecol -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, in order of the values in the given column. Blank rows are skipped. Example:</p>
<!-- START CODE "c5095" -->
<a id="c5095"></a><blockquote class="code"><p class="quoted">
repeat through the Table of Recent Monarchs in name order: ...
<br />repeat through the Table of Recent Monarchs in accession order: ...
</p></blockquote>
<!-- END CODE -->
<p>work through the same table in rather different orders. The sequence is lower to higher (small numbers to high numbers, A to Z, and so on); insert &quot;reverse&quot; after &quot;in&quot; to reverse this.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn231" -->
<div class="definition"><a id="defn231"></a><p class="defnprototype"><b>repeat through </b>(table name)<b> in reverse </b>(table column)<b> order:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_repeattablecolreverse -->

<p>This phrase causes the block of phrases following it to be repeated once for each row in the given table, choosing each row in turn, in order of the values in the given column. Blank rows are skipped. Example:</p>
<!-- START CODE "c5096" -->
<a id="c5096"></a><blockquote class="code"><p class="quoted">
repeat through the Table of Recent Monarchs in reverse name order: ...
<br />repeat through the Table of Recent Monarchs in reverse accession order: ...
</p></blockquote>
<!-- END CODE -->
<p>work through the same table in rather different orders. The sequence is higher to lower (high numbers to small numbers, Z to A, and so on); delete the &quot;reverse&quot; after &quot;in&quot; to reverse this.</p>

<!-- end definition -->
</div>

<p>In a loop like this, the data is not searched very efficiently, which is fine for modest-sized tables like the examples in this chapter, but might be a problem for much larger tables: see the later section on sorting.</p>
<p>These definitions mentioned blankness several times, and that's the topic to cover in the next section.</p>
<p class="crossreference"><a href="doc256.html" class="xreflink"><img class="asterisk" alt="*" src="inform:/doc_images/xref.png" />&#160;<i>See </i><b>Sorting</b></a><i> for reordering a table to put it into increasing or decreasing order of the entries in any column</i></p><hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "272: Port Royal 4" "e144" -->
<a id="e144"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example144'); return false;"><b>272</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example144'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Port Royal 4</span></b></a><br />A cell window through which the player can see people who were in Port Royal in the current year of game-time.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc13.html#e144"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example144" style="display: none;">
<p>Our protagonist is imprisoned in Port Royal, waiting out his years, and sometimes through the window of his cell he is able to see someone.</p>
<p>We are, however, obsessive about historical accuracy, so we provide a table of people who really lived in the city, together with the year in which their existence is attested. We want these people to appear in the description only in the year when they are known to have been present. (After all, mortality was high in Port Royal and new people were constantly arriving, so someone's presence one year is no guarantee of their continued existence the next.)</p>
<!-- START CODE "c5097_144" -->
<a id="c5097_144"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Waiting for Godot, Chyrurgeon[=0x0022=][=0x000A=][=0x000A=]New New Prison is a room. [=0x0022=]You have a not very interesting room. Through the window you see passing [current denizen].[=0x0022=][=0x000A=][=0x000A=]Instead of waiting:[=0x000A=][=0x0009=]increment the current year;[=0x000A=][=0x0009=]say [=0x0022=]It is now the year [the current year].[=0x0022=];[=0x000A=][=0x0009=]try looking.[=0x000A=][=0x000A=]When play begins: now the right hand status line is [=0x0022=][current year][=0x0022=].[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]if the current year is 1692:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It turns out you have remained imprisoned until the great earthquake of 1692! Oops.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story.[=0x000A=][=0x000A=]Current year is a number that varies. The current year is 1664.[=0x000A=][=0x000A=]To say current denizen:[=0x000A=][=0x0009=]repeat through the Table of Occupations and People:[=0x000A=][=0x0009=][=0x0009=]if the date attested entry is the current year:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][nickname entry] [family entry], [trade entry][=0x0022=];[=0x000A=][=0x0009=][=0x0009=][=0x0009=]blank out the whole row;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=]absolutely no one[=0x0022=].[=0x000A=][=0x000A=][It is possible to look up a row corresponding to, say, a specific year value using [=0x0022=]listed in[=0x0022=], but repeat through is convenient here because we know that we will never wind up trying to print entries when no row can be successfully selected.][=0x000A=][=0x000A=]Table of Occupations and People[=0x000A=]Trade[=0x0009=]nickname[=0x0009=]family[=0x0009=]Date attested[=0x000A=][=0x0022=]architect[=0x0022=][=0x0009=][=0x0022=]Robert[=0x0022=][=0x0009=][=0x0022=]Snead[=0x0022=][=0x0009=]1684[=0x000A=][=0x0022=]baker[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Wingar[=0x0022=][=0x0009=]1683[=0x000A=][=0x0022=]barber[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Alcocke[=0x0022=][=0x0009=]1676[=0x000A=][=0x0022=]blacksmith[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Davidson[=0x0022=][=0x0009=]1679[=0x000A=][=0x0022=]bricklayer[=0x0022=][=0x0009=][=0x0022=]Samuel[=0x0022=][=0x0009=][=0x0022=]Richardson[=0x0022=][=0x0009=]1683[=0x000A=][=0x0022=]butcher[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Dennis[=0x0022=][=0x0009=]1676[=0x000A=][=0x0022=]carpenter[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Albert[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]cabinet-maker[=0x0022=][=0x0009=][=0x0022=]Robert[=0x0022=][=0x0009=][=0x0022=]Avis[=0x0022=][=0x0009=]1666[=0x000A=][=0x0022=]joiner[=0x0022=][=0x0009=][=0x0022=]Peter[=0x0022=][=0x0009=][=0x0022=]Bartaboa[=0x0022=][=0x0009=]1666[=0x000A=][=0x0022=]chandler[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Bates[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]chyrurgeon[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Axtell[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]chyrurgeon[=0x0022=][=0x0009=][=0x0022=]Thomas[=0x0022=][=0x0009=][=0x0022=]Trapham[=0x0022=][=0x0009=]1678[=0x000A=][=0x0022=]combmaker[=0x0022=][=0x0009=][=0x0022=]Paul[=0x0022=][=0x0009=][=0x0022=]Bennett[=0x0022=][=0x0009=]1673[=0x000A=][=0x0022=]cooper[=0x0022=][=0x0009=][=0x0022=]James[=0x0022=][=0x0009=][=0x0022=]Hall[=0x0022=][=0x0009=]1676[=0x000A=][=0x0022=]cooper[=0x0022=][=0x0009=][=0x0022=]Henry[=0x0022=][=0x0009=][=0x0022=]Pullein[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]cordwainer[=0x0022=][=0x0009=][=0x0022=]George[=0x0022=][=0x0009=][=0x0022=]Barnard[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]cordwainer[=0x0022=][=0x0009=][=0x0022=]Edward[=0x0022=][=0x0009=][=0x0022=]Skannon[=0x0022=][=0x0009=]1680[=0x000A=][=0x0022=]cordwainer[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Wilmott[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]drugster[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Mathews[=0x0022=][=0x0009=]1682[=0x000A=][=0x0022=]fisherman[=0x0022=][=0x0009=][=0x0022=]Richard[=0x0022=][=0x0009=][=0x0022=]Collingwood[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]glazier[=0x0022=][=0x0009=][=0x0022=]Thomas[=0x0022=][=0x0009=][=0x0022=]Hudson[=0x0022=][=0x0009=]1684[=0x000A=][=0x0022=]goldsmith[=0x0022=][=0x0009=][=0x0022=]Richard[=0x0022=][=0x0009=][=0x0022=]Lord[=0x0022=][=0x0009=]1677[=0x000A=][=0x0022=]gunsmith[=0x0022=][=0x0009=][=0x0022=]Stephen[=0x0022=][=0x0009=][=0x0022=]Massey[=0x0022=][=0x0009=]1664[=0x000A=][=0x0022=]hatmaker[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Rosewell[=0x0022=][=0x0009=]1683[=0x000A=][=0x0022=]ivory turner[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Clifton[=0x0022=][=0x0009=]1691[=0x000A=][=0x0022=]labourer[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Dennis[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]limeburner[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Hardwick[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]mariner[=0x0022=][=0x0009=][=0x0022=]Alexander[=0x0022=][=0x0009=][=0x0022=]Bailing[=0x0022=][=0x0009=]1680[=0x000A=][=0x0022=]mariner[=0x0022=][=0x0009=][=0x0022=]Thomas[=0x0022=][=0x0009=][=0x0022=]Bowtell[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]mariner[=0x0022=][=0x0009=][=0x0022=]Peter[=0x0022=][=0x0009=][=0x0022=]Claiton[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]mariner[=0x0022=][=0x0009=][=0x0022=]Joseph[=0x0022=][=0x0009=][=0x0022=]Cupid[=0x0022=][=0x0009=]1672[=0x000A=][=0x0022=]mariner[=0x0022=][=0x0009=][=0x0022=]Michael[=0x0022=][=0x0009=][=0x0022=]Dunn[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]mason[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Stone[=0x0022=][=0x0009=]1673[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Agard[=0x0022=][=0x0009=]1680[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]David Lopez[=0x0022=][=0x0009=][=0x0022=]Narbona[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]Abraham[=0x0022=][=0x0009=][=0x0022=]Langford[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Sweeting[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]Charles[=0x0022=][=0x0009=][=0x0022=]Knight[=0x0022=][=0x0009=]1680[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]Cornelius[=0x0022=][=0x0009=][=0x0022=]Vandananker[=0x0022=][=0x0009=]1670[=0x000A=][=0x0022=]merchant[=0x0022=][=0x0009=][=0x0022=]Moses Jesurum[=0x0022=][=0x0009=][=0x0022=]Cordova[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]pewterer[=0x0022=][=0x0009=][=0x0022=]Simon[=0x0022=][=0x0009=][=0x0022=]Benning[=0x0022=][=0x0009=]1667[=0x000A=][=0x0022=]pipemaker[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Pope[=0x0022=][=0x0009=]1680[=0x000A=][=0x0022=]porter[=0x0022=][=0x0009=][=0x0022=]George[=0x0022=][=0x0009=][=0x0022=]Paul[=0x0022=][=0x0009=]1670[=0x000A=][=0x0022=]poulterer[=0x0022=][=0x0009=][=0x0022=]Richard[=0x0022=][=0x0009=][=0x0022=]Jeffreys[=0x0022=][=0x0009=]1677[=0x000A=][=0x0022=]sailmaker[=0x0022=][=0x0009=][=0x0022=]Adam[=0x0022=][=0x0009=][=0x0022=]Brewer[=0x0022=][=0x0009=]1671[=0x000A=][=0x0022=]schoolmaster[=0x0022=][=0x0009=][=0x0022=]Peter[=0x0022=][=0x0009=][=0x0022=]Bird[=0x0022=][=0x0009=]1677[=0x000A=][=0x0022=]shipwright[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Cavell[=0x0022=][=0x0009=]1676[=0x000A=][=0x0022=]tailor[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Case[=0x0022=][=0x0009=]1676[=0x000A=][=0x0022=]tailor[=0x0022=][=0x0009=][=0x0022=]Pewter[=0x0022=][=0x0009=][=0x0022=]Ebden[=0x0022=][=0x0009=]1683[=0x000A=][=0x0022=]waterman[=0x0022=][=0x0009=][=0x0022=]William[=0x0022=][=0x0009=][=0x0022=]Brocke[=0x0022=][=0x0009=]1674[=0x000A=][=0x0022=]waterman[=0x0022=][=0x0009=][=0x0022=]Joel[=0x0022=][=0x0009=][=0x0022=]Clements[=0x0022=][=0x0009=]1668[=0x000A=][=0x0022=]wherryman[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Grant[=0x0022=][=0x0009=]1669[=0x000A=][=0x0022=]victualler[=0x0022=][=0x0009=][=0x0022=]Barnaby[=0x0022=][=0x0009=][=0x0022=]Adams[=0x0022=][=0x0009=]1675[=0x000A=][=0x0022=]vintner[=0x0022=][=0x0009=][=0x0022=]Gabriel[=0x0022=][=0x0009=][=0x0022=]Adkins[=0x0022=][=0x0009=]1668[=0x000A=][=0x0022=]tavern-keeper[=0x0022=][=0x0009=][=0x0022=]John[=0x0022=][=0x0009=][=0x0022=]Baldwin[=0x0022=][=0x0009=]1670[=0x000A=][=0x0022=]tavern-keeper[=0x0022=][=0x0009=][=0x0022=]Mary[=0x0022=][=0x0009=][=0x0022=]Dayton[=0x0022=][=0x0009=]1664[=0x000A=][=0x0022=]tavern-keeper[=0x0022=][=0x0009=][=0x0022=]James[=0x0022=][=0x0009=][=0x0022=]Turpin[=0x0022=][=0x0009=]1679[=0x000A=][=0x0022=]tavern-keeper[=0x0022=][=0x0009=][=0x0022=]Christopher[=0x0022=][=0x0009=][=0x0022=]Mayham[=0x0022=][=0x0009=]1664[=0x000A=][=0x000A=]Test me with [=0x0022=]wait / wait / wait / wait / wait / wait / wait / wait / wait / wait[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Waiting for Godot, Chyrurgeon&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5098_144" -->
<a id="c5098_144"></a><blockquote class="code"><p class="quoted">
New New Prison is a room. &quot;You have a not very interesting room. Through the window you see passing [current denizen].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5099_144" -->
<a id="c5099_144"></a><blockquote class="code"><p class="quoted">
Instead of waiting:
<br />&#160;&#160;&#160;&#160;increment the current year;
<br />&#160;&#160;&#160;&#160;say &quot;It is now the year [the current year].&quot;;
<br />&#160;&#160;&#160;&#160;try looking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5100_144" -->
<a id="c5100_144"></a><blockquote class="code"><p class="quoted">
When play begins: now the right hand status line is &quot;[current year]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5101_144" -->
<a id="c5101_144"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if the current year is 1692:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It turns out you have remained imprisoned until the great earthquake of 1692! Oops.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5102_144" -->
<a id="c5102_144"></a><blockquote class="code"><p class="quoted">
Current year is a number that varies. The current year is 1664.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5103_144" -->
<a id="c5103_144"></a><blockquote class="code"><p class="quoted">
To say current denizen:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Occupations and People:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the date attested entry is the current year:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[nickname entry] [family entry], [trade entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;absolutely no one&quot;.
</p></blockquote>
<!-- END CODE -->
<p>It is possible to look up a row corresponding to, say, a specific year value using &quot;listed in&quot;, but repeat through is convenient here because we know that we will never wind up trying to print entries when no row can be successfully selected.</p>
<!-- START CODE "c5104_144" -->
<a id="c5104_144"></a><blockquote class="code"><p class="quoted">
Table of Occupations and People
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">Trade</p></td><td class="quotedtablecell"><p class="quoted">nickname</p></td><td class="quotedtablecell"><p class="quoted">family</p></td><td class="quotedtablecell"><p class="quoted">Date attested</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;architect&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Robert&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Snead&quot;</p></td><td class="quotedtablecell"><p class="quoted">1684</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;baker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Wingar&quot;</p></td><td class="quotedtablecell"><p class="quoted">1683</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;barber&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Alcocke&quot;</p></td><td class="quotedtablecell"><p class="quoted">1676</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;blacksmith&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Davidson&quot;</p></td><td class="quotedtablecell"><p class="quoted">1679</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;bricklayer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Samuel&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Richardson&quot;</p></td><td class="quotedtablecell"><p class="quoted">1683</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;butcher&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Dennis&quot;</p></td><td class="quotedtablecell"><p class="quoted">1676</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;carpenter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Albert&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cabinet-maker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Robert&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Avis&quot;</p></td><td class="quotedtablecell"><p class="quoted">1666</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;joiner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Peter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bartaboa&quot;</p></td><td class="quotedtablecell"><p class="quoted">1666</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;chandler&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bates&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;chyrurgeon&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Axtell&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;chyrurgeon&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Thomas&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Trapham&quot;</p></td><td class="quotedtablecell"><p class="quoted">1678</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;combmaker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Paul&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bennett&quot;</p></td><td class="quotedtablecell"><p class="quoted">1673</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cooper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;James&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Hall&quot;</p></td><td class="quotedtablecell"><p class="quoted">1676</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cooper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Henry&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Pullein&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cordwainer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;George&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Barnard&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cordwainer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Edward&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Skannon&quot;</p></td><td class="quotedtablecell"><p class="quoted">1680</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cordwainer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Wilmott&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;drugster&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Mathews&quot;</p></td><td class="quotedtablecell"><p class="quoted">1682</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;fisherman&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Richard&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Collingwood&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;glazier&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Thomas&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Hudson&quot;</p></td><td class="quotedtablecell"><p class="quoted">1684</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;goldsmith&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Richard&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Lord&quot;</p></td><td class="quotedtablecell"><p class="quoted">1677</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;gunsmith&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Stephen&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Massey&quot;</p></td><td class="quotedtablecell"><p class="quoted">1664</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;hatmaker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Rosewell&quot;</p></td><td class="quotedtablecell"><p class="quoted">1683</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ivory turner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Clifton&quot;</p></td><td class="quotedtablecell"><p class="quoted">1691</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;labourer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Dennis&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;limeburner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Hardwick&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mariner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Alexander&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bailing&quot;</p></td><td class="quotedtablecell"><p class="quoted">1680</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mariner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Thomas&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bowtell&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mariner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Peter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Claiton&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mariner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Joseph&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Cupid&quot;</p></td><td class="quotedtablecell"><p class="quoted">1672</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mariner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Michael&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Dunn&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;mason&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Stone&quot;</p></td><td class="quotedtablecell"><p class="quoted">1673</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Agard&quot;</p></td><td class="quotedtablecell"><p class="quoted">1680</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;David Lopez&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Narbona&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Abraham&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Langford&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Sweeting&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Charles&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Knight&quot;</p></td><td class="quotedtablecell"><p class="quoted">1680</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Cornelius&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Vandananker&quot;</p></td><td class="quotedtablecell"><p class="quoted">1670</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;merchant&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Moses Jesurum&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Cordova&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pewterer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Simon&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Benning&quot;</p></td><td class="quotedtablecell"><p class="quoted">1667</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pipemaker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Pope&quot;</p></td><td class="quotedtablecell"><p class="quoted">1680</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;porter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;George&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Paul&quot;</p></td><td class="quotedtablecell"><p class="quoted">1670</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;poulterer&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Richard&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Jeffreys&quot;</p></td><td class="quotedtablecell"><p class="quoted">1677</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;sailmaker&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Adam&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Brewer&quot;</p></td><td class="quotedtablecell"><p class="quoted">1671</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;schoolmaster&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Peter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Bird&quot;</p></td><td class="quotedtablecell"><p class="quoted">1677</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;shipwright&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Cavell&quot;</p></td><td class="quotedtablecell"><p class="quoted">1676</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tailor&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Case&quot;</p></td><td class="quotedtablecell"><p class="quoted">1676</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tailor&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Pewter&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Ebden&quot;</p></td><td class="quotedtablecell"><p class="quoted">1683</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;waterman&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;William&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Brocke&quot;</p></td><td class="quotedtablecell"><p class="quoted">1674</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;waterman&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Joel&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Clements&quot;</p></td><td class="quotedtablecell"><p class="quoted">1668</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;wherryman&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Grant&quot;</p></td><td class="quotedtablecell"><p class="quoted">1669</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;victualler&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Barnaby&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Adams&quot;</p></td><td class="quotedtablecell"><p class="quoted">1675</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;vintner&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Gabriel&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Adkins&quot;</p></td><td class="quotedtablecell"><p class="quoted">1668</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tavern-keeper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;John&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Baldwin&quot;</p></td><td class="quotedtablecell"><p class="quoted">1670</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tavern-keeper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Mary&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Dayton&quot;</p></td><td class="quotedtablecell"><p class="quoted">1664</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tavern-keeper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;James&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Turpin&quot;</p></td><td class="quotedtablecell"><p class="quoted">1679</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;tavern-keeper&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Christopher&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Mayham&quot;</p></td><td class="quotedtablecell"><p class="quoted">1664</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c5105_144" -->
<a id="c5105_144"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wait / wait / wait / wait / wait / wait / wait / wait / wait / wait&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc250.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc252.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
