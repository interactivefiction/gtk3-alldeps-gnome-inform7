<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>5.6. Text with variations</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Text with variations" -->
<!-- SEARCH SECTION "5.6" -->
<!-- SEARCH SORT "000-005-006-000" -->
<!-- START IGNORE 73 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc73.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 5: Text</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc75.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง5.6. Text with variations</p>
<p>Text sometimes needs to take different forms in different circumstances. Perhaps it needs an extra sentence if something has happened, or perhaps only one altered word.</p>
<!-- START PHRASE "defn26" -->
<div class="definition"><a id="defn26"></a><p class="defnprototype"><b>say &quot;[if </b>(a condition)<b>]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_if -->

<p>This text substitution produces no text. It's used only for a side-effect: it says that the text following should be said only if the condition is true. That continues until the end of the text, or until an &quot;[end if]&quot; substitution, whichever comes first. If the &quot;[otherwise]&quot; and &quot;[otherwise if]&quot; substitutions are also present, they allow alternatives to be added in case the condition is false. Example:</p>
<!-- START CODE "c901" -->
<a id="c901"></a><blockquote class="code"><p class="quoted">
The wine cask is a container. The printed name of the cask is &quot;[if open]broached, empty cask[otherwise]sealed wine cask&quot;.
</p></blockquote>
<!-- END CODE -->
<p>we find that the cask is described as &quot;a broached, empty cask&quot; when open, and &quot;a sealed wine cask&quot; when closed. A longer example which begins and ends with fixed text, but has two alternatives in the middle:</p>
<!-- START CODE "c902" -->
<a id="c902"></a><blockquote class="code"><p class="quoted">
The Customs Wharf is a room. &quot;Amid the bustle of the quayside, [if the cask is open]many eyes stray to your broached cask. [otherwise]nobody takes much notice of a man heaving a cask about. [end if]Sleek gondolas jostle at the plank pier.&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn27" -->
<div class="definition"><a id="defn27"></a><p class="defnprototype"><b>say &quot;[unless </b>(a condition)<b>]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_unless -->

<p>This text substitution produces no text. It's used only for a side-effect: it says that the text following should be said only if the condition is false. That continues until the end of the text, or until an &quot;[end if]&quot; substitution, whichever comes first. If the &quot;[otherwise]&quot; and &quot;[otherwise if]&quot; substitutions are also present, they allow alternatives to be added in case the condition is true. Example:</p>
<!-- START CODE "c903" -->
<a id="c903"></a><blockquote class="code"><p class="quoted">
The Customs Hall is a room. &quot;With infinite slowness, with ledgers and quill pens, the clerks ruin their eyesight.[unless the player is a woman] They barely even glance in your direction.&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn28" -->
<div class="definition"><a id="defn28"></a><p class="defnprototype"><b>say &quot;[otherwise]&quot;</b></p><br /><i>or:</i>&#160;&#160;&#160;<p class="defnprototype"><b>say &quot;[else]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_otherwise -->

<p>This text substitution produces no text, and can be used only following an &quot;[if ...]&quot; or &quot;[unless ...]&quot; text substitution. It switches from text which appears if the condition is true, to text which appears if it is false. Example:</p>
<!-- START CODE "c904" -->
<a id="c904"></a><blockquote class="code"><p class="quoted">
The wine cask is a container. The printed name of the cask is &quot;[if open]broached, empty cask[otherwise]sealed wine cask&quot;.
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn29" -->
<div class="definition"><a id="defn29"></a><p class="defnprototype"><b>say &quot;[end if]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_endif -->

<p>This text substitution produces no text, and can be used only to close off a stretch of varying text which begins with &quot;[if ...]&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn30" -->
<div class="definition"><a id="defn30"></a><p class="defnprototype"><b>say &quot;[end unless]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_endunless -->

<p>This text substitution produces no text, and can be used only to close off a stretch of varying text which begins with &quot;[unless ...]&quot;.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn31" -->
<div class="definition"><a id="defn31"></a><p class="defnprototype"><b>say &quot;[otherwise</b>/else<b> if </b>(a condition)<b>]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_elseif -->

<p>This text substitution produces no text, and can be used only following an &quot;[if ...]&quot; or &quot;[unless ...]&quot; text substitution. It gives an alternative text to use if the first condition didn't apply, but this one does. Example:</p>
<!-- START CODE "c905" -->
<a id="c905"></a><blockquote class="code"><p class="quoted">
The wine cask is a container. The printed name of the cask is &quot;[if open]broached, empty cask[otherwise if transparent]sealed cask half-full of sloshing wine[otherwise]sealed wine cask&quot;.
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn32" -->
<div class="definition"><a id="defn32"></a><p class="defnprototype"><b>say &quot;[otherwise</b>/else<b> unless </b>(a condition)<b>]&quot;</b></p>
<!-- END PHRASE -->
<!-- definition of phs_elseunless -->

<p>This text substitution produces no text, and can be used only following an &quot;[if ...]&quot; or &quot;[unless ...]&quot; text substitution. It gives an alternative text to use if the first condition didn't apply, and this one is false too.</p>

<!-- end definition -->
</div>

<p>We sometimes need to be careful about the printing of line breaks:</p>
<!-- START CODE "c906" -->
<a id="c906"></a><blockquote class="code"><p class="quoted">
The Cell is a room. &quot;Ah, [if unvisited]the unknown cell. [otherwise]the usual cell.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This room description has two possible forms: &quot;Ah, the unknown cell. &quot;, at first sight, and then &quot;Ah, the usual cell.&quot; subsequently. But the second form is rounded off with a line break because the last thing printed is a &quot;.&quot;, whereas the first form isn't, because it ended with a space. The right thing would have been:</p>
<!-- START CODE "c907" -->
<a id="c907"></a><blockquote class="code"><p class="quoted">
The Cell is a room. &quot;Ah, [if unvisited]the unknown cell.[otherwise]the usual cell.&quot;
</p></blockquote>
<!-- END CODE -->
<p>allowing no space after &quot;unknown cell.&quot;</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "63: When?" "e244" -->
<a id="e244"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example244'); return false;"><b>63</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example244'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">When?</span></b></a><br />A door whose description says "...leads east" in one place and "...leads west" in the other.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc12.html#e244"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example244" style="display: none;">
<p>Very simple, but quite frequently useful:</p>
<!-- START CODE "c908_244" -->
<a id="c908_244"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]When?[=0x0022=][=0x000A=][=0x000A=]The temporal vortex is an open door. It is west of Yesterday and east of Today. [=0x0022=]A whirling temporal vortex leads [if the player is in Yesterday]west[otherwise]east[end if].[=0x0022=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;When?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c909_244" -->
<a id="c909_244"></a><blockquote class="code"><p class="quoted">
The temporal vortex is an open door. It is west of Yesterday and east of Today. &quot;A whirling temporal vortex leads [if the player is in Yesterday]west[otherwise]east[end if].&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "64: Persephone" "e180" -->
<a id="e180"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example180'); return false;"><b>64</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example180'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Persephone</span></b></a><br />Separate the player's inventory listing into two parts, so that it says "you are carrying..." and then (if the player is wearing anything) "You are also wearing...".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc35.html#e180"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example180" style="display: none;">
<p>If we wanted, we might replace the rule for taking inventory as follows:</p>
<!-- START CODE "c910_180" -->
<a id="c910_180"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Persephone[=0x0022=][=0x000A=][=0x000A=]Instead of taking inventory:[=0x000A=][=0x0009=]say [=0x0022=][if the player carries something][We][[=0x0027=]re] carrying [a list of things carried by the player][otherwise][We][[=0x0027=]re] empty-handed[=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][if the player wears something]. [We][[=0x0027=]re] wearing [a list of things worn by the player][end if].[=0x0022=][=0x000A=][=0x000A=]The Fancy Party is a room. The player carries a sword, a strawberry stem, and 20 credits worth of platinum. The player wears a sash indicating lordhood.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / take off sash / i / drop all / i[=0x0022=].[=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Persephone&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c911_180" -->
<a id="c911_180"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][otherwise][We]['re] empty-handed&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[if the player wears something]. [We]['re] wearing [a list of things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c912_180" -->
<a id="c912_180"></a><blockquote class="code"><p class="quoted">
The Fancy Party is a room. The player carries a sword, a strawberry stem, and 20 credits worth of platinum. The player wears a sash indicating lordhood.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c913_180" -->
<a id="c913_180"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / take off sash / i / drop all / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "65: Whence?" "e416" -->
<a id="e416"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example416'); return false;"><b>65</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example416'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Whence?</span></b></a><br />A kind of door that always automatically describes the direction it opens and what lies on the far side (if that other room has been visited).</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc12.html#e416"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example416" style="display: none;">
<p>It would be fairly tedious reading to have a large game full of doors that describe themselves this way. Nonetheless, if we insisted we could use our knowledge of the map as leverage to make every door in the game describe itself automatically.</p>
<p>To do this, we make use of the phrase &quot;direction of (the door) from (a room)&quot; -- in this case, the direction of the door we're looking at when viewed from the player's location. Thus:</p>
<!-- START CODE "c914_416" -->
<a id="c914_416"></a><blockquote class="code"><p class="quoted">
<a href="javascript:pasteCode('[=0x0022=]Whence?[=0x0022=][=0x000A=][=0x000A=]The temporal vortex is an open door. It is west of Yesterday and east of Today.[=0x000A=][=0x000A=]The initial appearance of a door is usually [=0x0022=]Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]w / e[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste.png" src="inform:/doc_images/paste.png" /></a> &quot;Whence?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c915_416" -->
<a id="c915_416"></a><blockquote class="code"><p class="quoted">
The temporal vortex is an open door. It is west of Yesterday and east of Today.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c916_416" -->
<a id="c916_416"></a><blockquote class="code"><p class="quoted">
The initial appearance of a door is usually &quot;Nearby [an item described] leads [if the other side of the item described is visited][direction of the item described from the location] to [the other side][otherwise][direction of the item described from the location][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c917_416" -->
<a id="c917_416"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Yet a further variation on this, which can automatically understand &quot;the east door&quot; and &quot;the west door&quot; when appropriate, may be found in the example &quot;Whither?&quot;.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc73.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc75.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
