<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 24 Dec 2015 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>1.4. Information Only</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Information Only" -->
<!-- SEARCH SECTION "1.4" -->
<!-- SEARCH SORT "001-001-004-000" -->
<!-- START IGNORE 3 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="Rdoc3.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 1: How to Use The Recipe Book</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="Rdoc5.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">§1.4. Information Only</p>
<p>One last preliminary: a handful of the examples do not show how to do anything at all, but are really sidebars of information. Those examples are gathered below, since they contribute nothing by way of recipes.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "415: About Inform's regular expression support" "e230" -->
<a id="e230"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example230'); return false;"><b>415</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example230'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">About Inform's regular expression support</span></b></a><br />Some footnotes on Inform's regular expressions, and how they compare to those of other programming languages.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc348.html#e230"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example230" style="display: none;">
<p>There is not really any unanimity about what regular expression language is. The unix tools sed and grep extend on Kleene's original grammar. Henry Spencer's regex library extended on this again, and was a foundation for Perl, but Perl once again went further. Philip Hazel's PCRE, despite the name Perl Compatible Regular Expressions, makes further extensions still, and so on.</p>
<p>Inform's regular expressions are modelled on those of Perl, as the best de facto standard we have, but a few omissions have been inevitable. Inform's regex matcher must occupy source code less than one hundredth the size of PCRE, and it has very little memory. Inform aims to behave exactly like Perl except as follows:</p>
<!-- START CODE "c9384_230" -->
<a id="c9384_230"></a><blockquote class="code"><p class="quoted">
(i) Inform allows angle brackets as synonymous with square brackets, for reasons explained above. This means literal angle brackets have to be escaped as &quot;\&lt;&quot; and &quot;\&gt;&quot; in Inform regular expressions, which is unnecessary in Perl.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9385_230" -->
<a id="c9385_230"></a><blockquote class="code"><p class="quoted">
(ii) Inform only has single-line mode, not multiline mode: this removes need for the mode-switches &quot;(?m)&quot; and &quot;(?s)&quot; and the positional markers &quot;\A&quot; and &quot;\Z&quot;. Multiline mode is idiosyncratic to Perl and is a messy compromise to do with holding long files of text as single strings, yet treating them as lists of lines at the same time: this would not be sensible for Inform. Similarly, because there is no ambiguity about how line breaks are represented in Inform strings (by a single &quot;\n&quot;), initial newline convention markers such as &quot;(*ANYCRLF)&quot; are unsupported.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9386_230" -->
<a id="c9386_230"></a><blockquote class="code"><p class="quoted">
(iii) The codes &quot;\a&quot;, &quot;\r&quot;, &quot;\f&quot;, &quot;\e&quot;, &quot;\0&quot; for alarm, carriage return, form feed, escape and the zero character are unsupported: none of these can occur in an Inform string.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9387_230" -->
<a id="c9387_230"></a><blockquote class="code"><p class="quoted">
(iv) Inform does not allow characters to be referred to by character code (whereas Perl allows &quot;\036&quot; for an octal character code, &quot;\x7e&quot; for a hexadecimal one, &quot;\cD&quot; for a control character). This is because we do not want the user to know whether text is internally stored as ZSCII or Unicode.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9388_230" -->
<a id="c9388_230"></a><blockquote class="code"><p class="quoted">
(v) Inform's character class &quot;\p&quot; (and its negation &quot;\P&quot;) have no equivalent in Perl, and Inform's understanding of &quot;\w&quot; is different. Perl defines this as an upper or lower case English letter, underscore or digit, which is good for programming-language identifiers, but bad for natural language - for instance, &quot;é&quot; is not matched by &quot;\w&quot; in Perl, but unquestionably it appears in words. Inform therefore defines &quot;\w&quot; as the negation of &quot;\s&quot; union &quot;\p&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9389_230" -->
<a id="c9389_230"></a><blockquote class="code"><p class="quoted">
(vi) Inform supports only single-digit grouping numbers &quot;\1&quot; to &quot;\9&quot;, whereas Perl allows &quot;\10&quot;, &quot;\11&quot;, ...
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9390_230" -->
<a id="c9390_230"></a><blockquote class="code"><p class="quoted">
(vii) POSIX named character ranges are not supported. These are only abbreviations in any case, and are not very useful. (Note that the POSIX range &quot;[:punct:]&quot;, which is supposedly for punctuation, includes many things we do not want to think of that way - percentage signs, for instance - and so &quot;\p&quot; has a more natural-language-based definition.)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9391_230" -->
<a id="c9391_230"></a><blockquote class="code"><p class="quoted">
(viii) Character classes can be used inside ranges, so that &quot;&lt;\da-f&gt;&quot; is legal, but not as ends of contiguous runs, so that &quot;&lt;\d-X&gt;&quot; is not legal. (As reckless as this is, it is legal in Perl.)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9392_230" -->
<a id="c9392_230"></a><blockquote class="code"><p class="quoted">
(ix) For obvious reasons, escapes to Perl code using the notation &quot;(?{...})&quot; are unsupported, and so is the Perl iteration operator &quot;\G&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9393_230" -->
<a id="c9393_230"></a><blockquote class="code"><p class="quoted">
(x) Perl's extended mode &quot;(?x)&quot;, a lexical arrangement which allows expressions to be expanded out as little computer programs with comments, is unsupported. It would look awful syntax-coloured in the Inform interface and is not a style of coding to be encouraged.
</p></blockquote>
<!-- END CODE -->
<p>Inform further does not support the Python extension of named subexpression groups, nor the Java extension of the possessive quantifier &quot;++&quot;. There was only so much functionality we could squeeze in.</p>
<p>As verification of Inform's matching algorithm, we took the Perl 5 source code's notorious &quot;re-test.txt&quot; set of 961 test cases, removed the 316 using features unsupported by Inform (220 tested multiline mode, for instance), and ran the remaining 645 cases through Inform. It agrees with Perl on 643 of these: the two outstanding are -</p>
<!-- START CODE "c9394_230" -->
<a id="c9394_230"></a><blockquote class="code"><p class="quoted">
(i) Perl is able to match &quot;^(a\1?){4}$&quot; against &quot;aaaaaa&quot; but Inform is not - Inform's backtracking is not as good when it comes to repetitions of groupings which are recursively defined. (Note that the optional &quot;\1&quot; match refers to the value of the bracketed expression which contains it, so that the interpretation is different on each repetition. Here to match we have to interpret &quot;?&quot; as 0, 0, 1, 0 repeats respectively as we work through the &quot;{4}&quot;.)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9395_230" -->
<a id="c9395_230"></a><blockquote class="code"><p class="quoted">
(ii) Perl matches &quot;((&lt;a-c&gt;)b*?\2)*&quot; against &quot;ababbbcbc&quot; finding the match &quot;ababb&quot;, whereas Inform finds the match &quot;ababbbcbc&quot;. This is really a difference of opinion about whether the outer asterisk, which is greedy, should be allowed three matches rather than two if to do so requires the inner asterisk, which is not greedy, to eat more than it needs on one of those three matches.
</p></blockquote>
<!-- END CODE -->
<p>Case (i) is a sacrifice to enable Inform's back-tracking to use less memory. Case (ii) simply seems unimportant.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "223: Formal syntax of sentences" "e316" -->
<a id="e316"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example316'); return false;"><b>223</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example316'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Formal syntax of sentences</span></b></a><br />A more formal description of the sentence grammar used by Inform for both assertions and conditions.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc199.html#e316"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example316" style="display: none;">
<p>An entire grammar for the whole mass of Inform would not be linguistically interesting: it contains many convenient wordings which are not really part of a grand pattern. Inform does, however, have a formal notion of a Sentence, a grammatical structure which we shall call S. It is almost true that conditions (&quot;if the flowerpot is on the wall&quot;) have the same grammar as assertions (&quot;The flowerpot is on the wall&quot;) and &quot;now&quot; phrases (&quot;now the flowerpot is on the wall&quot;). All three use the S grammar, so we could define an assertion as &quot;S.&quot;, say that &quot;if S&quot;, &quot;while S&quot;, &quot;when S&quot; and so on are conditions, and say that &quot;now S&quot; defines the &quot;now&quot; declaration.</p>
<p>Grammatical sentences do not necessarily make sense, of course. Many perfectly grammatical assertions in fact give rise to problem messages:</p>
<!-- START CODE "c9396_316" -->
<a id="c9396_316"></a><blockquote class="code"><p class="quoted">
The wicker basket is not in the kitchen. (<span class="italic">Unhelpfully negative.</span>)
<br />The wicker basket has been in the kitchen. (<span class="italic">Talks about a time which never existed.</span>)
<br />The wicker basket is full. (<span class="italic">Full of what? Too vague.</span>)
<br />The wicker basket is the ginger cat. (<span class="italic">Demonstrably false.</span>)
</p></blockquote>
<!-- END CODE -->
<p>Whereas the first three, at least, would be sensible as conditions. So saying that assertions are &quot;just like&quot; conditions is a little misleading: what they have in common is S, the underlying grammar they each use as a starting-point.</p>
<p>To define S, we break it up into subsidiary structures. The most important is the Description Phrase (DP), examples of which include &quot;the red basket&quot;, &quot;somewhere lighted&quot; and &quot;an empty open container&quot;. Clearly sentences include DPs, but they also include other ingredients. The general pattern used in Inform is very simple:</p>
<!-- START CODE "c9397_316" -->
<a id="c9397_316"></a><blockquote class="code"><p class="quoted">
1. S = DP + VP
<br />2. VP = Verb + DP
</p></blockquote>
<!-- END CODE -->
<p>where VP is another structure, the Verb Phrase. For instance:</p>
<!-- START CODE "c9398_316" -->
<a id="c9398_316"></a><blockquote class="code"><p class="quoted">
S (The horseman wears a riding helmet)
<br />&#160;&#160;&#160;&#160;= DP (The horseman) + VP (wears a riding helmet)
<br />VP (wears a riding helmet)
<br />&#160;&#160;&#160;&#160;= Verb (wears) + DP (a riding helmet)
</p></blockquote>
<!-- END CODE -->
<p>In that example, the Verb was the single word &quot;wears&quot;. More generally, Inform allows a Verb to include adverbs and prepositions, to be negated, and to come in any of four tenses, so the following are all valid examples of Verb in our grammar:</p>
<!-- START CODE "c9399_316" -->
<a id="c9399_316"></a><blockquote class="code"><p class="quoted">
wore
<br />carries
<br />is carried by
<br />had not been inside
</p></blockquote>
<!-- END CODE -->
<p>Although we are not going through the definition of Description Phrases in detail, it is worth noticing how &quot;which&quot; and &quot;who&quot; behave:</p>
<!-- START CODE "c9400_316" -->
<a id="c9400_316"></a><blockquote class="code"><p class="quoted">
3a. DP = DP + which + VP
<br />3b. DP = DP + who + VP
</p></blockquote>
<!-- END CODE -->
<p>Thus &quot;an open container which is in the Ballroom&quot; can be broken down as:</p>
<!-- START CODE "c9401_316" -->
<a id="c9401_316"></a><blockquote class="code"><p class="quoted">
DP (an open container) + which + VP (is in the Ballroom)
</p></blockquote>
<!-- END CODE -->
<p>To understand compounds like &quot;something in a container&quot;, we have to invent a new grammatical structure for &quot;in a container&quot; and similar: let's call this a Relative Phrase (RP).</p>
<!-- START CODE "c9402_316" -->
<a id="c9402_316"></a><blockquote class="code"><p class="quoted">
4. DP = DP + RP
</p></blockquote>
<!-- END CODE -->
<p>Thus &quot;an open container in the Ballroom&quot; is DP (an open container) + RP (in the Ballroom). Relative Phrases have two different forms:</p>
<!-- START CODE "c9403_316" -->
<a id="c9403_316"></a><blockquote class="code"><p class="quoted">
5a. RP = Preposition + DP
<br />5b. RP = Participle + DP
</p></blockquote>
<!-- END CODE -->
<p>so that &quot;in a container&quot; is an example of 5a. An example of 5b would be</p>
<!-- START CODE "c9404_316" -->
<a id="c9404_316"></a><blockquote class="code"><p class="quoted">
RP (worn by Mr Darcy) = Participle (worn by) + DP (Mr Darcy)
</p></blockquote>
<!-- END CODE -->
<p>That is nearly it, but not quite: we must go back to the &quot;almost&quot; in the statement above that assertions and conditions &quot;almost&quot; have the same grammar S. The difference arises from a curious irregularity in English called subject-verb inversion (see the <span class="italic">Oxford English Grammar</span> at 3.22F), whereby assertions can be reversed but not conditions. For instance,</p>
<!-- START CODE "c9405_316" -->
<a id="c9405_316"></a><blockquote class="code"><p class="quoted">
In the Garden is a sunflower.
</p></blockquote>
<!-- END CODE -->
<p>This does not follow the pattern S = DP + VP, because &quot;in the garden&quot; is not a DP: indeed, it is not a noun at all. To make sense of this sentence, Inform reverses it to &quot;A sunflower is in the Garden&quot;, which does indeed follow DP + VP. Hence the final rule:</p>
<!-- START CODE "c9406_316" -->
<a id="c9406_316"></a><blockquote class="code"><p class="quoted">
6 (assertions only). S = RP + Verb + DP
</p></blockquote>
<!-- END CODE -->
<p>So the condition &quot;if in the garden is a sunflower...&quot; fails because rule 6 does not apply to the grammar for conditions: while occasional poetic uses of subject-verb inversion do turn up in conditions (&quot;If On A Winter's Night A Traveller&quot;, say), they are rare in ordinary English usage, and illegal in Inform. That completes the S grammar, so to recap:</p>
<!-- START CODE "c9407_316" -->
<a id="c9407_316"></a><blockquote class="code"><p class="quoted">
1. S = DP + VP
<br />2. VP = Verb + DP
<br />3a. DP = DP + which + VP
<br />3b. DP = DP + who + VP
<br />4. DP = DP + RP
<br />5a. RP = Preposition + DP
<br />5b. RP = Participle + DP
<br />6 (assertions only). S = RP + Verb + DP
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "243: Mathematical view of relations" "e115" -->
<a id="e115"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example115'); return false;"><b>243</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example115'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mathematical view of relations</span></b></a><br />Some notes on relations from a mathematical point of view, provided only to clarify some technicalities for those who are interested.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc213.html#e115"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example115" style="display: none;">
<p>Inform uses the term &quot;relation&quot; in a broader sense than mathematics. Properly speaking, the term &quot;relation&quot; in its mathematical sense only applies to the case where the domain for the left and right objects are the same: for simplicity's sake, let us talk only about the case where they are.</p>
<p>In mathematics, the properties most often looked for in a relation are that it should be:</p>
<p>(a) Reflexive: A &lt;=&gt; A for every A. This is not especially useful for Inform, and seldom appears in practical examples.</p>
<p>(b) Symmetric: A &lt;=&gt; B if and only if B &lt;=&gt; A. Generally, Inform relations are not symmetric, but there are two important cases which are:</p>
<!-- START CODE "c9408_115" -->
<a id="c9408_115"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>These are automatically symmetric, so that to assert one way round is to assert the other as well.</p>
<p>(c) Transitive: A &lt;=&gt; B and B &lt;=&gt; C means that A &lt;=&gt; C as well. Again, Inform relations are not generally transitive. In many relations, there can be long chains of things, each perhaps related to the one in front and the one behind, so that there is some indirect sense in which the two ends of the chain are connected to each other: but they are not related as such. For instance, a journey across the map might pass through ten rooms, each adjacent to the last and next, but the two ends would not themselves be adjacent. The concept we need is the &quot;transitive closure&quot; of the original relation, defined as the smallest transitive relation including the original. If R is a relation between &quot;things&quot;, then the following:</p>
<!-- START CODE "c9409_115" -->
<a id="c9409_115"></a><blockquote class="code"><p class="quoted">
TC relates a thing (called A) to a thing (called B) when the number of steps via R from A to B is greater than 0.
</p></blockquote>
<!-- END CODE -->
<p>is the transitive closure of R. In particular,</p>
<!-- START CODE "c9410_115" -->
<a id="c9410_115"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is greater than 0. The verb to be accessible from means the accessibility relation.
</p></blockquote>
<!-- END CODE -->
<p>calculates the transitive closure of adjacency. Here, though, the way we normally understand &quot;accessible from&quot; suggests that it would be better to write:</p>
<!-- START CODE "c9411_115" -->
<a id="c9411_115"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is at least 0.
</p></blockquote>
<!-- END CODE -->
<p>which is reflexive as well as transitive. The usefulness of Inform's &quot;next step via R from A to B&quot; construction, in a wide variety of settings, reflects the importance of transitivity as an idea.</p>
<p>A relation which has all three properties of being reflexive, symmetric and transitive is called an &quot;equivalence relation&quot;. (If all the map connections are two-way, then the accessibility relation above is symmetric and therefore a full equivalence relation: but if not, it may not be.) Inform has a special construction for making equivalence relations:</p>
<!-- START CODE "c9412_115" -->
<a id="c9412_115"></a><blockquote class="code"><p class="quoted">
Nationality relates people to each other in groups.
</p></blockquote>
<!-- END CODE -->
<p>This language - &quot;in groups&quot; - relies on the standard theorem that every equivalence relation on a set naturally defines a partition of that set, and vice versa. The &quot;groups&quot; referred to are what are normally called &quot;equivalence classes&quot;. (Inform does little with these equivalence classes: it might be interesting to do so, in effect forming quotient kinds.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "244: Graph-theory view of relations" "e265" -->
<a id="e265"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example265'); return false;"><b>244</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example265'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Graph-theory view of relations</span></b></a><br />Some notes on relations from the point of view of graph theory.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc213.html#e265"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example265" style="display: none;">
<p>One way to look at a relation is to regard it as a directed graph: that is, a collection of things (&quot;vertices&quot;) with arrows drawn between them (&quot;edges&quot;). We write our items A, B, C, ... on a piece of paper: then, if A relates to B, we draw an arrow pointing from A to B, and so on. If we made this drawing for the adjacency relation, we would more or less have reconstructed the map (or at least a simplified one which does not care about precise directions, like the famous diagram of the London Underground). But the drawing can be made for any relation. If we define:</p>
<!-- START CODE "c9413_265" -->
<a id="c9413_265"></a><blockquote class="code"><p class="quoted">
Suspecting relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<p>then, in the corresponding graph, each &quot;vertex&quot; will have at most one arrow leading away from it - though there could be many (or none) leading towards. Conversely, a one-to-various relation produces a graph where each vertex has at most one arrow coming in. A one-to-one relation means that the picture consists of some vertices on their own, with no arrows, a few perhaps with looped arrows leading from and to themselves, and then a collection of pairs joined by arrows. On the other hand, a various-to-various relation is just a free-for-all, with no restrictions on the arrows. The relations:</p>
<!-- START CODE "c9414_265" -->
<a id="c9414_265"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>always have the property of working both ways round, and these are easiest to visualise by forgetting the direction of the arrows, so that they just become lines joining the vertices.</p>
<p>Inform uses a different algorithm for finding routes (&quot;the next step via R from A to B&quot;) in each of these cases, and internally it stores relations in different formats in the different cases, because it makes a big difference to the efficiency of Inform to minimise the storage required for a relation and the time taken to explore it.</p>
<p>All the cases are benign except for &quot;various to various&quot; - the most useful - and for its closely related symmetrical version, &quot;relates... to each other&quot;. Inform cannot afford to assume that the relation will be &quot;sparse&quot; (that is: that no vertex will have more than a certain number of arrows, or that the total number of arrows will be small), because it has no idea how the arrows will come and go during play. It therefore uses 1 bit of storage for each pair of objects. This sounds harmless, but if there are 200 rooms, there are 40,000 pairs of rooms, which means a 5000-byte allocation of storage (plus a handful of bytes as overhead). Gratuitous various-to-various relations are therefore not a good idea.</p>
<p>There is a standard algorithm for calculating shortest paths through a directed graph, but Inform does not always use it, because there is not always memory to store the required matrix of partial results. Inform's slow method, likely to be used on the Z-machine, requires a storage overhead which is equal to the number of vertices, not the square of that number, but the worst-case running time can be bad: if there are N vertices, and the diameter of graph (the longest distance between vertices) is D, then the running time is proportional to D times N. The worst case in finding routes from A to B is when almost every vertex can reach B, some across long trails, but A cannot. In the case of finding routes across the game's map, this must be multiplied further by the number of possible directions - usually 16.</p>
<p>This does not sound too awful, but if one is trying to find (say) &quot;the most distant room from A&quot;, that means a further loop and now the running time will be D times N squared. Extension writers will need to be careful of this kind of thing: it is easy to write highly cool prototypes which work terribly slowly on larger, more realistic maps.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<!-- START EXAMPLE "399: Backus-Naur form for rules" "e284" -->
<a id="e284"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example284'); return false;"><b>399</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example284'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Backus-Naur form for rules</span></b></a><br />The full grammar Inform uses to parse rule definitions, in a standard computer-science notation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="doc333.html#e284"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example284" style="display: none;">
<p>Backus-Naur form, or BNF, is a standard notation used by computer scientists to specify more or less precisely what the valid programs are for a given programming language. It tends to provide a good description for a language such as C or Pascal, where contextual rules are limited, but the authors of Inform are doubtful that it is such a good tool for a natural-language system. For those who are interested, though, the following gives a formal specification for Inform's rules.</p>
<!-- START CODE "c9415_284" -->
<a id="c9415_284"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; ::=
<br />&#160;&#160;&#160;&#160;Definition : A/an &lt;kind&gt; is &lt;new adjectival name&gt; if/unless &lt;definition&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; : &lt;phrases&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; , &lt;phrase&gt;    (* only allowed for a few cases: see below)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9416_284" -->
<a id="c9416_284"></a><blockquote class="code"><p class="quoted">
&lt;definition&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;condition&gt;
<br />&#160;&#160;&#160;&#160;| its/his/her/their &lt;value property name&gt; is/are &lt;value&gt; or less/more
<br />&#160;&#160;&#160;&#160;| : &lt;phrases&gt;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9417_284" -->
<a id="c9417_284"></a><blockquote class="code"><p class="quoted">
&lt;preamble&gt; ::=
<br />&#160;&#160;&#160;&#160;To &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide if/whether &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide which/what &lt;kind of value&gt; is &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| This is the &lt;rule name&gt;
<br />&#160;&#160;&#160;&#160;| [[A] Rule for] &lt;circumstances&gt; [(this is the &lt;rule name&gt;)]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9418_284" -->
<a id="c9418_284"></a><blockquote class="code"><p class="quoted">
&lt;circumstances&gt; ::=
<br />&#160;&#160;&#160;&#160;At &lt;time&gt;
<br />&#160;&#160;&#160;&#160;| When &lt;event name&gt;
<br />&#160;&#160;&#160;&#160;| [&lt;placement&gt;] &lt;rulebook reference&gt; [while/when &lt;condition&gt;] [during &lt;scene name&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9419_284" -->
<a id="c9419_284"></a><blockquote class="code"><p class="quoted">
&lt;rulebook reference&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;rulebook name&gt; [about/for/of/on/rule] [&lt;action pattern&gt;]
<br />&#160;&#160;&#160;&#160;| &lt;object-based-rulebook name&gt; [about/for/of/on/rule] [&lt;description&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9420_284" -->
<a id="c9420_284"></a><blockquote class="code"><p class="quoted">
&lt;placement&gt; ::=
<br />&#160;&#160;&#160;&#160;a/an
<br />&#160;&#160;&#160;&#160;| [the] first
<br />&#160;&#160;&#160;&#160;| [the] last
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9421_284" -->
<a id="c9421_284"></a><blockquote class="code"><p class="quoted">
&lt;phrases&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;phrase&gt;
<br />&#160;&#160;&#160;&#160;| &lt;phrases&gt; ; &lt;phrase&gt;
</p></blockquote>
<!-- END CODE -->
<p>The following examples show how Inform breaks down some typical rules using the system above:</p>
<!-- START CODE "c9422_284" -->
<a id="c9422_284"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = At 2:09 PM: increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;At
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;time&gt; = 2:09 PM
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = increase the score by 2
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;Progress&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9423_284" -->
<a id="c9423_284"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule), say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule)
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = Instead of eating the ostrich during Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = Instead of eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook name&gt; = Instead
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;action pattern&gt; = eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;during
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;scene name&gt; = Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rule name&gt; = cuisine rule
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;)
<br />&#160;&#160;&#160;&#160;,
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;It's greasy!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c9424_284" -->
<a id="c9424_284"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = After printing the name of a container: say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;object-based-rulebook name&gt; = After printing the name
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;description&gt; = a container
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;!&quot;
</p></blockquote>
<!-- END CODE -->
<p>(*) The colon dividing a rule preamble from its definition can be replaced by a comma only if the preamble begins with the words &quot;Instead of&quot;, &quot;Before&quot;, &quot;After&quot;, &quot;Every turn&quot; or &quot;When&quot;, and if the definition consists only of a single phrase.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="Rdoc3.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="Rdoc5.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
